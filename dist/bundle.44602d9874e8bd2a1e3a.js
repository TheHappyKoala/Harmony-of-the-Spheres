!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=120)}([function(e,t,n){e.exports=n(109)()},function(e,t,n){"use strict";e.exports=n(119)},function(e,t,n){"use strict";e.exports=function(){}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i,a,o,s){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,a,o,s],u=0;(c=new Error(t.replace(/%s/g,function(){return l[u++]}))).name="Invariant Violation"}throw c.framesToPop=1,c}}},function(e,t,n){"use strict";function r(){}n.r(t),n.d(t,"WebGLRenderTargetCube",function(){return fn}),n.d(t,"WebGLRenderTarget",function(){return dn}),n.d(t,"WebGLRenderer",function(){return aa}),n.d(t,"ShaderLib",function(){return Ln}),n.d(t,"UniformsLib",function(){return On}),n.d(t,"UniformsUtils",function(){return Tn}),n.d(t,"ShaderChunk",function(){return xn}),n.d(t,"FogExp2",function(){return oa}),n.d(t,"Fog",function(){return sa}),n.d(t,"Scene",function(){return ca}),n.d(t,"Sprite",function(){return pa}),n.d(t,"LOD",function(){return da}),n.d(t,"SkinnedMesh",function(){return fa}),n.d(t,"Skeleton",function(){return ma}),n.d(t,"Bone",function(){return va}),n.d(t,"Mesh",function(){return Ar}),n.d(t,"LineSegments",function(){return ba}),n.d(t,"LineLoop",function(){return xa}),n.d(t,"Line",function(){return ya}),n.d(t,"Points",function(){return _a}),n.d(t,"Group",function(){return Wi}),n.d(t,"VideoTexture",function(){return Ma}),n.d(t,"DataTexture",function(){return mn}),n.d(t,"DataTexture3D",function(){return Rr}),n.d(t,"CompressedTexture",function(){return Ea}),n.d(t,"CubeTexture",function(){return Lr}),n.d(t,"CanvasTexture",function(){return Sa}),n.d(t,"DepthTexture",function(){return Ta}),n.d(t,"Texture",function(){return hn}),n.d(t,"AnimationLoader",function(){return ys}),n.d(t,"CompressedTextureLoader",function(){return bs}),n.d(t,"DataTextureLoader",function(){return xs}),n.d(t,"CubeTextureLoader",function(){return _s}),n.d(t,"TextureLoader",function(){return Ms}),n.d(t,"ObjectLoader",function(){return cc}),n.d(t,"MaterialLoader",function(){return ic}),n.d(t,"BufferGeometryLoader",function(){return oc}),n.d(t,"DefaultLoadingManager",function(){return ms}),n.d(t,"LoadingManager",function(){return fs}),n.d(t,"ImageLoader",function(){return ws}),n.d(t,"ImageBitmapLoader",function(){return gc}),n.d(t,"FontLoader",function(){return wc}),n.d(t,"FileLoader",function(){return gs}),n.d(t,"Loader",function(){return _c}),n.d(t,"LoaderUtils",function(){return ac}),n.d(t,"Cache",function(){return ds}),n.d(t,"AudioLoader",function(){return kc}),n.d(t,"SpotLightShadow",function(){return Zs}),n.d(t,"SpotLight",function(){return Ks}),n.d(t,"PointLight",function(){return Qs}),n.d(t,"RectAreaLight",function(){return rc}),n.d(t,"HemisphereLight",function(){return Xs}),n.d(t,"DirectionalLightShadow",function(){return ec}),n.d(t,"DirectionalLight",function(){return tc}),n.d(t,"AmbientLight",function(){return nc}),n.d(t,"LightShadow",function(){return Js}),n.d(t,"Light",function(){return Ys}),n.d(t,"StereoCamera",function(){return Ic}),n.d(t,"PerspectiveCamera",function(){return Yi}),n.d(t,"OrthographicCamera",function(){return $s}),n.d(t,"CubeCamera",function(){return Dc}),n.d(t,"ArrayCamera",function(){return Xi}),n.d(t,"Camera",function(){return qi}),n.d(t,"AudioListener",function(){return jc}),n.d(t,"PositionalAudio",function(){return Fc}),n.d(t,"AudioContext",function(){return Nc}),n.d(t,"AudioAnalyser",function(){return Bc}),n.d(t,"Audio",function(){return Uc}),n.d(t,"VectorKeyframeTrack",function(){return us}),n.d(t,"StringKeyframeTrack",function(){return ls}),n.d(t,"QuaternionKeyframeTrack",function(){return cs}),n.d(t,"NumberKeyframeTrack",function(){return os}),n.d(t,"ColorKeyframeTrack",function(){return as}),n.d(t,"BooleanKeyframeTrack",function(){return is}),n.d(t,"PropertyMixer",function(){return Hc}),n.d(t,"PropertyBinding",function(){return al}),n.d(t,"KeyframeTrack",function(){return rs}),n.d(t,"AnimationUtils",function(){return Qo}),n.d(t,"AnimationObjectGroup",function(){return ol}),n.d(t,"AnimationMixer",function(){return cl}),n.d(t,"AnimationClip",function(){return hs}),n.d(t,"Uniform",function(){return ll}),n.d(t,"InstancedBufferGeometry",function(){return ul}),n.d(t,"BufferGeometry",function(){return or}),n.d(t,"Geometry",function(){return qn}),n.d(t,"InterleavedBufferAttribute",function(){return ua}),n.d(t,"InstancedInterleavedBuffer",function(){return hl}),n.d(t,"InterleavedBuffer",function(){return la}),n.d(t,"InstancedBufferAttribute",function(){return pl}),n.d(t,"Face3",function(){return kn}),n.d(t,"Object3D",function(){return Hn}),n.d(t,"Raycaster",function(){return dl}),n.d(t,"Layers",function(){return Dn}),n.d(t,"EventDispatcher",function(){return r}),n.d(t,"Clock",function(){return zc}),n.d(t,"QuaternionLinearInterpolant",function(){return ss}),n.d(t,"LinearInterpolant",function(){return ts}),n.d(t,"DiscreteInterpolant",function(){return ns}),n.d(t,"CubicInterpolant",function(){return es}),n.d(t,"Interpolant",function(){return $o}),n.d(t,"Triangle",function(){return Pr}),n.d(t,"Math",function(){return Kt}),n.d(t,"Spherical",function(){return vl}),n.d(t,"Cylindrical",function(){return gl}),n.d(t,"Plane",function(){return yn}),n.d(t,"Frustum",function(){return bn}),n.d(t,"Sphere",function(){return gn}),n.d(t,"Ray",function(){return Tr}),n.d(t,"Matrix4",function(){return $t}),n.d(t,"Matrix3",function(){return nn}),n.d(t,"Box3",function(){return vn}),n.d(t,"Box2",function(){return yl}),n.d(t,"Line3",function(){return bl}),n.d(t,"Euler",function(){return In}),n.d(t,"Vector4",function(){return pn}),n.d(t,"Vector3",function(){return tn}),n.d(t,"Vector2",function(){return Qt}),n.d(t,"Quaternion",function(){return en}),n.d(t,"Color",function(){return Cn}),n.d(t,"ImmediateRenderObject",function(){return xl}),n.d(t,"VertexNormalsHelper",function(){return wl}),n.d(t,"SpotLightHelper",function(){return _l}),n.d(t,"SkeletonHelper",function(){return Ml}),n.d(t,"PointLightHelper",function(){return El}),n.d(t,"RectAreaLightHelper",function(){return Sl}),n.d(t,"HemisphereLightHelper",function(){return Tl}),n.d(t,"GridHelper",function(){return Pl}),n.d(t,"PolarGridHelper",function(){return Cl}),n.d(t,"FaceNormalsHelper",function(){return Al}),n.d(t,"DirectionalLightHelper",function(){return Ol}),n.d(t,"CameraHelper",function(){return Ll}),n.d(t,"BoxHelper",function(){return Rl}),n.d(t,"Box3Helper",function(){return Nl}),n.d(t,"PlaneHelper",function(){return kl}),n.d(t,"ArrowHelper",function(){return Il}),n.d(t,"AxesHelper",function(){return Dl}),n.d(t,"Shape",function(){return qs}),n.d(t,"Path",function(){return Ws}),n.d(t,"ShapePath",function(){return yc}),n.d(t,"Font",function(){return bc}),n.d(t,"CurvePath",function(){return Gs}),n.d(t,"Curve",function(){return Es}),n.d(t,"ImageUtils",function(){return ln}),n.d(t,"ShapeUtils",function(){return mo}),n.d(t,"WebGLUtils",function(){return Gi}),n.d(t,"WireframeGeometry",function(){return Pa}),n.d(t,"ParametricGeometry",function(){return Ca}),n.d(t,"ParametricBufferGeometry",function(){return Aa}),n.d(t,"TetrahedronGeometry",function(){return Ra}),n.d(t,"TetrahedronBufferGeometry",function(){return Na}),n.d(t,"OctahedronGeometry",function(){return ka}),n.d(t,"OctahedronBufferGeometry",function(){return Ia}),n.d(t,"IcosahedronGeometry",function(){return Da}),n.d(t,"IcosahedronBufferGeometry",function(){return za}),n.d(t,"DodecahedronGeometry",function(){return ja}),n.d(t,"DodecahedronBufferGeometry",function(){return Ua}),n.d(t,"PolyhedronGeometry",function(){return Oa}),n.d(t,"PolyhedronBufferGeometry",function(){return La}),n.d(t,"TubeGeometry",function(){return Fa}),n.d(t,"TubeBufferGeometry",function(){return Ba}),n.d(t,"TorusKnotGeometry",function(){return Ha}),n.d(t,"TorusKnotBufferGeometry",function(){return Va}),n.d(t,"TorusGeometry",function(){return Ga}),n.d(t,"TorusBufferGeometry",function(){return Wa}),n.d(t,"TextGeometry",function(){return _o}),n.d(t,"TextBufferGeometry",function(){return Mo}),n.d(t,"SphereGeometry",function(){return Eo}),n.d(t,"SphereBufferGeometry",function(){return So}),n.d(t,"RingGeometry",function(){return To}),n.d(t,"RingBufferGeometry",function(){return Po}),n.d(t,"PlaneGeometry",function(){return lr}),n.d(t,"PlaneBufferGeometry",function(){return ur}),n.d(t,"LatheGeometry",function(){return Co}),n.d(t,"LatheBufferGeometry",function(){return Ao}),n.d(t,"ShapeGeometry",function(){return Oo}),n.d(t,"ShapeBufferGeometry",function(){return Lo}),n.d(t,"ExtrudeGeometry",function(){return yo}),n.d(t,"ExtrudeBufferGeometry",function(){return bo}),n.d(t,"EdgesGeometry",function(){return No}),n.d(t,"ConeGeometry",function(){return Do}),n.d(t,"ConeBufferGeometry",function(){return zo}),n.d(t,"CylinderGeometry",function(){return ko}),n.d(t,"CylinderBufferGeometry",function(){return Io}),n.d(t,"CircleGeometry",function(){return jo}),n.d(t,"CircleBufferGeometry",function(){return Uo}),n.d(t,"BoxGeometry",function(){return sr}),n.d(t,"BoxBufferGeometry",function(){return cr}),n.d(t,"ShadowMaterial",function(){return Bo}),n.d(t,"SpriteMaterial",function(){return ha}),n.d(t,"RawShaderMaterial",function(){return Ho}),n.d(t,"ShaderMaterial",function(){return Sr}),n.d(t,"PointsMaterial",function(){return wa}),n.d(t,"MeshPhysicalMaterial",function(){return Go}),n.d(t,"MeshStandardMaterial",function(){return Vo}),n.d(t,"MeshPhongMaterial",function(){return Wo}),n.d(t,"MeshToonMaterial",function(){return qo}),n.d(t,"MeshNormalMaterial",function(){return Yo}),n.d(t,"MeshLambertMaterial",function(){return Xo}),n.d(t,"MeshDepthMaterial",function(){return Fi}),n.d(t,"MeshDistanceMaterial",function(){return Bi}),n.d(t,"MeshBasicMaterial",function(){return Cr}),n.d(t,"MeshMatcapMaterial",function(){return Jo}),n.d(t,"LineDashedMaterial",function(){return Zo}),n.d(t,"LineBasicMaterial",function(){return ga}),n.d(t,"Material",function(){return Er}),n.d(t,"Float64BufferAttribute",function(){return nr}),n.d(t,"Float32BufferAttribute",function(){return tr}),n.d(t,"Uint32BufferAttribute",function(){return er}),n.d(t,"Int32BufferAttribute",function(){return $n}),n.d(t,"Uint16BufferAttribute",function(){return Qn}),n.d(t,"Int16BufferAttribute",function(){return Kn}),n.d(t,"Uint8ClampedBufferAttribute",function(){return Zn}),n.d(t,"Uint8BufferAttribute",function(){return Jn}),n.d(t,"Int8BufferAttribute",function(){return Xn}),n.d(t,"BufferAttribute",function(){return Yn}),n.d(t,"ArcCurve",function(){return Ts}),n.d(t,"CatmullRomCurve3",function(){return Rs}),n.d(t,"CubicBezierCurve",function(){return Ds}),n.d(t,"CubicBezierCurve3",function(){return zs}),n.d(t,"EllipseCurve",function(){return Ss}),n.d(t,"LineCurve",function(){return js}),n.d(t,"LineCurve3",function(){return Us}),n.d(t,"QuadraticBezierCurve",function(){return Fs}),n.d(t,"QuadraticBezierCurve3",function(){return Bs}),n.d(t,"SplineCurve",function(){return Hs}),n.d(t,"REVISION",function(){return v}),n.d(t,"MOUSE",function(){return g}),n.d(t,"CullFaceNone",function(){return y}),n.d(t,"CullFaceBack",function(){return b}),n.d(t,"CullFaceFront",function(){return x}),n.d(t,"CullFaceFrontBack",function(){return w}),n.d(t,"FrontFaceDirectionCW",function(){return _}),n.d(t,"FrontFaceDirectionCCW",function(){return M}),n.d(t,"BasicShadowMap",function(){return E}),n.d(t,"PCFShadowMap",function(){return S}),n.d(t,"PCFSoftShadowMap",function(){return T}),n.d(t,"FrontSide",function(){return P}),n.d(t,"BackSide",function(){return C}),n.d(t,"DoubleSide",function(){return A}),n.d(t,"FlatShading",function(){return O}),n.d(t,"SmoothShading",function(){return L}),n.d(t,"NoColors",function(){return R}),n.d(t,"FaceColors",function(){return N}),n.d(t,"VertexColors",function(){return k}),n.d(t,"NoBlending",function(){return I}),n.d(t,"NormalBlending",function(){return D}),n.d(t,"AdditiveBlending",function(){return z}),n.d(t,"SubtractiveBlending",function(){return j}),n.d(t,"MultiplyBlending",function(){return U}),n.d(t,"CustomBlending",function(){return F}),n.d(t,"AddEquation",function(){return B}),n.d(t,"SubtractEquation",function(){return H}),n.d(t,"ReverseSubtractEquation",function(){return V}),n.d(t,"MinEquation",function(){return G}),n.d(t,"MaxEquation",function(){return W}),n.d(t,"ZeroFactor",function(){return q}),n.d(t,"OneFactor",function(){return Y}),n.d(t,"SrcColorFactor",function(){return X}),n.d(t,"OneMinusSrcColorFactor",function(){return J}),n.d(t,"SrcAlphaFactor",function(){return Z}),n.d(t,"OneMinusSrcAlphaFactor",function(){return K}),n.d(t,"DstAlphaFactor",function(){return Q}),n.d(t,"OneMinusDstAlphaFactor",function(){return $}),n.d(t,"DstColorFactor",function(){return ee}),n.d(t,"OneMinusDstColorFactor",function(){return te}),n.d(t,"SrcAlphaSaturateFactor",function(){return ne}),n.d(t,"NeverDepth",function(){return re}),n.d(t,"AlwaysDepth",function(){return ie}),n.d(t,"LessDepth",function(){return ae}),n.d(t,"LessEqualDepth",function(){return oe}),n.d(t,"EqualDepth",function(){return se}),n.d(t,"GreaterEqualDepth",function(){return ce}),n.d(t,"GreaterDepth",function(){return le}),n.d(t,"NotEqualDepth",function(){return ue}),n.d(t,"MultiplyOperation",function(){return he}),n.d(t,"MixOperation",function(){return pe}),n.d(t,"AddOperation",function(){return de}),n.d(t,"NoToneMapping",function(){return fe}),n.d(t,"LinearToneMapping",function(){return me}),n.d(t,"ReinhardToneMapping",function(){return ve}),n.d(t,"Uncharted2ToneMapping",function(){return ge}),n.d(t,"CineonToneMapping",function(){return ye}),n.d(t,"ACESFilmicToneMapping",function(){return be}),n.d(t,"UVMapping",function(){return xe}),n.d(t,"CubeReflectionMapping",function(){return we}),n.d(t,"CubeRefractionMapping",function(){return _e}),n.d(t,"EquirectangularReflectionMapping",function(){return Me}),n.d(t,"EquirectangularRefractionMapping",function(){return Ee}),n.d(t,"SphericalReflectionMapping",function(){return Se}),n.d(t,"CubeUVReflectionMapping",function(){return Te}),n.d(t,"CubeUVRefractionMapping",function(){return Pe}),n.d(t,"RepeatWrapping",function(){return Ce}),n.d(t,"ClampToEdgeWrapping",function(){return Ae}),n.d(t,"MirroredRepeatWrapping",function(){return Oe}),n.d(t,"NearestFilter",function(){return Le}),n.d(t,"NearestMipMapNearestFilter",function(){return Re}),n.d(t,"NearestMipMapLinearFilter",function(){return Ne}),n.d(t,"LinearFilter",function(){return ke}),n.d(t,"LinearMipMapNearestFilter",function(){return Ie}),n.d(t,"LinearMipMapLinearFilter",function(){return De}),n.d(t,"UnsignedByteType",function(){return ze}),n.d(t,"ByteType",function(){return je}),n.d(t,"ShortType",function(){return Ue}),n.d(t,"UnsignedShortType",function(){return Fe}),n.d(t,"IntType",function(){return Be}),n.d(t,"UnsignedIntType",function(){return He}),n.d(t,"FloatType",function(){return Ve}),n.d(t,"HalfFloatType",function(){return Ge}),n.d(t,"UnsignedShort4444Type",function(){return We}),n.d(t,"UnsignedShort5551Type",function(){return qe}),n.d(t,"UnsignedShort565Type",function(){return Ye}),n.d(t,"UnsignedInt248Type",function(){return Xe}),n.d(t,"AlphaFormat",function(){return Je}),n.d(t,"RGBFormat",function(){return Ze}),n.d(t,"RGBAFormat",function(){return Ke}),n.d(t,"LuminanceFormat",function(){return Qe}),n.d(t,"LuminanceAlphaFormat",function(){return $e}),n.d(t,"RGBEFormat",function(){return et}),n.d(t,"DepthFormat",function(){return tt}),n.d(t,"DepthStencilFormat",function(){return nt}),n.d(t,"RedFormat",function(){return rt}),n.d(t,"RGB_S3TC_DXT1_Format",function(){return it}),n.d(t,"RGBA_S3TC_DXT1_Format",function(){return at}),n.d(t,"RGBA_S3TC_DXT3_Format",function(){return ot}),n.d(t,"RGBA_S3TC_DXT5_Format",function(){return st}),n.d(t,"RGB_PVRTC_4BPPV1_Format",function(){return ct}),n.d(t,"RGB_PVRTC_2BPPV1_Format",function(){return lt}),n.d(t,"RGBA_PVRTC_4BPPV1_Format",function(){return ut}),n.d(t,"RGBA_PVRTC_2BPPV1_Format",function(){return ht}),n.d(t,"RGB_ETC1_Format",function(){return pt}),n.d(t,"RGBA_ASTC_4x4_Format",function(){return dt}),n.d(t,"RGBA_ASTC_5x4_Format",function(){return ft}),n.d(t,"RGBA_ASTC_5x5_Format",function(){return mt}),n.d(t,"RGBA_ASTC_6x5_Format",function(){return vt}),n.d(t,"RGBA_ASTC_6x6_Format",function(){return gt}),n.d(t,"RGBA_ASTC_8x5_Format",function(){return yt}),n.d(t,"RGBA_ASTC_8x6_Format",function(){return bt}),n.d(t,"RGBA_ASTC_8x8_Format",function(){return xt}),n.d(t,"RGBA_ASTC_10x5_Format",function(){return wt}),n.d(t,"RGBA_ASTC_10x6_Format",function(){return _t}),n.d(t,"RGBA_ASTC_10x8_Format",function(){return Mt}),n.d(t,"RGBA_ASTC_10x10_Format",function(){return Et}),n.d(t,"RGBA_ASTC_12x10_Format",function(){return St}),n.d(t,"RGBA_ASTC_12x12_Format",function(){return Tt}),n.d(t,"LoopOnce",function(){return Pt}),n.d(t,"LoopRepeat",function(){return Ct}),n.d(t,"LoopPingPong",function(){return At}),n.d(t,"InterpolateDiscrete",function(){return Ot}),n.d(t,"InterpolateLinear",function(){return Lt}),n.d(t,"InterpolateSmooth",function(){return Rt}),n.d(t,"ZeroCurvatureEnding",function(){return Nt}),n.d(t,"ZeroSlopeEnding",function(){return kt}),n.d(t,"WrapAroundEnding",function(){return It}),n.d(t,"TrianglesDrawMode",function(){return Dt}),n.d(t,"TriangleStripDrawMode",function(){return zt}),n.d(t,"TriangleFanDrawMode",function(){return jt}),n.d(t,"LinearEncoding",function(){return Ut}),n.d(t,"sRGBEncoding",function(){return Ft}),n.d(t,"GammaEncoding",function(){return Bt}),n.d(t,"RGBEEncoding",function(){return Ht}),n.d(t,"LogLuvEncoding",function(){return Vt}),n.d(t,"RGBM7Encoding",function(){return Gt}),n.d(t,"RGBM16Encoding",function(){return Wt}),n.d(t,"RGBDEncoding",function(){return qt}),n.d(t,"BasicDepthPacking",function(){return Yt}),n.d(t,"RGBADepthPacking",function(){return Xt}),n.d(t,"TangentSpaceNormalMap",function(){return Jt}),n.d(t,"ObjectSpaceNormalMap",function(){return Zt}),n.d(t,"CubeGeometry",function(){return sr}),n.d(t,"Face4",function(){return zl}),n.d(t,"LineStrip",function(){return jl}),n.d(t,"LinePieces",function(){return Ul}),n.d(t,"MeshFaceMaterial",function(){return Fl}),n.d(t,"MultiMaterial",function(){return Bl}),n.d(t,"PointCloud",function(){return Hl}),n.d(t,"Particle",function(){return Vl}),n.d(t,"ParticleSystem",function(){return Gl}),n.d(t,"PointCloudMaterial",function(){return Wl}),n.d(t,"ParticleBasicMaterial",function(){return ql}),n.d(t,"ParticleSystemMaterial",function(){return Yl}),n.d(t,"Vertex",function(){return Xl}),n.d(t,"DynamicBufferAttribute",function(){return Jl}),n.d(t,"Int8Attribute",function(){return Zl}),n.d(t,"Uint8Attribute",function(){return Kl}),n.d(t,"Uint8ClampedAttribute",function(){return Ql}),n.d(t,"Int16Attribute",function(){return $l}),n.d(t,"Uint16Attribute",function(){return eu}),n.d(t,"Int32Attribute",function(){return tu}),n.d(t,"Uint32Attribute",function(){return nu}),n.d(t,"Float32Attribute",function(){return ru}),n.d(t,"Float64Attribute",function(){return iu}),n.d(t,"ClosedSplineCurve3",function(){return au}),n.d(t,"SplineCurve3",function(){return ou}),n.d(t,"Spline",function(){return su}),n.d(t,"AxisHelper",function(){return cu}),n.d(t,"BoundingBoxHelper",function(){return lu}),n.d(t,"EdgesHelper",function(){return uu}),n.d(t,"WireframeHelper",function(){return hu}),n.d(t,"XHRLoader",function(){return pu}),n.d(t,"BinaryTextureLoader",function(){return du}),n.d(t,"GeometryUtils",function(){return fu}),n.d(t,"Projector",function(){return mu}),n.d(t,"CanvasRenderer",function(){return vu}),n.d(t,"JSONLoader",function(){return gu}),n.d(t,"SceneUtils",function(){return yu}),n.d(t,"LensFlare",function(){return bu}),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype==!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t}),Object.assign(r.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,e)}}}});var i,a,o,s,c,l,u,h,p,d,f,m,v="99",g={LEFT:0,MIDDLE:1,RIGHT:2},y=0,b=1,x=2,w=3,_=0,M=1,E=0,S=1,T=2,P=0,C=1,A=2,O=1,L=2,R=0,N=1,k=2,I=0,D=1,z=2,j=3,U=4,F=5,B=100,H=101,V=102,G=103,W=104,q=200,Y=201,X=202,J=203,Z=204,K=205,Q=206,$=207,ee=208,te=209,ne=210,re=0,ie=1,ae=2,oe=3,se=4,ce=5,le=6,ue=7,he=0,pe=1,de=2,fe=0,me=1,ve=2,ge=3,ye=4,be=5,xe=300,we=301,_e=302,Me=303,Ee=304,Se=305,Te=306,Pe=307,Ce=1e3,Ae=1001,Oe=1002,Le=1003,Re=1004,Ne=1005,ke=1006,Ie=1007,De=1008,ze=1009,je=1010,Ue=1011,Fe=1012,Be=1013,He=1014,Ve=1015,Ge=1016,We=1017,qe=1018,Ye=1019,Xe=1020,Je=1021,Ze=1022,Ke=1023,Qe=1024,$e=1025,et=Ke,tt=1026,nt=1027,rt=1028,it=33776,at=33777,ot=33778,st=33779,ct=35840,lt=35841,ut=35842,ht=35843,pt=36196,dt=37808,ft=37809,mt=37810,vt=37811,gt=37812,yt=37813,bt=37814,xt=37815,wt=37816,_t=37817,Mt=37818,Et=37819,St=37820,Tt=37821,Pt=2200,Ct=2201,At=2202,Ot=2300,Lt=2301,Rt=2302,Nt=2400,kt=2401,It=2402,Dt=0,zt=1,jt=2,Ut=3e3,Ft=3001,Bt=3007,Ht=3002,Vt=3003,Gt=3004,Wt=3005,qt=3006,Yt=3200,Xt=3201,Jt=0,Zt=1,Kt={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16);return function(){var t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&n]+e[n>>8&255]+"-"+e[n>>16&15|64]+e[n>>24&255]+"-"+e[63&r|128]+e[r>>8&255]+"-"+e[r>>16&255]+e[r>>24&255]+e[255&i]+e[i>>8&255]+e[i>>16&255]+e[i>>24&255]).toUpperCase()}}(),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*Kt.DEG2RAD},radToDeg:function(e){return e*Kt.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};function Qt(e,t){this.x=e||0,this.y=t||0}function $t(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function en(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==r?r:1}function tn(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}function nn(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(Qt.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(Qt.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:(i=new Qt,a=new Qt,function(e,t){return i.set(e,e),a.set(t,t),this.clamp(i,a)}),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,a=this.y-e.y;return this.x=i*n-a*r+e.x,this.y=i*r+a*n+e.y,this}}),Object.assign($t.prototype,{isMatrix4:!0,set:function(e,t,n,r,i,a,o,s,c,l,u,h,p,d,f,m){var v=this.elements;return v[0]=e,v[4]=t,v[8]=n,v[12]=r,v[1]=i,v[5]=a,v[9]=o,v[13]=s,v[2]=c,v[6]=l,v[10]=u,v[14]=h,v[3]=p,v[7]=d,v[11]=f,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new $t).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:(d=new tn,function(e){var t=this.elements,n=e.elements,r=1/d.setFromMatrixColumn(e,0).length(),i=1/d.setFromMatrixColumn(e,1).length(),a=1/d.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,r=e.y,i=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(r),c=Math.sin(r),l=Math.cos(i),u=Math.sin(i);if("XYZ"===e.order){var h=a*l,p=a*u,d=o*l,f=o*u;t[0]=s*l,t[4]=-s*u,t[8]=c,t[1]=p+d*c,t[5]=h-f*c,t[9]=-o*s,t[2]=f-h*c,t[6]=d+p*c,t[10]=a*s}else if("YXZ"===e.order){var m=s*l,v=s*u,g=c*l,y=c*u;t[0]=m+y*o,t[4]=g*o-v,t[8]=a*c,t[1]=a*u,t[5]=a*l,t[9]=-o,t[2]=v*o-g,t[6]=y+m*o,t[10]=a*s}else if("ZXY"===e.order){m=s*l,v=s*u,g=c*l,y=c*u;t[0]=m-y*o,t[4]=-a*u,t[8]=g+v*o,t[1]=v+g*o,t[5]=a*l,t[9]=y-m*o,t[2]=-a*c,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){h=a*l,p=a*u,d=o*l,f=o*u;t[0]=s*l,t[4]=d*c-p,t[8]=h*c+f,t[1]=s*u,t[5]=f*c+h,t[9]=p*c-d,t[2]=-c,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){var b=a*s,x=a*c,w=o*s,_=o*c;t[0]=s*l,t[4]=_-b*u,t[8]=w*u+x,t[1]=u,t[5]=a*l,t[9]=-o*l,t[2]=-c*l,t[6]=x*u+w,t[10]=b-_*u}else if("XZY"===e.order){b=a*s,x=a*c,w=o*s,_=o*c;t[0]=s*l,t[4]=-u,t[8]=c*l,t[1]=b*u+_,t[5]=a*l,t[9]=x*u-w,t[2]=w*u-x,t[6]=o*l,t[10]=_*u+b}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:(h=new tn(0,0,0),p=new tn(1,1,1),function(e){return this.compose(h,e,p)}),lookAt:(c=new tn,l=new tn,u=new tn,function(e,t,n){var r=this.elements;return u.subVectors(e,t),0===u.lengthSq()&&(u.z=1),u.normalize(),c.crossVectors(n,u),0===c.lengthSq()&&(1===Math.abs(n.z)?u.x+=1e-4:u.z+=1e-4,u.normalize(),c.crossVectors(n,u)),c.normalize(),l.crossVectors(u,c),r[0]=c.x,r[4]=l.x,r[8]=u.x,r[1]=c.y,r[5]=l.y,r[9]=u.y,r[2]=c.z,r[6]=l.z,r[10]=u.z,this}),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[4],s=n[8],c=n[12],l=n[1],u=n[5],h=n[9],p=n[13],d=n[2],f=n[6],m=n[10],v=n[14],g=n[3],y=n[7],b=n[11],x=n[15],w=r[0],_=r[4],M=r[8],E=r[12],S=r[1],T=r[5],P=r[9],C=r[13],A=r[2],O=r[6],L=r[10],R=r[14],N=r[3],k=r[7],I=r[11],D=r[15];return i[0]=a*w+o*S+s*A+c*N,i[4]=a*_+o*T+s*O+c*k,i[8]=a*M+o*P+s*L+c*I,i[12]=a*E+o*C+s*R+c*D,i[1]=l*w+u*S+h*A+p*N,i[5]=l*_+u*T+h*O+p*k,i[9]=l*M+u*P+h*L+p*I,i[13]=l*E+u*C+h*R+p*D,i[2]=d*w+f*S+m*A+v*N,i[6]=d*_+f*T+m*O+v*k,i[10]=d*M+f*P+m*L+v*I,i[14]=d*E+f*C+m*R+v*D,i[3]=g*w+y*S+b*A+x*N,i[7]=g*_+y*T+b*O+x*k,i[11]=g*M+y*P+b*L+x*I,i[15]=g*E+y*C+b*R+x*D,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new tn;return function(t){for(var n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix4(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],a=e[1],o=e[5],s=e[9],c=e[13],l=e[2],u=e[6],h=e[10],p=e[14];return e[3]*(+i*s*u-r*c*u-i*o*h+n*c*h+r*o*p-n*s*p)+e[7]*(+t*s*p-t*c*h+i*a*h-r*a*p+r*c*l-i*s*l)+e[11]*(+t*c*u-t*o*p-i*a*u+n*a*p+i*o*l-n*c*l)+e[15]*(-r*o*l-t*s*u+t*o*h+r*a*u-n*a*h+n*s*l)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,r=e.elements,i=r[0],a=r[1],o=r[2],s=r[3],c=r[4],l=r[5],u=r[6],h=r[7],p=r[8],d=r[9],f=r[10],m=r[11],v=r[12],g=r[13],y=r[14],b=r[15],x=d*y*h-g*f*h+g*u*m-l*y*m-d*u*b+l*f*b,w=v*f*h-p*y*h-v*u*m+c*y*m+p*u*b-c*f*b,_=p*g*h-v*d*h+v*l*m-c*g*m-p*l*b+c*d*b,M=v*d*u-p*g*u-v*l*f+c*g*f+p*l*y-c*d*y,E=i*x+a*w+o*_+s*M;if(0===E){var S="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(S);return console.warn(S),this.identity()}var T=1/E;return n[0]=x*T,n[1]=(g*f*s-d*y*s-g*o*m+a*y*m+d*o*b-a*f*b)*T,n[2]=(l*y*s-g*u*s+g*o*h-a*y*h-l*o*b+a*u*b)*T,n[3]=(d*u*s-l*f*s-d*o*h+a*f*h+l*o*m-a*u*m)*T,n[4]=w*T,n[5]=(p*y*s-v*f*s+v*o*m-i*y*m-p*o*b+i*f*b)*T,n[6]=(v*u*s-c*y*s-v*o*h+i*y*h+c*o*b-i*u*b)*T,n[7]=(c*f*s-p*u*s+p*o*h-i*f*h-c*o*m+i*u*m)*T,n[8]=_*T,n[9]=(v*d*s-p*g*s-v*a*m+i*g*m+p*a*b-i*d*b)*T,n[10]=(c*g*s-v*l*s+v*a*h-i*g*h-c*a*b+i*l*b)*T,n[11]=(p*l*s-c*d*s-p*a*h+i*d*h+c*a*m-i*l*m)*T,n[12]=M*T,n[13]=(p*g*o-v*d*o+v*a*f-i*g*f-p*a*y+i*d*y)*T,n[14]=(v*l*o-c*g*o-v*a*u+i*g*u+c*a*y-i*l*y)*T,n[15]=(c*d*o-p*l*o+p*a*u-i*d*u-c*a*f+i*l*f)*T,this},scale:function(e){var t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=1-n,a=e.x,o=e.y,s=e.z,c=i*a,l=i*o;return this.set(c*a+n,c*o-r*s,c*s+r*o,0,c*o+r*s,l*o+n,l*s-r*a,0,c*s-r*o,l*s+r*a,i*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){var r=this.elements,i=t._x,a=t._y,o=t._z,s=t._w,c=i+i,l=a+a,u=o+o,h=i*c,p=i*l,d=i*u,f=a*l,m=a*u,v=o*u,g=s*c,y=s*l,b=s*u,x=n.x,w=n.y,_=n.z;return r[0]=(1-(f+v))*x,r[1]=(p+b)*x,r[2]=(d-y)*x,r[3]=0,r[4]=(p-b)*w,r[5]=(1-(h+v))*w,r[6]=(m+g)*w,r[7]=0,r[8]=(d+y)*_,r[9]=(m-g)*_,r[10]=(1-(h+f))*_,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this},decompose:(o=new tn,s=new $t,function(e,t,n){var r=this.elements,i=o.set(r[0],r[1],r[2]).length(),a=o.set(r[4],r[5],r[6]).length(),c=o.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],s.copy(this);var l=1/i,u=1/a,h=1/c;return s.elements[0]*=l,s.elements[1]*=l,s.elements[2]*=l,s.elements[4]*=u,s.elements[5]*=u,s.elements[6]*=u,s.elements[8]*=h,s.elements[9]*=h,s.elements[10]*=h,t.setFromRotationMatrix(s),n.x=i,n.y=a,n.z=c,this}),makePerspective:function(e,t,n,r,i,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*i/(t-e),c=2*i/(n-r),l=(t+e)/(t-e),u=(n+r)/(n-r),h=-(a+i)/(a-i),p=-2*a*i/(a-i);return o[0]=s,o[4]=0,o[8]=l,o[12]=0,o[1]=0,o[5]=c,o[9]=u,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=p,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(e,t,n,r,i,a){var o=this.elements,s=1/(t-e),c=1/(n-r),l=1/(a-i),u=(t+e)*s,h=(n+r)*c,p=(a+i)*l;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-u,o[1]=0,o[5]=2*c,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*l,o[14]=-p,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}),Object.assign(en,{slerp:function(e,t,n,r){return n.copy(e).slerp(t,r)},slerpFlat:function(e,t,n,r,i,a,o){var s=n[r+0],c=n[r+1],l=n[r+2],u=n[r+3],h=i[a+0],p=i[a+1],d=i[a+2],f=i[a+3];if(u!==f||s!==h||c!==p||l!==d){var m=1-o,v=s*h+c*p+l*d+u*f,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var b=Math.sqrt(y),x=Math.atan2(b,v*g);m=Math.sin(m*x)/b,o=Math.sin(o*x)/b}var w=o*g;if(s=s*m+h*w,c=c*m+p*w,l=l*m+d*w,u=u*m+f*w,m===1-o){var _=1/Math.sqrt(s*s+c*c+l*l+u*u);s*=_,c*=_,l*=_,u*=_}}e[t]=s,e[t+1]=c,e[t+2]=l,e[t+3]=u}}),Object.defineProperties(en.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(en.prototype,{isQuaternion:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,r=e._y,i=e._z,a=e.order,o=Math.cos,s=Math.sin,c=o(n/2),l=o(r/2),u=o(i/2),h=s(n/2),p=s(r/2),d=s(i/2);return"XYZ"===a?(this._x=h*l*u+c*p*d,this._y=c*p*u-h*l*d,this._z=c*l*d+h*p*u,this._w=c*l*u-h*p*d):"YXZ"===a?(this._x=h*l*u+c*p*d,this._y=c*p*u-h*l*d,this._z=c*l*d-h*p*u,this._w=c*l*u+h*p*d):"ZXY"===a?(this._x=h*l*u-c*p*d,this._y=c*p*u+h*l*d,this._z=c*l*d+h*p*u,this._w=c*l*u-h*p*d):"ZYX"===a?(this._x=h*l*u-c*p*d,this._y=c*p*u+h*l*d,this._z=c*l*d-h*p*u,this._w=c*l*u+h*p*d):"YZX"===a?(this._x=h*l*u+c*p*d,this._y=c*p*u+h*l*d,this._z=c*l*d-h*p*u,this._w=c*l*u-h*p*d):"XZY"===a&&(this._x=h*l*u-c*p*d,this._y=c*p*u-h*l*d,this._z=c*l*d+h*p*u,this._w=c*l*u+h*p*d),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,r=n[0],i=n[4],a=n[8],o=n[1],s=n[5],c=n[9],l=n[2],u=n[6],h=n[10],p=r+s+h;return p>0?(t=.5/Math.sqrt(p+1),this._w=.25/t,this._x=(u-c)*t,this._y=(a-l)*t,this._z=(o-i)*t):r>s&&r>h?(t=2*Math.sqrt(1+r-s-h),this._w=(u-c)/t,this._x=.25*t,this._y=(i+o)/t,this._z=(a+l)/t):s>h?(t=2*Math.sqrt(1+s-r-h),this._w=(a-l)/t,this._x=(i+o)/t,this._y=.25*t,this._z=(c+u)/t):(t=2*Math.sqrt(1+h-r-s),this._w=(o-i)/t,this._x=(a+l)/t,this._y=(c+u)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t=new tn;return function(n,r){return void 0===t&&(t=new tn),(e=n.dot(r)+1)<1e-6?(e=0,Math.abs(n.x)>Math.abs(n.z)?t.set(-n.y,n.x,0):t.set(0,-n.z,n.y)):t.crossVectors(n,r),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),angleTo:function(e){return 2*Math.acos(Math.abs(Kt.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var n=this.angleTo(e);if(0===n)return this;var r=Math.min(1,t/n);return this.slerp(e,r),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,i=e._z,a=e._w,o=t._x,s=t._y,c=t._z,l=t._w;return this._x=n*l+a*o+r*c-i*s,this._y=r*l+a*s+i*o-n*c,this._z=i*l+a*c+n*s-r*o,this._w=a*l-n*o-r*s-i*c,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,r=this._y,i=this._z,a=this._w,o=a*e._w+n*e._x+r*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=r,this._z=i,this;var s=1-o*o;if(s<=Number.EPSILON){var c=1-t;return this._w=c*a+t*this._w,this._x=c*n+t*this._x,this._y=c*r+t*this._y,this._z=c*i+t*this._z,this.normalize()}var l=Math.sqrt(s),u=Math.atan2(l,o),h=Math.sin((1-t)*u)/l,p=Math.sin(t*u)/l;return this._w=a*h+this._w*p,this._x=n*h+this._x*p,this._y=r*h+this._y*p,this._z=i*h+this._z*p,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(tn.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:(f=new en,function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(f.setFromEuler(e))}),applyAxisAngle:function(){var e=new en;return function(t,n){return this.applyQuaternion(e.setFromAxisAngle(t,n))}}(),applyMatrix3:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements,a=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*a,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*a,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*a,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,i=e.x,a=e.y,o=e.z,s=e.w,c=s*t+a*r-o*n,l=s*n+o*t-i*r,u=s*r+i*n-a*t,h=-i*t-a*n-o*r;return this.x=c*s+h*-i+l*-o-u*-a,this.y=l*s+h*-a+u*-i-c*-o,this.z=u*s+h*-o+c*-a-l*-i,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(){var e=new $t;return function(t){return this.applyMatrix4(e.getInverse(t.projectionMatrix)).applyMatrix4(t.matrixWorld)}}(),transformDirection:function(e){var t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e=new tn,t=new tn;return function(n,r){return e.set(n,n,n),t.set(r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,r=e.y,i=e.z,a=t.x,o=t.y,s=t.z;return this.x=r*s-i*o,this.y=i*a-n*s,this.z=n*o-r*a,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new tn;return function(t){return e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=new tn;return function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(Kt.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,n){var r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(nn.prototype,{isMatrix3:!0,set:function(e,t,n,r,i,a,o,s,c){var l=this.elements;return l[0]=e,l[1]=r,l[2]=o,l[3]=t,l[4]=i,l[5]=s,l[6]=n,l[7]=a,l[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e=new tn;return function(t){for(var n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix3(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,i=this.elements,a=n[0],o=n[3],s=n[6],c=n[1],l=n[4],u=n[7],h=n[2],p=n[5],d=n[8],f=r[0],m=r[3],v=r[6],g=r[1],y=r[4],b=r[7],x=r[2],w=r[5],_=r[8];return i[0]=a*f+o*g+s*x,i[3]=a*m+o*y+s*w,i[6]=a*v+o*b+s*_,i[1]=c*f+l*g+u*x,i[4]=c*m+l*y+u*w,i[7]=c*v+l*b+u*_,i[2]=h*f+p*g+d*x,i[5]=h*m+p*y+d*w,i[8]=h*v+p*b+d*_,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],c=e[7],l=e[8];return t*a*l-t*o*c-n*i*l+n*o*s+r*i*c-r*a*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=e.elements,r=this.elements,i=n[0],a=n[1],o=n[2],s=n[3],c=n[4],l=n[5],u=n[6],h=n[7],p=n[8],d=p*c-l*h,f=l*u-p*s,m=h*s-c*u,v=i*d+a*f+o*m;if(0===v){var g="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(g);return console.warn(g),this.identity()}var y=1/v;return r[0]=d*y,r[1]=(o*h-p*a)*y,r[2]=(l*a-o*c)*y,r[3]=f*y,r[4]=(p*i-o*u)*y,r[5]=(o*s-l*i)*y,r[6]=m*y,r[7]=(a*u-h*i)*y,r[8]=(c*i-a*s)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,r,i,a,o){var s=Math.cos(i),c=Math.sin(i);this.set(n*s,n*c,-n*(s*a+c*o)+a+e,-r*c,r*s,-r*(-c*a+s*o)+o+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.elements,i=r[0],a=r[3],o=r[6],s=r[1],c=r[4],l=r[7];return r[0]=t*i+n*s,r[3]=t*a+n*c,r[6]=t*o+n*l,r[1]=-n*i+t*s,r[4]=-n*a+t*c,r[7]=-n*o+t*l,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});var rn,an,on,sn,cn,ln={getDataURL:function(e){var t;if("undefined"==typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)t=e;else{void 0===m&&(m=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),m.width=e.width,m.height=e.height;var n=m.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=m}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},un=0;function hn(e,t,n,r,i,a,o,s,c,l){Object.defineProperty(this,"id",{value:un++}),this.uuid=Kt.generateUUID(),this.name="",this.image=void 0!==e?e:hn.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:hn.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:Ae,this.wrapT=void 0!==r?r:Ae,this.magFilter=void 0!==i?i:ke,this.minFilter=void 0!==a?a:De,this.anisotropy=void 0!==c?c:1,this.format=void 0!==o?o:Ke,this.type=void 0!==s?s:ze,this.offset=new Qt(0,0),this.repeat=new Qt(1,1),this.center=new Qt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new nn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==l?l:Ut,this.version=0,this.onUpdate=null}function pn(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==r?r:1}function dn(e,t,n){this.width=e,this.height=t,this.scissor=new pn(0,0,e,t),this.scissorTest=!1,this.viewport=new pn(0,0,e,t),n=n||{},this.texture=new hn(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:ke,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function fn(e,t,n){dn.call(this,e,t,n),this.activeCubeFace=0,this.activeMipMapLevel=0}function mn(e,t,n,r,i,a,o,s,c,l,u,h){hn.call(this,null,a,o,s,c,l,r,i,u,h),this.image={data:e,width:t,height:n},this.magFilter=void 0!==c?c:Le,this.minFilter=void 0!==l?l:Le,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function vn(e,t){this.min=void 0!==e?e:new tn(1/0,1/0,1/0),this.max=void 0!==t?t:new tn(-1/0,-1/0,-1/0)}function gn(e,t){this.center=void 0!==e?e:new tn,this.radius=void 0!==t?t:0}function yn(e,t){this.normal=void 0!==e?e:new tn(1,0,0),this.constant=void 0!==t?t:0}function bn(e,t,n,r,i,a){this.planes=[void 0!==e?e:new yn,void 0!==t?t:new yn,void 0!==n?n:new yn,void 0!==r?r:new yn,void 0!==i?i:new yn,void 0!==a?a:new yn]}hn.DEFAULT_IMAGE=void 0,hn.DEFAULT_MAPPING=xe,hn.prototype=Object.assign(Object.create(r.prototype),{constructor:hn,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=Kt.generateUUID()),!t&&void 0===e.images[r.uuid]){var i;if(Array.isArray(r)){i=[];for(var a=0,o=r.length;a<o;a++)i.push(ln.getDataURL(r[a]))}else i=ln.getDataURL(r);e.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping!==xe)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ce:e.x=e.x-Math.floor(e.x);break;case Ae:e.x=e.x<0?0:1;break;case Oe:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Ce:e.y=e.y-Math.floor(e.y);break;case Ae:e.y=e.y<0?0:1;break;case Oe:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(hn.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(pn.prototype,{isVector4:!0,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,r=this.z,i=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*i,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*i,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*i,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,r,i,a=e.elements,o=a[0],s=a[4],c=a[8],l=a[1],u=a[5],h=a[9],p=a[2],d=a[6],f=a[10];if(Math.abs(s-l)<.01&&Math.abs(c-p)<.01&&Math.abs(h-d)<.01){if(Math.abs(s+l)<.1&&Math.abs(c+p)<.1&&Math.abs(h+d)<.1&&Math.abs(o+u+f-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(o+1)/2,v=(u+1)/2,g=(f+1)/2,y=(s+l)/4,b=(c+p)/4,x=(h+d)/4;return m>v&&m>g?m<.01?(n=0,r=.707106781,i=.707106781):(r=y/(n=Math.sqrt(m)),i=b/n):v>g?v<.01?(n=.707106781,r=0,i=.707106781):(n=y/(r=Math.sqrt(v)),i=x/r):g<.01?(n=.707106781,r=.707106781,i=0):(n=b/(i=Math.sqrt(g)),r=x/i),this.set(n,r,i,t),this}var w=Math.sqrt((d-h)*(d-h)+(c-p)*(c-p)+(l-s)*(l-s));return Math.abs(w)<.001&&(w=1),this.x=(d-h)/w,this.y=(c-p)/w,this.z=(l-s)/w,this.w=Math.acos((o+u+f-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(n,r){return void 0===e&&(e=new pn,t=new pn),e.set(n,n,n,n),t.set(r,r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),dn.prototype=Object.assign(Object.create(r.prototype),{constructor:dn,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),fn.prototype=Object.create(dn.prototype),fn.prototype.constructor=fn,fn.prototype.isWebGLRenderTargetCube=!0,mn.prototype=Object.create(hn.prototype),mn.prototype.constructor=mn,mn.prototype.isDataTexture=!0,Object.assign(vn.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,c=e.length;s<c;s+=3){var l=e[s],u=e[s+1],h=e[s+2];l<t&&(t=l),u<n&&(n=u),h<r&&(r=h),l>i&&(i=l),u>a&&(a=u),h>o&&(o=h)}return this.min.set(t,n,r),this.max.set(i,a,o),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,r=1/0,i=-1/0,a=-1/0,o=-1/0,s=0,c=e.count;s<c;s++){var l=e.getX(s),u=e.getY(s),h=e.getZ(s);l<t&&(t=l),u<n&&(n=u),h<r&&(r=h),l>i&&(i=l),u>a&&(a=u),h>o&&(o=h)}return this.min.set(t,n,r),this.max.set(i,a,o),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new tn;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new tn),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new tn),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var e,t,n,r=new tn;function i(i){var a=i.geometry;if(void 0!==a)if(a.isGeometry){var o=a.vertices;for(t=0,n=o.length;t<n;t++)r.copy(o[t]),r.applyMatrix4(i.matrixWorld),e.expandByPoint(r)}else if(a.isBufferGeometry){var s=a.attributes.position;if(void 0!==s)for(t=0,n=s.count;t<n;t++)r.fromBufferAttribute(s,t).applyMatrix4(i.matrixWorld),e.expandByPoint(r)}}return function(t){return e=this,t.updateMatrixWorld(!0),t.traverse(i),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new tn),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:(an=new tn,function(e){return this.clampPoint(e.center,an),an.distanceToSquared(e.center)<=e.radius*e.radius}),intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant},intersectsTriangle:function(){var e=new tn,t=new tn,n=new tn,r=new tn,i=new tn,a=new tn,o=new tn,s=new tn,c=new tn,l=new tn;function u(r){var i,a;for(i=0,a=r.length-3;i<=a;i+=3){o.fromArray(r,i);var s=c.x*Math.abs(o.x)+c.y*Math.abs(o.y)+c.z*Math.abs(o.z),l=e.dot(o),u=t.dot(o),h=n.dot(o);if(Math.max(-Math.max(l,u,h),Math.min(l,u,h))>s)return!1}return!0}return function(o){if(this.isEmpty())return!1;this.getCenter(s),c.subVectors(this.max,s),e.subVectors(o.a,s),t.subVectors(o.b,s),n.subVectors(o.c,s),r.subVectors(t,e),i.subVectors(n,t),a.subVectors(e,n);var h=[0,-r.z,r.y,0,-i.z,i.y,0,-a.z,a.y,r.z,0,-r.x,i.z,0,-i.x,a.z,0,-a.x,-r.y,r.x,0,-i.y,i.x,0,-a.y,a.x,0];return!!u(h)&&(!!u(h=[1,0,0,0,1,0,0,0,1])&&(l.crossVectors(r,i),u(h=[l.x,l.y,l.z])))}}(),clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new tn),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new tn;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new tn;return function(t){return void 0===t&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),t=new gn),this.getCenter(t.center),t.radius=.5*this.getSize(e).length(),t}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:(rn=[new tn,new tn,new tn,new tn,new tn,new tn,new tn,new tn],function(e){return this.isEmpty()?this:(rn[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),rn[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),rn[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),rn[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),rn[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),rn[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),rn[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),rn[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(rn),this)}),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(gn.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:(on=new vn,function(e,t){var n=this.center;void 0!==t?n.copy(t):on.setFromPoints(e).getCenter(n);for(var r=0,i=0,a=e.length;i<a;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new tn),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new vn),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(yn.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new tn,t=new tn;return function(n,r,i){var a=e.subVectors(i,r).cross(t.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(a,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new tn),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new tn;return function(t,n){void 0===n&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new tn);var r=t.delta(e),i=this.normal.dot(r);if(0===i)return 0===this.distanceToPoint(t.start)?n.copy(t.start):void 0;var a=-(t.start.dot(this.normal)+this.constant)/i;return a<0||a>1?void 0:n.copy(r).multiplyScalar(a).add(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new tn),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new tn,t=new nn;return function(n,r){var i=r||t.getNormalMatrix(n),a=this.coplanarPoint(e).applyMatrix4(n),o=this.normal.applyMatrix3(i).normalize();return this.constant=-a.dot(o),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(bn.prototype,{set:function(e,t,n,r,i,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,r=n[0],i=n[1],a=n[2],o=n[3],s=n[4],c=n[5],l=n[6],u=n[7],h=n[8],p=n[9],d=n[10],f=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return t[0].setComponents(o-r,u-s,f-h,y-m).normalize(),t[1].setComponents(o+r,u+s,f+h,y+m).normalize(),t[2].setComponents(o+i,u+c,f+p,y+v).normalize(),t[3].setComponents(o-i,u-c,f-p,y-v).normalize(),t[4].setComponents(o-a,u-l,f-d,y-g).normalize(),t[5].setComponents(o+a,u+l,f+d,y+g).normalize(),this},intersectsObject:(cn=new gn,function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),cn.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(cn)}),intersectsSprite:function(){var e=new gn;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,n=e.center,r=-e.radius,i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0},intersectsBox:(sn=new tn,function(e){for(var t=this.planes,n=0;n<6;n++){var r=t[n];if(sn.x=r.normal.x>0?e.max.x:e.min.x,sn.y=r.normal.y>0?e.max.y:e.min.y,sn.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(sn)<0)return!1}return!0}),containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}});var xn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"};function wn(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}return t}function _n(e){for(var t={},n=0;n<e.length;n++){var r=wn(e[n]);for(var i in r)t[i]=r[i]}return t}var Mn,En,Sn,Tn={clone:wn,merge:_n},Pn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Cn(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}Object.assign(Cn.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(){function e(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}return function(t,n,r){if(t=Kt.euclideanModulo(t,1),n=Kt.clamp(n,0,1),r=Kt.clamp(r,0,1),0===n)this.r=this.g=this.b=r;else{var i=r<=.5?r*(1+n):r+n-r*n,a=2*r-i;this.r=e(a,i,t+1/3),this.g=e(a,i,t),this.b=e(a,i,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var r,i=n[1],a=n[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var o=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,c=parseInt(r[3],10)/100;return t(r[5]),this.setHSL(o,s,c)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var l,u=(l=n[1]).length;if(3===u)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===u)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}e&&e.length>0&&(void 0!==(l=Pn[e])?this.setHex(l):console.warn("THREE.Color: Unknown color "+e));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(){function e(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}return function(t){return this.r=e(t.r),this.g=e(t.g),this.b=e(t.b),this}}(),copyLinearToSRGB:function(){function e(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}return function(t){return this.r=e(t.r),this.g=e(t.g),this.b=e(t.b),this}}(),convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,n,r=this.r,i=this.g,a=this.b,o=Math.max(r,i,a),s=Math.min(r,i,a),c=(s+o)/2;if(s===o)t=0,n=0;else{var l=o-s;switch(n=c<=.5?l/(o+s):l/(2-o-s),o){case r:t=(i-a)/l+(i<a?6:0);break;case i:t=(a-r)/l+2;break;case a:t=(r-i)/l+4}t/=6}return e.h=t,e.s=n,e.l=c,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:(Sn={},function(e,t,n){return this.getHSL(Sn),Sn.h+=e,Sn.s+=t,Sn.l+=n,this.setHSL(Sn.h,Sn.s,Sn.l),this}),add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},lerpHSL:(Mn={h:0,s:0,l:0},En={h:0,s:0,l:0},function(e,t){this.getHSL(Mn),e.getHSL(En);var n=Kt.lerp(Mn.h,En.h,t),r=Kt.lerp(Mn.s,En.s,t),i=Kt.lerp(Mn.l,En.l,t);return this.setHSL(n,r,i),this}),equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var An,On={common:{diffuse:{value:new Cn(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new nn},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Qt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Cn(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Cn(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new nn}},sprite:{diffuse:{value:new Cn(15658734)},opacity:{value:1},center:{value:new Qt(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new nn}}},Ln={basic:{uniforms:_n([On.common,On.specularmap,On.envmap,On.aomap,On.lightmap,On.fog]),vertexShader:xn.meshbasic_vert,fragmentShader:xn.meshbasic_frag},lambert:{uniforms:_n([On.common,On.specularmap,On.envmap,On.aomap,On.lightmap,On.emissivemap,On.fog,On.lights,{emissive:{value:new Cn(0)}}]),vertexShader:xn.meshlambert_vert,fragmentShader:xn.meshlambert_frag},phong:{uniforms:_n([On.common,On.specularmap,On.envmap,On.aomap,On.lightmap,On.emissivemap,On.bumpmap,On.normalmap,On.displacementmap,On.gradientmap,On.fog,On.lights,{emissive:{value:new Cn(0)},specular:{value:new Cn(1118481)},shininess:{value:30}}]),vertexShader:xn.meshphong_vert,fragmentShader:xn.meshphong_frag},standard:{uniforms:_n([On.common,On.envmap,On.aomap,On.lightmap,On.emissivemap,On.bumpmap,On.normalmap,On.displacementmap,On.roughnessmap,On.metalnessmap,On.fog,On.lights,{emissive:{value:new Cn(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:xn.meshphysical_vert,fragmentShader:xn.meshphysical_frag},matcap:{uniforms:_n([On.common,On.bumpmap,On.normalmap,On.displacementmap,On.fog,{matcap:{value:null}}]),vertexShader:xn.meshmatcap_vert,fragmentShader:xn.meshmatcap_frag},points:{uniforms:_n([On.points,On.fog]),vertexShader:xn.points_vert,fragmentShader:xn.points_frag},dashed:{uniforms:_n([On.common,On.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:xn.linedashed_vert,fragmentShader:xn.linedashed_frag},depth:{uniforms:_n([On.common,On.displacementmap]),vertexShader:xn.depth_vert,fragmentShader:xn.depth_frag},normal:{uniforms:_n([On.common,On.bumpmap,On.normalmap,On.displacementmap,{opacity:{value:1}}]),vertexShader:xn.normal_vert,fragmentShader:xn.normal_frag},sprite:{uniforms:_n([On.sprite,On.fog]),vertexShader:xn.sprite_vert,fragmentShader:xn.sprite_frag},background:{uniforms:{uvTransform:{value:new nn},t2D:{value:null}},vertexShader:xn.background_vert,fragmentShader:xn.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:xn.cube_vert,fragmentShader:xn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:xn.equirect_vert,fragmentShader:xn.equirect_frag},distanceRGBA:{uniforms:_n([On.common,On.displacementmap,{referencePosition:{value:new tn},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:xn.distanceRGBA_vert,fragmentShader:xn.distanceRGBA_frag},shadow:{uniforms:_n([On.lights,On.fog,{color:{value:new Cn(0)},opacity:{value:1}}]),vertexShader:xn.shadow_vert,fragmentShader:xn.shadow_frag}};function Rn(){var e=null,t=!1,n=null;function r(i,a){!1!==t&&(n(i,a),e.requestAnimationFrame(r))}return{start:function(){!0!==t&&null!==n&&(e.requestAnimationFrame(r),t=!0)},stop:function(){t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function Nn(e){var t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);var r=t.get(n);r&&(e.deleteBuffer(r.buffer),t.delete(n))},update:function(n,r){n.isInterleavedBufferAttribute&&(n=n.data);var i=t.get(n);void 0===i?t.set(n,function(t,n){var r=t.array,i=t.dynamic?35048:35044,a=e.createBuffer();e.bindBuffer(n,a),e.bufferData(n,r,i),t.onUploadCallback();var o=5126;return r instanceof Float32Array?o=5126:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?o=5123:r instanceof Int16Array?o=5122:r instanceof Uint32Array?o=5125:r instanceof Int32Array?o=5124:r instanceof Int8Array?o=5120:r instanceof Uint8Array&&(o=5121),{buffer:a,type:o,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}(n,r)):i.version<n.version&&(function(t,n,r){var i=n.array,a=n.updateRange;e.bindBuffer(r,t),!1===n.dynamic?e.bufferData(r,i,35044):-1===a.count?e.bufferSubData(r,0,i):0===a.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(r,a.offset*i.BYTES_PER_ELEMENT,i.subarray(a.offset,a.offset+a.count)),a.count=-1)}(i.buffer,n,r),i.version=n.version)}}}function kn(e,t,n,r,i,a){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new tn,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new Cn,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==a?a:0}function In(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||In.DefaultOrder}function Dn(){this.mask=1}Ln.physical={uniforms:_n([Ln.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:xn.meshphysical_vert,fragmentShader:xn.meshphysical_frag},Object.assign(kn.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}}),In.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],In.DefaultOrder="XYZ",Object.defineProperties(In.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(In.prototype,{isEuler:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var r=Kt.clamp,i=e.elements,a=i[0],o=i[4],s=i[8],c=i[1],l=i[5],u=i[9],h=i[2],p=i[6],d=i[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-u,d),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(p,l),this._z=0)):"YXZ"===t?(this._x=Math.asin(-r(u,-1,1)),Math.abs(u)<.99999?(this._y=Math.atan2(s,d),this._z=Math.atan2(c,l)):(this._y=Math.atan2(-h,a),this._z=0)):"ZXY"===t?(this._x=Math.asin(r(p,-1,1)),Math.abs(p)<.99999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(c,a))):"ZYX"===t?(this._y=Math.asin(-r(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(p,d),this._z=Math.atan2(c,a)):(this._x=0,this._z=Math.atan2(-o,l))):"YZX"===t?(this._z=Math.asin(r(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-h,a)):(this._x=0,this._y=Math.atan2(s,d))):"XZY"===t?(this._z=Math.asin(-r(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(p,l),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-u,d),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new $t;return function(t,n,r){return e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,n,r)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:(An=new en,function(e){return An.setFromEuler(this),this.setFromQuaternion(An,e)}),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new tn(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(Dn.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!=(this.mask&e.mask)}});var zn,jn,Un,Fn,Bn=0;function Hn(){Object.defineProperty(this,"id",{value:Bn++}),this.uuid=Kt.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Hn.DefaultUp.clone();var e=new tn,t=new In,n=new en,r=new tn(1,1,1);t.onChange(function(){n.setFromEuler(t,!1)}),n.onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new $t},normalMatrix:{value:new nn}}),this.matrix=new $t,this.matrixWorld=new $t,this.matrixAutoUpdate=Hn.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Dn,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}Hn.DefaultUp=new tn(0,1,0),Hn.DefaultMatrixAutoUpdate=!0,Hn.prototype=Object.assign(Object.create(r.prototype),{constructor:Hn,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:(Fn=new en,function(e,t){return Fn.setFromAxisAngle(e,t),this.quaternion.multiply(Fn),this}),rotateOnWorldAxis:function(){var e=new en;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.premultiply(e),this}}(),rotateX:function(){var e=new tn(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new tn(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new tn(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new tn;return function(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translateX:function(){var e=new tn(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new tn(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new tn(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:(Un=new $t,function(e){return e.applyMatrix4(Un.getInverse(this.matrixWorld))}),lookAt:function(){var e=new en,t=new $t,n=new tn,r=new tn;return function(i,a,o){i.isVector3?n.copy(i):n.set(i,a,o);var s=this.parent;this.updateWorldMatrix(!0,!1),r.setFromMatrixPosition(this.matrixWorld),this.isCamera?t.lookAt(r,n,this.up):t.lookAt(n,r,this.up),this.quaternion.setFromRotationMatrix(t),s&&(t.extractRotation(s.matrixWorld),e.setFromRotationMatrix(t),this.quaternion.premultiply(e.inverse()))}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(n,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new tn),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:(zn=new tn,jn=new tn,function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new en),this.updateMatrixWorld(!0),this.matrixWorld.decompose(zn,e,jn),e}),getWorldScale:function(){var e=new tn,t=new en;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new tn),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,n),n}}(),getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new tn),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){var n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var r=this.children,i=0,a=r.length;i<a;i++)r[i].updateWorldMatrix(!1,!0)},toJSON:function(e){var t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,c=o.length;s<c;s++){var l=o[s];i(e.shapes,l)}else i(e.shapes,o)}}if(void 0!==this.material)if(Array.isArray(this.material)){var u=[];for(s=0,c=this.material.length;s<c;s++)u.push(i(e.materials,this.material[s]));r.material=u}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(s=0;s<this.children.length;s++)r.children.push(this.children[s].toJSON(e).object)}if(t){var h=m(e.geometries),p=m(e.materials),d=m(e.textures),f=m(e.images);o=m(e.shapes);h.length>0&&(n.geometries=h),p.length>0&&(n.materials=p),d.length>0&&(n.textures=d),f.length>0&&(n.images=f),o.length>0&&(n.shapes=o)}return n.object=r,n;function m(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var r=e.children[n];this.add(r.clone())}return this}});var Vn,Gn,Wn=0;function qn(){Object.defineProperty(this,"id",{value:Wn+=2}),this.uuid=Kt.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function Yn(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Xn(e,t,n){Yn.call(this,new Int8Array(e),t,n)}function Jn(e,t,n){Yn.call(this,new Uint8Array(e),t,n)}function Zn(e,t,n){Yn.call(this,new Uint8ClampedArray(e),t,n)}function Kn(e,t,n){Yn.call(this,new Int16Array(e),t,n)}function Qn(e,t,n){Yn.call(this,new Uint16Array(e),t,n)}function $n(e,t,n){Yn.call(this,new Int32Array(e),t,n)}function er(e,t,n){Yn.call(this,new Uint32Array(e),t,n)}function tr(e,t,n){Yn.call(this,new Float32Array(e),t,n)}function nr(e,t,n){Yn.call(this,new Float64Array(e),t,n)}function rr(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function ir(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}qn.prototype=Object.assign(Object.create(r.prototype),{constructor:qn,isGeometry:!0,applyMatrix:function(e){for(var t=(new nn).getNormalMatrix(e),n=0,r=this.vertices.length;n<r;n++){this.vertices[n].applyMatrix4(e)}for(n=0,r=this.faces.length;n<r;n++){var i=this.faces[n];i.normal.applyMatrix3(t).normalize();for(var a=0,o=i.vertexNormals.length;a<o;a++)i.vertexNormals[a].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new $t;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new $t;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new $t;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new $t;return function(t,n,r){return e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e=new $t;return function(t,n,r){return e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:(Gn=new Hn,function(e){Gn.lookAt(e),Gn.updateMatrix(),this.applyMatrix(Gn.matrix)}),fromBufferGeometry:function(e){var t=this,n=null!==e.index?e.index.array:void 0,r=e.attributes,i=r.position.array,a=void 0!==r.normal?r.normal.array:void 0,o=void 0!==r.color?r.color.array:void 0,s=void 0!==r.uv?r.uv.array:void 0,c=void 0!==r.uv2?r.uv2.array:void 0;void 0!==c&&(this.faceVertexUvs[1]=[]);for(var l=0,u=0;l<i.length;l+=3,u+=2)t.vertices.push((new tn).fromArray(i,l)),void 0!==o&&t.colors.push((new Cn).fromArray(o,l));function h(e,n,r,i){var l=void 0===o?[]:[t.colors[e].clone(),t.colors[n].clone(),t.colors[r].clone()],u=new kn(e,n,r,void 0===a?[]:[(new tn).fromArray(a,3*e),(new tn).fromArray(a,3*n),(new tn).fromArray(a,3*r)],l,i);t.faces.push(u),void 0!==s&&t.faceVertexUvs[0].push([(new Qt).fromArray(s,2*e),(new Qt).fromArray(s,2*n),(new Qt).fromArray(s,2*r)]),void 0!==c&&t.faceVertexUvs[1].push([(new Qt).fromArray(c,2*e),(new Qt).fromArray(c,2*n),(new Qt).fromArray(c,2*r)])}var p=e.groups;if(p.length>0)for(l=0;l<p.length;l++)for(var d=p[l],f=d.start,m=(u=f,f+d.count);u<m;u+=3)void 0!==n?h(n[u],n[u+1],n[u+2],d.materialIndex):h(u,u+1,u+2,d.materialIndex);else if(void 0!==n)for(l=0;l<n.length;l+=3)h(n[l],n[l+1],n[l+2]);else for(l=0;l<i.length/3;l+=3)h(l,l+1,l+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:(Vn=new tn,function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Vn).negate(),this.translate(Vn.x,Vn.y,Vn.z),this}),normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,r=new $t;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var e=new tn,t=new tn,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],a=this.vertices[i.a],o=this.vertices[i.b],s=this.vertices[i.c];e.subVectors(s,o),t.subVectors(a,o),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){var t,n,r,i,a,o;for(void 0===e&&(e=!0),o=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)o[t]=new tn;if(e){var s,c,l,u=new tn,h=new tn;for(r=0,i=this.faces.length;r<i;r++)a=this.faces[r],s=this.vertices[a.a],c=this.vertices[a.b],l=this.vertices[a.c],u.subVectors(l,c),h.subVectors(s,c),u.cross(h),o[a.a].add(u),o[a.b].add(u),o[a.c].add(u)}else for(this.computeFaceNormals(),r=0,i=this.faces.length;r<i;r++)o[(a=this.faces[r]).a].add(a.normal),o[a.b].add(a.normal),o[a.c].add(a.normal);for(t=0,n=this.vertices.length;t<n;t++)o[t].normalize();for(r=0,i=this.faces.length;r<i;r++){var p=(a=this.faces[r]).vertexNormals;3===p.length?(p[0].copy(o[a.a]),p[1].copy(o[a.b]),p[2].copy(o[a.c])):(p[0]=o[a.a].clone(),p[1]=o[a.b].clone(),p[2]=o[a.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var r=(n=this.faces[e]).vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for((i=this.faces[n]).__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var a=new qn;for(a.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var o=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)c=new tn,l={a:new tn,b:new tn,c:new tn},o.push(c),s.push(l)}var c,l,u=this.morphNormals[e];for(a.vertices=this.morphTargets[e].vertices,a.computeFaceNormals(),a.computeVertexNormals(),n=0,r=this.faces.length;n<r;n++)i=this.faces[n],c=u.faceNormals[n],l=u.vertexNormals[n],c.copy(i.normal),l.a.copy(i.vertexNormals[0]),l.b.copy(i.vertexNormals[1]),l.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)(i=this.faces[n]).normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new vn),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new gn),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e&&e.isGeometry){var r,i=this.vertices.length,a=this.vertices,o=e.vertices,s=this.faces,c=e.faces,l=this.faceVertexUvs[0],u=e.faceVertexUvs[0],h=this.colors,p=e.colors;void 0===n&&(n=0),void 0!==t&&(r=(new nn).getNormalMatrix(t));for(var d=0,f=o.length;d<f;d++){var m=o[d].clone();void 0!==t&&m.applyMatrix4(t),a.push(m)}for(d=0,f=p.length;d<f;d++)h.push(p[d].clone());for(d=0,f=c.length;d<f;d++){var v,g,y,b=c[d],x=b.vertexNormals,w=b.vertexColors;(v=new kn(b.a+i,b.b+i,b.c+i)).normal.copy(b.normal),void 0!==r&&v.normal.applyMatrix3(r).normalize();for(var _=0,M=x.length;_<M;_++)g=x[_].clone(),void 0!==r&&g.applyMatrix3(r).normalize(),v.vertexNormals.push(g);v.color.copy(b.color);for(_=0,M=w.length;_<M;_++)y=w[_],v.vertexColors.push(y.clone());v.materialIndex=b.materialIndex+n,s.push(v)}for(d=0,f=u.length;d<f;d++){var E=u[d],S=[];if(void 0!==E){for(_=0,M=E.length;_<M;_++)S.push(E[_].clone());l.push(S)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,n,r,i,a,o,s,c={},l=[],u=[],h=Math.pow(10,4);for(n=0,r=this.vertices.length;n<r;n++)e=this.vertices[n],void 0===c[t=Math.round(e.x*h)+"_"+Math.round(e.y*h)+"_"+Math.round(e.z*h)]?(c[t]=n,l.push(this.vertices[n]),u[n]=l.length-1):u[n]=u[c[t]];var p=[];for(n=0,r=this.faces.length;n<r;n++){(i=this.faces[n]).a=u[i.a],i.b=u[i.b],i.c=u[i.c],a=[i.a,i.b,i.c];for(var d=0;d<3;d++)if(a[d]===a[(d+1)%3]){p.push(n);break}}for(n=p.length-1;n>=0;n--){var f=p[n];for(this.faces.splice(f,1),o=0,s=this.faceVertexUvs.length;o<s;o++)this.faceVertexUvs[o].splice(f,1)}var m=this.vertices.length-l.length;return this.vertices=l,m},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var r=e[t];this.vertices.push(new tn(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort(function(e,t){return e.materialIndex-t.materialIndex});var r,i,a=this.faceVertexUvs[0],o=this.faceVertexUvs[1];a&&a.length===t&&(r=[]),o&&o.length===t&&(i=[]);for(n=0;n<t;n++){var s=e[n]._id;r&&r.push(a[s]),i&&i.push(o[s])}r&&(this.faceVertexUvs[0]=r),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}for(var r=[],i=0;i<this.vertices.length;i++){var a=this.vertices[i];r.push(a.x,a.y,a.z)}var o=[],s=[],c={},l=[],u={},h=[],p={};for(i=0;i<this.faces.length;i++){var d=this.faces[i],f=void 0!==this.faceVertexUvs[0][i],m=d.normal.length()>0,v=d.vertexNormals.length>0,g=1!==d.color.r||1!==d.color.g||1!==d.color.b,y=d.vertexColors.length>0,b=0;if(b=M(b=M(b=M(b=M(b=M(b=M(b=M(b=M(b,0,0),1,!0),2,!1),3,f),4,m),5,v),6,g),7,y),o.push(b),o.push(d.a,d.b,d.c),o.push(d.materialIndex),f){var x=this.faceVertexUvs[0][i];o.push(T(x[0]),T(x[1]),T(x[2]))}if(m&&o.push(E(d.normal)),v){var w=d.vertexNormals;o.push(E(w[0]),E(w[1]),E(w[2]))}if(g&&o.push(S(d.color)),y){var _=d.vertexColors;o.push(S(_[0]),S(_[1]),S(_[2]))}}function M(e,t,n){return n?e|1<<t:e&~(1<<t)}function E(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==c[t]?c[t]:(c[t]=s.length/3,s.push(e.x,e.y,e.z),c[t])}function S(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==u[t]?u[t]:(u[t]=l.length,l.push(e.getHex()),u[t])}function T(e){var t=e.x.toString()+e.y.toString();return void 0!==p[t]?p[t]:(p[t]=h.length/2,h.push(e.x,e.y),p[t])}return e.data={},e.data.vertices=r,e.data.normals=s,l.length>0&&(e.data.colors=l),h.length>0&&(e.data.uvs=[h]),e.data.faces=o,e},clone:function(){return(new qn).copy(this)},copy:function(e){var t,n,r,i,a,o;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,n=s.length;t<n;t++)this.vertices.push(s[t].clone());var c=e.colors;for(t=0,n=c.length;t<n;t++)this.colors.push(c[t].clone());var l=e.faces;for(t=0,n=l.length;t<n;t++)this.faces.push(l[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var u=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),r=0,i=u.length;r<i;r++){var h=u[r],p=[];for(a=0,o=h.length;a<o;a++){var d=h[a];p.push(d.clone())}this.faceVertexUvs[t].push(p)}}var f=e.morphTargets;for(t=0,n=f.length;t<n;t++){var m={};if(m.name=f[t].name,void 0!==f[t].vertices)for(m.vertices=[],r=0,i=f[t].vertices.length;r<i;r++)m.vertices.push(f[t].vertices[r].clone());if(void 0!==f[t].normals)for(m.normals=[],r=0,i=f[t].normals.length;r<i;r++)m.normals.push(f[t].normals[r].clone());this.morphTargets.push(m)}var v=e.morphNormals;for(t=0,n=v.length;t<n;t++){var g={};if(void 0!==v[t].vertexNormals)for(g.vertexNormals=[],r=0,i=v[t].vertexNormals.length;r<i;r++){var y=v[t].vertexNormals[r],b={};b.a=y.a.clone(),b.b=y.b.clone(),b.c=y.c.clone(),g.vertexNormals.push(b)}if(void 0!==v[t].faceNormals)for(g.faceNormals=[],r=0,i=v[t].faceNormals.length;r<i;r++)g.faceNormals.push(v[t].faceNormals[r].clone());this.morphNormals.push(g)}var x=e.skinWeights;for(t=0,n=x.length;t<n;t++)this.skinWeights.push(x[t].clone());var w=e.skinIndices;for(t=0,n=w.length;t<n;t++)this.skinIndices.push(w[t].clone());var _=e.lineDistances;for(t=0,n=_.length;t<n;t++)this.lineDistances.push(_[t]);var M=e.boundingBox;null!==M&&(this.boundingBox=M.clone());var E=e.boundingSphere;return null!==E&&(this.boundingSphere=E.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(Yn.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Yn.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.itemSize:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),a=new Cn),t[n++]=a.r,t[n++]=a.g,t[n++]=a.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),a=new Qt),t[n++]=a.x,t[n++]=a.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),a=new tn),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,r=0,i=e.length;r<i;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),a=new pn),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z,t[n++]=a.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),Xn.prototype=Object.create(Yn.prototype),Xn.prototype.constructor=Xn,Jn.prototype=Object.create(Yn.prototype),Jn.prototype.constructor=Jn,Zn.prototype=Object.create(Yn.prototype),Zn.prototype.constructor=Zn,Kn.prototype=Object.create(Yn.prototype),Kn.prototype.constructor=Kn,Qn.prototype=Object.create(Yn.prototype),Qn.prototype.constructor=Qn,$n.prototype=Object.create(Yn.prototype),$n.prototype.constructor=$n,er.prototype=Object.create(Yn.prototype),er.prototype.constructor=er,tr.prototype=Object.create(Yn.prototype),tr.prototype.constructor=tr,nr.prototype=Object.create(Yn.prototype),nr.prototype.constructor=nr,Object.assign(rr.prototype,{computeGroups:function(e){for(var t,n=[],r=void 0,i=e.faces,a=0;a<i.length;a++){var o=i[a];o.materialIndex!==r&&(r=o.materialIndex,void 0!==t&&(t.count=3*a-t.start,n.push(t)),t={start:3*a,materialIndex:r})}void 0!==t&&(t.count=3*a-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t,n=e.faces,r=e.vertices,i=e.faceVertexUvs,a=i[0]&&i[0].length>0,o=i[1]&&i[1].length>0,s=e.morphTargets,c=s.length;if(c>0){t=[];for(var l=0;l<c;l++)t[l]={name:s[l].name,data:[]};this.morphTargets.position=t}var u,h=e.morphNormals,p=h.length;if(p>0){u=[];for(l=0;l<p;l++)u[l]={name:h[l].name,data:[]};this.morphTargets.normal=u}var d=e.skinIndices,f=e.skinWeights,m=d.length===r.length,v=f.length===r.length;r.length>0&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(l=0;l<n.length;l++){var g=n[l];this.vertices.push(r[g.a],r[g.b],r[g.c]);var y=g.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var b=g.normal;this.normals.push(b,b,b)}var x,w=g.vertexColors;if(3===w.length)this.colors.push(w[0],w[1],w[2]);else{var _=g.color;this.colors.push(_,_,_)}if(!0===a)void 0!==(x=i[0][l])?this.uvs.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",l),this.uvs.push(new Qt,new Qt,new Qt));if(!0===o)void 0!==(x=i[1][l])?this.uvs2.push(x[0],x[1],x[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",l),this.uvs2.push(new Qt,new Qt,new Qt));for(var M=0;M<c;M++){var E=s[M].vertices;t[M].data.push(E[g.a],E[g.b],E[g.c])}for(M=0;M<p;M++){var S=h[M].vertexNormals[l];u[M].data.push(S.a,S.b,S.c)}m&&this.skinIndices.push(d[g.a],d[g.b],d[g.c]),v&&this.skinWeights.push(f[g.a],f[g.b],f[g.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});var ar=1;function or(){Object.defineProperty(this,"id",{value:ar+=2}),this.uuid=Kt.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function sr(e,t,n,r,i,a){qn.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:a},this.fromBufferGeometry(new cr(e,t,n,r,i,a)),this.mergeVertices()}function cr(e,t,n,r,i,a){or.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:a};var o=this;e=e||1,t=t||1,n=n||1,r=Math.floor(r)||1,i=Math.floor(i)||1;var s=[],c=[],l=[],u=[],h=0,p=0;function d(e,t,n,r,i,a,d,f,m,v,g){var y,b,x=a/m,w=d/v,_=a/2,M=d/2,E=f/2,S=m+1,T=v+1,P=0,C=0,A=new tn;for(b=0;b<T;b++){var O=b*w-M;for(y=0;y<S;y++){var L=y*x-_;A[e]=L*r,A[t]=O*i,A[n]=E,c.push(A.x,A.y,A.z),A[e]=0,A[t]=0,A[n]=f>0?1:-1,l.push(A.x,A.y,A.z),u.push(y/m),u.push(1-b/v),P+=1}}for(b=0;b<v;b++)for(y=0;y<m;y++){var R=h+y+S*b,N=h+y+S*(b+1),k=h+(y+1)+S*(b+1),I=h+(y+1)+S*b;s.push(R,N,I),s.push(N,k,I),C+=6}o.addGroup(p,C,g),p+=C,h+=P}d("z","y","x",-1,-1,n,t,e,a=Math.floor(a)||1,i,0),d("z","y","x",1,-1,n,t,-e,a,i,1),d("x","z","y",1,1,e,n,t,r,a,2),d("x","z","y",1,-1,e,n,-t,r,a,3),d("x","y","z",1,-1,e,t,n,r,i,4),d("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(s),this.addAttribute("position",new tr(c,3)),this.addAttribute("normal",new tr(l,3)),this.addAttribute("uv",new tr(u,2))}function lr(e,t,n,r){qn.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new ur(e,t,n,r)),this.mergeVertices()}function ur(e,t,n,r){or.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};var i,a,o=(e=e||1)/2,s=(t=t||1)/2,c=Math.floor(n)||1,l=Math.floor(r)||1,u=c+1,h=l+1,p=e/c,d=t/l,f=[],m=[],v=[],g=[];for(a=0;a<h;a++){var y=a*d-s;for(i=0;i<u;i++){var b=i*p-o;m.push(b,-y,0),v.push(0,0,1),g.push(i/c),g.push(1-a/l)}}for(a=0;a<l;a++)for(i=0;i<c;i++){var x=i+u*a,w=i+u*(a+1),_=i+1+u*(a+1),M=i+1+u*a;f.push(x,w,M),f.push(w,_,M)}this.setIndex(f),this.addAttribute("position",new tr(m,3)),this.addAttribute("normal",new tr(v,3)),this.addAttribute("uv",new tr(g,2))}or.prototype=Object.assign(Object.create(r.prototype),{constructor:or,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(ir(e)>65535?er:Qn)(e,1):this.index=e},addAttribute:function(e,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):(this.attributes[e]=t,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(e,new Yn(arguments[1],arguments[2])))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var n=this.attributes.normal;void 0!==n&&((new nn).getNormalMatrix(e).applyToBufferAttribute(n),n.needsUpdate=!0);return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e=new $t;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new $t;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new $t;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new $t;return function(t,n,r){return e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e=new $t;return function(t,n,r){return e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(){var e=new Hn;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){var e=new tn;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new tr(3*t.vertices.length,3),r=new tr(3*t.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(t.vertices)),this.addAttribute("color",r.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new tr(t.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];t.push(i.x,i.y,i.z||0)}return this.addAttribute("position",new tr(t,3)),this},updateFromObject:function(e){var t,n=e.geometry;if(e.isMesh){var r=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(r=void 0,n.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(n);r.verticesNeedUpdate=n.verticesNeedUpdate,r.normalsNeedUpdate=n.normalsNeedUpdate,r.colorsNeedUpdate=n.colorsNeedUpdate,r.uvsNeedUpdate=n.uvsNeedUpdate,r.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=r}return!0===n.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(n.vertices),t.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(n.normals),t.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(n.colors),t.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(n.uvs),t.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(n.lineDistances),t.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(e.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new rr).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new Yn(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.addAttribute("normal",new Yn(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var r=new Float32Array(3*e.colors.length);this.addAttribute("color",new Yn(r,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new Yn(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var a=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new Yn(a,2).copyVector2sArray(e.uvs2))}for(var o in this.groups=e.groups,e.morphTargets){for(var s=[],c=e.morphTargets[o],l=0,u=c.length;l<u;l++){var h=c[l],p=new tr(3*h.data.length,3);p.name=h.name,s.push(p.copyVector3sArray(h.data))}this.morphAttributes[o]=s}if(e.skinIndices.length>0){var d=new tr(4*e.skinIndices.length,4);this.addAttribute("skinIndex",d.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var f=new tr(4*e.skinWeights.length,4);this.addAttribute("skinWeight",f.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new vn);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new vn,t=new tn;return function(){null===this.boundingSphere&&(this.boundingSphere=new gn);var n=this.attributes.position;if(n){var r=this.boundingSphere.center;e.setFromBufferAttribute(n),e.getCenter(r);for(var i=0,a=0,o=n.count;a<o;a++)t.x=n.getX(a),t.y=n.getY(a),t.z=n.getZ(a),i=Math.max(i,r.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes;if(t.position){var n=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new Yn(new Float32Array(n.length),3));else for(var r=t.normal.array,i=0,a=r.length;i<a;i++)r[i]=0;var o,s,c,l=t.normal.array,u=new tn,h=new tn,p=new tn,d=new tn,f=new tn;if(e){var m=e.array;for(i=0,a=e.count;i<a;i+=3)o=3*m[i+0],s=3*m[i+1],c=3*m[i+2],u.fromArray(n,o),h.fromArray(n,s),p.fromArray(n,c),d.subVectors(p,h),f.subVectors(u,h),d.cross(f),l[o]+=d.x,l[o+1]+=d.y,l[o+2]+=d.z,l[s]+=d.x,l[s+1]+=d.y,l[s+2]+=d.z,l[c]+=d.x,l[c+1]+=d.y,l[c+2]+=d.z}else for(i=0,a=n.length;i<a;i+=9)u.fromArray(n,i),h.fromArray(n,i+3),p.fromArray(n,i+6),d.subVectors(p,h),f.subVectors(u,h),d.cross(f),l[i]=d.x,l[i+1]=d.y,l[i+2]=d.z,l[i+3]=d.x,l[i+4]=d.y,l[i+5]=d.z,l[i+6]=d.x,l[i+7]=d.y,l[i+8]=d.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var i=n[r].array,a=e.attributes[r],o=a.array,s=0,c=a.itemSize*t;s<o.length;s++,c++)i[c]=o[s];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){var e=new tn;return function(){for(var t=this.attributes.normal,n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.normalize(),t.setXYZ(n,e.x,e.y,e.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new or,t=this.index.array,n=this.attributes;for(var r in n){for(var i=n[r],a=i.array,o=i.itemSize,s=new a.constructor(t.length*o),c=0,l=0,u=0,h=t.length;u<h;u++){c=t[u]*o;for(var p=0;p<o;p++)s[l++]=a[c++]}e.addAttribute(r,new Yn(s,o))}var d=this.groups;for(u=0,h=d.length;u<h;u++){var f=d[u];e.addGroup(f.start,f.count,f.materialIndex)}return e},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;if(null!==r){var i=Array.prototype.slice.call(r.array);e.data.index={type:r.array.constructor.name,array:i}}var a=this.attributes;for(var n in a){var o=a[n];i=Array.prototype.slice.call(o.array);e.data.attributes[n]={itemSize:o.itemSize,type:o.array.constructor.name,array:i,normalized:o.normalized}}var s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));var c=this.boundingSphere;return null!==c&&(e.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),e},clone:function(){return(new or).copy(this)},copy:function(e){var t,n,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var i=e.index;null!==i&&this.setIndex(i.clone());var a=e.attributes;for(t in a){var o=a[t];this.addAttribute(t,o.clone())}var s=e.morphAttributes;for(t in s){var c=[],l=s[t];for(n=0,r=l.length;n<r;n++)c.push(l[n].clone());this.morphAttributes[t]=c}var u=e.groups;for(n=0,r=u.length;n<r;n++){var h=u[n];this.addGroup(h.start,h.count,h.materialIndex)}var p=e.boundingBox;null!==p&&(this.boundingBox=p.clone());var d=e.boundingSphere;return null!==d&&(this.boundingSphere=d.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),sr.prototype=Object.create(qn.prototype),sr.prototype.constructor=sr,cr.prototype=Object.create(or.prototype),cr.prototype.constructor=cr,lr.prototype=Object.create(qn.prototype),lr.prototype.constructor=lr,ur.prototype=Object.create(or.prototype),ur.prototype.constructor=ur;var hr,pr,dr,fr,mr,vr,gr,yr,br,xr,wr,_r,Mr=0;function Er(){Object.defineProperty(this,"id",{value:Mr++}),this.uuid=Kt.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=D,this.side=P,this.flatShading=!1,this.vertexColors=R,this.opacity=1,this.transparent=!1,this.blendSrc=Z,this.blendDst=K,this.blendEquation=B,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=oe,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.userData={},this.needsUpdate=!0}function Sr(e){Er.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function Tr(e,t){this.origin=void 0!==e?e:new tn,this.direction=void 0!==t?t:new tn}function Pr(e,t,n){this.a=void 0!==e?e:new tn,this.b=void 0!==t?t:new tn,this.c=void 0!==n?n:new tn}function Cr(e){Er.call(this),this.type="MeshBasicMaterial",this.color=new Cn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=he,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function Ar(e,t){Hn.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new or,this.material=void 0!==t?t:new Cr({color:16777215*Math.random()}),this.drawMode=Dt,this.updateMorphTargets()}function Or(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Lr(e,t,n,r,i,a,o,s,c,l){e=void 0!==e?e:[],t=void 0!==t?t:we,hn.call(this,e,t,n,r,i,a,o,s,c,l),this.flipY=!1}function Rr(e,t,n,r){hn.call(this,null),this.image={data:e,width:t,height:n,depth:r},this.magFilter=Le,this.minFilter=Le,this.generateMipmaps=!1,this.flipY=!1}Er.prototype=Object.assign(Object.create(r.prototype),{constructor:Er,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===O;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==D&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==P&&(n.side=this.side),this.vertexColors!==R&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var i=r(e.textures),a=r(e.images);i.length>0&&(n.textures=i),a.length>0&&(n.images=a)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,n=null;if(null!==t){var r=t.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Sr.prototype=Object.create(Er.prototype),Sr.prototype.constructor=Sr,Sr.prototype.isShaderMaterial=!0,Sr.prototype.copy=function(e){return Er.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=wn(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},Sr.prototype.toJSON=function(e){var t=Er.prototype.toJSON.call(this,e);for(var n in t.uniforms={},this.uniforms){var r=this.uniforms[n].value;r.isTexture?t.uniforms[n]={type:"t",value:r.toJSON(e).uuid}:r.isColor?t.uniforms[n]={type:"c",value:r.getHex()}:r.isVector2?t.uniforms[n]={type:"v2",value:r.toArray()}:r.isVector3?t.uniforms[n]={type:"v3",value:r.toArray()}:r.isVector4?t.uniforms[n]={type:"v4",value:r.toArray()}:r.isMatrix4?t.uniforms[n]={type:"m4",value:r.toArray()}:t.uniforms[n]={value:r}}return Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},Object.assign(Tr.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new tn),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new tn;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new tn),t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new tn;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:(pr=new tn,dr=new tn,fr=new tn,function(e,t,n,r){pr.copy(e).add(t).multiplyScalar(.5),dr.copy(t).sub(e).normalize(),fr.copy(this.origin).sub(pr);var i,a,o,s,c=.5*e.distanceTo(t),l=-this.direction.dot(dr),u=fr.dot(this.direction),h=-fr.dot(dr),p=fr.lengthSq(),d=Math.abs(1-l*l);if(d>0)if(a=l*u-h,s=c*d,(i=l*h-u)>=0)if(a>=-s)if(a<=s){var f=1/d;o=(i*=f)*(i+l*(a*=f)+2*u)+a*(l*i+a+2*h)+p}else a=c,o=-(i=Math.max(0,-(l*a+u)))*i+a*(a+2*h)+p;else a=-c,o=-(i=Math.max(0,-(l*a+u)))*i+a*(a+2*h)+p;else a<=-s?o=-(i=Math.max(0,-(-l*c+u)))*i+(a=i>0?-c:Math.min(Math.max(-c,-h),c))*(a+2*h)+p:a<=s?(i=0,o=(a=Math.min(Math.max(-c,-h),c))*(a+2*h)+p):o=-(i=Math.max(0,-(l*c+u)))*i+(a=i>0?c:Math.min(Math.max(-c,-h),c))*(a+2*h)+p;else a=l>0?-c:c,o=-(i=Math.max(0,-(l*a+u)))*i+a*(a+2*h)+p;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy(dr).multiplyScalar(a).add(pr),o}),intersectSphere:function(){var e=new tn;return function(t,n){e.subVectors(t.center,this.origin);var r=e.dot(this.direction),i=e.dot(e)-r*r,a=t.radius*t.radius;if(i>a)return null;var o=Math.sqrt(a-i),s=r-o,c=r+o;return s<0&&c<0?null:s<0?this.at(c,n):this.at(s,n)}}(),intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var n,r,i,a,o,s,c=1/this.direction.x,l=1/this.direction.y,u=1/this.direction.z,h=this.origin;return c>=0?(n=(e.min.x-h.x)*c,r=(e.max.x-h.x)*c):(n=(e.max.x-h.x)*c,r=(e.min.x-h.x)*c),l>=0?(i=(e.min.y-h.y)*l,a=(e.max.y-h.y)*l):(i=(e.max.y-h.y)*l,a=(e.min.y-h.y)*l),n>a||i>r?null:((i>n||n!=n)&&(n=i),(a<r||r!=r)&&(r=a),u>=0?(o=(e.min.z-h.z)*u,s=(e.max.z-h.z)*u):(o=(e.max.z-h.z)*u,s=(e.min.z-h.z)*u),n>s||o>r?null:((o>n||n!=n)&&(n=o),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))},intersectsBox:(hr=new tn,function(e){return null!==this.intersectBox(e,hr)}),intersectTriangle:function(){var e=new tn,t=new tn,n=new tn,r=new tn;return function(i,a,o,s,c){t.subVectors(a,i),n.subVectors(o,i),r.crossVectors(t,n);var l,u=this.direction.dot(r);if(u>0){if(s)return null;l=1}else{if(!(u<0))return null;l=-1,u=-u}e.subVectors(this.origin,i);var h=l*this.direction.dot(n.crossVectors(e,n));if(h<0)return null;var p=l*this.direction.dot(t.cross(e));if(p<0)return null;if(h+p>u)return null;var d=-l*e.dot(r);return d<0?null:this.at(d/u,c)}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(Pr,{getNormal:(vr=new tn,function(e,t,n,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new tn),r.subVectors(n,t),vr.subVectors(e,t),r.cross(vr);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}),getBarycoord:function(){var e=new tn,t=new tn,n=new tn;return function(r,i,a,o,s){e.subVectors(o,i),t.subVectors(a,i),n.subVectors(r,i);var c=e.dot(e),l=e.dot(t),u=e.dot(n),h=t.dot(t),p=t.dot(n),d=c*h-l*l;if(void 0===s&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),s=new tn),0===d)return s.set(-2,-1,-1);var f=1/d,m=(h*u-l*p)*f,v=(c*p-l*u)*f;return s.set(1-m-v,v,m)}}(),containsPoint:function(){var e=new tn;return function(t,n,r,i){return Pr.getBarycoord(t,n,r,i,e),e.x>=0&&e.y>=0&&e.x+e.y<=1}}(),getUV:(mr=new tn,function(e,t,n,r,i,a,o,s){return this.getBarycoord(e,t,n,r,mr),s.set(0,0),s.addScaledVector(i,mr.x),s.addScaledVector(a,mr.y),s.addScaledVector(o,mr.z),s})}),Object.assign(Pr.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){var e=new tn,t=new tn;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new tn),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return Pr.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new tn),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return Pr.getBarycoord(e,this.a,this.b,this.c,t)},containsPoint:function(e){return Pr.containsPoint(e,this.a,this.b,this.c)},getUV:function(e,t,n,r,i){return Pr.getUV(e,this.a,this.b,this.c,t,n,r,i)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:(gr=new tn,yr=new tn,br=new tn,xr=new tn,wr=new tn,_r=new tn,function(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new tn);var n,r,i=this.a,a=this.b,o=this.c;gr.subVectors(a,i),yr.subVectors(o,i),xr.subVectors(e,i);var s=gr.dot(xr),c=yr.dot(xr);if(s<=0&&c<=0)return t.copy(i);wr.subVectors(e,a);var l=gr.dot(wr),u=yr.dot(wr);if(l>=0&&u<=l)return t.copy(a);var h=s*u-l*c;if(h<=0&&s>=0&&l<=0)return n=s/(s-l),t.copy(i).addScaledVector(gr,n);_r.subVectors(e,o);var p=gr.dot(_r),d=yr.dot(_r);if(d>=0&&p<=d)return t.copy(o);var f=p*c-s*d;if(f<=0&&c>=0&&d<=0)return r=c/(c-d),t.copy(i).addScaledVector(yr,r);var m=l*d-p*u;if(m<=0&&u-l>=0&&p-d>=0)return br.subVectors(o,a),r=(u-l)/(u-l+(p-d)),t.copy(a).addScaledVector(br,r);var v=1/(m+f+h);return n=f*v,r=h*v,t.copy(i).addScaledVector(gr,n).addScaledVector(yr,r)}),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),Cr.prototype=Object.create(Er.prototype),Cr.prototype.constructor=Cr,Cr.prototype.isMeshBasicMaterial=!0,Cr.prototype.copy=function(e){return Er.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},Ar.prototype=Object.assign(Object.create(Hn.prototype),{constructor:Ar,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return Hn.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,n,r=this.geometry;if(r.isBufferGeometry){var i=r.morphAttributes,a=Object.keys(i);if(a.length>0){var o=i[a[0]];if(void 0!==o)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=o.length;e<t;e++)n=o[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var s=r.morphTargets;if(void 0!==s&&s.length>0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=s.length;e<t;e++)n=s[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}},raycast:function(){var e=new $t,t=new Tr,n=new gn,r=new tn,i=new tn,a=new tn,o=new tn,s=new tn,c=new tn,l=new Qt,u=new Qt,h=new Qt,p=new tn,d=new tn;function f(e,t,n,r,i,a,o,s){if(null===(t.side===C?r.intersectTriangle(o,a,i,!0,s):r.intersectTriangle(i,a,o,t.side!==A,s)))return null;d.copy(s),d.applyMatrix4(e.matrixWorld);var c=n.ray.origin.distanceTo(d);return c<n.near||c>n.far?null:{distance:c,point:d.clone(),object:e}}function m(e,t,n,o,s,c,d,m,v){r.fromBufferAttribute(s,d),i.fromBufferAttribute(s,m),a.fromBufferAttribute(s,v);var g=f(e,t,n,o,r,i,a,p);if(g){c&&(l.fromBufferAttribute(c,d),u.fromBufferAttribute(c,m),h.fromBufferAttribute(c,v),g.uv=Pr.getUV(p,r,i,a,l,u,h,new Qt));var y=new kn(d,m,v);Pr.getNormal(r,i,a,y.normal),g.face=y}return g}return function(d,v){var g,y=this.geometry,b=this.material,x=this.matrixWorld;if(void 0!==b&&(null===y.boundingSphere&&y.computeBoundingSphere(),n.copy(y.boundingSphere),n.applyMatrix4(x),!1!==d.ray.intersectsSphere(n)&&(e.getInverse(x),t.copy(d.ray).applyMatrix4(e),null===y.boundingBox||!1!==t.intersectsBox(y.boundingBox))))if(y.isBufferGeometry){var w,_,M,E,S,T,P,C,A,O=y.index,L=y.attributes.position,R=y.attributes.uv,N=y.groups,k=y.drawRange;if(null!==O)if(Array.isArray(b))for(E=0,T=N.length;E<T;E++)for(A=b[(C=N[E]).materialIndex],S=Math.max(C.start,k.start),P=Math.min(C.start+C.count,k.start+k.count);S<P;S+=3)w=O.getX(S),_=O.getX(S+1),M=O.getX(S+2),(g=m(this,A,d,t,L,R,w,_,M))&&(g.faceIndex=Math.floor(S/3),v.push(g));else for(E=Math.max(0,k.start),T=Math.min(O.count,k.start+k.count);E<T;E+=3)w=O.getX(E),_=O.getX(E+1),M=O.getX(E+2),(g=m(this,b,d,t,L,R,w,_,M))&&(g.faceIndex=Math.floor(E/3),v.push(g));else if(void 0!==L)if(Array.isArray(b))for(E=0,T=N.length;E<T;E++)for(A=b[(C=N[E]).materialIndex],S=Math.max(C.start,k.start),P=Math.min(C.start+C.count,k.start+k.count);S<P;S+=3)(g=m(this,A,d,t,L,R,w=S,_=S+1,M=S+2))&&(g.faceIndex=Math.floor(S/3),v.push(g));else for(E=Math.max(0,k.start),T=Math.min(L.count,k.start+k.count);E<T;E+=3)(g=m(this,b,d,t,L,R,w=E,_=E+1,M=E+2))&&(g.faceIndex=Math.floor(E/3),v.push(g))}else if(y.isGeometry){var I,D,z,j,U=Array.isArray(b),F=y.vertices,B=y.faces,H=y.faceVertexUvs[0];H.length>0&&(j=H);for(var V=0,G=B.length;V<G;V++){var W=B[V],q=U?b[W.materialIndex]:b;if(void 0!==q){if(I=F[W.a],D=F[W.b],z=F[W.c],!0===q.morphTargets){var Y=y.morphTargets,X=this.morphTargetInfluences;r.set(0,0,0),i.set(0,0,0),a.set(0,0,0);for(var J=0,Z=Y.length;J<Z;J++){var K=X[J];if(0!==K){var Q=Y[J].vertices;r.addScaledVector(o.subVectors(Q[W.a],I),K),i.addScaledVector(s.subVectors(Q[W.b],D),K),a.addScaledVector(c.subVectors(Q[W.c],z),K)}}r.add(I),i.add(D),a.add(z),I=r,D=i,z=a}if(g=f(this,q,d,t,I,D,z,p)){if(j&&j[V]){var $=j[V];l.copy($[0]),u.copy($[1]),h.copy($[2]),g.uv=Pr.getUV(p,I,D,z,l,u,h,new Qt)}g.face=W,g.faceIndex=V,v.push(g)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Lr.prototype=Object.create(hn.prototype),Lr.prototype.constructor=Lr,Lr.prototype.isCubeTexture=!0,Object.defineProperty(Lr.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),Rr.prototype=Object.create(hn.prototype),Rr.prototype.constructor=Rr,Rr.prototype.isDataTexture3D=!0;var Nr=new hn,kr=new Rr,Ir=new Lr;function Dr(){this.seq=[],this.map={}}var zr=[],jr=[],Ur=new Float32Array(16),Fr=new Float32Array(9),Br=new Float32Array(4);function Hr(e,t,n){var r=e[0];if(r<=0||r>0)return e;var i=t*n,a=zr[i];if(void 0===a&&(a=new Float32Array(i),zr[i]=a),0!==t){r.toArray(a,0);for(var o=1,s=0;o!==t;++o)s+=n,e[o].toArray(a,s)}return a}function Vr(e,t){if(e.length!==t.length)return!1;for(var n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Gr(e,t){for(var n=0,r=t.length;n<r;n++)e[n]=t[n]}function Wr(e,t){var n=jr[t];void 0===n&&(n=new Int32Array(t),jr[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocTextureUnit();return n}function qr(e,t){var n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Yr(e,t){var n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Xr(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Vr(n,t))return;e.uniform2fv(this.addr,t),Gr(n,t)}}function Jr(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Vr(n,t))return;e.uniform3fv(this.addr,t),Gr(n,t)}}function Zr(e,t){var n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Vr(n,t))return;e.uniform4fv(this.addr,t),Gr(n,t)}}function Kr(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Vr(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Gr(n,t)}else{if(Vr(n,r))return;Br.set(r),e.uniformMatrix2fv(this.addr,!1,Br),Gr(n,r)}}function Qr(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Vr(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Gr(n,t)}else{if(Vr(n,r))return;Fr.set(r),e.uniformMatrix3fv(this.addr,!1,Fr),Gr(n,r)}}function $r(e,t){var n=this.cache,r=t.elements;if(void 0===r){if(Vr(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Gr(n,t)}else{if(Vr(n,r))return;Ur.set(r),e.uniformMatrix4fv(this.addr,!1,Ur),Gr(n,r)}}function ei(e,t,n){var r=this.cache,i=n.allocTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(t||Nr,i)}function ti(e,t,n){var r=this.cache,i=n.allocTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||kr,i)}function ni(e,t,n){var r=this.cache,i=n.allocTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||Ir,i)}function ri(e,t){var n=this.cache;Vr(n,t)||(e.uniform2iv(this.addr,t),Gr(n,t))}function ii(e,t){var n=this.cache;Vr(n,t)||(e.uniform3iv(this.addr,t),Gr(n,t))}function ai(e,t){var n=this.cache;Vr(n,t)||(e.uniform4iv(this.addr,t),Gr(n,t))}function oi(e,t){var n=this.cache;Vr(n,t)||(e.uniform1fv(this.addr,t),Gr(n,t))}function si(e,t){var n=this.cache;Vr(n,t)||(e.uniform1iv(this.addr,t),Gr(n,t))}function ci(e,t){var n=this.cache,r=Hr(t,this.size,2);Vr(n,r)||(e.uniform2fv(this.addr,r),this.updateCache(r))}function li(e,t){var n=this.cache,r=Hr(t,this.size,3);Vr(n,r)||(e.uniform3fv(this.addr,r),this.updateCache(r))}function ui(e,t){var n=this.cache,r=Hr(t,this.size,4);Vr(n,r)||(e.uniform4fv(this.addr,r),this.updateCache(r))}function hi(e,t){var n=this.cache,r=Hr(t,this.size,4);Vr(n,r)||(e.uniformMatrix2fv(this.addr,!1,r),this.updateCache(r))}function pi(e,t){var n=this.cache,r=Hr(t,this.size,9);Vr(n,r)||(e.uniformMatrix3fv(this.addr,!1,r),this.updateCache(r))}function di(e,t){var n=this.cache,r=Hr(t,this.size,16);Vr(n,r)||(e.uniformMatrix4fv(this.addr,!1,r),this.updateCache(r))}function fi(e,t,n){var r=this.cache,i=t.length,a=Wr(n,i);!1===Vr(r,a)&&(e.uniform1iv(this.addr,a),Gr(r,a));for(var o=0;o!==i;++o)n.setTexture2D(t[o]||Nr,a[o])}function mi(e,t,n){var r=this.cache,i=t.length,a=Wr(n,i);!1===Vr(r,a)&&(e.uniform1iv(this.addr,a),Gr(r,a));for(var o=0;o!==i;++o)n.setTextureCube(t[o]||Ir,a[o])}function vi(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return qr;case 35664:return Xr;case 35665:return Jr;case 35666:return Zr;case 35674:return Kr;case 35675:return Qr;case 35676:return $r;case 35678:case 36198:return ei;case 35679:return ti;case 35680:return ni;case 5124:case 35670:return Yr;case 35667:case 35671:return ri;case 35668:case 35672:return ii;case 35669:case 35673:return ai}}(t.type)}function gi(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return oi;case 35664:return ci;case 35665:return li;case 35666:return ui;case 35674:return hi;case 35675:return pi;case 35676:return di;case 35678:return fi;case 35680:return mi;case 5124:case 35670:return si;case 35667:case 35671:return ri;case 35668:case 35672:return ii;case 35669:case 35673:return ai}}(t.type)}function yi(e){this.id=e,Dr.call(this)}gi.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),Gr(t,e)},yi.prototype.setValue=function(e,t,n){for(var r=this.seq,i=0,a=r.length;i!==a;++i){var o=r[i];o.setValue(e,t[o.id],n)}};var bi=/([\w\d_]+)(\])?(\[|\.)?/g;function xi(e,t){e.seq.push(t),e.map[t.id]=t}function wi(e,t,n){var r=e.name,i=r.length;for(bi.lastIndex=0;;){var a=bi.exec(r),o=bi.lastIndex,s=a[1],c="]"===a[2],l=a[3];if(c&&(s|=0),void 0===l||"["===l&&o+2===i){xi(n,void 0===l?new vi(s,e,t):new gi(s,e,t));break}var u=n.map[s];void 0===u&&xi(n,u=new yi(s)),n=u}}function _i(e,t,n){Dr.call(this),this.renderer=n;for(var r=e.getProgramParameter(t,35718),i=0;i<r;++i){var a=e.getActiveUniform(t,i);wi(a,e.getUniformLocation(t,a.name),this)}}function Mi(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),!1===e.getShaderParameter(r,35713)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(r)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",35633===t?"vertex":"fragment",e.getShaderInfoLog(r),function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(n)),r}_i.prototype.setValue=function(e,t,n){var r=this.map[t];void 0!==r&&r.setValue(e,n,this.renderer)},_i.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},_i.upload=function(e,t,n,r){for(var i=0,a=t.length;i!==a;++i){var o=t[i],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,r)}},_i.seqWithValue=function(e,t){for(var n=[],r=0,i=e.length;r!==i;++r){var a=e[r];a.id in t&&n.push(a)}return n};var Ei=0;function Si(e){switch(e){case Ut:return["Linear","( value )"];case Ft:return["sRGB","( value )"];case Ht:return["RGBE","( value )"];case Gt:return["RGBM","( value, 7.0 )"];case Wt:return["RGBM","( value, 16.0 )"];case qt:return["RGBD","( value, 256.0 )"];case Bt:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function Ti(e,t){var n=Si(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Pi(e){return""!==e}function Ci(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function Ai(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function Oi(e){return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,function(e,t){var n=xn[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return Oi(n)})}function Li(e){return e.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(e,t,n,r){for(var i="",a=parseInt(t);a<parseInt(n);a++)i+=r.replace(/\[ i \]/g,"[ "+a+" ]");return i})}function Ri(e,t,n,r,i,a,o){var s=e.context,c=r.defines,l=i.vertexShader,u=i.fragmentShader,h="SHADOWMAP_TYPE_BASIC";a.shadowMapType===S?h="SHADOWMAP_TYPE_PCF":a.shadowMapType===T&&(h="SHADOWMAP_TYPE_PCF_SOFT");var p="ENVMAP_TYPE_CUBE",d="ENVMAP_MODE_REFLECTION",f="ENVMAP_BLENDING_MULTIPLY";if(a.envMap){switch(r.envMap.mapping){case we:case _e:p="ENVMAP_TYPE_CUBE";break;case Te:case Pe:p="ENVMAP_TYPE_CUBE_UV";break;case Me:case Ee:p="ENVMAP_TYPE_EQUIREC";break;case Se:p="ENVMAP_TYPE_SPHERE"}switch(r.envMap.mapping){case _e:case Ee:d="ENVMAP_MODE_REFRACTION"}switch(r.combine){case he:f="ENVMAP_BLENDING_MULTIPLY";break;case pe:f="ENVMAP_BLENDING_MIX";break;case de:f="ENVMAP_BLENDING_ADD"}}var m,v,g,y,b,x=e.gammaFactor>0?e.gammaFactor:1,w=o.isWebGL2?"":function(e,t,n){return[(e=e||{}).derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap&&!t.objectSpaceNormalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Pi).join("\n")}(r.extensions,a,t),_=function(e){var t=[];for(var n in e){var r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(c),M=s.createProgram();if(r.isRawShaderMaterial?((m=[_].filter(Pi).join("\n")).length>0&&(m+="\n"),(v=[w,_].filter(Pi).join("\n")).length>0&&(v+="\n")):(m=["precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+i.name,_,a.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+x,"#define MAX_BONES "+a.maxBones,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+d:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexColors?"#define USE_COLOR":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&!1===a.flatShading?"#define USE_MORPHNORMALS":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+h:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(o.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Pi).join("\n"),v=[w,"precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+i.name,_,a.alphaTest?"#define ALPHATEST "+a.alphaTest+(a.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+x,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.matcap?"#define USE_MATCAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+p:"",a.envMap?"#define "+d:"",a.envMap?"#define "+f:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.normalMap&&a.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexColors?"#define USE_COLOR":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+h:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&(o.isWebGL2||t.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",a.envMap&&(o.isWebGL2||t.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",a.toneMapping!==fe?"#define TONE_MAPPING":"",a.toneMapping!==fe?xn.tonemapping_pars_fragment:"",a.toneMapping!==fe?function(e,t){var n;switch(t){case me:n="Linear";break;case ve:n="Reinhard";break;case ge:n="Uncharted2";break;case ye:n="OptimizedCineon";break;case be:n="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}("toneMapping",a.toneMapping):"",a.dithering?"#define DITHERING":"",a.outputEncoding||a.mapEncoding||a.matcapEncoding||a.envMapEncoding||a.emissiveMapEncoding?xn.encodings_pars_fragment:"",a.mapEncoding?Ti("mapTexelToLinear",a.mapEncoding):"",a.matcapEncoding?Ti("matcapTexelToLinear",a.matcapEncoding):"",a.envMapEncoding?Ti("envMapTexelToLinear",a.envMapEncoding):"",a.emissiveMapEncoding?Ti("emissiveMapTexelToLinear",a.emissiveMapEncoding):"",a.outputEncoding?(g="linearToOutputTexel",y=a.outputEncoding,b=Si(y),"vec4 "+g+"( vec4 value ) { return LinearTo"+b[0]+b[1]+"; }"):"",a.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(Pi).join("\n")),l=Ai(l=Ci(l=Oi(l),a),a),u=Ai(u=Ci(u=Oi(u),a),a),l=Li(l),u=Li(u),o.isWebGL2&&!r.isRawShaderMaterial){var E=!1,P=/^\s*#version\s+300\s+es\s*\n/;r.isShaderMaterial&&null!==l.match(P)&&null!==u.match(P)&&(E=!0,l=l.replace(P,""),u=u.replace(P,"")),m=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+m,v=["#version 300 es\n","#define varying in",E?"":"out highp vec4 pc_fragColor;",E?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v}var C=v+u,A=Mi(s,35633,m+l),O=Mi(s,35632,C);s.attachShader(M,A),s.attachShader(M,O),void 0!==r.index0AttributeName?s.bindAttribLocation(M,0,r.index0AttributeName):!0===a.morphTargets&&s.bindAttribLocation(M,0,"position"),s.linkProgram(M);var L,R,N=s.getProgramInfoLog(M).trim(),k=s.getShaderInfoLog(A).trim(),I=s.getShaderInfoLog(O).trim(),D=!0,z=!0;return!1===s.getProgramParameter(M,35714)?(D=!1,console.error("THREE.WebGLProgram: shader error: ",s.getError(),"35715",s.getProgramParameter(M,35715),"gl.getProgramInfoLog",N,k,I)):""!==N?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",N):""!==k&&""!==I||(z=!1),z&&(this.diagnostics={runnable:D,material:r,programLog:N,vertexShader:{log:k,prefix:m},fragmentShader:{log:I,prefix:v}}),s.deleteShader(A),s.deleteShader(O),this.getUniforms=function(){return void 0===L&&(L=new _i(s,M,e)),L},this.getAttributes=function(){return void 0===R&&(R=function(e,t){for(var n={},r=e.getProgramParameter(t,35721),i=0;i<r;i++){var a=e.getActiveAttrib(t,i).name;n[a]=e.getAttribLocation(t,a)}return n}(s,M)),R},this.destroy=function(){s.deleteProgram(M),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=i.name,this.id=Ei++,this.code=n,this.usedTimes=1,this.program=M,this.vertexShader=A,this.fragmentShader=O,this}function Ni(e,t,n){var r=[],i={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},a=["precision","supportsVertexTextures","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function o(e,t){var n;return e?e.isTexture?n=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=e.texture.encoding):n=Ut,n===Ut&&t&&(n=Bt),n}this.getParameters=function(t,r,a,s,c,l,u){var h=i[t.type],p=u.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(n.floatVertexTextures)return 1024;var r=n.maxVertexUniforms,i=Math.floor((r-20)/4),a=Math.min(i,t.length);return a<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+a+"."),0):a}(u):0,d=n.precision;null!==t.precision&&(d=n.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",d,"instead.");var f=e.getRenderTarget();return{shaderID:h,precision:d,supportsVertexTextures:n.vertexTextures,outputEncoding:o(f?f.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:o(t.map,e.gammaInput),matcap:!!t.matcap,matcapEncoding:o(t.matcap,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:o(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(t.envMap.mapping===Te||t.envMap.mapping===Pe),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:o(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,objectSpaceNormalMap:t.normalMapType===Zt,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!s,useFog:t.fog,fogExp:s&&s.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:t.skinning&&p>0,maxBones:p,useVertexTexture:n.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:r.directional.length,numPointLights:r.point.length,numSpotLights:r.spot.length,numRectAreaLights:r.rectArea.length,numHemiLights:r.hemi.length,numClippingPlanes:c,numClipIntersection:l,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.receiveShadow&&a.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===A,flipSided:t.side===C,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,n){var r=[];if(n.shaderID?r.push(n.shaderID):(r.push(t.fragmentShader),r.push(t.vertexShader)),void 0!==t.defines)for(var i in t.defines)r.push(i),r.push(t.defines[i]);for(var o=0;o<a.length;o++)r.push(n[a[o]]);return r.push(t.onBeforeCompile.toString()),r.push(e.gammaOutput),r.push(e.gammaFactor),r.join()},this.acquireProgram=function(i,a,o,s){for(var c,l=0,u=r.length;l<u;l++){var h=r[l];if(h.code===s){++(c=h).usedTimes;break}}return void 0===c&&(c=new Ri(e,t,s,i,a,o,n),r.push(c)),c},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=r.indexOf(e);r[t]=r[r.length-1],r.pop(),e.destroy()}},this.programs=r}function ki(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Ii(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Di(){var e=[],t=0,n=[],r=[];function i(n,r,i,a,o){var s=e[t];return void 0===s?(s={id:n.id,object:n,geometry:r,material:i,program:i.program,renderOrder:n.renderOrder,z:a,group:o},e[t]=s):(s.id=n.id,s.object=n,s.geometry=r,s.material=i,s.program=i.program,s.renderOrder=n.renderOrder,s.z=a,s.group=o),t++,s}return{opaque:n,transparent:r,init:function(){t=0,n.length=0,r.length=0},push:function(e,t,a,o,s){var c=i(e,t,a,o,s);(!0===a.transparent?r:n).push(c)},unshift:function(e,t,a,o,s){var c=i(e,t,a,o,s);(!0===a.transparent?r:n).unshift(c)},sort:function(){n.length>1&&n.sort(ki),r.length>1&&r.sort(Ii)}}}var zi=0;function ji(){var e=new function(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new tn,color:new Cn,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Qt};break;case"SpotLight":n={position:new tn,direction:new tn,color:new Cn,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Qt};break;case"PointLight":n={position:new tn,color:new Cn,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Qt,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new tn,skyColor:new Cn,groundColor:new Cn};break;case"RectAreaLight":n={color:new Cn,position:new tn,halfWidth:new tn,halfHeight:new tn}}return e[t.id]=n,n}}},t={id:zi++,hash:{stateID:-1,directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},n=new tn,r=new $t,i=new $t;return{setup:function(a,o,s){for(var c=0,l=0,u=0,h=0,p=0,d=0,f=0,m=0,v=s.matrixWorldInverse,g=0,y=a.length;g<y;g++){var b=a[g],x=b.color,w=b.intensity,_=b.distance,M=b.shadow&&b.shadow.map?b.shadow.map.texture:null;if(b.isAmbientLight)c+=x.r*w,l+=x.g*w,u+=x.b*w;else if(b.isDirectionalLight){if((S=e.get(b)).color.copy(b.color).multiplyScalar(b.intensity),S.direction.setFromMatrixPosition(b.matrixWorld),n.setFromMatrixPosition(b.target.matrixWorld),S.direction.sub(n),S.direction.transformDirection(v),S.shadow=b.castShadow,b.castShadow){var E=b.shadow;S.shadowBias=E.bias,S.shadowRadius=E.radius,S.shadowMapSize=E.mapSize}t.directionalShadowMap[h]=M,t.directionalShadowMatrix[h]=b.shadow.matrix,t.directional[h]=S,h++}else if(b.isSpotLight)(S=e.get(b)).position.setFromMatrixPosition(b.matrixWorld),S.position.applyMatrix4(v),S.color.copy(x).multiplyScalar(w),S.distance=_,S.direction.setFromMatrixPosition(b.matrixWorld),n.setFromMatrixPosition(b.target.matrixWorld),S.direction.sub(n),S.direction.transformDirection(v),S.coneCos=Math.cos(b.angle),S.penumbraCos=Math.cos(b.angle*(1-b.penumbra)),S.decay=b.decay,S.shadow=b.castShadow,b.castShadow&&(E=b.shadow,S.shadowBias=E.bias,S.shadowRadius=E.radius,S.shadowMapSize=E.mapSize),t.spotShadowMap[d]=M,t.spotShadowMatrix[d]=b.shadow.matrix,t.spot[d]=S,d++;else if(b.isRectAreaLight)(S=e.get(b)).color.copy(x).multiplyScalar(w),S.position.setFromMatrixPosition(b.matrixWorld),S.position.applyMatrix4(v),i.identity(),r.copy(b.matrixWorld),r.premultiply(v),i.extractRotation(r),S.halfWidth.set(.5*b.width,0,0),S.halfHeight.set(0,.5*b.height,0),S.halfWidth.applyMatrix4(i),S.halfHeight.applyMatrix4(i),t.rectArea[f]=S,f++;else if(b.isPointLight)(S=e.get(b)).position.setFromMatrixPosition(b.matrixWorld),S.position.applyMatrix4(v),S.color.copy(b.color).multiplyScalar(b.intensity),S.distance=b.distance,S.decay=b.decay,S.shadow=b.castShadow,b.castShadow&&(E=b.shadow,S.shadowBias=E.bias,S.shadowRadius=E.radius,S.shadowMapSize=E.mapSize,S.shadowCameraNear=E.camera.near,S.shadowCameraFar=E.camera.far),t.pointShadowMap[p]=M,t.pointShadowMatrix[p]=b.shadow.matrix,t.point[p]=S,p++;else if(b.isHemisphereLight){var S;(S=e.get(b)).direction.setFromMatrixPosition(b.matrixWorld),S.direction.transformDirection(v),S.direction.normalize(),S.skyColor.copy(b.color).multiplyScalar(w),S.groundColor.copy(b.groundColor).multiplyScalar(w),t.hemi[m]=S,m++}}t.ambient[0]=c,t.ambient[1]=l,t.ambient[2]=u,t.directional.length=h,t.spot.length=d,t.rectArea.length=f,t.point.length=p,t.hemi.length=m,t.hash.stateID=t.id,t.hash.directionalLength=h,t.hash.pointLength=p,t.hash.spotLength=d,t.hash.rectAreaLength=f,t.hash.hemiLength=m,t.hash.shadowsLength=o.length},state:t}}function Ui(){var e=new ji,t=[],n=[];return{init:function(){t.length=0,n.length=0},state:{lightsArray:t,shadowsArray:n,lights:e},setupLights:function(r){e.setup(t,n,r)},pushLight:function(e){t.push(e)},pushShadow:function(e){n.push(e)}}}function Fi(e){Er.call(this),this.type="MeshDepthMaterial",this.depthPacking=Yt,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function Bi(e){Er.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new tn,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}function Hi(e,t,n){for(var r=new bn,i=new $t,a=new Qt,o=new Qt(n,n),s=new tn,c=new tn,l=1,u=2,h=1+(l|u),p=new Array(h),d=new Array(h),f={},m={0:C,1:P,2:A},v=[new tn(1,0,0),new tn(-1,0,0),new tn(0,0,1),new tn(0,0,-1),new tn(0,1,0),new tn(0,-1,0)],g=[new tn(0,1,0),new tn(0,1,0),new tn(0,1,0),new tn(0,1,0),new tn(0,0,1),new tn(0,0,-1)],y=[new pn,new pn,new pn,new pn,new pn,new pn],b=0;b!==h;++b){var x=0!=(b&l),w=0!=(b&u),_=new Fi({depthPacking:Xt,morphTargets:x,skinning:w});p[b]=_;var M=new Bi({morphTargets:x,skinning:w});d[b]=M}var E=this;function T(t,n,r,i,a,o){var s=t.geometry,c=null,h=p,v=t.customDepthMaterial;if(r&&(h=d,v=t.customDistanceMaterial),v)c=v;else{var g=!1;n.morphTargets&&(s&&s.isBufferGeometry?g=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(g=s.morphTargets&&s.morphTargets.length>0)),t.isSkinnedMesh&&!1===n.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var y=t.isSkinnedMesh&&n.skinning,b=0;g&&(b|=l),y&&(b|=u),c=h[b]}if(e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var x=c.uuid,w=n.uuid,_=f[x];void 0===_&&(_={},f[x]=_);var M=_[w];void 0===M&&(M=c.clone(),_[w]=M),c=M}return c.visible=n.visible,c.wireframe=n.wireframe,c.side=null!=n.shadowSide?n.shadowSide:m[n.side],c.clipShadows=n.clipShadows,c.clippingPlanes=n.clippingPlanes,c.clipIntersection=n.clipIntersection,c.wireframeLinewidth=n.wireframeLinewidth,c.linewidth=n.linewidth,r&&c.isMeshDistanceMaterial&&(c.referencePosition.copy(i),c.nearDistance=a,c.farDistance=o),c}function O(n,i,a,o){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);var s=t.update(n),l=n.material;if(Array.isArray(l))for(var u=s.groups,h=0,p=u.length;h<p;h++){var d=u[h],f=l[d.materialIndex];if(f&&f.visible){var m=T(n,f,o,c,a.near,a.far);e.renderBufferDirect(a,null,s,m,n,d)}}else if(l.visible){m=T(n,l,o,c,a.near,a.far);e.renderBufferDirect(a,null,s,m,n,null)}}for(var v=n.children,g=0,y=v.length;g<y;g++)O(v[g],i,a,o)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=S,this.render=function(t,n,l){if(!1!==E.enabled&&(!1!==E.autoUpdate||!1!==E.needsUpdate)&&0!==t.length){e.context;var u,h=e.state;h.disable(3042),h.buffers.color.setClear(1,1,1,1),h.buffers.depth.setTest(!0),h.setScissorTest(!1);for(var p=0,d=t.length;p<d;p++){var f=t[p],m=f.shadow,b=f&&f.isPointLight;if(void 0!==m){var x=m.camera;if(a.copy(m.mapSize),a.min(o),b){var w=a.x,_=a.y;y[0].set(2*w,_,w,_),y[1].set(0,_,w,_),y[2].set(3*w,_,w,_),y[3].set(w,_,w,_),y[4].set(3*w,0,w,_),y[5].set(w,0,w,_),a.x*=4,a.y*=2}if(null===m.map){var M={minFilter:Le,magFilter:Le,format:Ke};m.map=new dn(a.x,a.y,M),m.map.texture.name=f.name+".shadowMap",x.updateProjectionMatrix()}m.isSpotLightShadow&&m.update(f);var S=m.map,T=m.matrix;c.setFromMatrixPosition(f.matrixWorld),x.position.copy(c),b?(u=6,T.makeTranslation(-c.x,-c.y,-c.z)):(u=1,s.setFromMatrixPosition(f.target.matrixWorld),x.lookAt(s),x.updateMatrixWorld(),T.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),T.multiply(x.projectionMatrix),T.multiply(x.matrixWorldInverse)),e.setRenderTarget(S),e.clear();for(var P=0;P<u;P++){if(b){s.copy(x.position),s.add(v[P]),x.up.copy(g[P]),x.lookAt(s),x.updateMatrixWorld();var C=y[P];h.viewport(C)}i.multiplyMatrices(x.projectionMatrix,x.matrixWorldInverse),r.setFromMatrix(i),O(n,l,x,b)}}else console.warn("THREE.WebGLShadowMap:",f,"has no shadow.")}E.needsUpdate=!1}}}function Vi(e,t,n,r,i,a,o){var s,c={};function l(e,t){if(e.width>t||e.height>t){if("data"in e)return void console.warn("THREE.WebGLRenderer: image in DataTexture is too big ("+e.width+"x"+e.height+").");var n=t/Math.max(e.width,e.height),r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return r.width=Math.floor(e.width*n),r.height=Math.floor(e.height*n),r.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,r.width,r.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+r.width+"x"+r.height),r}return e}function u(e){return Kt.isPowerOfTwo(e.width)&&Kt.isPowerOfTwo(e.height)}function h(e,t){return e.generateMipmaps&&t&&e.minFilter!==Le&&e.minFilter!==ke}function p(t,n,i,a){e.generateMipmap(t),r.get(n).__maxMipLevel=Math.log(Math.max(i,a))*Math.LOG2E}function d(e,t){if(!i.isWebGL2)return e;if(6403===e){if(5126===t)return 33326;if(5131===t)return 33325;if(5121===t)return 33321}if(6407===e){if(5126===t)return 34837;if(5131===t)return 34843;if(5121===t)return 32849}if(6408===e){if(5126===t)return 34836;if(5131===t)return 34842;if(5121===t)return 32856}return e}function f(e){return e===Le||e===Re||e===Ne?9728:9729}function m(t){var n=t.target;n.removeEventListener("dispose",m),function(t){var n=r.get(t);if(t.image&&n.__image__webglTextureCube)e.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture)}r.remove(t)}(n),n.isVideoTexture&&delete c[n.id],o.memory.textures--}function v(t){var n=t.target;n.removeEventListener("dispose",v),function(t){var n=r.get(t),i=r.get(t.texture);if(!t)return;void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLRenderTargetCube)for(var a=0;a<6;a++)e.deleteFramebuffer(n.__webglFramebuffer[a]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[a]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);r.remove(t.texture),r.remove(t)}(n),o.memory.textures--}function g(e,t){var i=r.get(e);if(e.isVideoTexture&&function(e){var t=e.id,n=o.render.frame;c[t]!==n&&(c[t]=n,e.update())}(e),e.version>0&&i.__version!==e.version){var a=e.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==a.complete)return void b(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+t),n.bindTexture(3553,i.__webglTexture)}function y(n,o,s){var c;if(s?(e.texParameteri(n,10242,a.convert(o.wrapS)),e.texParameteri(n,10243,a.convert(o.wrapT)),e.texParameteri(n,10240,a.convert(o.magFilter)),e.texParameteri(n,10241,a.convert(o.minFilter))):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),o.wrapS===Ae&&o.wrapT===Ae||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,f(o.magFilter)),e.texParameteri(n,10241,f(o.minFilter)),o.minFilter!==Le&&o.minFilter!==ke&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),c=t.get("EXT_texture_filter_anisotropic")){if(o.type===Ve&&null===t.get("OES_texture_float_linear"))return;if(o.type===Ge&&null===(i.isWebGL2||t.get("OES_texture_half_float_linear")))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(e.texParameterf(n,c.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function b(t,r,c){var f;f=r.isDataTexture3D?32879:3553,void 0===t.__webglInit&&(t.__webglInit=!0,r.addEventListener("dispose",m),t.__webglTexture=e.createTexture(),o.memory.textures++),n.activeTexture(33984+c),n.bindTexture(f,t.__webglTexture),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment);var v=l(r.image,i.maxTextureSize);(function(e){return!i.isWebGL2&&(e.wrapS!==Ae||e.wrapT!==Ae||e.minFilter!==Le&&e.minFilter!==ke)})(r)&&!1===u(v)&&(v=function(e){return e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageBitmap?(void 0===s&&(s=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),s.width=Kt.floorPowerOfTwo(e.width),s.height=Kt.floorPowerOfTwo(e.height),s.getContext("2d").drawImage(e,0,0,s.width,s.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+s.width+"x"+s.height),s):e}(v));var g=u(v),b=a.convert(r.format),x=a.convert(r.type),w=d(b,x);y(f,r,g);var _,M=r.mipmaps;if(r.isDepthTexture){if(w=6402,r.type===Ve){if(!i.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");w=36012}else i.isWebGL2&&(w=33189);r.format===tt&&6402===w&&r.type!==Fe&&r.type!==He&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=Fe,x=a.convert(r.type)),r.format===nt&&(w=34041,r.type!==Xe&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=Xe,x=a.convert(r.type))),n.texImage2D(3553,0,w,v.width,v.height,0,b,x,null)}else if(r.isDataTexture)if(M.length>0&&g){for(var E=0,S=M.length;E<S;E++)_=M[E],n.texImage2D(3553,E,w,_.width,_.height,0,b,x,_.data);r.generateMipmaps=!1,t.__maxMipLevel=M.length-1}else n.texImage2D(3553,0,w,v.width,v.height,0,b,x,v.data),t.__maxMipLevel=0;else if(r.isCompressedTexture){for(E=0,S=M.length;E<S;E++)_=M[E],r.format!==Ke&&r.format!==Ze?n.getCompressedTextureFormats().indexOf(b)>-1?n.compressedTexImage2D(3553,E,w,_.width,_.height,0,_.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,E,w,_.width,_.height,0,b,x,_.data);t.__maxMipLevel=M.length-1}else if(r.isDataTexture3D)n.texImage3D(32879,0,w,v.width,v.height,v.depth,0,b,x,v.data),t.__maxMipLevel=0;else if(M.length>0&&g){for(E=0,S=M.length;E<S;E++)_=M[E],n.texImage2D(3553,E,w,b,x,_);r.generateMipmaps=!1,t.__maxMipLevel=M.length-1}else n.texImage2D(3553,0,w,b,x,v),t.__maxMipLevel=0;h(r,g)&&p(3553,r,v.width,v.height),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function x(t,i,o,s){var c=a.convert(i.texture.format),l=a.convert(i.texture.type),u=d(c,l);n.texImage2D(s,0,u,i.width,i.height,0,c,l,null),e.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,o,s,r.get(i.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function w(t,n){e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer?(e.renderbufferStorage(36161,33189,n.width,n.height),e.framebufferRenderbuffer(36160,36096,36161,t)):n.depthBuffer&&n.stencilBuffer?(e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t)):e.renderbufferStorage(36161,32854,n.width,n.height),e.bindRenderbuffer(36161,null)}function _(t){var n=r.get(t),i=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),g(n.depthTexture,0);var i=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===tt)e.framebufferTexture2D(36160,36096,3553,i,0);else{if(n.depthTexture.format!==nt)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,i,0)}}(n.__webglFramebuffer,t)}else if(i){n.__webglDepthbuffer=[];for(var a=0;a<6;a++)e.bindFramebuffer(36160,n.__webglFramebuffer[a]),n.__webglDepthbuffer[a]=e.createRenderbuffer(),w(n.__webglDepthbuffer[a],t)}else e.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),w(n.__webglDepthbuffer,t);e.bindFramebuffer(36160,null)}this.setTexture2D=g,this.setTexture3D=function(e,t){var i=r.get(e);e.version>0&&i.__version!==e.version?b(i,e,t):(n.activeTexture(33984+t),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=function(t,s){var c=r.get(t);if(6===t.image.length)if(t.version>0&&c.__version!==t.version){c.__image__webglTextureCube||(t.addEventListener("dispose",m),c.__image__webglTextureCube=e.createTexture(),o.memory.textures++),n.activeTexture(33984+s),n.bindTexture(34067,c.__image__webglTextureCube),e.pixelStorei(37440,t.flipY);for(var f=t&&t.isCompressedTexture,v=t.image[0]&&t.image[0].isDataTexture,g=[],b=0;b<6;b++)g[b]=f||v?v?t.image[b].image:t.image[b]:l(t.image[b],i.maxCubemapSize);var x=g[0],w=u(x),_=a.convert(t.format),M=a.convert(t.type),E=d(_,M);for(y(34067,t,w),b=0;b<6;b++)if(f)for(var S,T=g[b].mipmaps,P=0,C=T.length;P<C;P++)S=T[P],t.format!==Ke&&t.format!==Ze?n.getCompressedTextureFormats().indexOf(_)>-1?n.compressedTexImage2D(34069+b,P,E,S.width,S.height,0,S.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+b,P,E,S.width,S.height,0,_,M,S.data);else v?n.texImage2D(34069+b,0,E,g[b].width,g[b].height,0,_,M,g[b].data):n.texImage2D(34069+b,0,E,_,M,g[b]);c.__maxMipLevel=f?T.length-1:0,h(t,w)&&p(34067,t,x.width,x.height),c.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(33984+s),n.bindTexture(34067,c.__image__webglTextureCube)},this.setTextureCubeDynamic=function(e,t){n.activeTexture(33984+t),n.bindTexture(34067,r.get(e).__webglTexture)},this.setupRenderTarget=function(t){var i=r.get(t),a=r.get(t.texture);t.addEventListener("dispose",v),a.__webglTexture=e.createTexture(),o.memory.textures++;var s=!0===t.isWebGLRenderTargetCube,c=u(t);if(s){i.__webglFramebuffer=[];for(var l=0;l<6;l++)i.__webglFramebuffer[l]=e.createFramebuffer()}else i.__webglFramebuffer=e.createFramebuffer();if(s){for(n.bindTexture(34067,a.__webglTexture),y(34067,t.texture,c),l=0;l<6;l++)x(i.__webglFramebuffer[l],t,36064,34069+l);h(t.texture,c)&&p(34067,t.texture,t.width,t.height),n.bindTexture(34067,null)}else n.bindTexture(3553,a.__webglTexture),y(3553,t.texture,c),x(i.__webglFramebuffer,t,36064,3553),h(t.texture,c)&&p(3553,t.texture,t.width,t.height),n.bindTexture(3553,null);t.depthBuffer&&_(t)},this.updateRenderTargetMipmap=function(e){var t=e.texture;if(h(t,u(e))){var i=e.isWebGLRenderTargetCube?34067:3553,a=r.get(t).__webglTexture;n.bindTexture(i,a),p(i,t,e.width,e.height),n.bindTexture(i,null)}}}function Gi(e,t,n){return{convert:function(e){var r;if(e===Ce)return 10497;if(e===Ae)return 33071;if(e===Oe)return 33648;if(e===Le)return 9728;if(e===Re)return 9984;if(e===Ne)return 9986;if(e===ke)return 9729;if(e===Ie)return 9985;if(e===De)return 9987;if(e===ze)return 5121;if(e===We)return 32819;if(e===qe)return 32820;if(e===Ye)return 33635;if(e===je)return 5120;if(e===Ue)return 5122;if(e===Fe)return 5123;if(e===Be)return 5124;if(e===He)return 5125;if(e===Ve)return 5126;if(e===Ge){if(n.isWebGL2)return 5131;if(null!==(r=t.get("OES_texture_half_float")))return r.HALF_FLOAT_OES}if(e===Je)return 6406;if(e===Ze)return 6407;if(e===Ke)return 6408;if(e===Qe)return 6409;if(e===$e)return 6410;if(e===tt)return 6402;if(e===nt)return 34041;if(e===rt)return 6403;if(e===B)return 32774;if(e===H)return 32778;if(e===V)return 32779;if(e===q)return 0;if(e===Y)return 1;if(e===X)return 768;if(e===J)return 769;if(e===Z)return 770;if(e===K)return 771;if(e===Q)return 772;if(e===$)return 773;if(e===ee)return 774;if(e===te)return 775;if(e===ne)return 776;if((e===it||e===at||e===ot||e===st)&&null!==(r=t.get("WEBGL_compressed_texture_s3tc"))){if(e===it)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===at)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===ot)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===st)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((e===ct||e===lt||e===ut||e===ht)&&null!==(r=t.get("WEBGL_compressed_texture_pvrtc"))){if(e===ct)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===lt)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===ut)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===ht)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===pt&&null!==(r=t.get("WEBGL_compressed_texture_etc1")))return r.COMPRESSED_RGB_ETC1_WEBGL;if((e===dt||e===ft||e===mt||e===vt||e===gt||e===yt||e===bt||e===xt||e===wt||e===_t||e===Mt||e===Et||e===St||e===Tt)&&null!==(r=t.get("WEBGL_compressed_texture_astc")))return e;if(e===G||e===W){if(n.isWebGL2){if(e===G)return 32775;if(e===W)return 32776}if(null!==(r=t.get("EXT_blend_minmax"))){if(e===G)return r.MIN_EXT;if(e===W)return r.MAX_EXT}}if(e===Xe){if(n.isWebGL2)return 34042;if(null!==(r=t.get("WEBGL_depth_texture")))return r.UNSIGNED_INT_24_8_WEBGL}return 0}}}function Wi(){Hn.call(this),this.type="Group"}function qi(){Hn.call(this),this.type="Camera",this.matrixWorldInverse=new $t,this.projectionMatrix=new $t,this.projectionMatrixInverse=new $t}function Yi(e,t,n,r){qi.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Xi(e){Yi.call(this),this.cameras=e||[]}Fi.prototype=Object.create(Er.prototype),Fi.prototype.constructor=Fi,Fi.prototype.isMeshDepthMaterial=!0,Fi.prototype.copy=function(e){return Er.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},Bi.prototype=Object.create(Er.prototype),Bi.prototype.constructor=Bi,Bi.prototype.isMeshDistanceMaterial=!0,Bi.prototype.copy=function(e){return Er.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},Wi.prototype=Object.assign(Object.create(Hn.prototype),{constructor:Wi,isGroup:!0}),qi.prototype=Object.assign(Object.create(Hn.prototype),{constructor:qi,isCamera:!0,copy:function(e,t){return Hn.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new tn),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){Hn.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),Yi.prototype=Object.assign(Object.create(qi.prototype),{constructor:Yi,isPerspectiveCamera:!0,copy:function(e,t){return qi.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Kt.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*Kt.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Kt.RAD2DEG*Math.atan(Math.tan(.5*Kt.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,r,i,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*Kt.DEG2RAD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;i+=a.offsetX*r/o,t-=a.offsetY*n/s,r*=a.width/o,n*=a.height/s}var c=this.filmOffset;0!==c&&(i+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=Hn.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Xi.prototype=Object.assign(Object.create(Yi.prototype),{constructor:Xi,isArrayCamera:!0});var Ji,Zi,Ki,Qi,$i,ea,ta=new tn,na=new tn;function ra(e,t,n){ta.setFromMatrixPosition(t.matrixWorld),na.setFromMatrixPosition(n.matrixWorld);var r=ta.distanceTo(na),i=t.projectionMatrix.elements,a=n.projectionMatrix.elements,o=i[14]/(i[10]-1),s=i[14]/(i[10]+1),c=(i[9]+1)/i[5],l=(i[9]-1)/i[5],u=(i[8]-1)/i[0],h=(a[8]+1)/a[0],p=o*u,d=o*h,f=r/(-u+h),m=f*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.getInverse(e.matrixWorld);var v=o+f,g=s+f,y=p-m,b=d+(r-m),x=c*s/g*v,w=l*s/g*v;e.projectionMatrix.makePerspective(y,b,x,w,v,g)}function ia(e){var t=this,n=null,r=null,i=null,a=[],o=new $t,s=new $t,c=1,l="stage";"undefined"!=typeof window&&"VRFrameData"in window&&(r=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",b,!1));var u=new $t,h=new en,p=new tn,d=new Yi;d.bounds=new pn(0,0,.5,1),d.layers.enable(1);var f=new Yi;f.bounds=new pn(.5,0,.5,1),f.layers.enable(2);var m,v,g=new Xi([d,f]);function y(){return null!==n&&!0===n.isPresenting}function b(){if(y()){var r=n.getEyeParameters("left"),i=r.renderWidth*c,a=r.renderHeight*c;v=e.getPixelRatio(),m=e.getSize(),e.setDrawingBufferSize(2*i,a,1),_.start()}else t.enabled&&e.setDrawingBufferSize(m.width,m.height,v),_.stop()}g.layers.enable(1),g.layers.enable(2);var x=[];function w(e){for(var t=navigator.getGamepads&&navigator.getGamepads(),n=0,r=0,i=t.length;n<i;n++){var a=t[n];if(a&&("Daydream Controller"===a.id||"Gear VR Controller"===a.id||"Oculus Go Controller"===a.id||"OpenVR Gamepad"===a.id||a.id.startsWith("Oculus Touch")||a.id.startsWith("Spatial Controller"))){if(r===e)return a;r++}}}this.enabled=!1,this.getController=function(e){var t=a[e];return void 0===t&&((t=new Wi).matrixAutoUpdate=!1,t.visible=!1,a[e]=t),t},this.getDevice=function(){return n},this.setDevice=function(e){void 0!==e&&(n=e),_.setContext(e)},this.setFramebufferScaleFactor=function(e){c=e},this.setFrameOfReferenceType=function(e){l=e},this.setPoseTarget=function(e){void 0!==e&&(i=e)},this.getCamera=function(e){var t="stage"===l?1.6:0;if(null===n)return e.position.set(0,t,0),e;if(n.depthNear=e.near,n.depthFar=e.far,n.getFrameData(r),"stage"===l){var c=n.stageParameters;c?o.fromArray(c.sittingToStandingTransform):o.makeTranslation(0,t,0)}var m=r.pose,v=null!==i?i:e;if(v.matrix.copy(o),v.matrix.decompose(v.position,v.quaternion,v.scale),null!==m.orientation&&(h.fromArray(m.orientation),v.quaternion.multiply(h)),null!==m.position&&(h.setFromRotationMatrix(o),p.fromArray(m.position),p.applyQuaternion(h),v.position.add(p)),v.updateMatrixWorld(),!1===n.isPresenting)return e;d.near=e.near,f.near=e.near,d.far=e.far,f.far=e.far,d.matrixWorldInverse.fromArray(r.leftViewMatrix),f.matrixWorldInverse.fromArray(r.rightViewMatrix),s.getInverse(o),"stage"===l&&(d.matrixWorldInverse.multiply(s),f.matrixWorldInverse.multiply(s));var y=v.parent;null!==y&&(u.getInverse(y.matrixWorld),d.matrixWorldInverse.multiply(u),f.matrixWorldInverse.multiply(u)),d.matrixWorld.getInverse(d.matrixWorldInverse),f.matrixWorld.getInverse(f.matrixWorldInverse),d.projectionMatrix.fromArray(r.leftProjectionMatrix),f.projectionMatrix.fromArray(r.rightProjectionMatrix),ra(g,d,f);var b=n.getLayers();if(b.length){var _=b[0];null!==_.leftBounds&&4===_.leftBounds.length&&d.bounds.fromArray(_.leftBounds),null!==_.rightBounds&&4===_.rightBounds.length&&f.bounds.fromArray(_.rightBounds)}return function(){for(var e=0;e<a.length;e++){var t=a[e],n=w(e);if(void 0!==n&&void 0!==n.pose){if(null===n.pose)return;var r=n.pose;!1===r.hasPosition&&t.position.set(.2,-.6,-.05),null!==r.position&&t.position.fromArray(r.position),null!==r.orientation&&t.quaternion.fromArray(r.orientation),t.matrix.compose(t.position,t.quaternion,t.scale),t.matrix.premultiply(o),t.matrix.decompose(t.position,t.quaternion,t.scale),t.matrixWorldNeedsUpdate=!0,t.visible=!0;var i="Daydream Controller"===n.id?0:1;x[e]!==n.buttons[i].pressed&&(x[e]=n.buttons[i].pressed,!0===x[e]?t.dispatchEvent({type:"selectstart"}):(t.dispatchEvent({type:"selectend"}),t.dispatchEvent({type:"select"})))}else t.visible=!1}}(),g},this.getStandingMatrix=function(){return o},this.isPresenting=y;var _=new Rn;this.setAnimationLoop=function(e){_.setAnimationLoop(e)},this.submitFrame=function(){y()&&n.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",b)}}function aa(e){console.log("THREE.WebGLRenderer",v);var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==e.context?e.context:null,r=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,o=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,c=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,l=void 0!==e.powerPreference?e.powerPreference:"default",u=null,h=null;this.domElement=t,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=me,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var p,d,f,m,g,w,_,M,E,S,T,O,L,R,N,k,H,V,G=this,W=!1,q=null,Y=null,X=null,J=-1,Z={geometry:null,program:null,wireframe:!1},K=null,Q=null,$=new pn,ee=new pn,te=null,ne=0,he=t.width,pe=t.height,de=1,fe=new pn(0,0,he,pe),ve=new pn(0,0,he,pe),ge=!1,ye=new bn,be=new function(){var e=this,t=null,n=0,r=!1,i=!1,a=new yn,o=new nn,s={value:null,needsUpdate:!1};function c(){s.value!==t&&(s.value=t,s.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function l(t,n,r,i){var c=null!==t?t.length:0,l=null;if(0!==c){if(l=s.value,!0!==i||null===l){var u=r+4*c,h=n.matrixWorldInverse;o.getNormalMatrix(h),(null===l||l.length<u)&&(l=new Float32Array(u));for(var p=0,d=r;p!==c;++p,d+=4)a.copy(t[p]).applyMatrix4(h,o),a.normal.toArray(l,d),l[d+3]=a.constant}s.value=l,s.needsUpdate=!0}return e.numPlanes=c,l}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(e,i,a){var o=0!==e.length||i||0!==n||r;return r=i,t=l(e,a,0),n=e.length,o},this.beginShadows=function(){i=!0,l(null)},this.endShadows=function(){i=!1,c()},this.setState=function(e,a,o,u,h,p){if(!r||null===e||0===e.length||i&&!o)i?l(null):c();else{var d=i?0:n,f=4*d,m=h.clippingState||null;s.value=m,m=l(e,u,f,p);for(var v=0;v!==f;++v)m[v]=t[v];h.clippingState=m,this.numIntersection=a?this.numPlanes:0,this.numPlanes+=d}}},xe=!1,we=!1,_e=new $t,Me=new tn;function Ee(){return null===Y?de:1}try{var Se={alpha:r,depth:i,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:c,powerPreference:l};if(t.addEventListener("webglcontextlost",Ae,!1),t.addEventListener("webglcontextrestored",Oe,!1),null===(p=n||t.getContext("webgl",Se)||t.getContext("experimental-webgl",Se)))throw null!==t.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===p.getShaderPrecisionFormat&&(p.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){console.error("THREE.WebGLRenderer: "+e.message)}function Te(){d=new function(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=r,r}}}(p),(f=new function(e,t,n){var r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var a="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,o=void 0!==n.precision?n.precision:"highp",s=i(o);s!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",s,"instead."),o=s);var c=!0===n.logarithmicDepthBuffer,l=e.getParameter(34930),u=e.getParameter(35660),h=e.getParameter(3379),p=e.getParameter(34076),d=e.getParameter(34921),f=e.getParameter(36347),m=e.getParameter(36348),v=e.getParameter(36349),g=u>0,y=a||!!t.get("OES_texture_float");return{isWebGL2:a,getMaxAnisotropy:function(){if(void 0!==r)return r;var n=t.get("EXT_texture_filter_anisotropic");return r=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:c,maxTextures:l,maxVertexTextures:u,maxTextureSize:h,maxCubemapSize:p,maxAttributes:d,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:g,floatFragmentTextures:y,floatVertexTextures:g&&y}}(p,d,e)).isWebGL2||(d.get("WEBGL_depth_texture"),d.get("OES_texture_float"),d.get("OES_texture_half_float"),d.get("OES_texture_half_float_linear"),d.get("OES_standard_derivatives"),d.get("OES_element_index_uint"),d.get("ANGLE_instanced_arrays")),d.get("OES_texture_float_linear"),V=new Gi(p,d,f),(m=new function(e,t,n,r){var i=new function(){var t=!1,n=new pn,r=null,i=new pn(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,a,o,s){!0===s&&(t*=o,r*=o,a*=o),n.set(t,r,a,o),!1===i.equals(n)&&(e.clearColor(t,r,a,o),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},a=new function(){var t=!1,n=null,r=null,i=null;return{setTest:function(e){e?K(2929):Q(2929)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){if(t)switch(t){case re:e.depthFunc(512);break;case ie:e.depthFunc(519);break;case ae:e.depthFunc(513);break;case oe:e.depthFunc(515);break;case se:e.depthFunc(514);break;case ce:e.depthFunc(518);break;case le:e.depthFunc(516);break;case ue:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},o=new function(){var t=!1,n=null,r=null,i=null,a=null,o=null,s=null,c=null,l=null;return{setTest:function(e){e?K(2960):Q(2960)},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){r===t&&i===n&&a===o||(e.stencilFunc(t,n,o),r=t,i=n,a=o)},setOp:function(t,n,r){o===t&&s===n&&c===r||(e.stencilOp(t,n,r),o=t,s=n,c=r)},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearStencil(t),l=t)},reset:function(){t=!1,n=null,r=null,i=null,a=null,o=null,s=null,c=null,l=null}}},s=e.getParameter(34921),c=new Uint8Array(s),l=new Uint8Array(s),u=new Uint8Array(s),h={},p=null,d=null,f=null,m=null,v=null,g=null,w=null,_=null,M=null,E=null,S=!1,T=null,P=null,O=null,L=null,R=null,N=e.getParameter(35661),k=!1,H=0,V=e.getParameter(7938);-1!==V.indexOf("WebGL")?(H=parseFloat(/^WebGL\ ([0-9])/.exec(V)[1]),k=H>=1):-1!==V.indexOf("OpenGL ES")&&(H=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(V)[1]),k=H>=2);var G=null,W={},q=new pn,Y=new pn;function X(t,n,r){var i=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var o=0;o<r;o++)e.texImage2D(n+o,0,6408,1,1,0,6408,5121,i);return a}var J={};function Z(n,i){c[n]=1,0===l[n]&&(e.enableVertexAttribArray(n),l[n]=1),u[n]!==i&&((r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),u[n]=i)}function K(t){!0!==h[t]&&(e.enable(t),h[t]=!0)}function Q(t){!1!==h[t]&&(e.disable(t),h[t]=!1)}function $(t,r,i,a,o,s,c,l){if(t!==I){if(f||(K(3042),f=!0),t===F)o=o||r,s=s||i,c=c||a,r===v&&o===_||(e.blendEquationSeparate(n.convert(r),n.convert(o)),v=r,_=o),i===g&&a===w&&s===M&&c===E||(e.blendFuncSeparate(n.convert(i),n.convert(a),n.convert(s),n.convert(c)),g=i,w=a,M=s,E=c),m=t,S=null;else if(t!==m||l!==S){if(v===B&&_===B||(e.blendEquation(32774),v=B,_=B),l)switch(t){case D:e.blendFuncSeparate(1,771,1,771);break;case z:e.blendFunc(1,1);break;case j:e.blendFuncSeparate(0,0,769,771);break;case U:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case D:e.blendFuncSeparate(770,771,1,771);break;case z:e.blendFunc(770,1);break;case j:e.blendFunc(0,769);break;case U:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}g=null,w=null,M=null,E=null,m=t,S=l}}else f&&(Q(3042),f=!1)}function ee(t){T!==t&&(t?e.frontFace(2304):e.frontFace(2305),T=t)}function te(t){t!==y?(K(2884),t!==P&&(t===b?e.cullFace(1029):t===x?e.cullFace(1028):e.cullFace(1032))):Q(2884),P=t}function ne(t,n,r){t?(K(32823),L===n&&R===r||(e.polygonOffset(n,r),L=n,R=r)):Q(32823)}function he(t){void 0===t&&(t=33984+N-1),G!==t&&(e.activeTexture(t),G=t)}return J[3553]=X(3553,3553,1),J[34067]=X(34067,34069,6),i.setClear(0,0,0,1),a.setClear(1),o.setClear(0),K(2929),a.setFunc(oe),ee(!1),te(b),K(2884),$(I),{buffers:{color:i,depth:a,stencil:o},initAttributes:function(){for(var e=0,t=c.length;e<t;e++)c[e]=0},enableAttribute:function(e){Z(e,0)},enableAttributeAndDivisor:Z,disableUnusedAttributes:function(){for(var t=0,n=l.length;t!==n;++t)l[t]!==c[t]&&(e.disableVertexAttribArray(t),l[t]=0)},enable:K,disable:Q,getCompressedTextureFormats:function(){if(null===p&&(p=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")))for(var n=e.getParameter(34467),r=0;r<n.length;r++)p.push(n[r]);return p},useProgram:function(t){return d!==t&&(e.useProgram(t),d=t,!0)},setBlending:$,setMaterial:function(e,t){e.side===A?Q(2884):K(2884);var n=e.side===C;t&&(n=!n),ee(n),e.blending===D&&!1===e.transparent?$(I):$(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),a.setFunc(e.depthFunc),a.setTest(e.depthTest),a.setMask(e.depthWrite),i.setMask(e.colorWrite),ne(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:ee,setCullFace:te,setLineWidth:function(t){t!==O&&(k&&e.lineWidth(t),O=t)},setPolygonOffset:ne,setScissorTest:function(e){e?K(3089):Q(3089)},activeTexture:he,bindTexture:function(t,n){null===G&&he();var r=W[G];void 0===r&&(r={type:void 0,texture:void 0},W[G]=r),r.type===t&&r.texture===n||(e.bindTexture(t,n||J[t]),r.type=t,r.texture=n)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===q.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),q.copy(t))},viewport:function(t){!1===Y.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),Y.copy(t))},reset:function(){for(var t=0;t<l.length;t++)1===l[t]&&(e.disableVertexAttribArray(t),l[t]=0);h={},p=null,G=null,W={},d=null,m=null,T=null,P=null,i.reset(),a.reset(),o.reset()}}}(p,d,V,f)).scissor(ee.copy(ve).multiplyScalar(de)),m.viewport($.copy(fe).multiplyScalar(de)),g=new function(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,r){switch(r=r||1,t.calls++,n){case 4:t.triangles+=r*(e/3);break;case 5:case 6:t.triangles+=r*(e-2);break;case 1:t.lines+=r*(e/2);break;case 3:t.lines+=r*(e-1);break;case 2:t.lines+=r*e;break;case 0:t.points+=r*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}(p),w=new function(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}},_=new Vi(p,d,m,w,f,V,g),M=new Nn(p),E=new function(e,t,n){var r={},i={};function a(e){var o=e.target,s=r[o.id];for(var c in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[c]);o.removeEventListener("dispose",a),delete r[o.id];var l=i[s.id];l&&(t.remove(l),delete i[s.id]),n.memory.geometries--}return{get:function(e,t){var i=r[t.id];return i||(t.addEventListener("dispose",a),t.isBufferGeometry?i=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new or).setFromObject(e)),i=t._bufferGeometry),r[t.id]=i,n.memory.geometries++,i)},update:function(e){var n=e.index,r=e.attributes;for(var i in null!==n&&t.update(n,34963),r)t.update(r[i],34962);var a=e.morphAttributes;for(var i in a)for(var o=a[i],s=0,c=o.length;s<c;s++)t.update(o[s],34962)},getWireframeAttribute:function(e){var n=i[e.id];if(n)return n;var r,a=[],o=e.index,s=e.attributes;if(null!==o)for(var c=0,l=(r=o.array).length;c<l;c+=3){var u=r[c+0],h=r[c+1],p=r[c+2];a.push(u,h,h,p,p,u)}else for(c=0,l=(r=s.position.array).length/3-1;c<l;c+=3)u=c+0,h=c+1,p=c+2,a.push(u,h,h,p,p,u);return n=new(ir(a)>65535?er:Qn)(a,1),t.update(n,34963),i[e.id]=n,n}}}(p,M,g),S=new function(e,t){var n={};return{update:function(r){var i=t.render.frame,a=r.geometry,o=e.get(r,a);return n[o.id]!==i&&(a.isGeometry&&o.updateFromObject(r),e.update(o),n[o.id]=i),o},dispose:function(){n={}}}}(E,g),N=new function(e){var t={},n=new Float32Array(8);return{update:function(r,i,a,o){var s=r.morphTargetInfluences,c=s.length,l=t[i.id];if(void 0===l){l=[];for(var u=0;u<c;u++)l[u]=[u,0];t[i.id]=l}var h=a.morphTargets&&i.morphAttributes.position,p=a.morphNormals&&i.morphAttributes.normal;for(u=0;u<c;u++)0!==(d=l[u])[1]&&(h&&i.removeAttribute("morphTarget"+u),p&&i.removeAttribute("morphNormal"+u));for(u=0;u<c;u++)(d=l[u])[0]=u,d[1]=s[u];for(l.sort(Or),u=0;u<8;u++){var d;if(d=l[u]){var f=d[0],m=d[1];if(m){h&&i.addAttribute("morphTarget"+u,h[f]),p&&i.addAttribute("morphNormal"+u,p[f]),n[u]=m;continue}}n[u]=0}o.getUniforms().setValue(e,"morphTargetInfluences",n)}}}(p),T=new Ni(G,d,f),O=new function(){var e={};return{get:function(t,n){var r,i=e[t.id];return void 0===i?(r=new Di,e[t.id]={},e[t.id][n.id]=r):void 0===(r=i[n.id])&&(r=new Di,i[n.id]=r),r},dispose:function(){e={}}}},L=new function(){var e={};return{get:function(t,n){var r;return void 0===e[t.id]?(r=new Ui,e[t.id]={},e[t.id][n.id]=r):void 0===e[t.id][n.id]?(r=new Ui,e[t.id][n.id]=r):r=e[t.id][n.id],r},dispose:function(){e={}}}},R=new function(e,t,n,r){var i,a,o=new Cn(0),s=0,c=null,l=0;function u(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,r)}return{getClearColor:function(){return o},setClearColor:function(e,t){o.set(e),u(o,s=void 0!==t?t:1)},getClearAlpha:function(){return s},setClearAlpha:function(e){u(o,s=e)},render:function(t,r,h,p){var d=r.background;if(null===d?(u(o,s),c=null,l=0):d&&d.isColor&&(u(d,1),p=!0,c=null,l=0),(e.autoClear||p)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),d&&(d.isCubeTexture||d.isWebGLRenderTargetCube)){void 0===a&&((a=new Ar(new cr(1,1,1),new Sr({type:"BackgroundCubeMaterial",uniforms:wn(Ln.cube.uniforms),vertexShader:Ln.cube.vertexShader,fragmentShader:Ln.cube.fragmentShader,side:C,depthTest:!0,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),a.geometry.removeAttribute("uv"),a.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.tCube.value}}),n.update(a));var f=d.isWebGLRenderTargetCube?d.texture:d;a.material.uniforms.tCube.value=f,a.material.uniforms.tFlip.value=d.isWebGLRenderTargetCube?1:-1,c===d&&l===f.version||(a.material.needsUpdate=!0,c=d,l=f.version),t.unshift(a,a.geometry,a.material,0,null)}else d&&d.isTexture&&(void 0===i&&((i=new Ar(new ur(2,2),new Sr({type:"BackgroundMaterial",uniforms:wn(Ln.background.uniforms),vertexShader:Ln.background.vertexShader,fragmentShader:Ln.background.fragmentShader,side:P,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),Object.defineProperty(i.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(i)),i.material.uniforms.t2D.value=d,!0===d.matrixAutoUpdate&&d.updateMatrix(),i.material.uniforms.uvTransform.value.copy(d.matrix),c===d&&l===d.version||(i.material.needsUpdate=!0,c=d,l=d.version),t.unshift(i,i.geometry,i.material,0,null))}}}(G,m,S,s),k=new function(e,t,n,r){var i;this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i)},this.renderInstances=function(a,o,s){var c;if(r.isWebGL2)c=e;else if(null===(c=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");c[r.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](i,o,s,a.maxInstancedCount),n.update(s,i,a.maxInstancedCount)}}(p,d,g,f),H=new function(e,t,n,r){var i,a,o;this.setMode=function(e){i=e},this.setIndex=function(e){a=e.type,o=e.bytesPerElement},this.render=function(t,r){e.drawElements(i,r,a,t*o),n.update(r,i)},this.renderInstances=function(s,c,l){var u;if(r.isWebGL2)u=e;else if(null===(u=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[r.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](i,l,a,c*o,s.maxInstancedCount),n.update(l,i,s.maxInstancedCount)}}(p,d,g,f),g.programs=T.programs,G.context=p,G.capabilities=f,G.extensions=d,G.properties=w,G.renderLists=O,G.state=m,G.info=g}Te();var Pe=null;"undefined"!=typeof navigator&&(Pe="xr"in navigator?new function(e){var t=e.context,n=null,r=null,i=1,a=null,o="stage",s=null,c=[],l=[];function u(){return null!==r&&null!==a}var h=new Yi;h.layers.enable(1),h.viewport=new pn;var p=new Yi;p.layers.enable(2),p.viewport=new pn;var d=new Xi([h,p]);function f(e){var t=c[l.indexOf(e.inputSource)];t&&t.dispatchEvent({type:e.type})}function m(){e.setFramebuffer(null),y.stop()}function v(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}d.layers.enable(1),d.layers.enable(2),this.enabled=!1,this.getController=function(e){var t=c[e];return void 0===t&&((t=new Wi).matrixAutoUpdate=!1,t.visible=!1,c[e]=t),t},this.getDevice=function(){return n},this.setDevice=function(e){void 0!==e&&(n=e),e instanceof XRDevice&&t.setCompatibleXRDevice(e)},this.setFramebufferScaleFactor=function(e){i=e},this.setFrameOfReferenceType=function(e){o=e},this.setSession=function(n){null!==(r=n)&&(r.addEventListener("select",f),r.addEventListener("selectstart",f),r.addEventListener("selectend",f),r.addEventListener("end",m),r.baseLayer=new XRWebGLLayer(r,t,{framebufferScaleFactor:i}),r.requestFrameOfReference(o).then(function(t){a=t,e.setFramebuffer(r.baseLayer.framebuffer),y.setContext(r),y.start()}),l=r.getInputSources(),r.addEventListener("inputsourceschange",function(){l=r.getInputSources(),console.log(l);for(var e=0;e<c.length;e++)c[e].userData.inputSource=l[e]}))},this.getCamera=function(e){if(u()){var t=e.parent,n=d.cameras;v(d,t);for(var r=0;r<n.length;r++)v(n[r],t);e.matrixWorld.copy(d.matrixWorld);for(var i=e.children,a=(r=0,i.length);r<a;r++)i[r].updateMatrixWorld(!0);return ra(d,h,p),d}return e},this.isPresenting=u;var g=null,y=new Rn;y.setAnimationLoop(function(e,t){if(null!==(s=t.getDevicePose(a)))for(var n=r.baseLayer,i=t.views,o=0;o<i.length;o++){var u=i[o],h=n.getViewport(u),p=s.getViewMatrix(u),f=d.cameras[o];f.matrix.fromArray(p).getInverse(f.matrix),f.projectionMatrix.fromArray(u.projectionMatrix),f.viewport.set(h.x,h.y,h.width,h.height),0===o&&d.matrix.copy(f.matrix)}for(o=0;o<c.length;o++){var m=c[o],v=l[o];if(v){var y=t.getInputPose(v,a);if(null!==y){"targetRay"in y?m.matrix.elements=y.targetRay.transformMatrix:"pointerMatrix"in y&&(m.matrix.elements=y.pointerMatrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.visible=!0;continue}}m.visible=!1}g&&g(e)}),this.setAnimationLoop=function(e){g=e},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new THREE.Matrix4},this.submitFrame=function(){}}(G):new ia(G)),this.vr=Pe;var Ce=new Hi(G,S,f.maxTextureSize);function Ae(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),W=!0}function Oe(){console.log("THREE.WebGLRenderer: Context Restored."),W=!1,Te()}function Le(e){var t=e.target;t.removeEventListener("dispose",Le),function(e){Re(e),w.remove(e)}(t)}function Re(e){var t=w.get(e).program;e.program=void 0,void 0!==t&&T.releaseProgram(t)}this.shadowMap=Ce,this.getContext=function(){return p},this.getContextAttributes=function(){return p.getContextAttributes()},this.forceContextLoss=function(){var e=d.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=d.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return de},this.setPixelRatio=function(e){void 0!==e&&(de=e,this.setSize(he,pe,!1))},this.getSize=function(){return{width:he,height:pe}},this.setSize=function(e,n,r){Pe.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(he=e,pe=n,t.width=e*de,t.height=n*de,!1!==r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(){return{width:he*de,height:pe*de}},this.setDrawingBufferSize=function(e,n,r){he=e,pe=n,de=r,t.width=e*r,t.height=n*r,this.setViewport(0,0,e,n)},this.getCurrentViewport=function(){return $},this.setViewport=function(e,t,n,r){fe.set(e,pe-t-r,n,r),m.viewport($.copy(fe).multiplyScalar(de))},this.setScissor=function(e,t,n,r){ve.set(e,pe-t-r,n,r),m.scissor(ee.copy(ve).multiplyScalar(de))},this.setScissorTest=function(e){m.setScissorTest(ge=e)},this.getClearColor=function(){return R.getClearColor()},this.setClearColor=function(){R.setClearColor.apply(R,arguments)},this.getClearAlpha=function(){return R.getClearAlpha()},this.setClearAlpha=function(){R.setClearAlpha.apply(R,arguments)},this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=16384),(void 0===t||t)&&(r|=256),(void 0===n||n)&&(r|=1024),p.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ae,!1),t.removeEventListener("webglcontextrestored",Oe,!1),O.dispose(),L.dispose(),w.dispose(),S.dispose(),Pe.dispose(),Ie.stop()},this.renderBufferImmediate=function(e,t){m.initAttributes();var n=w.get(e);e.hasPositions&&!n.position&&(n.position=p.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=p.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=p.createBuffer()),e.hasColors&&!n.color&&(n.color=p.createBuffer());var r=t.getAttributes();e.hasPositions&&(p.bindBuffer(34962,n.position),p.bufferData(34962,e.positionArray,35048),m.enableAttribute(r.position),p.vertexAttribPointer(r.position,3,5126,!1,0,0)),e.hasNormals&&(p.bindBuffer(34962,n.normal),p.bufferData(34962,e.normalArray,35048),m.enableAttribute(r.normal),p.vertexAttribPointer(r.normal,3,5126,!1,0,0)),e.hasUvs&&(p.bindBuffer(34962,n.uv),p.bufferData(34962,e.uvArray,35048),m.enableAttribute(r.uv),p.vertexAttribPointer(r.uv,2,5126,!1,0,0)),e.hasColors&&(p.bindBuffer(34962,n.color),p.bufferData(34962,e.colorArray,35048),m.enableAttribute(r.color),p.vertexAttribPointer(r.color,3,5126,!1,0,0)),m.disableUnusedAttributes(),p.drawArrays(4,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,i,a){var o=i.isMesh&&i.normalMatrix.determinant()<0;m.setMaterial(r,o);var s=Fe(e,t,r,i),c=!1;Z.geometry===n.id&&Z.program===s.id&&Z.wireframe===(!0===r.wireframe)||(Z.geometry=n.id,Z.program=s.id,Z.wireframe=!0===r.wireframe,c=!0),i.morphTargetInfluences&&(N.update(i,n,r,s),c=!0);var l,u=n.index,h=n.attributes.position,v=1;!0===r.wireframe&&(u=E.getWireframeAttribute(n),v=2);var g=k;null!==u&&(l=M.get(u),(g=H).setIndex(l)),c&&(!function(e,t,n){if(n&&n.isInstancedBufferGeometry&!f.isWebGL2&&null===d.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");m.initAttributes();var r=n.attributes,i=t.getAttributes(),a=e.defaultAttributeValues;for(var o in i){var s=i[o];if(s>=0){var c=r[o];if(void 0!==c){var l=c.normalized,u=c.itemSize,h=M.get(c);if(void 0===h)continue;var v=h.buffer,g=h.type,y=h.bytesPerElement;if(c.isInterleavedBufferAttribute){var b=c.data,x=b.stride,w=c.offset;b&&b.isInstancedInterleavedBuffer?(m.enableAttributeAndDivisor(s,b.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=b.meshPerAttribute*b.count)):m.enableAttribute(s),p.bindBuffer(34962,v),p.vertexAttribPointer(s,u,g,l,x*y,w*y)}else c.isInstancedBufferAttribute?(m.enableAttributeAndDivisor(s,c.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=c.meshPerAttribute*c.count)):m.enableAttribute(s),p.bindBuffer(34962,v),p.vertexAttribPointer(s,u,g,l,0,0)}else if(void 0!==a){var _=a[o];if(void 0!==_)switch(_.length){case 2:p.vertexAttrib2fv(s,_);break;case 3:p.vertexAttrib3fv(s,_);break;case 4:p.vertexAttrib4fv(s,_);break;default:p.vertexAttrib1fv(s,_)}}}}m.disableUnusedAttributes()}(r,s,n),null!==u&&p.bindBuffer(34963,l.buffer));var y=1/0;null!==u?y=u.count:void 0!==h&&(y=h.count);var b=n.drawRange.start*v,x=n.drawRange.count*v,w=null!==a?a.start*v:0,_=null!==a?a.count*v:1/0,S=Math.max(b,w),T=Math.min(y,b+x,w+_)-1,P=Math.max(0,T-S+1);if(0!==P){if(i.isMesh)if(!0===r.wireframe)m.setLineWidth(r.wireframeLinewidth*Ee()),g.setMode(1);else switch(i.drawMode){case Dt:g.setMode(4);break;case zt:g.setMode(5);break;case jt:g.setMode(6)}else if(i.isLine){var C=r.linewidth;void 0===C&&(C=1),m.setLineWidth(C*Ee()),i.isLineSegments?g.setMode(1):i.isLineLoop?g.setMode(2):g.setMode(3)}else i.isPoints?g.setMode(0):i.isSprite&&g.setMode(4);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&g.renderInstances(n,S,P):g.render(S,P)}},this.compile=function(e,t){(h=L.get(e,t)).init(),e.traverse(function(e){e.isLight&&(h.pushLight(e),e.castShadow&&h.pushShadow(e))}),h.setupLights(t),e.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)Ue(t.material[n],e.fog,t);else Ue(t.material,e.fog,t)})};var Ne=null;var ke,Ie=new Rn;function De(e,t,n,r){for(var i=0,a=e.length;i<a;i++){var o=e[i],s=o.object,c=o.geometry,l=void 0===r?o.material:r,u=o.group;if(n.isArrayCamera){Q=n;for(var p=n.cameras,d=0,f=p.length;d<f;d++){var v=p[d];if(s.layers.test(v.layers)){if("viewport"in v)m.viewport($.copy(v.viewport));else{var g=v.bounds,y=g.x*he,b=g.y*pe,x=g.z*he,w=g.w*pe;m.viewport($.set(y,b,x,w).multiplyScalar(de))}h.setupLights(v),je(s,t,v,c,l,u)}}}else Q=null,je(s,t,n,c,l,u)}}function je(e,t,n,r,i,a){if(e.onBeforeRender(G,t,n,r,i,a),h=L.get(t,Q||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){m.setMaterial(i);var o=Fe(n,t.fog,i,e);Z.geometry=null,Z.program=null,Z.wireframe=!1,function(e,t){e.render(function(e){G.renderBufferImmediate(e,t)})}(e,o)}else G.renderBufferDirect(n,t.fog,r,i,e,a);e.onAfterRender(G,t,n,r,i,a),h=L.get(t,Q||n)}function Ue(e,t,n){var r=w.get(e),i=h.state.lights,a=h.state.shadowsArray,o=r.lightsHash,s=i.state.hash,c=T.getParameters(e,i.state,a,t,be.numPlanes,be.numIntersection,n),l=T.getProgramCode(e,c),u=r.program,p=!0;if(void 0===u)e.addEventListener("dispose",Le);else if(u.code!==l)Re(e);else if(o.stateID!==s.stateID||o.directionalLength!==s.directionalLength||o.pointLength!==s.pointLength||o.spotLength!==s.spotLength||o.rectAreaLength!==s.rectAreaLength||o.hemiLength!==s.hemiLength||o.shadowsLength!==s.shadowsLength)o.stateID=s.stateID,o.directionalLength=s.directionalLength,o.pointLength=s.pointLength,o.spotLength=s.spotLength,o.rectAreaLength=s.rectAreaLength,o.hemiLength=s.hemiLength,o.shadowsLength=s.shadowsLength,p=!1;else{if(void 0!==c.shaderID)return;p=!1}if(p){if(c.shaderID){var d=Ln[c.shaderID];r.shader={name:e.type,uniforms:wn(d.uniforms),vertexShader:d.vertexShader,fragmentShader:d.fragmentShader}}else r.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(r.shader,G),l=T.getProgramCode(e,c),u=T.acquireProgram(e,r.shader,c,l),r.program=u,e.program=u}var f=u.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var m=0;m<G.maxMorphTargets;m++)f["morphTarget"+m]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(m=0;m<G.maxMorphNormals;m++)f["morphNormal"+m]>=0&&e.numSupportedMorphNormals++}var v=r.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=be.numPlanes,r.numIntersection=be.numIntersection,v.clippingPlanes=be.uniform),r.fog=t,void 0===o&&(r.lightsHash=o={}),o.stateID=s.stateID,o.directionalLength=s.directionalLength,o.pointLength=s.pointLength,o.spotLength=s.spotLength,o.rectAreaLength=s.rectAreaLength,o.hemiLength=s.hemiLength,o.shadowsLength=s.shadowsLength,e.lights&&(v.ambientLightColor.value=i.state.ambient,v.directionalLights.value=i.state.directional,v.spotLights.value=i.state.spot,v.rectAreaLights.value=i.state.rectArea,v.pointLights.value=i.state.point,v.hemisphereLights.value=i.state.hemi,v.directionalShadowMap.value=i.state.directionalShadowMap,v.directionalShadowMatrix.value=i.state.directionalShadowMatrix,v.spotShadowMap.value=i.state.spotShadowMap,v.spotShadowMatrix.value=i.state.spotShadowMatrix,v.pointShadowMap.value=i.state.pointShadowMap,v.pointShadowMatrix.value=i.state.pointShadowMatrix);var g=r.program.getUniforms(),y=_i.seqWithValue(g.seq,v);r.uniformsList=y}function Fe(e,t,n,r){ne=0;var i=w.get(n),a=h.state.lights,o=i.lightsHash,s=a.state.hash;if(xe&&(we||e!==K)){var c=e===K&&n.id===J;be.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,i,c)}!1===n.needsUpdate&&(void 0===i.program?n.needsUpdate=!0:n.fog&&i.fog!==t?n.needsUpdate=!0:(!n.lights||o.stateID===s.stateID&&o.directionalLength===s.directionalLength&&o.pointLength===s.pointLength&&o.spotLength===s.spotLength&&o.rectAreaLength===s.rectAreaLength&&o.hemiLength===s.hemiLength&&o.shadowsLength===s.shadowsLength)&&(void 0===i.numClippingPlanes||i.numClippingPlanes===be.numPlanes&&i.numIntersection===be.numIntersection)||(n.needsUpdate=!0)),n.needsUpdate&&(Ue(n,t,r),n.needsUpdate=!1);var l,u,d=!1,v=!1,g=!1,y=i.program,b=y.getUniforms(),x=i.shader.uniforms;if(m.useProgram(y.program)&&(d=!0,v=!0,g=!0),n.id!==J&&(J=n.id,v=!0),d||K!==e){if(b.setValue(p,"projectionMatrix",e.projectionMatrix),f.logarithmicDepthBuffer&&b.setValue(p,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),K!==e&&(K=e,v=!0,g=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var _=b.map.cameraPosition;void 0!==_&&_.setValue(p,Me.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&b.setValue(p,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){b.setOptional(p,r,"bindMatrix"),b.setOptional(p,r,"bindMatrixInverse");var M=r.skeleton;if(M){var E=M.bones;if(f.floatVertexTextures){if(void 0===M.boneTexture){var S=Math.sqrt(4*E.length);S=Kt.ceilPowerOfTwo(S),S=Math.max(S,4);var T=new Float32Array(S*S*4);T.set(M.boneMatrices);var P=new mn(T,S,S,Ke,Ve);P.needsUpdate=!0,M.boneMatrices=T,M.boneTexture=P,M.boneTextureSize=S}b.setValue(p,"boneTexture",M.boneTexture),b.setValue(p,"boneTextureSize",M.boneTextureSize)}else b.setOptional(p,M,"boneMatrices")}}return v&&(b.setValue(p,"toneMappingExposure",G.toneMappingExposure),b.setValue(p,"toneMappingWhitePoint",G.toneMappingWhitePoint),n.lights&&(u=g,(l=x).ambientLightColor.needsUpdate=u,l.directionalLights.needsUpdate=u,l.pointLights.needsUpdate=u,l.spotLights.needsUpdate=u,l.rectAreaLights.needsUpdate=u,l.hemisphereLights.needsUpdate=u),t&&n.fog&&function(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(x,t),n.isMeshBasicMaterial?Be(x,n):n.isMeshLambertMaterial?(Be(x,n),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(x,n)):n.isMeshPhongMaterial?(Be(x,n),n.isMeshToonMaterial?function(e,t){He(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(x,n):He(x,n)):n.isMeshStandardMaterial?(Be(x,n),n.isMeshPhysicalMaterial?function(e,t){We(e,t),e.reflectivity.value=t.reflectivity,e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness}(x,n):We(x,n)):n.isMeshMatcapMaterial?(Be(x,n),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===C&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===C&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(x,n)):n.isMeshDepthMaterial?(Be(x,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(x,n)):n.isMeshDistanceMaterial?(Be(x,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(x,n)):n.isMeshNormalMaterial?(Be(x,n),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===C&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===C&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(x,n)):n.isLineBasicMaterial?(function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}(x,n),n.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(x,n)):n.isPointsMaterial?function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*de,e.scale.value=.5*pe,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(x,n):n.isSpriteMaterial?function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity,e.rotation.value=t.rotation,e.map.value=t.map,null!==t.map&&(!0===t.map.matrixAutoUpdate&&t.map.updateMatrix(),e.uvTransform.value.copy(t.map.matrix))}(x,n):n.isShadowMaterial&&(x.color.value=n.color,x.opacity.value=n.opacity),void 0!==x.ltc_1&&(x.ltc_1.value=On.LTC_1),void 0!==x.ltc_2&&(x.ltc_2.value=On.LTC_2),_i.upload(p,i.uniformsList,x,G)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(_i.upload(p,i.uniformsList,x,G),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&b.setValue(p,"center",r.center),b.setValue(p,"modelViewMatrix",r.modelViewMatrix),b.setValue(p,"normalMatrix",r.normalMatrix),b.setValue(p,"modelMatrix",r.matrixWorld),y}function Be(e,t){var n;e.opacity.value=t.opacity,t.color&&(e.diffuse.value=t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=w.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}function He(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===C&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===C&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function We(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===C&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===C&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}Ie.setAnimationLoop(function(e){Pe.isPresenting()||Ne&&Ne(e)}),"undefined"!=typeof window&&Ie.setContext(window),this.setAnimationLoop=function(e){Ne=e,Pe.setAnimationLoop(e),Ie.start()},this.render=function(e,t,n,r){if(t&&t.isCamera){if(!W){Z.geometry=null,Z.program=null,Z.wireframe=!1,J=-1,K=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),Pe.enabled&&(t=Pe.getCamera(t)),(h=L.get(e,t)).init(),e.onBeforeRender(G,e,t,n),_e.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),ye.setFromMatrix(_e),we=this.localClippingEnabled,xe=be.init(this.clippingPlanes,we,t),(u=O.get(e,t)).init(),function e(t,n,r){if(!1===t.visible)return;var i=t.layers.test(n.layers);if(i)if(t.isLight)h.pushLight(t),t.castShadow&&h.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||ye.intersectsSprite(t)){r&&Me.setFromMatrixPosition(t.matrixWorld).applyMatrix4(_e);var a=S.update(t),o=t.material;u.push(t,a,o,Me.z,null)}}else if(t.isImmediateRenderObject)r&&Me.setFromMatrixPosition(t.matrixWorld).applyMatrix4(_e),u.push(t,null,t.material,Me.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||ye.intersectsObject(t))){r&&Me.setFromMatrixPosition(t.matrixWorld).applyMatrix4(_e);var a=S.update(t),o=t.material;if(Array.isArray(o))for(var s=a.groups,c=0,l=s.length;c<l;c++){var p=s[c],d=o[p.materialIndex];d&&d.visible&&u.push(t,a,d,Me.z,p)}else o.visible&&u.push(t,a,o,Me.z,null)}var f=t.children;for(var c=0,l=f.length;c<l;c++)e(f[c],n,r)}(e,t,G.sortObjects),!0===G.sortObjects&&u.sort(),xe&&be.beginShadows();var i=h.state.shadowsArray;Ce.render(i,e,t),h.setupLights(t),xe&&be.endShadows(),this.info.autoReset&&this.info.reset(),void 0===n&&(n=null),this.setRenderTarget(n),R.render(u,e,t,r);var a=u.opaque,o=u.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;a.length&&De(a,e,t,s),o.length&&De(o,e,t,s)}else a.length&&De(a,e,t),o.length&&De(o,e,t);n&&_.updateRenderTargetMipmap(n),m.buffers.depth.setTest(!0),m.buffers.depth.setMask(!0),m.buffers.color.setMask(!0),m.setPolygonOffset(!1),e.onAfterRender(G,e,t),Pe.enabled&&Pe.submitFrame(),u=null,h=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.allocTextureUnit=function(){var e=ne;return e>=f.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+f.maxTextures),ne+=1,e},this.setTexture2D=(ke=!1,function(e,t){e&&e.isWebGLRenderTarget&&(ke||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),ke=!0),e=e.texture),_.setTexture2D(e,t)}),this.setTexture3D=function(e,t){_.setTexture3D(e,t)},this.setTexture=function(){var e=!1;return function(t,n){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),_.setTexture2D(t,n)}}(),this.setTextureCube=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?_.setTextureCube(t,n):_.setTextureCubeDynamic(t,n)}}(),this.setFramebuffer=function(e){q=e},this.getRenderTarget=function(){return Y},this.setRenderTarget=function(e){Y=e,e&&void 0===w.get(e).__webglFramebuffer&&_.setupRenderTarget(e);var t=q,n=!1;if(e){var r=w.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(t=r[e.activeCubeFace],n=!0):t=r,$.copy(e.viewport),ee.copy(e.scissor),te=e.scissorTest}else $.copy(fe).multiplyScalar(de),ee.copy(ve).multiplyScalar(de),te=ge;if(X!==t&&(p.bindFramebuffer(36160,t),X=t),m.viewport($),m.scissor(ee),m.setScissorTest(te),n){var i=w.get(e.texture);p.framebufferTexture2D(36160,36064,34069+e.activeCubeFace,i.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,n,r,i,a){if(e&&e.isWebGLRenderTarget){var o=w.get(e).__webglFramebuffer;if(o){var s=!1;o!==X&&(p.bindFramebuffer(36160,o),s=!0);try{var c=e.texture,l=c.format,u=c.type;if(l!==Ke&&V.convert(l)!==p.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(u===ze||V.convert(u)===p.getParameter(35738)||u===Ve&&(f.isWebGL2||d.get("OES_texture_float")||d.get("WEBGL_color_buffer_float"))||u===Ge&&(f.isWebGL2?d.get("EXT_color_buffer_float"):d.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===p.checkFramebufferStatus(36160)?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&p.readPixels(t,n,r,i,V.convert(l),V.convert(u),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&p.bindFramebuffer(36160,X)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,n){var r=t.image.width,i=t.image.height,a=V.convert(t.format);this.setTexture2D(t,0),p.copyTexImage2D(3553,n||0,a,e.x,e.y,r,i,0)},this.copyTextureToTexture=function(e,t,n,r){var i=t.image.width,a=t.image.height,o=V.convert(n.format),s=V.convert(n.type);this.setTexture2D(n,0),t.isDataTexture?p.texSubImage2D(3553,r||0,e.x,e.y,i,a,o,s,t.image.data):p.texSubImage2D(3553,r||0,e.x,e.y,o,s,t.image)}}function oa(e,t){this.name="",this.color=new Cn(e),this.density=void 0!==t?t:25e-5}function sa(e,t,n){this.name="",this.color=new Cn(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function ca(){Hn.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function la(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function ua(e,t,n,r){this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}function ha(e){Er.call(this),this.type="SpriteMaterial",this.color=new Cn(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(e)}function pa(e){if(Hn.call(this),this.type="Sprite",void 0===Ji){Ji=new or;var t=new la(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);Ji.setIndex([0,1,2,0,2,3]),Ji.addAttribute("position",new ua(t,3,0,!1)),Ji.addAttribute("uv",new ua(t,2,3,!1))}this.geometry=Ji,this.material=void 0!==e?e:new ha,this.center=new Qt(.5,.5)}function da(){Hn.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function fa(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Ar.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new $t,this.bindMatrixInverse=new $t}function ma(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new $t)}}function va(){Hn.call(this),this.type="Bone"}function ga(e){Er.call(this),this.type="LineBasicMaterial",this.color=new Cn(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function ya(e,t,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Hn.call(this),this.type="Line",this.geometry=void 0!==e?e:new or,this.material=void 0!==t?t:new ga({color:16777215*Math.random()})}function ba(e,t){ya.call(this,e,t),this.type="LineSegments"}function xa(e,t){ya.call(this,e,t),this.type="LineLoop"}function wa(e){Er.call(this),this.type="PointsMaterial",this.color=new Cn(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function _a(e,t){Hn.call(this),this.type="Points",this.geometry=void 0!==e?e:new or,this.material=void 0!==t?t:new wa({color:16777215*Math.random()})}function Ma(e,t,n,r,i,a,o,s,c){hn.call(this,e,t,n,r,i,a,o,s,c),this.format=void 0!==o?o:Ze,this.minFilter=void 0!==a?a:ke,this.magFilter=void 0!==i?i:ke,this.generateMipmaps=!1}function Ea(e,t,n,r,i,a,o,s,c,l,u,h){hn.call(this,null,a,o,s,c,l,r,i,u,h),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function Sa(e,t,n,r,i,a,o,s,c){hn.call(this,e,t,n,r,i,a,o,s,c),this.needsUpdate=!0}function Ta(e,t,n,r,i,a,o,s,c,l){if((l=void 0!==l?l:tt)!==tt&&l!==nt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&l===tt&&(n=Fe),void 0===n&&l===nt&&(n=Xe),hn.call(this,null,r,i,a,o,s,l,n,c),this.image={width:e,height:t},this.magFilter=void 0!==o?o:Le,this.minFilter=void 0!==s?s:Le,this.flipY=!1,this.generateMipmaps=!1}function Pa(e){or.call(this),this.type="WireframeGeometry";var t,n,r,i,a,o,s,c,l,u,h=[],p=[0,0],d={},f=["a","b","c"];if(e&&e.isGeometry){var m=e.faces;for(t=0,r=m.length;t<r;t++){var v=m[t];for(n=0;n<3;n++)s=v[f[n]],c=v[f[(n+1)%3]],p[0]=Math.min(s,c),p[1]=Math.max(s,c),void 0===d[l=p[0]+","+p[1]]&&(d[l]={index1:p[0],index2:p[1]})}for(l in d)o=d[l],u=e.vertices[o.index1],h.push(u.x,u.y,u.z),u=e.vertices[o.index2],h.push(u.x,u.y,u.z)}else if(e&&e.isBufferGeometry){var g,y,b,x,w,_,M;if(u=new tn,null!==e.index){for(g=e.attributes.position,y=e.index,0===(b=e.groups).length&&(b=[{start:0,count:y.count,materialIndex:0}]),i=0,a=b.length;i<a;++i)for(t=w=(x=b[i]).start,r=w+x.count;t<r;t+=3)for(n=0;n<3;n++)s=y.getX(t+n),c=y.getX(t+(n+1)%3),p[0]=Math.min(s,c),p[1]=Math.max(s,c),void 0===d[l=p[0]+","+p[1]]&&(d[l]={index1:p[0],index2:p[1]});for(l in d)o=d[l],u.fromBufferAttribute(g,o.index1),h.push(u.x,u.y,u.z),u.fromBufferAttribute(g,o.index2),h.push(u.x,u.y,u.z)}else for(t=0,r=(g=e.attributes.position).count/3;t<r;t++)for(n=0;n<3;n++)_=3*t+n,u.fromBufferAttribute(g,_),h.push(u.x,u.y,u.z),M=3*t+(n+1)%3,u.fromBufferAttribute(g,M),h.push(u.x,u.y,u.z)}this.addAttribute("position",new tr(h,3))}function Ca(e,t,n){qn.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new Aa(e,t,n)),this.mergeVertices()}function Aa(e,t,n){or.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var r,i,a=[],o=[],s=[],c=[],l=new tn,u=new tn,h=new tn,p=new tn,d=new tn;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var f=t+1;for(r=0;r<=n;r++){var m=r/n;for(i=0;i<=t;i++){var v=i/t;e(v,m,u),o.push(u.x,u.y,u.z),v-1e-5>=0?(e(v-1e-5,m,h),p.subVectors(u,h)):(e(v+1e-5,m,h),p.subVectors(h,u)),m-1e-5>=0?(e(v,m-1e-5,h),d.subVectors(u,h)):(e(v,m+1e-5,h),d.subVectors(h,u)),l.crossVectors(p,d).normalize(),s.push(l.x,l.y,l.z),c.push(v,m)}}for(r=0;r<n;r++)for(i=0;i<t;i++){var g=r*f+i,y=r*f+i+1,b=(r+1)*f+i+1,x=(r+1)*f+i;a.push(g,y,x),a.push(y,b,x)}this.setIndex(a),this.addAttribute("position",new tr(o,3)),this.addAttribute("normal",new tr(s,3)),this.addAttribute("uv",new tr(c,2))}function Oa(e,t,n,r){qn.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},this.fromBufferGeometry(new La(e,t,n,r)),this.mergeVertices()}function La(e,t,n,r){or.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},n=n||1;var i=[],a=[];function o(e,t,n,r){var i,a,o=Math.pow(2,r),c=[];for(i=0;i<=o;i++){c[i]=[];var l=e.clone().lerp(n,i/o),u=t.clone().lerp(n,i/o),h=o-i;for(a=0;a<=h;a++)c[i][a]=0===a&&i===o?l:l.clone().lerp(u,a/h)}for(i=0;i<o;i++)for(a=0;a<2*(o-i)-1;a++){var p=Math.floor(a/2);a%2==0?(s(c[i][p+1]),s(c[i+1][p]),s(c[i][p])):(s(c[i][p+1]),s(c[i+1][p+1]),s(c[i+1][p]))}}function s(e){i.push(e.x,e.y,e.z)}function c(t,n){var r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function l(e,t,n,r){r<0&&1===e.x&&(a[t]=e.x-1),0===n.x&&0===n.z&&(a[t]=r/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}!function(e){for(var n=new tn,r=new tn,i=new tn,a=0;a<t.length;a+=3)c(t[a+0],n),c(t[a+1],r),c(t[a+2],i),o(n,r,i,e)}(r=r||0),function(e){for(var t=new tn,n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){for(var e=new tn,t=0;t<i.length;t+=3){e.x=i[t+0],e.y=i[t+1],e.z=i[t+2];var n=u(e)/2/Math.PI+.5,r=(o=e,Math.atan2(-o.y,Math.sqrt(o.x*o.x+o.z*o.z))/Math.PI+.5);a.push(n,1-r)}var o;(function(){for(var e=new tn,t=new tn,n=new tn,r=new tn,o=new Qt,s=new Qt,c=new Qt,h=0,p=0;h<i.length;h+=9,p+=6){e.set(i[h+0],i[h+1],i[h+2]),t.set(i[h+3],i[h+4],i[h+5]),n.set(i[h+6],i[h+7],i[h+8]),o.set(a[p+0],a[p+1]),s.set(a[p+2],a[p+3]),c.set(a[p+4],a[p+5]),r.copy(e).add(t).add(n).divideScalar(3);var d=u(r);l(o,p+0,e,d),l(s,p+2,t,d),l(c,p+4,n,d)}})(),function(){for(var e=0;e<a.length;e+=6){var t=a[e+0],n=a[e+2],r=a[e+4],i=Math.max(t,n,r),o=Math.min(t,n,r);i>.9&&o<.1&&(t<.2&&(a[e+0]+=1),n<.2&&(a[e+2]+=1),r<.2&&(a[e+4]+=1))}}()}(),this.addAttribute("position",new tr(i,3)),this.addAttribute("normal",new tr(i.slice(),3)),this.addAttribute("uv",new tr(a,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}function Ra(e,t){qn.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Na(e,t)),this.mergeVertices()}function Na(e,t){La.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function ka(e,t){qn.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Ia(e,t)),this.mergeVertices()}function Ia(e,t){La.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Da(e,t){qn.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new za(e,t)),this.mergeVertices()}function za(e,t){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1];La.call(this,r,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function ja(e,t){qn.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Ua(e,t)),this.mergeVertices()}function Ua(e,t){var n=(1+Math.sqrt(5))/2,r=1/n,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r];La.call(this,i,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Fa(e,t,n,r,i,a){qn.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed.");var o=new Ba(e,t,n,r,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals,this.fromBufferGeometry(o),this.mergeVertices()}function Ba(e,t,n,r,i){or.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i},t=t||64,n=n||1,r=r||8,i=i||!1;var a=e.computeFrenetFrames(t,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;var o,s,c=new tn,l=new tn,u=new Qt,h=new tn,p=[],d=[],f=[],m=[];function v(i){h=e.getPointAt(i/t,h);var o=a.normals[i],u=a.binormals[i];for(s=0;s<=r;s++){var f=s/r*Math.PI*2,m=Math.sin(f),v=-Math.cos(f);l.x=v*o.x+m*u.x,l.y=v*o.y+m*u.y,l.z=v*o.z+m*u.z,l.normalize(),d.push(l.x,l.y,l.z),c.x=h.x+n*l.x,c.y=h.y+n*l.y,c.z=h.z+n*l.z,p.push(c.x,c.y,c.z)}}!function(){for(o=0;o<t;o++)v(o);v(!1===i?t:0),function(){for(o=0;o<=t;o++)for(s=0;s<=r;s++)u.x=o/t,u.y=s/r,f.push(u.x,u.y)}(),function(){for(s=1;s<=t;s++)for(o=1;o<=r;o++){var e=(r+1)*(s-1)+(o-1),n=(r+1)*s+(o-1),i=(r+1)*s+o,a=(r+1)*(s-1)+o;m.push(e,n,a),m.push(n,i,a)}}()}(),this.setIndex(m),this.addAttribute("position",new tr(p,3)),this.addAttribute("normal",new tr(d,3)),this.addAttribute("uv",new tr(f,2))}function Ha(e,t,n,r,i,a,o){qn.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:a},void 0!==o&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Va(e,t,n,r,i,a)),this.mergeVertices()}function Va(e,t,n,r,i,a){or.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:a},e=e||1,t=t||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,a=a||3;var o,s,c=[],l=[],u=[],h=[],p=new tn,d=new tn,f=new tn,m=new tn,v=new tn,g=new tn,y=new tn;for(o=0;o<=n;++o){var b=o/n*i*Math.PI*2;for(P(b,i,a,e,f),P(b+.01,i,a,e,m),g.subVectors(m,f),y.addVectors(m,f),v.crossVectors(g,y),y.crossVectors(v,g),v.normalize(),y.normalize(),s=0;s<=r;++s){var x=s/r*Math.PI*2,w=-t*Math.cos(x),_=t*Math.sin(x);p.x=f.x+(w*y.x+_*v.x),p.y=f.y+(w*y.y+_*v.y),p.z=f.z+(w*y.z+_*v.z),l.push(p.x,p.y,p.z),d.subVectors(p,f).normalize(),u.push(d.x,d.y,d.z),h.push(o/n),h.push(s/r)}}for(s=1;s<=n;s++)for(o=1;o<=r;o++){var M=(r+1)*(s-1)+(o-1),E=(r+1)*s+(o-1),S=(r+1)*s+o,T=(r+1)*(s-1)+o;c.push(M,E,T),c.push(E,S,T)}function P(e,t,n,r,i){var a=Math.cos(e),o=Math.sin(e),s=n/t*e,c=Math.cos(s);i.x=r*(2+c)*.5*a,i.y=r*(2+c)*o*.5,i.z=r*Math.sin(s)*.5}this.setIndex(c),this.addAttribute("position",new tr(l,3)),this.addAttribute("normal",new tr(u,3)),this.addAttribute("uv",new tr(h,2))}function Ga(e,t,n,r,i){qn.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new Wa(e,t,n,r,i)),this.mergeVertices()}function Wa(e,t,n,r,i){or.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},e=e||1,t=t||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;var a,o,s=[],c=[],l=[],u=[],h=new tn,p=new tn,d=new tn;for(a=0;a<=n;a++)for(o=0;o<=r;o++){var f=o/r*i,m=a/n*Math.PI*2;p.x=(e+t*Math.cos(m))*Math.cos(f),p.y=(e+t*Math.cos(m))*Math.sin(f),p.z=t*Math.sin(m),c.push(p.x,p.y,p.z),h.x=e*Math.cos(f),h.y=e*Math.sin(f),d.subVectors(p,h).normalize(),l.push(d.x,d.y,d.z),u.push(o/r),u.push(a/n)}for(a=1;a<=n;a++)for(o=1;o<=r;o++){var v=(r+1)*a+o-1,g=(r+1)*(a-1)+o-1,y=(r+1)*(a-1)+o,b=(r+1)*a+o;s.push(v,g,b),s.push(g,y,b)}this.setIndex(s),this.addAttribute("position",new tr(c,3)),this.addAttribute("normal",new tr(l,3)),this.addAttribute("uv",new tr(u,2))}oa.prototype.isFogExp2=!0,oa.prototype.clone=function(){return new oa(this.color,this.density)},oa.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},sa.prototype.isFog=!0,sa.prototype.clone=function(){return new sa(this.color,this.near,this.far)},sa.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},ca.prototype=Object.assign(Object.create(Hn.prototype),{constructor:ca,copy:function(e,t){return Hn.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=Hn.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}),Object.defineProperty(la.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(la.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.stride:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Object.defineProperties(ua.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(ua.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}}),ha.prototype=Object.create(Er.prototype),ha.prototype.constructor=ha,ha.prototype.isSpriteMaterial=!0,ha.prototype.copy=function(e){return Er.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this},pa.prototype=Object.assign(Object.create(Hn.prototype),{constructor:pa,isSprite:!0,raycast:function(){var e=new tn,t=new tn,n=new tn,r=new Qt,i=new Qt,a=new $t,o=new tn,s=new tn,c=new tn,l=new Qt,u=new Qt,h=new Qt;function p(e,t,n,o,s,c){r.subVectors(e,n).addScalar(.5).multiply(o),void 0!==s?(i.x=c*r.x-s*r.y,i.y=s*r.x+c*r.y):i.copy(r),e.copy(t),e.x+=i.x,e.y+=i.y,e.applyMatrix4(a)}return function(r,i){t.setFromMatrixScale(this.matrixWorld),a.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld),n.setFromMatrixPosition(this.modelViewMatrix);var d,f,m=this.material.rotation;0!==m&&(f=Math.cos(m),d=Math.sin(m));var v=this.center;p(o.set(-.5,-.5,0),n,v,t,d,f),p(s.set(.5,-.5,0),n,v,t,d,f),p(c.set(.5,.5,0),n,v,t,d,f),l.set(0,0),u.set(1,0),h.set(1,1);var g=r.ray.intersectTriangle(o,s,c,!1,e);if(null!==g||(p(s.set(-.5,.5,0),n,v,t,d,f),u.set(0,1),null!==(g=r.ray.intersectTriangle(o,c,s,!1,e)))){var y=r.ray.origin.distanceTo(e);y<r.near||y>r.far||i.push({distance:y,point:e.clone(),uv:Pr.getUV(e,o,s,c,l,u,h,new Qt),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return Hn.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}}),da.prototype=Object.assign(Object.create(Hn.prototype),{constructor:da,copy:function(e){Hn.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,r=t.length;n<r;n++){var i=t[n];this.addLevel(i.object.clone(),i.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,r=0;r<n.length&&!(t<n[r].distance);r++);n.splice(r,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object},raycast:(Zi=new tn,function(e,t){Zi.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(Zi);this.getObjectForDistance(n).raycast(e,t)}),update:function(){var e=new tn,t=new tn;return function(n){var r=this.levels;if(r.length>1){e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var i=e.distanceTo(t);r[0].object.visible=!0;for(var a=1,o=r.length;a<o&&i>=r[a].distance;a++)r[a-1].object.visible=!1,r[a].object.visible=!0;for(;a<o;a++)r[a].object.visible=!1}}}(),toJSON:function(e){var t=Hn.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var a=n[r];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t}}),fa.prototype=Object.assign(Object.create(Ar.prototype),{constructor:fa,isSkinnedMesh:!0,bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var e=new pn,t=this.geometry.attributes.skinWeight,n=0,r=t.count;n<r;n++){e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.w=t.getW(n);var i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){Ar.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Object.assign(ma.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new $t;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){var e,t,n;for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:(Ki=new $t,Qi=new $t,function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,a=e.length;i<a;i++){var o=e[i]?e[i].matrixWorld:Qi;Ki.multiplyMatrices(o,t[i]),Ki.toArray(n,16*i)}void 0!==r&&(r.needsUpdate=!0)}),clone:function(){return new ma(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var r=this.bones[t];if(r.name===e)return r}}}),va.prototype=Object.assign(Object.create(Hn.prototype),{constructor:va,isBone:!0}),ga.prototype=Object.create(Er.prototype),ga.prototype.constructor=ga,ga.prototype.isLineBasicMaterial=!0,ga.prototype.copy=function(e){return Er.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},ya.prototype=Object.assign(Object.create(Hn.prototype),{constructor:ya,isLine:!0,computeLineDistances:($i=new tn,ea=new tn,function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[0],r=1,i=t.count;r<i;r++)$i.fromBufferAttribute(t,r-1),ea.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=$i.distanceTo(ea);e.addAttribute("lineDistance",new tr(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var a=e.vertices;for((n=e.lineDistances)[0]=0,r=1,i=a.length;r<i;r++)n[r]=n[r-1],n[r]+=a[r-1].distanceTo(a[r])}return this}),raycast:function(){var e=new $t,t=new Tr,n=new gn;return function(r,i){var a=r.linePrecision,o=this.geometry,s=this.matrixWorld;if(null===o.boundingSphere&&o.computeBoundingSphere(),n.copy(o.boundingSphere),n.applyMatrix4(s),n.radius+=a,!1!==r.ray.intersectsSphere(n)){e.getInverse(s),t.copy(r.ray).applyMatrix4(e);var c=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=c*c,u=new tn,h=new tn,p=new tn,d=new tn,f=this&&this.isLineSegments?2:1;if(o.isBufferGeometry){var m=o.index,v=o.attributes.position.array;if(null!==m)for(var g=m.array,y=0,b=g.length-1;y<b;y+=f){var x=g[y],w=g[y+1];if(u.fromArray(v,3*x),h.fromArray(v,3*w),!(t.distanceSqToSegment(u,h,d,p)>l))d.applyMatrix4(this.matrixWorld),(E=r.ray.origin.distanceTo(d))<r.near||E>r.far||i.push({distance:E,point:p.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}else for(y=0,b=v.length/3-1;y<b;y+=f){if(u.fromArray(v,3*y),h.fromArray(v,3*y+3),!(t.distanceSqToSegment(u,h,d,p)>l))d.applyMatrix4(this.matrixWorld),(E=r.ray.origin.distanceTo(d))<r.near||E>r.far||i.push({distance:E,point:p.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else if(o.isGeometry){var _=o.vertices,M=_.length;for(y=0;y<M-1;y+=f){var E;if(!(t.distanceSqToSegment(_[y],_[y+1],d,p)>l))d.applyMatrix4(this.matrixWorld),(E=r.ray.origin.distanceTo(d))<r.near||E>r.far||i.push({distance:E,point:p.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}}}(),copy:function(e){return Hn.prototype.copy.call(this,e),this.geometry.copy(e.geometry),this.material.copy(e.material),this},clone:function(){return(new this.constructor).copy(this)}}),ba.prototype=Object.assign(Object.create(ya.prototype),{constructor:ba,isLineSegments:!0,computeLineDistances:function(){var e=new tn,t=new tn;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var r=n.attributes.position,i=[],a=0,o=r.count;a<o;a+=2)e.fromBufferAttribute(r,a),t.fromBufferAttribute(r,a+1),i[a]=0===a?0:i[a-1],i[a+1]=i[a]+e.distanceTo(t);n.addAttribute("lineDistance",new tr(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices;for(i=n.lineDistances,a=0,o=s.length;a<o;a+=2)e.copy(s[a]),t.copy(s[a+1]),i[a]=0===a?0:i[a-1],i[a+1]=i[a]+e.distanceTo(t)}return this}}()}),xa.prototype=Object.assign(Object.create(ya.prototype),{constructor:xa,isLineLoop:!0}),wa.prototype=Object.create(Er.prototype),wa.prototype.constructor=wa,wa.prototype.isPointsMaterial=!0,wa.prototype.copy=function(e){return Er.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this},_a.prototype=Object.assign(Object.create(Hn.prototype),{constructor:_a,isPoints:!0,raycast:function(){var e=new $t,t=new Tr,n=new gn;return function(r,i){var a=this,o=this.geometry,s=this.matrixWorld,c=r.params.Points.threshold;if(null===o.boundingSphere&&o.computeBoundingSphere(),n.copy(o.boundingSphere),n.applyMatrix4(s),n.radius+=c,!1!==r.ray.intersectsSphere(n)){e.getInverse(s),t.copy(r.ray).applyMatrix4(e);var l=c/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,h=new tn,p=new tn;if(o.isBufferGeometry){var d=o.index,f=o.attributes.position.array;if(null!==d)for(var m=d.array,v=0,g=m.length;v<g;v++){var y=m[v];h.fromArray(f,3*y),w(h,y)}else{v=0;for(var b=f.length/3;v<b;v++)h.fromArray(f,3*v),w(h,v)}}else{var x=o.vertices;for(v=0,b=x.length;v<b;v++)w(x[v],v)}}function w(e,n){var o=t.distanceSqToPoint(e);if(o<u){t.closestPointToPoint(e,p),p.applyMatrix4(s);var c=r.ray.origin.distanceTo(p);if(c<r.near||c>r.far)return;i.push({distance:c,distanceToRay:Math.sqrt(o),point:p.clone(),index:n,face:null,object:a})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ma.prototype=Object.assign(Object.create(hn.prototype),{constructor:Ma,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Ea.prototype=Object.create(hn.prototype),Ea.prototype.constructor=Ea,Ea.prototype.isCompressedTexture=!0,Sa.prototype=Object.create(hn.prototype),Sa.prototype.constructor=Sa,Sa.prototype.isCanvasTexture=!0,Ta.prototype=Object.create(hn.prototype),Ta.prototype.constructor=Ta,Ta.prototype.isDepthTexture=!0,Pa.prototype=Object.create(or.prototype),Pa.prototype.constructor=Pa,Ca.prototype=Object.create(qn.prototype),Ca.prototype.constructor=Ca,Aa.prototype=Object.create(or.prototype),Aa.prototype.constructor=Aa,Oa.prototype=Object.create(qn.prototype),Oa.prototype.constructor=Oa,La.prototype=Object.create(or.prototype),La.prototype.constructor=La,Ra.prototype=Object.create(qn.prototype),Ra.prototype.constructor=Ra,Na.prototype=Object.create(La.prototype),Na.prototype.constructor=Na,ka.prototype=Object.create(qn.prototype),ka.prototype.constructor=ka,Ia.prototype=Object.create(La.prototype),Ia.prototype.constructor=Ia,Da.prototype=Object.create(qn.prototype),Da.prototype.constructor=Da,za.prototype=Object.create(La.prototype),za.prototype.constructor=za,ja.prototype=Object.create(qn.prototype),ja.prototype.constructor=ja,Ua.prototype=Object.create(La.prototype),Ua.prototype.constructor=Ua,Fa.prototype=Object.create(qn.prototype),Fa.prototype.constructor=Fa,Ba.prototype=Object.create(or.prototype),Ba.prototype.constructor=Ba,Ha.prototype=Object.create(qn.prototype),Ha.prototype.constructor=Ha,Va.prototype=Object.create(or.prototype),Va.prototype.constructor=Va,Ga.prototype=Object.create(qn.prototype),Ga.prototype.constructor=Ga,Wa.prototype=Object.create(or.prototype),Wa.prototype.constructor=Wa;var qa=function(e,t,n){n=n||2;var r,i,a,o,s,c,l,u=t&&t.length,h=u?t[0]*n:e.length,p=Ya(e,0,h,n,!0),d=[];if(!p)return d;if(u&&(p=function(e,t,n,r){var i,a,o,s,c,l=[];for(i=0,a=t.length;i<a;i++)o=t[i]*r,s=i<a-1?t[i+1]*r:e.length,(c=Ya(e,o,s,r,!1))===c.next&&(c.steiner=!0),l.push(ro(c));for(l.sort(eo),i=0;i<l.length;i++)to(l[i],n),n=Xa(n,n.next);return n}(e,t,p,n)),e.length>80*n){r=a=e[0],i=o=e[1];for(var f=n;f<h;f+=n)s=e[f],c=e[f+1],s<r&&(r=s),c<i&&(i=c),s>a&&(a=s),c>o&&(o=c);l=0!==(l=Math.max(a-r,o-i))?1/l:0}return Ja(p,d,n,r,i,l),d};function Ya(e,t,n,r,i){var a,o;if(i===function(e,t,n,r){for(var i=0,a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}(e,t,n,r)>0)for(a=t;a<n;a+=r)o=ho(a,e[a],e[a+1],o);else for(a=n-r;a>=t;a-=r)o=ho(a,e[a],e[a+1],o);return o&&so(o,o.next)&&(po(o),o=o.next),o}function Xa(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!so(r,r.next)&&0!==oo(r.prev,r,r.next))r=r.next;else{if(po(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function Ja(e,t,n,r,i,a,o){if(e){!o&&a&&function(e,t,n,r){var i=e;do{null===i.z&&(i.z=no(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,a,o,s,c,l=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,r=n,s=0,t=0;t<l&&(s++,r=r.nextZ);t++);for(c=l;s>0||c>0&&r;)0!==s&&(0===c||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,c--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,l*=2}while(o>1)}(i)}(e,r,i,a);for(var s,c,l=e;e.prev!==e.next;)if(s=e.prev,c=e.next,a?Ka(e,r,i,a):Za(e))t.push(s.i/n),t.push(e.i/n),t.push(c.i/n),po(e),e=c.next,l=c.next;else if((e=c)===l){o?1===o?Ja(e=Qa(e,t,n),t,n,r,i,a,2):2===o&&$a(e,t,n,r,i,a):Ja(Xa(e),t,n,r,i,a,1);break}}}function Za(e){var t=e.prev,n=e,r=e.next;if(oo(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(io(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&oo(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Ka(e,t,n,r){var i=e.prev,a=e,o=e.next;if(oo(i,a,o)>=0)return!1;for(var s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,c=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,l=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,u=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,h=no(s,c,t,n,r),p=no(l,u,t,n,r),d=e.nextZ;d&&d.z<=p;){if(d!==e.prev&&d!==e.next&&io(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&oo(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(d=e.prevZ;d&&d.z>=h;){if(d!==e.prev&&d!==e.next&&io(i.x,i.y,a.x,a.y,o.x,o.y,d.x,d.y)&&oo(d.prev,d,d.next)>=0)return!1;d=d.prevZ}return!0}function Qa(e,t,n){var r=e;do{var i=r.prev,a=r.next.next;!so(i,a)&&co(i,r,r.next,a)&&lo(i,a)&&lo(a,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(a.i/n),po(r),po(r.next),r=e=a),r=r.next}while(r!==e);return r}function $a(e,t,n,r,i,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&ao(o,s)){var c=uo(o,s);return o=Xa(o,o.next),c=Xa(c,c.next),Ja(o,t,n,r,i,a),void Ja(c,t,n,r,i,a)}s=s.next}o=o.next}while(o!==e)}function eo(e,t){return e.x-t.x}function to(e,t){if(t=function(e,t){var n,r=t,i=e.x,a=e.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>o){if(o=s,s===i){if(a===r.y)return r;if(a===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===o)return n.prev;var c,l=n,u=n.x,h=n.y,p=1/0;r=n.next;for(;r!==l;)i>=r.x&&r.x>=u&&i!==r.x&&io(a<h?i:o,a,u,h,a<h?o:i,a,r.x,r.y)&&((c=Math.abs(a-r.y)/(i-r.x))<p||c===p&&r.x>n.x)&&lo(r,e)&&(n=r,p=c),r=r.next;return n}(e,t)){var n=uo(t,e);Xa(n,n.next)}}function no(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function ro(e){var t=e,n=e;do{t.x<n.x&&(n=t),t=t.next}while(t!==e);return n}function io(e,t,n,r,i,a,o,s){return(i-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(r-s)-(n-o)*(t-s)>=0&&(n-o)*(a-s)-(i-o)*(r-s)>=0}function ao(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&co(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&lo(e,t)&&lo(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)}function oo(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function so(e,t){return e.x===t.x&&e.y===t.y}function co(e,t,n,r){return!!(so(e,t)&&so(n,r)||so(e,r)&&so(n,t))||oo(e,t,n)>0!=oo(e,t,r)>0&&oo(n,r,e)>0!=oo(n,r,t)>0}function lo(e,t){return oo(e.prev,e,e.next)<0?oo(e,t,e.next)>=0&&oo(e,e.prev,t)>=0:oo(e,t,e.prev)<0||oo(e,e.next,t)<0}function uo(e,t){var n=new fo(e.i,e.x,e.y),r=new fo(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function ho(e,t,n,r){var i=new fo(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function po(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function fo(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var mo={area:function(e){for(var t=e.length,n=0,r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n},isClockWise:function(e){return mo.area(e)<0},triangulateShape:function(e,t){var n=[],r=[],i=[];vo(e),go(n,e);var a=e.length;t.forEach(vo);for(var o=0;o<t.length;o++)r.push(a),a+=t[o].length,go(n,t[o]);var s=qa(n,r);for(o=0;o<s.length;o+=3)i.push(s.slice(o,o+3));return i}};function vo(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function go(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function yo(e,t){qn.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new bo(e,t)),this.mergeVertices()}function bo(e,t){or.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t};for(var n=this,r=[],i=[],a=0,o=(e=Array.isArray(e)?e:[e]).length;a<o;a++){s(e[a])}function s(e){var a=[],o=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1,c=void 0!==t.depth?t.depth:100,l=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:6,h=void 0!==t.bevelSize?t.bevelSize:u-2,p=void 0!==t.bevelSegments?t.bevelSegments:3,d=t.extrudePath,f=void 0!==t.UVGenerator?t.UVGenerator:xo;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),c=t.amount);var m,v,g,y,b,x,w,_,M=!1;d&&(m=d.getSpacedPoints(s),M=!0,l=!1,v=d.computeFrenetFrames(s,!1),g=new tn,y=new tn,b=new tn),l||(p=0,u=0,h=0);var E=e.extractPoints(o),S=E.shape,T=E.holes;if(!mo.isClockWise(S))for(S=S.reverse(),w=0,_=T.length;w<_;w++)x=T[w],mo.isClockWise(x)&&(T[w]=x.reverse());var P=mo.triangulateShape(S,T),C=S;for(w=0,_=T.length;w<_;w++)x=T[w],S=S.concat(x);function A(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var O,L,R,N,k,I,D=S.length,z=P.length;function j(e,t,n){var r,i,a,o=e.x-t.x,s=e.y-t.y,c=n.x-e.x,l=n.y-e.y,u=o*o+s*s,h=o*l-s*c;if(Math.abs(h)>Number.EPSILON){var p=Math.sqrt(u),d=Math.sqrt(c*c+l*l),f=t.x-s/p,m=t.y+o/p,v=((n.x-l/d-f)*l-(n.y+c/d-m)*c)/(o*l-s*c),g=(r=f+o*v-e.x)*r+(i=m+s*v-e.y)*i;if(g<=2)return new Qt(r,i);a=Math.sqrt(g/2)}else{var y=!1;o>Number.EPSILON?c>Number.EPSILON&&(y=!0):o<-Number.EPSILON?c<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(l)&&(y=!0),y?(r=-s,i=o,a=Math.sqrt(u)):(r=o,i=s,a=Math.sqrt(u/2))}return new Qt(r/a,i/a)}for(var U=[],F=0,B=C.length,H=B-1,V=F+1;F<B;F++,H++,V++)H===B&&(H=0),V===B&&(V=0),U[F]=j(C[F],C[H],C[V]);var G,W,q=[],Y=U.concat();for(w=0,_=T.length;w<_;w++){for(x=T[w],G=[],F=0,H=(B=x.length)-1,V=F+1;F<B;F++,H++,V++)H===B&&(H=0),V===B&&(V=0),G[F]=j(x[F],x[H],x[V]);q.push(G),Y=Y.concat(G)}for(O=0;O<p;O++){for(R=O/p,N=u*Math.cos(R*Math.PI/2),L=h*Math.sin(R*Math.PI/2),F=0,B=C.length;F<B;F++)J((k=A(C[F],U[F],L)).x,k.y,-N);for(w=0,_=T.length;w<_;w++)for(x=T[w],G=q[w],F=0,B=x.length;F<B;F++)J((k=A(x[F],G[F],L)).x,k.y,-N)}for(L=h,F=0;F<D;F++)k=l?A(S[F],Y[F],L):S[F],M?(y.copy(v.normals[0]).multiplyScalar(k.x),g.copy(v.binormals[0]).multiplyScalar(k.y),b.copy(m[0]).add(y).add(g),J(b.x,b.y,b.z)):J(k.x,k.y,0);for(W=1;W<=s;W++)for(F=0;F<D;F++)k=l?A(S[F],Y[F],L):S[F],M?(y.copy(v.normals[W]).multiplyScalar(k.x),g.copy(v.binormals[W]).multiplyScalar(k.y),b.copy(m[W]).add(y).add(g),J(b.x,b.y,b.z)):J(k.x,k.y,c/s*W);for(O=p-1;O>=0;O--){for(R=O/p,N=u*Math.cos(R*Math.PI/2),L=h*Math.sin(R*Math.PI/2),F=0,B=C.length;F<B;F++)J((k=A(C[F],U[F],L)).x,k.y,c+N);for(w=0,_=T.length;w<_;w++)for(x=T[w],G=q[w],F=0,B=x.length;F<B;F++)k=A(x[F],G[F],L),M?J(k.x,k.y+m[s-1].y,m[s-1].x+N):J(k.x,k.y,c+N)}function X(e,t){var n,r;for(F=e.length;--F>=0;){n=F,(r=F-1)<0&&(r=e.length-1);var i=0,a=s+2*p;for(i=0;i<a;i++){var o=D*i,c=D*(i+1);K(t+n+o,t+r+o,t+r+c,t+n+c)}}}function J(e,t,n){a.push(e),a.push(t),a.push(n)}function Z(e,t,i){Q(e),Q(t),Q(i);var a=r.length/3,o=f.generateTopUV(n,r,a-3,a-2,a-1);$(o[0]),$(o[1]),$(o[2])}function K(e,t,i,a){Q(e),Q(t),Q(a),Q(t),Q(i),Q(a);var o=r.length/3,s=f.generateSideWallUV(n,r,o-6,o-3,o-2,o-1);$(s[0]),$(s[1]),$(s[3]),$(s[1]),$(s[2]),$(s[3])}function Q(e){r.push(a[3*e+0]),r.push(a[3*e+1]),r.push(a[3*e+2])}function $(e){i.push(e.x),i.push(e.y)}!function(){var e=r.length/3;if(l){var t=0,i=D*t;for(F=0;F<z;F++)Z((I=P[F])[2]+i,I[1]+i,I[0]+i);for(i=D*(t=s+2*p),F=0;F<z;F++)Z((I=P[F])[0]+i,I[1]+i,I[2]+i)}else{for(F=0;F<z;F++)Z((I=P[F])[2],I[1],I[0]);for(F=0;F<z;F++)Z((I=P[F])[0]+D*s,I[1]+D*s,I[2]+D*s)}n.addGroup(e,r.length/3-e,0)}(),function(){var e=r.length/3,t=0;for(X(C,t),t+=C.length,w=0,_=T.length;w<_;w++)X(x=T[w],t),t+=x.length;n.addGroup(e,r.length/3-e,1)}()}this.addAttribute("position",new tr(r,3)),this.addAttribute("uv",new tr(i,2)),this.computeVertexNormals()}yo.prototype=Object.create(qn.prototype),yo.prototype.constructor=yo,yo.prototype.toJSON=function(){var e=qn.prototype.toJSON.call(this);return wo(this.parameters.shapes,this.parameters.options,e)},bo.prototype=Object.create(or.prototype),bo.prototype.constructor=bo,bo.prototype.toJSON=function(){var e=or.prototype.toJSON.call(this);return wo(this.parameters.shapes,this.parameters.options,e)};var xo={generateTopUV:function(e,t,n,r,i){var a=t[3*n],o=t[3*n+1],s=t[3*r],c=t[3*r+1],l=t[3*i],u=t[3*i+1];return[new Qt(a,o),new Qt(s,c),new Qt(l,u)]},generateSideWallUV:function(e,t,n,r,i,a){var o=t[3*n],s=t[3*n+1],c=t[3*n+2],l=t[3*r],u=t[3*r+1],h=t[3*r+2],p=t[3*i],d=t[3*i+1],f=t[3*i+2],m=t[3*a],v=t[3*a+1],g=t[3*a+2];return Math.abs(s-u)<.01?[new Qt(o,1-c),new Qt(l,1-h),new Qt(p,1-f),new Qt(m,1-g)]:[new Qt(s,1-c),new Qt(u,1-h),new Qt(d,1-f),new Qt(v,1-g)]}};function wo(e,t,n){if(n.shapes=[],Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var a=e[r];n.shapes.push(a.uuid)}else n.shapes.push(e.uuid);return void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON()),n}function _o(e,t){qn.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new Mo(e,t)),this.mergeVertices()}function Mo(e,t){var n=(t=t||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new qn;var r=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),bo.call(this,r,t),this.type="TextBufferGeometry"}function Eo(e,t,n,r,i,a,o){qn.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new So(e,t,n,r,i,a,o)),this.mergeVertices()}function So(e,t,n,r,i,a,o){or.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:a,thetaLength:o},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI;var s,c,l=(a=void 0!==a?a:0)+(o=void 0!==o?o:Math.PI),u=0,h=[],p=new tn,d=new tn,f=[],m=[],v=[],g=[];for(c=0;c<=n;c++){var y=[],b=c/n;for(s=0;s<=t;s++){var x=s/t;p.x=-e*Math.cos(r+x*i)*Math.sin(a+b*o),p.y=e*Math.cos(a+b*o),p.z=e*Math.sin(r+x*i)*Math.sin(a+b*o),m.push(p.x,p.y,p.z),d.set(p.x,p.y,p.z).normalize(),v.push(d.x,d.y,d.z),g.push(x,1-b),y.push(u++)}h.push(y)}for(c=0;c<n;c++)for(s=0;s<t;s++){var w=h[c][s+1],_=h[c][s],M=h[c+1][s],E=h[c+1][s+1];(0!==c||a>0)&&f.push(w,_,E),(c!==n-1||l<Math.PI)&&f.push(_,M,E)}this.setIndex(f),this.addAttribute("position",new tr(m,3)),this.addAttribute("normal",new tr(v,3)),this.addAttribute("uv",new tr(g,2))}function To(e,t,n,r,i,a){qn.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:a},this.fromBufferGeometry(new Po(e,t,n,r,i,a)),this.mergeVertices()}function Po(e,t,n,r,i,a){or.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:a},e=e||.5,t=t||1,i=void 0!==i?i:0,a=void 0!==a?a:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var o,s,c,l=[],u=[],h=[],p=[],d=e,f=(t-e)/(r=void 0!==r?Math.max(1,r):1),m=new tn,v=new Qt;for(s=0;s<=r;s++){for(c=0;c<=n;c++)o=i+c/n*a,m.x=d*Math.cos(o),m.y=d*Math.sin(o),u.push(m.x,m.y,m.z),h.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,p.push(v.x,v.y);d+=f}for(s=0;s<r;s++){var g=s*(n+1);for(c=0;c<n;c++){var y=o=c+g,b=o+n+1,x=o+n+2,w=o+1;l.push(y,b,w),l.push(b,x,w)}}this.setIndex(l),this.addAttribute("position",new tr(u,3)),this.addAttribute("normal",new tr(h,3)),this.addAttribute("uv",new tr(p,2))}function Co(e,t,n,r){qn.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},this.fromBufferGeometry(new Ao(e,t,n,r)),this.mergeVertices()}function Ao(e,t,n,r){or.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t)||12,n=n||0,r=r||2*Math.PI,r=Kt.clamp(r,0,2*Math.PI);var i,a,o,s=[],c=[],l=[],u=1/t,h=new tn,p=new Qt;for(a=0;a<=t;a++){var d=n+a*u*r,f=Math.sin(d),m=Math.cos(d);for(o=0;o<=e.length-1;o++)h.x=e[o].x*f,h.y=e[o].y,h.z=e[o].x*m,c.push(h.x,h.y,h.z),p.x=a/t,p.y=o/(e.length-1),l.push(p.x,p.y)}for(a=0;a<t;a++)for(o=0;o<e.length-1;o++){var v=i=o+a*e.length,g=i+e.length,y=i+e.length+1,b=i+1;s.push(v,g,b),s.push(g,y,b)}if(this.setIndex(s),this.addAttribute("position",new tr(c,3)),this.addAttribute("uv",new tr(l,2)),this.computeVertexNormals(),r===2*Math.PI){var x=this.attributes.normal.array,w=new tn,_=new tn,M=new tn;for(i=t*e.length*3,a=0,o=0;a<e.length;a++,o+=3)w.x=x[o+0],w.y=x[o+1],w.z=x[o+2],_.x=x[i+o+0],_.y=x[i+o+1],_.z=x[i+o+2],M.addVectors(w,_).normalize(),x[o+0]=x[i+o+0]=M.x,x[o+1]=x[i+o+1]=M.y,x[o+2]=x[i+o+2]=M.z}}function Oo(e,t){qn.call(this),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new Lo(e,t)),this.mergeVertices()}function Lo(e,t){or.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],r=[],i=[],a=[],o=0,s=0;if(!1===Array.isArray(e))l(e);else for(var c=0;c<e.length;c++)l(e[c]),this.addGroup(o,s,c),o+=s,s=0;function l(e){var o,c,l,u=r.length/3,h=e.extractPoints(t),p=h.shape,d=h.holes;if(!1===mo.isClockWise(p))for(p=p.reverse(),o=0,c=d.length;o<c;o++)l=d[o],!0===mo.isClockWise(l)&&(d[o]=l.reverse());var f=mo.triangulateShape(p,d);for(o=0,c=d.length;o<c;o++)l=d[o],p=p.concat(l);for(o=0,c=p.length;o<c;o++){var m=p[o];r.push(m.x,m.y,0),i.push(0,0,1),a.push(m.x,m.y)}for(o=0,c=f.length;o<c;o++){var v=f[o],g=v[0]+u,y=v[1]+u,b=v[2]+u;n.push(g,y,b),s+=3}}this.setIndex(n),this.addAttribute("position",new tr(r,3)),this.addAttribute("normal",new tr(i,3)),this.addAttribute("uv",new tr(a,2))}function Ro(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}function No(e,t){or.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var n,r,i,a,o=[],s=Math.cos(Kt.DEG2RAD*t),c=[0,0],l={},u=["a","b","c"];e.isBufferGeometry?(a=new qn).fromBufferGeometry(e):a=e.clone(),a.mergeVertices(),a.computeFaceNormals();for(var h=a.vertices,p=a.faces,d=0,f=p.length;d<f;d++)for(var m=p[d],v=0;v<3;v++)n=m[u[v]],r=m[u[(v+1)%3]],c[0]=Math.min(n,r),c[1]=Math.max(n,r),void 0===l[i=c[0]+","+c[1]]?l[i]={index1:c[0],index2:c[1],face1:d,face2:void 0}:l[i].face2=d;for(i in l){var g=l[i];if(void 0===g.face2||p[g.face1].normal.dot(p[g.face2].normal)<=s){var y=h[g.index1];o.push(y.x,y.y,y.z),y=h[g.index2],o.push(y.x,y.y,y.z)}}this.addAttribute("position",new tr(o,3))}function ko(e,t,n,r,i,a,o,s){qn.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new Io(e,t,n,r,i,a,o,s)),this.mergeVertices()}function Io(e,t,n,r,i,a,o,s){or.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:a,thetaStart:o,thetaLength:s};var c=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,r=Math.floor(r)||8,i=Math.floor(i)||1,a=void 0!==a&&a,o=void 0!==o?o:0,s=void 0!==s?s:2*Math.PI;var l=[],u=[],h=[],p=[],d=0,f=[],m=n/2,v=0;function g(n){var i,a,f,g=new Qt,y=new tn,b=0,x=!0===n?e:t,w=!0===n?1:-1;for(a=d,i=1;i<=r;i++)u.push(0,m*w,0),h.push(0,w,0),p.push(.5,.5),d++;for(f=d,i=0;i<=r;i++){var _=i/r*s+o,M=Math.cos(_),E=Math.sin(_);y.x=x*E,y.y=m*w,y.z=x*M,u.push(y.x,y.y,y.z),h.push(0,w,0),g.x=.5*M+.5,g.y=.5*E*w+.5,p.push(g.x,g.y),d++}for(i=0;i<r;i++){var S=a+i,T=f+i;!0===n?l.push(T,T+1,S):l.push(T+1,T,S),b+=3}c.addGroup(v,b,!0===n?1:2),v+=b}!function(){var a,g,y=new tn,b=new tn,x=0,w=(t-e)/n;for(g=0;g<=i;g++){var _=[],M=g/i,E=M*(t-e)+e;for(a=0;a<=r;a++){var S=a/r,T=S*s+o,P=Math.sin(T),C=Math.cos(T);b.x=E*P,b.y=-M*n+m,b.z=E*C,u.push(b.x,b.y,b.z),y.set(P,w,C).normalize(),h.push(y.x,y.y,y.z),p.push(S,1-M),_.push(d++)}f.push(_)}for(a=0;a<r;a++)for(g=0;g<i;g++){var A=f[g][a],O=f[g+1][a],L=f[g+1][a+1],R=f[g][a+1];l.push(A,O,R),l.push(O,L,R),x+=6}c.addGroup(v,x,0),v+=x}(),!1===a&&(e>0&&g(!0),t>0&&g(!1)),this.setIndex(l),this.addAttribute("position",new tr(u,3)),this.addAttribute("normal",new tr(h,3)),this.addAttribute("uv",new tr(p,2))}function Do(e,t,n,r,i,a,o){ko.call(this,0,e,t,n,r,i,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:a,thetaLength:o}}function zo(e,t,n,r,i,a,o){Io.call(this,0,e,t,n,r,i,a,o),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:a,thetaLength:o}}function jo(e,t,n,r){qn.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new Uo(e,t,n,r)),this.mergeVertices()}function Uo(e,t,n,r){or.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var i,a,o=[],s=[],c=[],l=[],u=new tn,h=new Qt;for(s.push(0,0,0),c.push(0,0,1),l.push(.5,.5),a=0,i=3;a<=t;a++,i+=3){var p=n+a/t*r;u.x=e*Math.cos(p),u.y=e*Math.sin(p),s.push(u.x,u.y,u.z),c.push(0,0,1),h.x=(s[i]/e+1)/2,h.y=(s[i+1]/e+1)/2,l.push(h.x,h.y)}for(i=1;i<=t;i++)o.push(i,i+1,0);this.setIndex(o),this.addAttribute("position",new tr(s,3)),this.addAttribute("normal",new tr(c,3)),this.addAttribute("uv",new tr(l,2))}_o.prototype=Object.create(qn.prototype),_o.prototype.constructor=_o,Mo.prototype=Object.create(bo.prototype),Mo.prototype.constructor=Mo,Eo.prototype=Object.create(qn.prototype),Eo.prototype.constructor=Eo,So.prototype=Object.create(or.prototype),So.prototype.constructor=So,To.prototype=Object.create(qn.prototype),To.prototype.constructor=To,Po.prototype=Object.create(or.prototype),Po.prototype.constructor=Po,Co.prototype=Object.create(qn.prototype),Co.prototype.constructor=Co,Ao.prototype=Object.create(or.prototype),Ao.prototype.constructor=Ao,Oo.prototype=Object.create(qn.prototype),Oo.prototype.constructor=Oo,Oo.prototype.toJSON=function(){var e=qn.prototype.toJSON.call(this);return Ro(this.parameters.shapes,e)},Lo.prototype=Object.create(or.prototype),Lo.prototype.constructor=Lo,Lo.prototype.toJSON=function(){var e=or.prototype.toJSON.call(this);return Ro(this.parameters.shapes,e)},No.prototype=Object.create(or.prototype),No.prototype.constructor=No,ko.prototype=Object.create(qn.prototype),ko.prototype.constructor=ko,Io.prototype=Object.create(or.prototype),Io.prototype.constructor=Io,Do.prototype=Object.create(ko.prototype),Do.prototype.constructor=Do,zo.prototype=Object.create(Io.prototype),zo.prototype.constructor=zo,jo.prototype=Object.create(qn.prototype),jo.prototype.constructor=jo,Uo.prototype=Object.create(or.prototype),Uo.prototype.constructor=Uo;var Fo=Object.freeze({WireframeGeometry:Pa,ParametricGeometry:Ca,ParametricBufferGeometry:Aa,TetrahedronGeometry:Ra,TetrahedronBufferGeometry:Na,OctahedronGeometry:ka,OctahedronBufferGeometry:Ia,IcosahedronGeometry:Da,IcosahedronBufferGeometry:za,DodecahedronGeometry:ja,DodecahedronBufferGeometry:Ua,PolyhedronGeometry:Oa,PolyhedronBufferGeometry:La,TubeGeometry:Fa,TubeBufferGeometry:Ba,TorusKnotGeometry:Ha,TorusKnotBufferGeometry:Va,TorusGeometry:Ga,TorusBufferGeometry:Wa,TextGeometry:_o,TextBufferGeometry:Mo,SphereGeometry:Eo,SphereBufferGeometry:So,RingGeometry:To,RingBufferGeometry:Po,PlaneGeometry:lr,PlaneBufferGeometry:ur,LatheGeometry:Co,LatheBufferGeometry:Ao,ShapeGeometry:Oo,ShapeBufferGeometry:Lo,ExtrudeGeometry:yo,ExtrudeBufferGeometry:bo,EdgesGeometry:No,ConeGeometry:Do,ConeBufferGeometry:zo,CylinderGeometry:ko,CylinderBufferGeometry:Io,CircleGeometry:jo,CircleBufferGeometry:Uo,BoxGeometry:sr,BoxBufferGeometry:cr});function Bo(e){Er.call(this),this.type="ShadowMaterial",this.color=new Cn(0),this.transparent=!0,this.setValues(e)}function Ho(e){Sr.call(this,e),this.type="RawShaderMaterial"}function Vo(e){Er.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Cn(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Cn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Jt,this.normalScale=new Qt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Go(e){Vo.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function Wo(e){Er.call(this),this.type="MeshPhongMaterial",this.color=new Cn(16777215),this.specular=new Cn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Cn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Jt,this.normalScale=new Qt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=he,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function qo(e){Wo.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function Yo(e){Er.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Jt,this.normalScale=new Qt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Xo(e){Er.call(this),this.type="MeshLambertMaterial",this.color=new Cn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Cn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=he,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Jo(e){Er.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Cn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Jt,this.normalScale=new Qt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.lights=!1,this.setValues(e)}function Zo(e){ga.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}Bo.prototype=Object.create(Er.prototype),Bo.prototype.constructor=Bo,Bo.prototype.isShadowMaterial=!0,Bo.prototype.copy=function(e){return Er.prototype.copy.call(this,e),this.color.copy(e.color),this},Ho.prototype=Object.create(Sr.prototype),Ho.prototype.constructor=Ho,Ho.prototype.isRawShaderMaterial=!0,Vo.prototype=Object.create(Er.prototype),Vo.prototype.constructor=Vo,Vo.prototype.isMeshStandardMaterial=!0,Vo.prototype.copy=function(e){return Er.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Go.prototype=Object.create(Vo.prototype),Go.prototype.constructor=Go,Go.prototype.isMeshPhysicalMaterial=!0,Go.prototype.copy=function(e){return Vo.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},Wo.prototype=Object.create(Er.prototype),Wo.prototype.constructor=Wo,Wo.prototype.isMeshPhongMaterial=!0,Wo.prototype.copy=function(e){return Er.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},qo.prototype=Object.create(Wo.prototype),qo.prototype.constructor=qo,qo.prototype.isMeshToonMaterial=!0,qo.prototype.copy=function(e){return Wo.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},Yo.prototype=Object.create(Er.prototype),Yo.prototype.constructor=Yo,Yo.prototype.isMeshNormalMaterial=!0,Yo.prototype.copy=function(e){return Er.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Xo.prototype=Object.create(Er.prototype),Xo.prototype.constructor=Xo,Xo.prototype.isMeshLambertMaterial=!0,Xo.prototype.copy=function(e){return Er.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Jo.prototype=Object.create(Er.prototype),Jo.prototype.constructor=Jo,Jo.prototype.isMeshMatcapMaterial=!0,Jo.prototype.copy=function(e){return Er.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Zo.prototype=Object.create(ga.prototype),Zo.prototype.constructor=Zo,Zo.prototype.isLineDashedMaterial=!0,Zo.prototype.copy=function(e){return ga.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var Ko=Object.freeze({ShadowMaterial:Bo,SpriteMaterial:ha,RawShaderMaterial:Ho,ShaderMaterial:Sr,PointsMaterial:wa,MeshPhysicalMaterial:Go,MeshStandardMaterial:Vo,MeshPhongMaterial:Wo,MeshToonMaterial:qo,MeshNormalMaterial:Yo,MeshLambertMaterial:Xo,MeshDepthMaterial:Fi,MeshDistanceMaterial:Bi,MeshBasicMaterial:Cr,MeshMatcapMaterial:Jo,LineDashedMaterial:Zo,LineBasicMaterial:ga,Material:Er}),Qo={arraySlice:function(e,t,n){return Qo.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),r=0;r!==t;++r)n[r]=r;return n.sort(function(t,n){return e[t]-e[n]}),n},sortedArray:function(e,t,n){for(var r=e.length,i=new e.constructor(r),a=0,o=0;o!==r;++a)for(var s=n[a]*t,c=0;c!==t;++c)i[o++]=e[s+c];return i},flattenJSON:function(e,t,n,r){for(var i=1,a=e[0];void 0!==a&&void 0===a[r];)a=e[i++];if(void 0!==a){var o=a[r];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=a[r])&&(t.push(a.time),n.push.apply(n,o)),a=e[i++]}while(void 0!==a);else if(void 0!==o.toArray)do{void 0!==(o=a[r])&&(t.push(a.time),o.toArray(n,n.length)),a=e[i++]}while(void 0!==a);else do{void 0!==(o=a[r])&&(t.push(a.time),n.push(o)),a=e[i++]}while(void 0!==a)}}};function $o(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function es(e,t,n,r){$o.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function ts(e,t,n,r){$o.call(this,e,t,n,r)}function ns(e,t,n,r){$o.call(this,e,t,n,r)}function rs(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Qo.convertArray(t,this.TimeBufferType),this.values=Qo.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}function is(e,t,n){rs.call(this,e,t,n)}function as(e,t,n,r){rs.call(this,e,t,n,r)}function os(e,t,n,r){rs.call(this,e,t,n,r)}function ss(e,t,n,r){$o.call(this,e,t,n,r)}function cs(e,t,n,r){rs.call(this,e,t,n,r)}function ls(e,t,n,r){rs.call(this,e,t,n,r)}function us(e,t,n,r){rs.call(this,e,t,n,r)}function hs(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=Kt.generateUUID(),this.duration<0&&this.resetDuration()}function ps(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return os;case"vector":case"vector2":case"vector3":case"vector4":return us;case"color":return as;case"quaternion":return cs;case"bool":case"boolean":return is;case"string":return ls}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var n=[],r=[];Qo.flattenJSON(e.keys,n,r,"value"),e.times=n,e.values=r}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}Object.assign($o.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{var a;n:{r:if(!(e<r)){for(var o=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,i)}if(n===o)break;if(i=r,e<(r=t[++n]))break t}a=t.length;break n}if(e>=i)break e;var s=t[1];e<s&&(n=2,i=s);for(o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===o)break;if(r=i,e>=(i=t[--n-1]))break t}a=n,n=0}for(;n<a;){var c=n+a>>>1;e<t[c]?a=c:n=c+1}if(r=t[n],void 0===(i=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,i,e)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r,a=0;a!==r;++a)t[a]=n[i+a];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),
//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign($o.prototype,{beforeStart_:$o.prototype.copySampleValue_,afterEnd_:$o.prototype.copySampleValue_}),es.prototype=Object.assign(Object.create($o.prototype),{constructor:es,DefaultSettings_:{endingStart:Nt,endingEnd:Nt},intervalChanged_:function(e,t,n){var r=this.parameterPositions,i=e-2,a=e+1,o=r[i],s=r[a];if(void 0===o)switch(this.getSettings_().endingStart){case kt:i=e,o=2*t-n;break;case It:o=t+r[i=r.length-2]-r[i+1];break;default:i=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case kt:a=e,s=2*n-t;break;case It:a=1,s=n+r[1]-r[0];break;default:a=e-1,s=t}var c=.5*(n-t),l=this.valueSize;this._weightPrev=c/(t-o),this._weightNext=c/(s-n),this._offsetPrev=i*l,this._offsetNext=a*l},interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,c=s-o,l=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,p=this._weightNext,d=(n-t)/(r-t),f=d*d,m=f*d,v=-h*m+2*h*f-h*d,g=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*d+1,y=(-1-p)*m+(1.5+p)*f+.5*d,b=p*m-p*f,x=0;x!==o;++x)i[x]=v*a[l+x]+g*a[c+x]+y*a[s+x]+b*a[u+x];return i}}),ts.prototype=Object.assign(Object.create($o.prototype),{constructor:ts,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,c=s-o,l=(n-t)/(r-t),u=1-l,h=0;h!==o;++h)i[h]=a[c+h]*u+a[s+h]*l;return i}}),ns.prototype=Object.assign(Object.create($o.prototype),{constructor:ns,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(rs,{toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:Qo.convertArray(e.times,Array),values:Qo.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(t.interpolation=r)}return t.type=e.ValueTypeName,t}}),Object.assign(rs.prototype,{constructor:rs,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Lt,InterpolantFactoryMethodDiscrete:function(e){return new ns(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new ts(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new es(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case Ot:t=this.InterpolantFactoryMethodDiscrete;break;case Lt:t=this.InterpolantFactoryMethodLinear;break;case Rt:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ot;case this.InterpolantFactoryMethodLinear:return Lt;case this.InterpolantFactoryMethodSmooth:return Rt}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,r=t.length;n!==r;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,r=n.length,i=0,a=r-1;i!==r&&n[i]<e;)++i;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==i||a!==r){i>=a&&(i=(a=Math.max(a,1))-1);var o=this.getValueSize();this.times=Qo.arraySlice(n,i,a),this.values=Qo.arraySlice(this.values,i*o,a*o)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var a=null,o=0;o!==i;o++){var s=n[o];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),e=!1;break}if(null!==a&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),e=!1;break}a=s}if(void 0!==r&&Qo.isTypedArray(r)){o=0;for(var c=r.length;o!==c;++o){var l=r[o];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,l),e=!1;break}}}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),r=this.getInterpolation()===Rt,i=1,a=e.length-1,o=1;o<a;++o){var s=!1,c=e[o];if(c!==e[o+1]&&(1!==o||c!==c[0]))if(r)s=!0;else for(var l=o*n,u=l-n,h=l+n,p=0;p!==n;++p){var d=t[l+p];if(d!==t[u+p]||d!==t[h+p]){s=!0;break}}if(s){if(o!==i){e[i]=e[o];var f=o*n,m=i*n;for(p=0;p!==n;++p)t[m+p]=t[f+p]}++i}}if(a>0){e[i]=e[a];for(f=a*n,m=i*n,p=0;p!==n;++p)t[m+p]=t[f+p];++i}return i!==e.length&&(this.times=Qo.arraySlice(e,0,i),this.values=Qo.arraySlice(t,0,i*n)),this}}),is.prototype=Object.assign(Object.create(rs.prototype),{constructor:is,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Ot,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),as.prototype=Object.assign(Object.create(rs.prototype),{constructor:as,ValueTypeName:"color"}),os.prototype=Object.assign(Object.create(rs.prototype),{constructor:os,ValueTypeName:"number"}),ss.prototype=Object.assign(Object.create($o.prototype),{constructor:ss,interpolate_:function(e,t,n,r){for(var i=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,c=(n-t)/(r-t),l=s+o;s!==l;s+=4)en.slerpFlat(i,0,a,s-o,a,s,c);return i}}),cs.prototype=Object.assign(Object.create(rs.prototype),{constructor:cs,ValueTypeName:"quaternion",DefaultInterpolation:Lt,InterpolantFactoryMethodLinear:function(e){return new ss(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),ls.prototype=Object.assign(Object.create(rs.prototype),{constructor:ls,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Ot,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),us.prototype=Object.assign(Object.create(rs.prototype),{constructor:us,ValueTypeName:"vector"}),Object.assign(hs,{parse:function(e){for(var t=[],n=e.tracks,r=1/(e.fps||1),i=0,a=n.length;i!==a;++i)t.push(ps(n[i]).scale(r));return new hs(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid},i=0,a=n.length;i!==a;++i)t.push(rs.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(e,t,n,r){for(var i=t.length,a=[],o=0;o<i;o++){var s=[],c=[];s.push((o+i-1)%i,o,(o+1)%i),c.push(0,1,0);var l=Qo.getKeyframeOrder(s);s=Qo.sortedArray(s,1,l),c=Qo.sortedArray(c,1,l),r||0!==s[0]||(s.push(i),c.push(c[0])),a.push(new os(".morphTargetInfluences["+t[o].name+"]",s,c).scale(1/n))}return new hs(e,-1,a)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,a=0,o=e.length;a<o;a++){var s=e[a],c=s.name.match(i);if(c&&c.length>1){var l=r[h=c[1]];l||(r[h]=l=[]),l.push(s)}}var u=[];for(var h in r)u.push(hs.CreateFromMorphTargetSequence(h,r[h],t,n));return u},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,r,i){if(0!==n.length){var a=[],o=[];Qo.flattenJSON(n,a,o,r),0!==a.length&&i.push(new e(t,a,o))}},r=[],i=e.name||"default",a=e.length||-1,o=e.fps||30,s=e.hierarchy||[],c=0;c<s.length;c++){var l=s[c].keys;if(l&&0!==l.length)if(l[0].morphTargets){for(var u={},h=0;h<l.length;h++)if(l[h].morphTargets)for(var p=0;p<l[h].morphTargets.length;p++)u[l[h].morphTargets[p]]=-1;for(var d in u){var f=[],m=[];for(p=0;p!==l[h].morphTargets.length;++p){var v=l[h];f.push(v.time),m.push(v.morphTarget===d?1:0)}r.push(new os(".morphTargetInfluence["+d+"]",f,m))}a=u.length*(o||1)}else{var g=".bones["+t[c].name+"]";n(us,g+".position",l,"pos",r),n(cs,g+".quaternion",l,"rot",r),n(us,g+".scale",l,"scl",r)}}return 0===r.length?null:new hs(i,a,r)}}),Object.assign(hs.prototype,{resetDuration:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}});var ds={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function fs(e,t,n){var r=this,i=!1,a=0,o=0,s=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++,!1===i&&void 0!==r.onStart&&r.onStart(e,a,o),i=!0},this.itemEnd=function(e){a++,void 0!==r.onProgress&&r.onProgress(e,a,o),a===o&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this}}var ms=new fs,vs={};function gs(e){this.manager=void 0!==e?e:ms}function ys(e){this.manager=void 0!==e?e:ms}function bs(e){this.manager=void 0!==e?e:ms,this._parser=null}function xs(e){this.manager=void 0!==e?e:ms,this._parser=null}function ws(e){this.manager=void 0!==e?e:ms}function _s(e){this.manager=void 0!==e?e:ms}function Ms(e){this.manager=void 0!==e?e:ms}function Es(){this.type="Curve",this.arcLengthDivisions=200}function Ss(e,t,n,r,i,a,o,s){Es.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=o||!1,this.aRotation=s||0}function Ts(e,t,n,r,i,a){Ss.call(this,e,t,n,n,r,i,a),this.type="ArcCurve"}function Ps(){var e=0,t=0,n=0,r=0;function i(i,a,o,s){e=i,t=o,n=-3*i+3*a-2*o-s,r=2*i-2*a+o+s}return{initCatmullRom:function(e,t,n,r,a){i(t,n,a*(n-e),a*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,a,o,s){var c=(t-e)/a-(n-e)/(a+o)+(n-t)/o,l=(n-t)/o-(r-t)/(o+s)+(r-n)/s;i(t,n,c*=o,l*=o)},calc:function(i){var a=i*i;return e+t*i+n*a+r*(a*i)}}}Object.assign(gs.prototype,{load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=ds.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0),a;if(void 0===vs[e]){var o=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(o){var s=o[1],c=!!o[2],l=o[3];l=decodeURIComponent(l),c&&(l=atob(l));try{var u,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":for(var p=new Uint8Array(l.length),d=0;d<l.length;d++)p[d]=l.charCodeAt(d);u="blob"===h?new Blob([p.buffer],{type:s}):p.buffer;break;case"document":var f=new DOMParser;u=f.parseFromString(l,s);break;case"json":u=JSON.parse(l);break;default:u=l}setTimeout(function(){t&&t(u),i.manager.itemEnd(e)},0)}catch(t){setTimeout(function(){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)},0)}}else{vs[e]=[],vs[e].push({onLoad:t,onProgress:n,onError:r});var m=new XMLHttpRequest;for(var v in m.open("GET",e,!0),m.addEventListener("load",function(t){var n=this.response;ds.add(e,n);var r=vs[e];if(delete vs[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var a=0,o=r.length;a<o;a++){(s=r[a]).onLoad&&s.onLoad(n)}i.manager.itemEnd(e)}else{for(a=0,o=r.length;a<o;a++){var s;(s=r[a]).onError&&s.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}},!1),m.addEventListener("progress",function(t){for(var n=vs[e],r=0,i=n.length;r<i;r++){var a=n[r];a.onProgress&&a.onProgress(t)}},!1),m.addEventListener("error",function(t){var n=vs[e];delete vs[e];for(var r=0,a=n.length;r<a;r++){var o=n[r];o.onError&&o.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)},!1),m.addEventListener("abort",function(t){var n=vs[e];delete vs[e];for(var r=0,a=n.length;r<a;r++){var o=n[r];o.onError&&o.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)},!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(v,this.requestHeader[v]);m.send(null)}return i.manager.itemStart(e),m}vs[e].push({onLoad:t,onProgress:n,onError:r})},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(ys.prototype,{load:function(e,t,n,r){var i=this,a=new gs(i.manager);a.setPath(i.path),a.load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},parse:function(e,t){for(var n=[],r=0;r<e.length;r++){var i=hs.parse(e[r]);n.push(i)}t(n)},setPath:function(e){return this.path=e,this}}),Object.assign(bs.prototype,{load:function(e,t,n,r){var i=this,a=[],o=new Ea;o.image=a;var s=new gs(this.manager);function c(c){s.load(e[c],function(e){var n=i._parser(e,!0);a[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(l+=1)&&(1===n.mipmapCount&&(o.minFilter=ke),o.format=n.format,o.needsUpdate=!0,t&&t(o))},n,r)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var l=0,u=0,h=e.length;u<h;++u)c(u);else s.load(e,function(e){var n=i._parser(e,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){a[s]={mipmaps:[]};for(var c=0;c<n.mipmapCount;c++)a[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+c]),a[s].format=n.format,a[s].width=n.width,a[s].height=n.height}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=ke),o.format=n.format,o.needsUpdate=!0,t&&t(o)},n,r);return o},setPath:function(e){return this.path=e,this}}),Object.assign(xs.prototype,{load:function(e,t,n,r){var i=this,a=new mn,o=new gs(this.manager);return o.setResponseType("arraybuffer"),o.setPath(this.path),o.load(e,function(e){var n=i._parser(e);n&&(void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:Ae,a.wrapT=void 0!==n.wrapT?n.wrapT:Ae,a.magFilter=void 0!==n.magFilter?n.magFilter:ke,a.minFilter=void 0!==n.minFilter?n.minFilter:De,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps),1===n.mipmapCount&&(a.minFilter=ke),a.needsUpdate=!0,t&&t(a,n))},n,r),a},setPath:function(e){return this.path=e,this}}),Object.assign(ws.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=ds.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0),a;var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){o.removeEventListener("load",s,!1),o.removeEventListener("error",c,!1),ds.add(e,this),t&&t(this),i.manager.itemEnd(e)}function c(t){o.removeEventListener("load",s,!1),o.removeEventListener("error",c,!1),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}return o.addEventListener("load",s,!1),o.addEventListener("error",c,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(e),o.src=e,o},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(_s.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){var i=new Lr,a=new ws(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=0;function s(n){a.load(e[n],function(e){i.images[n]=e,6===++o&&(i.needsUpdate=!0,t&&t(i))},void 0,r)}for(var c=0;c<e.length;++c)s(c);return i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Ms.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){var i=new hn,a=new ws(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(n){i.image=n;var r=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);i.format=r?Ze:Ke,i.needsUpdate=!0,void 0!==t&&t(i)},n,r),i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Es.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,r=[],i=this.getPoint(0),a=0;for(r.push(0),n=1;n<=e;n++)a+=(t=this.getPoint(n/e)).distanceTo(i),r.push(a),i=t;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,r=this.getLengths(),i=0,a=r.length;n=t||e*r[a-1];for(var o,s=0,c=a-1;s<=c;)if((o=r[i=Math.floor(s+(c-s)/2)]-n)<0)s=i+1;else{if(!(o>0)){c=i;break}c=i-1}if(r[i=c]===n)return i/(a-1);var l=r[i];return(i+(n-l)/(r[i+1]-l))/(a-1)},getTangent:function(e){var t=e-1e-4,n=e+1e-4;t<0&&(t=0),n>1&&(n=1);var r=this.getPoint(t);return this.getPoint(n).clone().sub(r).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var n,r,i,a=new tn,o=[],s=[],c=[],l=new tn,u=new $t;for(n=0;n<=e;n++)r=n/e,o[n]=this.getTangentAt(r),o[n].normalize();s[0]=new tn,c[0]=new tn;var h=Number.MAX_VALUE,p=Math.abs(o[0].x),d=Math.abs(o[0].y),f=Math.abs(o[0].z);for(p<=h&&(h=p,a.set(1,0,0)),d<=h&&(h=d,a.set(0,1,0)),f<=h&&a.set(0,0,1),l.crossVectors(o[0],a).normalize(),s[0].crossVectors(o[0],l),c[0].crossVectors(o[0],s[0]),n=1;n<=e;n++)s[n]=s[n-1].clone(),c[n]=c[n-1].clone(),l.crossVectors(o[n-1],o[n]),l.length()>Number.EPSILON&&(l.normalize(),i=Math.acos(Kt.clamp(o[n-1].dot(o[n]),-1,1)),s[n].applyMatrix4(u.makeRotationAxis(l,i))),c[n].crossVectors(o[n],s[n]);if(!0===t)for(i=Math.acos(Kt.clamp(s[0].dot(s[e]),-1,1)),i/=e,o[0].dot(l.crossVectors(s[0],s[e]))>0&&(i=-i),n=1;n<=e;n++)s[n].applyMatrix4(u.makeRotationAxis(o[n],i*n)),c[n].crossVectors(o[n],s[n]);return{tangents:o,normals:s,binormals:c}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),Ss.prototype=Object.create(Es.prototype),Ss.prototype.constructor=Ss,Ss.prototype.isEllipseCurve=!0,Ss.prototype.getPoint=function(e,t){for(var n=t||new Qt,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,a=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=a?0:r),!0!==this.aClockwise||a||(i===r?i=-r:i-=r);var o=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(o),c=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var l=Math.cos(this.aRotation),u=Math.sin(this.aRotation),h=s-this.aX,p=c-this.aY;s=h*l-p*u+this.aX,c=h*u+p*l+this.aY}return n.set(s,c)},Ss.prototype.copy=function(e){return Es.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Ss.prototype.toJSON=function(){var e=Es.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},Ss.prototype.fromJSON=function(e){return Es.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Ts.prototype=Object.create(Ss.prototype),Ts.prototype.constructor=Ts,Ts.prototype.isArcCurve=!0;var Cs=new tn,As=new Ps,Os=new Ps,Ls=new Ps;function Rs(e,t,n,r){Es.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=r||.5}function Ns(e,t,n,r,i){var a=.5*(r-t),o=.5*(i-n),s=e*e;return(2*n-2*r+a+o)*(e*s)+(-3*n+3*r-2*a-o)*s+a*e+n}function ks(e,t,n,r){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function Is(e,t,n,r,i){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}function Ds(e,t,n,r){Es.call(this),this.type="CubicBezierCurve",this.v0=e||new Qt,this.v1=t||new Qt,this.v2=n||new Qt,this.v3=r||new Qt}function zs(e,t,n,r){Es.call(this),this.type="CubicBezierCurve3",this.v0=e||new tn,this.v1=t||new tn,this.v2=n||new tn,this.v3=r||new tn}function js(e,t){Es.call(this),this.type="LineCurve",this.v1=e||new Qt,this.v2=t||new Qt}function Us(e,t){Es.call(this),this.type="LineCurve3",this.v1=e||new tn,this.v2=t||new tn}function Fs(e,t,n){Es.call(this),this.type="QuadraticBezierCurve",this.v0=e||new Qt,this.v1=t||new Qt,this.v2=n||new Qt}function Bs(e,t,n){Es.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new tn,this.v1=t||new tn,this.v2=n||new tn}function Hs(e){Es.call(this),this.type="SplineCurve",this.points=e||[]}Rs.prototype=Object.create(Es.prototype),Rs.prototype.constructor=Rs,Rs.prototype.isCatmullRomCurve3=!0,Rs.prototype.getPoint=function(e,t){var n,r,i,a,o=t||new tn,s=this.points,c=s.length,l=(c-(this.closed?0:1))*e,u=Math.floor(l),h=l-u;if(this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/c)+1)*c:0===h&&u===c-1&&(u=c-2,h=1),this.closed||u>0?n=s[(u-1)%c]:(Cs.subVectors(s[0],s[1]).add(s[0]),n=Cs),r=s[u%c],i=s[(u+1)%c],this.closed||u+2<c?a=s[(u+2)%c]:(Cs.subVectors(s[c-1],s[c-2]).add(s[c-1]),a=Cs),"centripetal"===this.curveType||"chordal"===this.curveType){var p="chordal"===this.curveType?.5:.25,d=Math.pow(n.distanceToSquared(r),p),f=Math.pow(r.distanceToSquared(i),p),m=Math.pow(i.distanceToSquared(a),p);f<1e-4&&(f=1),d<1e-4&&(d=f),m<1e-4&&(m=f),As.initNonuniformCatmullRom(n.x,r.x,i.x,a.x,d,f,m),Os.initNonuniformCatmullRom(n.y,r.y,i.y,a.y,d,f,m),Ls.initNonuniformCatmullRom(n.z,r.z,i.z,a.z,d,f,m)}else"catmullrom"===this.curveType&&(As.initCatmullRom(n.x,r.x,i.x,a.x,this.tension),Os.initCatmullRom(n.y,r.y,i.y,a.y,this.tension),Ls.initCatmullRom(n.z,r.z,i.z,a.z,this.tension));return o.set(As.calc(h),Os.calc(h),Ls.calc(h)),o},Rs.prototype.copy=function(e){Es.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Rs.prototype.toJSON=function(){var e=Es.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},Rs.prototype.fromJSON=function(e){Es.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new tn).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Ds.prototype=Object.create(Es.prototype),Ds.prototype.constructor=Ds,Ds.prototype.isCubicBezierCurve=!0,Ds.prototype.getPoint=function(e,t){var n=t||new Qt,r=this.v0,i=this.v1,a=this.v2,o=this.v3;return n.set(Is(e,r.x,i.x,a.x,o.x),Is(e,r.y,i.y,a.y,o.y)),n},Ds.prototype.copy=function(e){return Es.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Ds.prototype.toJSON=function(){var e=Es.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Ds.prototype.fromJSON=function(e){return Es.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},zs.prototype=Object.create(Es.prototype),zs.prototype.constructor=zs,zs.prototype.isCubicBezierCurve3=!0,zs.prototype.getPoint=function(e,t){var n=t||new tn,r=this.v0,i=this.v1,a=this.v2,o=this.v3;return n.set(Is(e,r.x,i.x,a.x,o.x),Is(e,r.y,i.y,a.y,o.y),Is(e,r.z,i.z,a.z,o.z)),n},zs.prototype.copy=function(e){return Es.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},zs.prototype.toJSON=function(){var e=Es.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},zs.prototype.fromJSON=function(e){return Es.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},js.prototype=Object.create(Es.prototype),js.prototype.constructor=js,js.prototype.isLineCurve=!0,js.prototype.getPoint=function(e,t){var n=t||new Qt;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},js.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},js.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},js.prototype.copy=function(e){return Es.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},js.prototype.toJSON=function(){var e=Es.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},js.prototype.fromJSON=function(e){return Es.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Us.prototype=Object.create(Es.prototype),Us.prototype.constructor=Us,Us.prototype.isLineCurve3=!0,Us.prototype.getPoint=function(e,t){var n=t||new tn;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Us.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Us.prototype.copy=function(e){return Es.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Us.prototype.toJSON=function(){var e=Es.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Us.prototype.fromJSON=function(e){return Es.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Fs.prototype=Object.create(Es.prototype),Fs.prototype.constructor=Fs,Fs.prototype.isQuadraticBezierCurve=!0,Fs.prototype.getPoint=function(e,t){var n=t||new Qt,r=this.v0,i=this.v1,a=this.v2;return n.set(ks(e,r.x,i.x,a.x),ks(e,r.y,i.y,a.y)),n},Fs.prototype.copy=function(e){return Es.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Fs.prototype.toJSON=function(){var e=Es.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Fs.prototype.fromJSON=function(e){return Es.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Bs.prototype=Object.create(Es.prototype),Bs.prototype.constructor=Bs,Bs.prototype.isQuadraticBezierCurve3=!0,Bs.prototype.getPoint=function(e,t){var n=t||new tn,r=this.v0,i=this.v1,a=this.v2;return n.set(ks(e,r.x,i.x,a.x),ks(e,r.y,i.y,a.y),ks(e,r.z,i.z,a.z)),n},Bs.prototype.copy=function(e){return Es.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Bs.prototype.toJSON=function(){var e=Es.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Bs.prototype.fromJSON=function(e){return Es.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Hs.prototype=Object.create(Es.prototype),Hs.prototype.constructor=Hs,Hs.prototype.isSplineCurve=!0,Hs.prototype.getPoint=function(e,t){var n=t||new Qt,r=this.points,i=(r.length-1)*e,a=Math.floor(i),o=i-a,s=r[0===a?a:a-1],c=r[a],l=r[a>r.length-2?r.length-1:a+1],u=r[a>r.length-3?r.length-1:a+2];return n.set(Ns(o,s.x,c.x,l.x,u.x),Ns(o,s.y,c.y,l.y,u.y)),n},Hs.prototype.copy=function(e){Es.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push(r.clone())}return this},Hs.prototype.toJSON=function(){var e=Es.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var r=this.points[t];e.points.push(r.toArray())}return e},Hs.prototype.fromJSON=function(e){Es.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var r=e.points[t];this.points.push((new Qt).fromArray(r))}return this};var Vs=Object.freeze({ArcCurve:Ts,CatmullRomCurve3:Rs,CubicBezierCurve:Ds,CubicBezierCurve3:zs,EllipseCurve:Ss,LineCurve:js,LineCurve3:Us,QuadraticBezierCurve:Fs,QuadraticBezierCurve3:Bs,SplineCurve:Hs});function Gs(){Es.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Ws(e){Gs.call(this),this.type="Path",this.currentPoint=new Qt,e&&this.setFromPoints(e)}function qs(e){Ws.call(this,e),this.uuid=Kt.generateUUID(),this.type="Shape",this.holes=[]}function Ys(e,t){Hn.call(this),this.type="Light",this.color=new Cn(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function Xs(e,t,n){Ys.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Hn.DefaultUp),this.updateMatrix(),this.groundColor=new Cn(t)}function Js(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new Qt(512,512),this.map=null,this.matrix=new $t}function Zs(){Js.call(this,new Yi(50,1,.5,500))}function Ks(e,t,n,r,i,a){Ys.call(this,e,t),this.type="SpotLight",this.position.copy(Hn.DefaultUp),this.updateMatrix(),this.target=new Hn,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==a?a:1,this.shadow=new Zs}function Qs(e,t,n,r){Ys.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new Js(new Yi(90,1,.5,500))}function $s(e,t,n,r,i,a){qi.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==e?e:-1,this.right=void 0!==t?t:1,this.top=void 0!==n?n:1,this.bottom=void 0!==r?r:-1,this.near=void 0!==i?i:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function ec(){Js.call(this,new $s(-5,5,5,-5,.5,500))}function tc(e,t){Ys.call(this,e,t),this.type="DirectionalLight",this.position.copy(Hn.DefaultUp),this.updateMatrix(),this.target=new Hn,this.shadow=new ec}function nc(e,t){Ys.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function rc(e,t,n,r){Ys.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}function ic(e){this.manager=void 0!==e?e:ms,this.textures={}}Gs.prototype=Object.assign(Object.create(Es.prototype),{constructor:Gs,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new js(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=t){var i=n[r]-t,a=this.curves[r],o=a.getLength(),s=0===o?0:1-i/o;return a.getPointAt(s)}r++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],r=0,i=this.curves;r<i.length;r++)for(var a=i[r],o=a&&a.isEllipseCurve?2*e:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?e*a.points.length:e,s=a.getPoints(o),c=0;c<s.length;c++){var l=s[c];t&&t.equals(l)||(n.push(l),t=l)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(e){Es.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=Es.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++){var r=this.curves[t];e.curves.push(r.toJSON())}return e},fromJSON:function(e){Es.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var r=e.curves[t];this.curves.push((new Vs[r.type]).fromJSON(r))}return this}}),Ws.prototype=Object.assign(Object.create(Gs.prototype),{constructor:Ws,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new js(this.currentPoint.clone(),new Qt(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,r){var i=new Fs(this.currentPoint.clone(),new Qt(e,t),new Qt(n,r));this.curves.push(i),this.currentPoint.set(n,r)},bezierCurveTo:function(e,t,n,r,i,a){var o=new Ds(this.currentPoint.clone(),new Qt(e,t),new Qt(n,r),new Qt(i,a));this.curves.push(o),this.currentPoint.set(i,a)},splineThru:function(e){var t=new Hs([this.currentPoint.clone()].concat(e));this.curves.push(t),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,r,i,a){var o=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+o,t+s,n,r,i,a)},absarc:function(e,t,n,r,i,a){this.absellipse(e,t,n,n,r,i,a)},ellipse:function(e,t,n,r,i,a,o,s){var c=this.currentPoint.x,l=this.currentPoint.y;this.absellipse(e+c,t+l,n,r,i,a,o,s)},absellipse:function(e,t,n,r,i,a,o,s){var c=new Ss(e,t,n,r,i,a,o,s);if(this.curves.length>0){var l=c.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(c);var u=c.getPoint(1);this.currentPoint.copy(u)},copy:function(e){return Gs.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=Gs.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return Gs.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),qs.prototype=Object.assign(Object.create(Ws.prototype),{constructor:qs,getPointsHoles:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){Ws.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push(r.clone())}return this},toJSON:function(){var e=Ws.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++){var r=this.holes[t];e.holes.push(r.toJSON())}return e},fromJSON:function(e){Ws.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var r=e.holes[t];this.holes.push((new Ws).fromJSON(r))}return this}}),Ys.prototype=Object.assign(Object.create(Hn.prototype),{constructor:Ys,isLight:!0,copy:function(e){return Hn.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=Hn.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Xs.prototype=Object.assign(Object.create(Ys.prototype),{constructor:Xs,isHemisphereLight:!0,copy:function(e){return Ys.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(Js.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),Zs.prototype=Object.assign(Object.create(Js.prototype),{constructor:Zs,isSpotLightShadow:!0,update:function(e){var t=this.camera,n=2*Kt.RAD2DEG*e.angle,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix())}}),Ks.prototype=Object.assign(Object.create(Ys.prototype),{constructor:Ks,isSpotLight:!0,copy:function(e){return Ys.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Qs.prototype=Object.assign(Object.create(Ys.prototype),{constructor:Qs,isPointLight:!0,copy:function(e){return Ys.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),$s.prototype=Object.assign(Object.create(qi.prototype),{constructor:$s,isOrthographicCamera:!0,copy:function(e,t){return qi.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,r,i,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-e,a=n+e,o=r+t,s=r-t;if(null!==this.view&&this.view.enabled){var c=this.zoom/(this.view.width/this.view.fullWidth),l=this.zoom/(this.view.height/this.view.fullHeight),u=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;a=(i+=u*(this.view.offsetX/c))+u*(this.view.width/c),s=(o-=h*(this.view.offsetY/l))-h*(this.view.height/l)}this.projectionMatrix.makeOrthographic(i,a,o,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=Hn.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),ec.prototype=Object.assign(Object.create(Js.prototype),{constructor:ec}),tc.prototype=Object.assign(Object.create(Ys.prototype),{constructor:tc,isDirectionalLight:!0,copy:function(e){return Ys.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),nc.prototype=Object.assign(Object.create(Ys.prototype),{constructor:nc,isAmbientLight:!0}),rc.prototype=Object.assign(Object.create(Ys.prototype),{constructor:rc,isRectAreaLight:!0,copy:function(e){return Ys.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=Ys.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),Object.assign(ic.prototype,{load:function(e,t,n,r){var i=this,a=new gs(i.manager);a.setPath(i.path),a.load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},parse:function(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var r=new Ko[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&r.specular.setHex(e.specular),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearCoat&&(r.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(r.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.vertexColors&&(r.vertexColors=e.vertexColors),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(r.skinning=e.skinning),void 0!==e.morphTargets&&(r.morphTargets=e.morphTargets),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.uniforms)for(var i in e.uniforms){var a=e.uniforms[i];switch(r.uniforms[i]={},a.type){case"t":r.uniforms[i].value=n(a.value);break;case"c":r.uniforms[i].value=(new Cn).setHex(a.value);break;case"v2":r.uniforms[i].value=(new Qt).fromArray(a.value);break;case"v3":r.uniforms[i].value=(new tn).fromArray(a.value);break;case"v4":r.uniforms[i].value=(new pn).fromArray(a.value);break;case"m4":r.uniforms[i].value=(new $t).fromArray(a.value);break;default:r.uniforms[i].value=a.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap),r.transparent=!0),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){var o=e.normalScale;!1===Array.isArray(o)&&(o=[o,o]),r.normalScale=(new Qt).fromArray(o)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),r},setPath:function(e){return this.path=e,this},setTextures:function(e){return this.textures=e,this}});var ac={decodeText:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);return decodeURIComponent(escape(t))},extractUrlBase:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};function oc(e){this.manager=void 0!==e?e:ms}Object.assign(oc.prototype,{load:function(e,t,n,r){var i=this,a=new gs(i.manager);a.setPath(i.path),a.load(e,function(e){t(i.parse(JSON.parse(e)))},n,r)},parse:function(e){var t=new or,n=e.data.index;if(void 0!==n){var r=new sc[n.type](n.array);t.setIndex(new Yn(r,1))}var i=e.data.attributes;for(var a in i){var o=i[a];r=new sc[o.type](o.array);t.addAttribute(a,new Yn(r,o.itemSize,o.normalized))}var s=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==s)for(var c=0,l=s.length;c!==l;++c){var u=s[c];t.addGroup(u.start,u.count,u.materialIndex)}var h=e.data.boundingSphere;if(void 0!==h){var p=new tn;void 0!==h.center&&p.fromArray(h.center),t.boundingSphere=new gn(p,h.radius)}return e.name&&(t.name=e.name),e.userData&&(t.userData=e.userData),t},setPath:function(e){return this.path=e,this}});var sc={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function cc(e){this.manager=void 0!==e?e:ms,this.resourcePath=""}Object.assign(cc.prototype,{crossOrigin:"anonymous",load:function(e,t,n,r){var i=this,a=void 0===this.path?ac.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;var o=new gs(i.manager);o.setPath(this.path),o.load(e,function(n){var a=null;try{a=JSON.parse(n)}catch(t){return void 0!==r&&r(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}var o=a.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?i.parse(a,t):console.error("THREE.ObjectLoader: Can't load "+e)},n,r)},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(e,t){var n=this.parseShape(e.shapes),r=this.parseGeometries(e.geometries,n),i=this.parseImages(e.images,function(){void 0!==t&&t(s)}),a=this.parseTextures(e.textures,i),o=this.parseMaterials(e.materials,a),s=this.parseObject(e.object,r,o);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){var t={};if(void 0!==e)for(var n=0,r=e.length;n<r;n++){var i=(new qs).fromJSON(e[n]);t[i.uuid]=i}return t},parseGeometries:function(e,t){var n={};if(void 0!==e)for(var r=new oc,i=0,a=e.length;i<a;i++){var o,s=e[i];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new Fo[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":o=new Fo[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":o=new Fo[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":o=new Fo[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":o=new Fo[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":o=new Fo[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":o=new Fo[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":o=new Fo[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":o=new Fo[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":o=new Fo[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"LatheGeometry":case"LatheBufferGeometry":o=new Fo[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":o=new Fo[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var c=[],l=0,u=s.shapes.length;l<u;l++){var h=t[s.shapes[l]];c.push(h)}o=new Fo[s.type](c,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(c=[],l=0,u=s.shapes.length;l<u;l++){h=t[s.shapes[l]];c.push(h)}var p=s.options.extrudePath;void 0!==p&&(s.options.extrudePath=(new Vs[p.type]).fromJSON(p)),o=new Fo[s.type](c,s.options);break;case"BufferGeometry":o=r.parse(s);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE)o=(new THREE.LegacyJSONLoader).parse(s,this.resourcePath).geometry;else console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),!0===o.isBufferGeometry&&void 0!==s.userData&&(o.userData=s.userData),n[s.uuid]=o}return n},parseMaterials:function(e,t){var n={},r={};if(void 0!==e){var i=new ic;i.setTextures(t);for(var a=0,o=e.length;a<o;a++){var s=e[a];if("MultiMaterial"===s.type){for(var c=[],l=0;l<s.materials.length;l++){var u=s.materials[l];void 0===n[u.uuid]&&(n[u.uuid]=i.parse(u)),c.push(n[u.uuid])}r[s.uuid]=c}else r[s.uuid]=i.parse(s),n[s.uuid]=r[s.uuid]}}return r},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=hs.parse(r);void 0!==r.uuid&&(i.uuid=r.uuid),t.push(i)}return t},parseImages:function(e,t){var n=this,r={};function i(e){return n.manager.itemStart(e),a.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemError(e),n.manager.itemEnd(e)})}if(void 0!==e&&e.length>0){var a=new ws(new fs(t));a.setCrossOrigin(this.crossOrigin);for(var o=0,s=e.length;o<s;o++){var c=e[o],l=c.url;if(Array.isArray(l)){r[c.uuid]=[];for(var u=0,h=l.length;u<h;u++){var p=l[u],d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:n.resourcePath+p;r[c.uuid].push(i(d))}}else{d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:n.resourcePath+c.url;r[c.uuid]=i(d)}}}return r},parseTextures:function(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var r={};if(void 0!==e)for(var i=0,a=e.length;i<a;i++){var o,s=e[i];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),(o=Array.isArray(t[s.image])?new Lr(t[s.image]):new hn(t[s.image])).needsUpdate=!0,o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),void 0!==s.mapping&&(o.mapping=n(s.mapping,fc)),void 0!==s.offset&&o.offset.fromArray(s.offset),void 0!==s.repeat&&o.repeat.fromArray(s.repeat),void 0!==s.center&&o.center.fromArray(s.center),void 0!==s.rotation&&(o.rotation=s.rotation),void 0!==s.wrap&&(o.wrapS=n(s.wrap[0],mc),o.wrapT=n(s.wrap[1],mc)),void 0!==s.format&&(o.format=s.format),void 0!==s.minFilter&&(o.minFilter=n(s.minFilter,vc)),void 0!==s.magFilter&&(o.magFilter=n(s.magFilter,vc)),void 0!==s.anisotropy&&(o.anisotropy=s.anisotropy),void 0!==s.flipY&&(o.flipY=s.flipY),r[s.uuid]=o}return r},parseObject:function(e,t,n){var r;function i(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function a(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],r=0,i=e.length;r<i;r++){var a=e[r];void 0===n[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),t.push(n[a])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":r=new ca,void 0!==e.background&&Number.isInteger(e.background)&&(r.background=new Cn(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?r.fog=new sa(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(r.fog=new oa(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":r=new Yi(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(r.focus=e.focus),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.filmGauge&&(r.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(r.filmOffset=e.filmOffset),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"OrthographicCamera":r=new $s(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"AmbientLight":r=new nc(e.color,e.intensity);break;case"DirectionalLight":r=new tc(e.color,e.intensity);break;case"PointLight":r=new Qs(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":r=new rc(e.color,e.intensity,e.width,e.height);break;case"SpotLight":r=new Ks(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":r=new Xs(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var o=i(e.geometry),s=a(e.material);r=o.bones&&o.bones.length>0?new fa(o,s):new Ar(o,s);break;case"LOD":r=new da;break;case"Line":r=new ya(i(e.geometry),a(e.material),e.mode);break;case"LineLoop":r=new xa(i(e.geometry),a(e.material));break;case"LineSegments":r=new ba(i(e.geometry),a(e.material));break;case"PointCloud":case"Points":r=new _a(i(e.geometry),a(e.material));break;case"Sprite":r=new pa(a(e.material));break;case"Group":r=new Wi;break;default:r=new Hn}if(r.uuid=e.uuid,void 0!==e.name&&(r.name=e.name),void 0!==e.matrix?(r.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(r.matrixAutoUpdate=e.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(void 0!==e.position&&r.position.fromArray(e.position),void 0!==e.rotation&&r.rotation.fromArray(e.rotation),void 0!==e.quaternion&&r.quaternion.fromArray(e.quaternion),void 0!==e.scale&&r.scale.fromArray(e.scale)),void 0!==e.castShadow&&(r.castShadow=e.castShadow),void 0!==e.receiveShadow&&(r.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(r.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(r.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&r.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(r.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.frustumCulled&&(r.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(r.renderOrder=e.renderOrder),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.layers&&(r.layers.mask=e.layers),void 0!==e.children)for(var c=e.children,l=0;l<c.length;l++)r.add(this.parseObject(c[l],t,n));if("LOD"===e.type)for(var u=e.levels,h=0;h<u.length;h++){var p=u[h],d=r.getObjectByProperty("uuid",p.object);void 0!==d&&r.addLevel(d,p.distance)}return r}});var lc,uc,hc,pc,dc,fc={UVMapping:xe,CubeReflectionMapping:we,CubeRefractionMapping:_e,EquirectangularReflectionMapping:Me,EquirectangularRefractionMapping:Ee,SphericalReflectionMapping:Se,CubeUVReflectionMapping:Te,CubeUVRefractionMapping:Pe},mc={RepeatWrapping:Ce,ClampToEdgeWrapping:Ae,MirroredRepeatWrapping:Oe},vc={NearestFilter:Le,NearestMipMapNearestFilter:Re,NearestMipMapLinearFilter:Ne,LinearFilter:ke,LinearMipMapNearestFilter:Ie,LinearMipMapLinearFilter:De};function gc(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==e?e:ms,this.options=void 0}function yc(){this.type="ShapePath",this.color=new Cn,this.subPaths=[],this.currentPath=null}function bc(e){this.type="Font",this.data=e}function xc(e,t,n,r,i){var a=i.glyphs[e]||i.glyphs["?"];if(a){var o,s,c,l,u,h,p,d,f=new yc;if(a.o)for(var m=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),v=0,g=m.length;v<g;){switch(m[v++]){case"m":o=m[v++]*t+n,s=m[v++]*t+r,f.moveTo(o,s);break;case"l":o=m[v++]*t+n,s=m[v++]*t+r,f.lineTo(o,s);break;case"q":c=m[v++]*t+n,l=m[v++]*t+r,u=m[v++]*t+n,h=m[v++]*t+r,f.quadraticCurveTo(u,h,c,l);break;case"b":c=m[v++]*t+n,l=m[v++]*t+r,u=m[v++]*t+n,h=m[v++]*t+r,p=m[v++]*t+n,d=m[v++]*t+r,f.bezierCurveTo(u,h,p,d,c,l)}}return{offsetX:a.ha*t,path:f}}}function wc(e){this.manager=void 0!==e?e:ms}function _c(){}gc.prototype={constructor:gc,setOptions:function(e){return this.options=e,this},load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,a=ds.get(e);if(void 0!==a)return i.manager.itemStart(e),setTimeout(function(){t&&t(a),i.manager.itemEnd(e)},0),a;fetch(e).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,i.options)}).then(function(n){ds.add(e,n),t&&t(n),i.manager.itemEnd(e)}).catch(function(t){r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)})},setCrossOrigin:function(){return this},setPath:function(e){return this.path=e,this}},Object.assign(yc.prototype,{moveTo:function(e,t){this.currentPath=new Ws,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,r){this.currentPath.quadraticCurveTo(e,t,n,r)},bezierCurveTo:function(e,t,n,r,i,a){this.currentPath.bezierCurveTo(e,t,n,r,i,a)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function n(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],a=new qs;a.curves=i.curves,t.push(a)}return t}function r(e,t){for(var n=t.length,r=!1,i=n-1,a=0;a<n;i=a++){var o=t[i],s=t[a],c=s.x-o.x,l=s.y-o.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(o=t[a],c=-c,s=t[i],l=-l),e.y<o.y||e.y>s.y)continue;if(e.y===o.y){if(e.x===o.x)return!0}else{var u=l*(e.x-o.x)-c*(e.y-o.y);if(0===u)return!0;if(u<0)continue;r=!r}}else{if(e.y!==o.y)continue;if(s.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=s.x)return!0}}return r}var i=mo.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===t)return n(a);var o,s,c,l=[];if(1===a.length)return s=a[0],(c=new qs).curves=s.curves,l.push(c),l;var u=!i(a[0].getPoints());u=e?!u:u;var h,p,d=[],f=[],m=[],v=0;f[v]=void 0,m[v]=[];for(var g=0,y=a.length;g<y;g++)o=i(h=(s=a[g]).getPoints()),(o=e?!o:o)?(!u&&f[v]&&v++,f[v]={s:new qs,p:h},f[v].s.curves=s.curves,u&&v++,m[v]=[]):m[v].push({h:s,p:h[0]});if(!f[0])return n(a);if(f.length>1){for(var b=!1,x=[],w=0,_=f.length;w<_;w++)d[w]=[];for(w=0,_=f.length;w<_;w++)for(var M=m[w],E=0;E<M.length;E++){for(var S=M[E],T=!0,P=0;P<f.length;P++)r(S.p,f[P].p)&&(w!==P&&x.push({froms:w,tos:P,hole:E}),T?(T=!1,d[P].push(S)):b=!0);T&&d[w].push(S)}x.length>0&&(b||(m=d))}g=0;for(var C=f.length;g<C;g++){c=f[g].s,l.push(c);for(var A=0,O=(p=m[g]).length;A<O;A++)c.holes.push(p[A].h)}return l}}),Object.assign(bc.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);for(var n=[],r=function(e,t,n){for(var r=Array.from?Array.from(e):String(e).split(""),i=t/n.resolution,a=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,o=[],s=0,c=0,l=0;l<r.length;l++){var u=r[l];if("\n"===u)s=0,c-=a;else{var h=xc(u,i,s,c,n);s+=h.offsetX,o.push(h.path)}}return o}(e,t,this.data),i=0,a=r.length;i<a;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}}),Object.assign(wc.prototype,{load:function(e,t,n,r){var i=this,a=new gs(this.manager);a.setPath(this.path),a.load(e,function(e){var n;try{n=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var r=i.parse(n);t&&t(r)},n,r)},parse:function(e){return new bc(e)},setPath:function(e){return this.path=e,this}}),_c.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,r=t.length;n<r;n+=2){var i=t[n],a=t[n+1];if(i.test(e))return a}return null}},Object.assign(_c.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(e,t,n){for(var r=[],i=0;i<e.length;++i)r[i]=this.createMaterial(e[i],t,n);return r},createMaterial:(lc={NoBlending:I,NormalBlending:D,AdditiveBlending:z,SubtractiveBlending:j,MultiplyBlending:U,CustomBlending:F},uc=new Cn,hc=new Ms,pc=new ic,function(e,t,n){var r={};function i(e,i,a,o,s){var c,l=t+e,u=_c.Handlers.get(l);null!==u?c=u.load(l):(hc.setCrossOrigin(n),c=hc.load(l)),void 0!==i&&(c.repeat.fromArray(i),1!==i[0]&&(c.wrapS=Ce),1!==i[1]&&(c.wrapT=Ce)),void 0!==a&&c.offset.fromArray(a),void 0!==o&&("repeat"===o[0]&&(c.wrapS=Ce),"mirror"===o[0]&&(c.wrapS=Oe),"repeat"===o[1]&&(c.wrapT=Ce),"mirror"===o[1]&&(c.wrapT=Oe)),void 0!==s&&(c.anisotropy=s);var h=Kt.generateUUID();return r[h]=c,h}var a={uuid:Kt.generateUUID(),type:"MeshLambertMaterial"};for(var o in e){var s=e[o];switch(o){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":a.name=s;break;case"blending":a.blending=lc[s];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",o,"is no longer supported.");break;case"colorDiffuse":a.color=uc.fromArray(s).getHex();break;case"colorSpecular":a.specular=uc.fromArray(s).getHex();break;case"colorEmissive":a.emissive=uc.fromArray(s).getHex();break;case"specularCoef":a.shininess=s;break;case"shading":"basic"===s.toLowerCase()&&(a.type="MeshBasicMaterial"),"phong"===s.toLowerCase()&&(a.type="MeshPhongMaterial"),"standard"===s.toLowerCase()&&(a.type="MeshStandardMaterial");break;case"mapDiffuse":a.map=i(s,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":a.emissiveMap=i(s,e.mapEmissiveRepeat,e.mapEmissiveOffset,e.mapEmissiveWrap,e.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":a.lightMap=i(s,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":a.aoMap=i(s,e.mapAORepeat,e.mapAOOffset,e.mapAOWrap,e.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":a.bumpMap=i(s,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy);break;case"mapBumpScale":a.bumpScale=s;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":a.normalMap=i(s,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy);break;case"mapNormalFactor":a.normalScale=s;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":a.specularMap=i(s,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":a.metalnessMap=i(s,e.mapMetalnessRepeat,e.mapMetalnessOffset,e.mapMetalnessWrap,e.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":a.roughnessMap=i(s,e.mapRoughnessRepeat,e.mapRoughnessOffset,e.mapRoughnessWrap,e.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":a.alphaMap=i(s,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":a.side=C;break;case"doubleSided":a.side=A;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),a.opacity=s;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":a[o]=s;break;case"vertexColors":!0===s&&(a.vertexColors=k),"face"===s&&(a.vertexColors=N);break;default:console.error("THREE.Loader.createMaterial: Unsupported",o,s)}}return"MeshBasicMaterial"===a.type&&delete a.emissive,"MeshPhongMaterial"!==a.type&&delete a.specular,a.opacity<1&&(a.transparent=!0),pc.setTextures(r),pc.parse(a)})});var Mc,Ec,Sc,Tc,Pc,Cc,Ac,Oc,Lc,Rc,Nc={getContext:function(){return void 0===dc&&(dc=new(window.AudioContext||window.webkitAudioContext)),dc},setContext:function(e){dc=e}};function kc(e){this.manager=void 0!==e?e:ms}function Ic(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Yi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Yi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Dc(e,t,n,r){Hn.call(this),this.type="CubeCamera";var i=new Yi(90,1,e,t);i.up.set(0,-1,0),i.lookAt(new tn(1,0,0)),this.add(i);var a=new Yi(90,1,e,t);a.up.set(0,-1,0),a.lookAt(new tn(-1,0,0)),this.add(a);var o=new Yi(90,1,e,t);o.up.set(0,0,1),o.lookAt(new tn(0,1,0)),this.add(o);var s=new Yi(90,1,e,t);s.up.set(0,0,-1),s.lookAt(new tn(0,-1,0)),this.add(s);var c=new Yi(90,1,e,t);c.up.set(0,-1,0),c.lookAt(new tn(0,0,1)),this.add(c);var l=new Yi(90,1,e,t);l.up.set(0,-1,0),l.lookAt(new tn(0,0,-1)),this.add(l),r=r||{format:Ze,magFilter:ke,minFilter:ke},this.renderTarget=new fn(n,n,r),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,i,n),n.activeCubeFace=1,e.render(t,a,n),n.activeCubeFace=2,e.render(t,o,n),n.activeCubeFace=3,e.render(t,s,n),n.activeCubeFace=4,e.render(t,c,n),n.texture.generateMipmaps=r,n.activeCubeFace=5,e.render(t,l,n),e.setRenderTarget(null)},this.clear=function(e,t,n,r){for(var i=this.renderTarget,a=0;a<6;a++)i.activeCubeFace=a,e.setRenderTarget(i),e.clear(t,n,r);e.setRenderTarget(null)}}function zc(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function jc(){Hn.call(this),this.type="AudioListener",this.context=Nc.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0}function Uc(e){Hn.call(this),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Fc(e){Uc.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function Bc(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function Hc(e,t,n){this.binding=e,this.valueSize=n;var r,i=Float64Array;switch(t){case"quaternion":r=this._slerp;break;case"string":case"bool":i=Array,r=this._select;break;default:r=this._lerp}this.buffer=new i(4*n),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}Object.assign(kc.prototype,{load:function(e,t,n,r){var i=new gs(this.manager);i.setResponseType("arraybuffer"),i.setPath(this.path),i.load(e,function(e){var n=e.slice(0);Nc.getContext().decodeAudioData(n,function(e){t(e)})},n,r)},setPath:function(e){return this.path=e,this}}),Object.assign(Ic.prototype,{update:(Lc=new $t,Rc=new $t,function(e){if(Mc!==this||Ec!==e.focus||Sc!==e.fov||Tc!==e.aspect*this.aspect||Pc!==e.near||Cc!==e.far||Ac!==e.zoom||Oc!==this.eyeSep){Mc=this,Ec=e.focus,Sc=e.fov,Tc=e.aspect*this.aspect,Pc=e.near,Cc=e.far,Ac=e.zoom;var t,n,r=e.projectionMatrix.clone(),i=(Oc=this.eyeSep/2)*Pc/Ec,a=Pc*Math.tan(Kt.DEG2RAD*Sc*.5)/Ac;Rc.elements[12]=-Oc,Lc.elements[12]=Oc,t=-a*Tc+i,n=a*Tc+i,r.elements[0]=2*Pc/(n-t),r.elements[8]=(n+t)/(n-t),this.cameraL.projectionMatrix.copy(r),t=-a*Tc-i,n=a*Tc-i,r.elements[0]=2*Pc/(n-t),r.elements[8]=(n+t)/(n-t),this.cameraR.projectionMatrix.copy(r)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Rc),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Lc)})}),Dc.prototype=Object.create(Hn.prototype),Dc.prototype.constructor=Dc,Object.assign(zc.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),jc.prototype=Object.assign(Object.create(Hn.prototype),{constructor:jc,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(){var e=new tn,t=new en,n=new tn,r=new tn,i=new zc;return function(a){Hn.prototype.updateMatrixWorld.call(this,a);var o=this.context.listener,s=this.up;if(this.timeDelta=i.getDelta(),this.matrixWorld.decompose(e,t,n),r.set(0,0,-1).applyQuaternion(t),o.positionX){var c=this.context.currentTime+this.timeDelta;o.positionX.linearRampToValueAtTime(e.x,c),o.positionY.linearRampToValueAtTime(e.y,c),o.positionZ.linearRampToValueAtTime(e.z,c),o.forwardX.linearRampToValueAtTime(r.x,c),o.forwardY.linearRampToValueAtTime(r.y,c),o.forwardZ.linearRampToValueAtTime(r.z,c),o.upX.linearRampToValueAtTime(s.x,c),o.upY.linearRampToValueAtTime(s.y,c),o.upZ.linearRampToValueAtTime(s.z,c)}else o.setPosition(e.x,e.y,e.z),o.setOrientation(r.x,r.y,r.z,s.x,s.y,s.z)}}()}),Uc.prototype=Object.assign(Object.create(Hn.prototype),{constructor:Uc,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.detune.value=this.detune,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},setDetune:function(e){return this.detune=e,!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}),Fc.prototype=Object.assign(Object.create(Uc.prototype),{constructor:Fc,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(){var e=new tn,t=new en,n=new tn,r=new tn;return function(i){Hn.prototype.updateMatrixWorld.call(this,i);var a=this.panner;if(this.matrixWorld.decompose(e,t,n),r.set(0,0,1).applyQuaternion(t),a.positionX){var o=this.context.currentTime+this.listener.timeDelta;a.positionX.linearRampToValueAtTime(e.x,o),a.positionY.linearRampToValueAtTime(e.y,o),a.positionZ.linearRampToValueAtTime(e.z,o),a.orientationX.linearRampToValueAtTime(r.x,o),a.orientationY.linearRampToValueAtTime(r.y,o),a.orientationZ.linearRampToValueAtTime(r.z,o)}else a.setPosition(e.x,e.y,e.z),a.setOrientation(r.x,r.y,r.z)}}()}),Object.assign(Bc.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign(Hc.prototype,{accumulate:function(e,t){var n=this.buffer,r=this.valueSize,i=e*r+r,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==r;++o)n[i+o]=n[o];a=t}else{var s=t/(a+=t);this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=a},apply:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,a=this.binding;if(this.cumulativeWeight=0,i<1){var o=3*t;this._mixBufferRegion(n,r,o,1-i,t)}for(var s=t,c=t+t;s!==c;++s)if(n[s]!==n[s+t]){a.setValue(n,r);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=3*n;e.getValue(t,r);for(var i=n,a=r;i!==a;++i)t[i]=t[r+i%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,n,r,i){if(r>=.5)for(var a=0;a!==i;++a)e[t+a]=e[n+a]},_slerp:function(e,t,n,r){en.slerpFlat(e,t,e,t,e,n,r)},_lerp:function(e,t,n,r,i){for(var a=1-r,o=0;o!==i;++o){var s=t+o;e[s]=e[s]*a+e[n+o]*r}}});var Vc,Gc,Wc,qc,Yc,Xc,Jc,Zc,Kc,Qc,$c,el,tl,nl,rl;function il(e,t,n){var r=n||al.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}function al(e,t,n){this.path=t,this.parsedPath=n||al.parseTrackName(t),this.node=al.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function ol(){this.uuid=Kt.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}function sl(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var r=t.tracks,i=r.length,a=new Array(i),o={endingStart:Nt,endingEnd:Nt},s=0;s!==i;++s){var c=r[s].createInterpolant(null);a[s]=c,c.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Ct,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function cl(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function ll(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function ul(){or.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function hl(e,t,n){la.call(this,e,t),this.meshPerAttribute=n||1}function pl(e,t,n,r){"number"==typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Yn.call(this,e,t,n),this.meshPerAttribute=r||1}function dl(e,t,n,r){this.ray=new Tr(e,t),this.near=n||0,this.far=r||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function fl(e,t){return e.distance-t.distance}function ml(e,t,n,r){if(!1!==e.visible&&(e.raycast(t,n),!0===r))for(var i=e.children,a=0,o=i.length;a<o;a++)ml(i[a],t,n,!0)}function vl(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}function gl(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}function yl(e,t){this.min=void 0!==e?e:new Qt(1/0,1/0),this.max=void 0!==t?t:new Qt(-1/0,-1/0)}function bl(e,t){this.start=void 0!==e?e:new tn,this.end=void 0!==t?t:new tn}function xl(e){Hn.call(this),this.material=e,this.render=function(){}}function wl(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16711680,a=void 0!==r?r:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=3*s.faces.length:s&&s.isBufferGeometry&&(o=s.attributes.normal.count);var c=new or,l=new tr(2*o*3,3);c.addAttribute("position",l),ba.call(this,c,new ga({color:i,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}function _l(e,t){Hn.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new or,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,a=1;i<32;i++,a++){var o=i/32*Math.PI*2,s=a/32*Math.PI*2;r.push(Math.cos(o),Math.sin(o),1,Math.cos(s),Math.sin(s),1)}n.addAttribute("position",new tr(r,3));var c=new ga({fog:!1});this.cone=new ba(n,c),this.add(this.cone),this.update()}function Ml(e){for(var t=function e(t){var n=[];t&&t.isBone&&n.push(t);for(var r=0;r<t.children.length;r++)n.push.apply(n,e(t.children[r]));return n}(e),n=new or,r=[],i=[],a=new Cn(0,0,1),o=new Cn(0,1,0),s=0;s<t.length;s++){var c=t[s];c.parent&&c.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(a.r,a.g,a.b),i.push(o.r,o.g,o.b))}n.addAttribute("position",new tr(r,3)),n.addAttribute("color",new tr(i,3));var l=new ga({vertexColors:k,depthTest:!1,depthWrite:!1,transparent:!0});ba.call(this,n,l),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function El(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var r=new So(t,4,2),i=new Cr({wireframe:!0,fog:!1});Ar.call(this,r,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Sl(e,t){Hn.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;var n=new ga({fog:!1}),r=new or;r.addAttribute("position",new Yn(new Float32Array(15),3)),this.line=new ya(r,n),this.add(this.line),this.update()}function Tl(e,t,n){Hn.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var r=new Ia(t);r.rotateY(.5*Math.PI),this.material=new Cr({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=k);var i=r.getAttribute("position"),a=new Float32Array(3*i.count);r.addAttribute("color",new Yn(a,3)),this.add(new Ar(r,this.material)),this.update()}function Pl(e,t,n,r){e=e||10,t=t||10,n=new Cn(void 0!==n?n:4473924),r=new Cn(void 0!==r?r:8947848);for(var i=t/2,a=e/t,o=e/2,s=[],c=[],l=0,u=0,h=-o;l<=t;l++,h+=a){s.push(-o,0,h,o,0,h),s.push(h,0,-o,h,0,o);var p=l===i?n:r;p.toArray(c,u),u+=3,p.toArray(c,u),u+=3,p.toArray(c,u),u+=3,p.toArray(c,u),u+=3}var d=new or;d.addAttribute("position",new tr(s,3)),d.addAttribute("color",new tr(c,3));var f=new ga({vertexColors:k});ba.call(this,d,f)}function Cl(e,t,n,r,i,a){e=e||10,t=t||16,n=n||8,r=r||64,i=new Cn(void 0!==i?i:4473924),a=new Cn(void 0!==a?a:8947848);var o,s,c,l,u,h,p,d=[],f=[];for(l=0;l<=t;l++)c=l/t*(2*Math.PI),o=Math.sin(c)*e,s=Math.cos(c)*e,d.push(0,0,0),d.push(o,0,s),p=1&l?i:a,f.push(p.r,p.g,p.b),f.push(p.r,p.g,p.b);for(l=0;l<=n;l++)for(p=1&l?i:a,h=e-e/n*l,u=0;u<r;u++)c=u/r*(2*Math.PI),o=Math.sin(c)*h,s=Math.cos(c)*h,d.push(o,0,s),f.push(p.r,p.g,p.b),c=(u+1)/r*(2*Math.PI),o=Math.sin(c)*h,s=Math.cos(c)*h,d.push(o,0,s),f.push(p.r,p.g,p.b);var m=new or;m.addAttribute("position",new tr(d,3)),m.addAttribute("color",new tr(f,3));var v=new ga({vertexColors:k});ba.call(this,m,v)}function Al(e,t,n,r){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==n?n:16776960,a=void 0!==r?r:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var c=new or,l=new tr(2*o*3,3);c.addAttribute("position",l),ba.call(this,c,new ga({color:i,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}function Ol(e,t,n){Hn.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);var r=new or;r.addAttribute("position",new tr([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var i=new ga({fog:!1});this.lightPlane=new ya(r,i),this.add(this.lightPlane),(r=new or).addAttribute("position",new tr([0,0,0,0,0,1],3)),this.targetLine=new ya(r,i),this.add(this.targetLine),this.update()}function Ll(e){var t=new or,n=new ga({color:16777215,vertexColors:N}),r=[],i=[],a={},o=new Cn(16755200),s=new Cn(16711680),c=new Cn(43775),l=new Cn(16777215),u=new Cn(3355443);function h(e,t,n){p(e,n),p(t,n)}function p(e,t){r.push(0,0,0),i.push(t.r,t.g,t.b),void 0===a[e]&&(a[e]=[]),a[e].push(r.length/3-1)}h("n1","n2",o),h("n2","n4",o),h("n4","n3",o),h("n3","n1",o),h("f1","f2",o),h("f2","f4",o),h("f4","f3",o),h("f3","f1",o),h("n1","f1",o),h("n2","f2",o),h("n3","f3",o),h("n4","f4",o),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",c),h("u2","u3",c),h("u3","u1",c),h("c","t",l),h("p","c",u),h("cn1","cn2",u),h("cn3","cn4",u),h("cf1","cf2",u),h("cf3","cf4",u),t.addAttribute("position",new tr(r,3)),t.addAttribute("color",new tr(i,3)),ba.call(this,t,n),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}function Rl(e,t){this.object=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new or;i.setIndex(new Yn(n,1)),i.addAttribute("position",new Yn(r,3)),ba.call(this,i,new ga({color:t})),this.matrixAutoUpdate=!1,this.update()}function Nl(e,t){this.type="Box3Helper",this.box=e;var n=void 0!==t?t:16776960,r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new or;i.setIndex(new Yn(r,1)),i.addAttribute("position",new tr([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),ba.call(this,i,new ga({color:n})),this.geometry.computeBoundingSphere()}function kl(e,t,n){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var r=void 0!==n?n:16776960,i=new or;i.addAttribute("position",new tr([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),ya.call(this,i,new ga({color:r}));var a=new or;a.addAttribute("position",new tr([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),a.computeBoundingSphere(),this.add(new Ar(a,new Cr({color:r,opacity:.2,transparent:!0,depthWrite:!1})))}function Il(e,t,n,r,i,a){Hn.call(this),void 0===e&&(e=new THREE.Vector3(0,0,1)),void 0===t&&(t=new THREE.Vector3(0,0,0)),void 0===n&&(n=1),void 0===r&&(r=16776960),void 0===i&&(i=.2*n),void 0===a&&(a=.2*i),void 0===el&&((el=new or).addAttribute("position",new tr([0,0,0,0,1,0],3)),(tl=new Io(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new ya(el,new ga({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ar(tl,new Cr({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,a)}function Dl(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new or;n.addAttribute("position",new tr(t,3)),n.addAttribute("color",new tr([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var r=new ga({vertexColors:k});ba.call(this,n,r)}function zl(e,t,n,r,i,a,o){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new kn(e,t,n,i,a,o)}Object.assign(il.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(al,{Composite:il,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new al.Composite(e,t,n):new al(e,t,n)},sanitizeNodeName:(Kc=new RegExp("[\\[\\]\\.:\\/]","g"),function(e){return e.replace(/\s/g,"_").replace(Kc,"")}),parseTrackName:(Vc="[^\\[\\]\\.:\\/]",Gc="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",Wc=/((?:WC+[\/:])*)/.source.replace("WC",Vc),qc=/(WCOD+)?/.source.replace("WCOD",Gc),Yc=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Vc),Xc=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Vc),Jc=new RegExp("^"+Wc+qc+Yc+Xc+"$"),Zc=["material","materials","bones"],function(e){var t=Jc.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==Zc.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var r=function(e){for(var n=0;n<e.length;n++){var i=e[n];if(i.name===t||i.uuid===t)return i;var a=r(i.children);if(a)return a}return null},i=r(e.children);if(i)return i}return null}}),Object.assign(al.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)e[t++]=n[r]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++]},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,i=t.propertyIndex;if(e||(e=al.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(n){var a=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var o=0;o<e.length;o++)if(e[o].name===a){a=o;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==a){if(void 0===e[a])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[a]}}var s=e[r];if(void 0!==s){var c=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);var l=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(o=0;o<this.node.geometry.morphAttributes.position.length;o++)if(e.geometry.morphAttributes.position[o].name===i){i=o;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(o=0;o<this.node.geometry.morphTargets.length;o++)if(e.geometry.morphTargets[o].name===i){i=o;break}}}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]}else{var u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+r+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),
//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(al.prototype,{_getValue_unbound:al.prototype.getValue,_setValue_unbound:al.prototype.setValue}),Object.assign(ol.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._paths,a=this._parsedPaths,o=this._bindings,s=o.length,c=void 0,l=0,u=arguments.length;l!==u;++l){var h=arguments[l],p=h.uuid,d=r[p];if(void 0===d){d=t++,r[p]=d,e.push(h);for(var f=0,m=s;f!==m;++f)o[f].push(new al(h,i[f],a[f]))}else if(d<n){c=e[d];var v=--n,g=e[v];r[g.uuid]=d,e[d]=g,r[p]=v,e[v]=h;for(f=0,m=s;f!==m;++f){var y=o[f],b=y[v],x=y[d];y[d]=b,void 0===x&&(x=new al(h,i[f],a[f])),y[v]=x}}else e[d]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,i=r.length,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],c=s.uuid,l=n[c];if(void 0!==l&&l>=t){var u=t++,h=e[u];n[h.uuid]=l,e[l]=h,n[c]=u,e[u]=s;for(var p=0,d=i;p!==d;++p){var f=r[p],m=f[u],v=f[l];f[l]=m,f[u]=v}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,a=i.length,o=0,s=arguments.length;o!==s;++o){var c=arguments[o].uuid,l=r[c];if(void 0!==l)if(delete r[c],l<n){var u=--n,h=e[u],p=e[g=--t];r[h.uuid]=l,e[l]=h,r[p.uuid]=u,e[u]=p,e.pop();for(var d=0,f=a;d!==f;++d){var m=(y=i[d])[u],v=y[g];y[l]=m,y[u]=v,y.pop()}}else{var g;r[(p=e[g=--t]).uuid]=l,e[l]=p,e.pop();for(d=0,f=a;d!==f;++d){var y;(y=i[d])[l]=y[g],y.pop()}}}this.nCachedObjects_=n},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],i=this._bindings;if(void 0!==r)return i[r];var a=this._paths,o=this._parsedPaths,s=this._objects,c=s.length,l=this.nCachedObjects_,u=new Array(c);r=i.length,n[e]=r,a.push(e),o.push(t),i.push(u);for(var h=l,p=s.length;h!==p;++h){var d=s[h];u[h]=new al(d,e,t)}return u},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,i=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];t[e[o]]=n,a[n]=s,a.pop(),i[n]=i[o],i.pop(),r[n]=r[o],r.pop()}}}),Object.assign(sl.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,i=e._clip.duration,a=i/r,o=r/i;e.warp(1,a,t),this.warp(o,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var r=this._mixer,i=r.time,a=this._timeScaleInterpolant,o=this.timeScale;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);var s=a.parameterPositions,c=a.sampleValues;return s[0]=i,s[1]=i+n,c[0]=e/o,c[1]=t/o,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var a=(e-i)*n;if(a<0||0===n)return;this._startTime=null,t=n*a}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var c=this._interpolants,l=this._propertyBindings,u=0,h=c.length;u!==h;++u)c[u].evaluate(o),l[u].accumulate(r,s)}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e,n=this._clip.duration,r=this.loop,i=this._loopCount,a=r===At;if(0===e)return-1===i?t:a&&1==(1&i)?n-t:t;if(r===Pt){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),t>=n||t<0){var o=Math.floor(t/n);t-=n*o,i+=Math.abs(o);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var c=e<0;this._setEndings(c,!c,a)}else this._setEndings(!1,!1,a);this._loopCount=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}if(a&&1==(1&i))return this.time=t,n-t}return this.time=t,t},_setEndings:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=kt,r.endingEnd=kt):(r.endingStart=e?this.zeroSlopeAtStart?kt:Nt:It,r.endingEnd=t?this.zeroSlopeAtEnd?kt:Nt:It)},_scheduleFading:function(e,t,n){var r=this._mixer,i=r.time,a=this._weightInterpolant;null===a&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=i,s[0]=t,o[1]=i+e,s[1]=n,this}}),cl.prototype=Object.assign(Object.create(r.prototype),{constructor:cl,_bindAction:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,a=e._propertyBindings,o=e._interpolants,s=n.uuid,c=this._bindingsByRootAndName,l=c[s];void 0===l&&(l={},c[s]=l);for(var u=0;u!==i;++u){var h=r[u],p=h.name,d=l[p];if(void 0!==d)a[u]=d;else{if(void 0!==(d=a[u])){null===d._cacheIndex&&(++d.referenceCount,this._addInactiveBinding(d,s,p));continue}var f=t&&t._propertyBindings[u].binding.parsedPath;++(d=new Hc(al.create(n,p,f),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(d,s,p),a[u]=d}o[u].resultBuffer=d.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}for(var i=e._propertyBindings,a=0,o=i.length;a!==o;++a){var s=i[a];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var r=this._actions,i=this._actionsByClip,a=i[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=a;else{var o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,a=this._actionsByClip,o=a[i],s=o.knownActions,c=s[s.length-1],l=e._byClipCacheIndex;c._byClipCacheIndex=l,s[l]=c,s.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete a[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,r=t.length;n!==r;++n){var i=t[n];0==--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_addInactiveBinding:function(e,t,n){var r=this._bindingsByRootAndName,i=r[t],a=this._bindings;void 0===i&&(i={},r[t]=i),i[n]=e,e._cacheIndex=a.length,a.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,a=this._bindingsByRootAndName,o=a[r],s=t[t.length-1],c=e._cacheIndex;s._cacheIndex=c,t[c]=s,t.pop(),delete o[i];e:{for(var l in o)break e;delete a[r]}},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new ts(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"==typeof e?hs.findByName(n,e):e,a=null!==i?i.uuid:e,o=this._actionsByClip[a],s=null;if(void 0!==o){var c=o.actionByRoot[r];if(void 0!==c)return c;s=o.knownActions[0],null===i&&(i=s._clip)}if(null===i)return null;var l=new sl(this,i,t);return this._bindAction(l,s),this._addInactiveAction(l,a,r),l},existingAction:function(e,t){var n=t||this._root,r=n.uuid,i="string"==typeof e?hs.findByName(n,e):e,a=i?i.uuid:e,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[r]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==t;++i)e[i].reset();for(i=0;i!==r;++i)n[i].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),a=this._accuIndex^=1,o=0;o!==n;++o){t[o]._update(r,e,i,a)}var s=this._bindings,c=this._nActiveBindings;for(o=0;o!==c;++o)s[o].apply(a);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var a=i.knownActions,o=0,s=a.length;o!==s;++o){var c=a[o];this._deactivateAction(c);var l=c._cacheIndex,u=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,u._cacheIndex=l,t[l]=u,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var a=this._bindingsByRootAndName[t];if(void 0!==a)for(var o in a){var s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),ll.prototype.clone=function(){return new ll(void 0===this.value.clone?this.value:this.value.clone())},ul.prototype=Object.assign(Object.create(or.prototype),{constructor:ul,isInstancedBufferGeometry:!0,copy:function(e){return or.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),hl.prototype=Object.assign(Object.create(la.prototype),{constructor:hl,isInstancedInterleavedBuffer:!0,copy:function(e){return la.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),pl.prototype=Object.assign(Object.create(Yn.prototype),{constructor:pl,isInstancedBufferAttribute:!0,copy:function(e){return Yn.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(dl.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,n){var r=n||[];return ml(e,this,r,t),r.sort(fl),r},intersectObjects:function(e,t,n){var r=n||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var i=0,a=e.length;i<a;i++)ml(e[i],this,r,t);return r.sort(fl),r}}),Object.assign(vl.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Kt.clamp(t/this.radius,-1,1))),this}}),Object.assign(gl.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}}),Object.assign(yl.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new Qt;return function(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new Qt),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new Qt),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new Qt),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new Qt),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Qt;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(bl.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new tn),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new tn),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new tn),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:(Qc=new tn,$c=new tn,function(e,t){Qc.subVectors(e,this.start),$c.subVectors(this.end,this.start);var n=$c.dot($c),r=$c.dot(Qc)/n;return t&&(r=Kt.clamp(r,0,1)),r}),closestPointToPoint:function(e,t,n){var r=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new tn),this.delta(n).multiplyScalar(r).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),xl.prototype=Object.create(Hn.prototype),xl.prototype.constructor=xl,xl.prototype.isImmediateRenderObject=!0,wl.prototype=Object.create(ba.prototype),wl.prototype.constructor=wl,wl.prototype.update=function(){var e=new tn,t=new tn,n=new nn;return function(){var r=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var i=this.object.matrixWorld,a=this.geometry.attributes.position,o=this.object.geometry;if(o&&o.isGeometry)for(var s=o.vertices,c=o.faces,l=0,u=0,h=c.length;u<h;u++)for(var p=c[u],d=0,f=p.vertexNormals.length;d<f;d++){var m=s[p[r[d]]],v=p.vertexNormals[d];e.copy(m).applyMatrix4(i),t.copy(v).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),a.setXYZ(l,e.x,e.y,e.z),l+=1,a.setXYZ(l,t.x,t.y,t.z),l+=1}else if(o&&o.isBufferGeometry){var g=o.attributes.position,y=o.attributes.normal;for(l=0,d=0,f=g.count;d<f;d++)e.set(g.getX(d),g.getY(d),g.getZ(d)).applyMatrix4(i),t.set(y.getX(d),y.getY(d),y.getZ(d)),t.applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),a.setXYZ(l,e.x,e.y,e.z),l+=1,a.setXYZ(l,t.x,t.y,t.z),l+=1}a.needsUpdate=!0}}(),_l.prototype=Object.create(Hn.prototype),_l.prototype.constructor=_l,_l.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},_l.prototype.update=function(){var e=new tn;return function(){this.light.updateMatrixWorld();var t=this.light.distance?this.light.distance:1e3,n=t*Math.tan(this.light.angle);this.cone.scale.set(n,n,t),e.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(e),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),Ml.prototype=Object.create(ba.prototype),Ml.prototype.constructor=Ml,Ml.prototype.updateMatrixWorld=function(){var e=new tn,t=new $t,n=new $t;return function(r){var i=this.bones,a=this.geometry,o=a.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var s=0,c=0;s<i.length;s++){var l=i[s];l.parent&&l.parent.isBone&&(t.multiplyMatrices(n,l.matrixWorld),e.setFromMatrixPosition(t),o.setXYZ(c,e.x,e.y,e.z),t.multiplyMatrices(n,l.parent.matrixWorld),e.setFromMatrixPosition(t),o.setXYZ(c+1,e.x,e.y,e.z),c+=2)}a.getAttribute("position").needsUpdate=!0,Hn.prototype.updateMatrixWorld.call(this,r)}}(),El.prototype=Object.create(Ar.prototype),El.prototype.constructor=El,El.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},El.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},Sl.prototype=Object.create(Hn.prototype),Sl.prototype.constructor=Sl,Sl.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Sl.prototype.update=function(){var e=.5*this.light.width,t=.5*this.light.height,n=this.line.geometry.attributes.position,r=n.array;r[0]=e,r[1]=-t,r[2]=0,r[3]=e,r[4]=t,r[5]=0,r[6]=-e,r[7]=t,r[8]=0,r[9]=-e,r[10]=-t,r[11]=0,r[12]=e,r[13]=-t,r[14]=0,n.needsUpdate=!0,void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},Tl.prototype=Object.create(Hn.prototype),Tl.prototype.constructor=Tl,Tl.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Tl.prototype.update=function(){var e=new tn,t=new Cn,n=new Cn;return function(){var r=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var i=r.geometry.getAttribute("color");t.copy(this.light.color),n.copy(this.light.groundColor);for(var a=0,o=i.count;a<o;a++){var s=a<o/2?t:n;i.setXYZ(a,s.r,s.g,s.b)}i.needsUpdate=!0}r.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),Pl.prototype=Object.create(ba.prototype),Pl.prototype.constructor=Pl,Cl.prototype=Object.create(ba.prototype),Cl.prototype.constructor=Cl,Al.prototype=Object.create(ba.prototype),Al.prototype.constructor=Al,Al.prototype.update=function(){var e=new tn,t=new tn,n=new nn;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var r=this.object.matrixWorld,i=this.geometry.attributes.position,a=this.object.geometry,o=a.vertices,s=a.faces,c=0,l=0,u=s.length;l<u;l++){var h=s[l],p=h.normal;e.copy(o[h.a]).add(o[h.b]).add(o[h.c]).divideScalar(3).applyMatrix4(r),t.copy(p).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),i.setXYZ(c,e.x,e.y,e.z),c+=1,i.setXYZ(c,t.x,t.y,t.z),c+=1}i.needsUpdate=!0}}(),Ol.prototype=Object.create(Hn.prototype),Ol.prototype.constructor=Ol,Ol.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Ol.prototype.update=function(){var e=new tn,t=new tn,n=new tn;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e),this.lightPlane.lookAt(t),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(t),this.targetLine.scale.z=n.length()}}(),Ll.prototype=Object.create(ba.prototype),Ll.prototype.constructor=Ll,Ll.prototype.update=function(){var e,t,n=new tn,r=new qi;function i(i,a,o,s){n.set(a,o,s).unproject(r);var c=t[i];if(void 0!==c)for(var l=e.getAttribute("position"),u=0,h=c.length;u<h;u++)l.setXYZ(c[u],n.x,n.y,n.z)}return function(){e=this.geometry,t=this.pointMap;r.projectionMatrix.copy(this.camera.projectionMatrix),i("c",0,0,-1),i("t",0,0,1),i("n1",-1,-1,-1),i("n2",1,-1,-1),i("n3",-1,1,-1),i("n4",1,1,-1),i("f1",-1,-1,1),i("f2",1,-1,1),i("f3",-1,1,1),i("f4",1,1,1),i("u1",.7,1.1,-1),i("u2",-.7,1.1,-1),i("u3",0,2,-1),i("cf1",-1,0,1),i("cf2",1,0,1),i("cf3",0,-1,1),i("cf4",0,1,1),i("cn1",-1,0,-1),i("cn2",1,0,-1),i("cn3",0,-1,-1),i("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),Rl.prototype=Object.create(ba.prototype),Rl.prototype.constructor=Rl,Rl.prototype.update=function(){var e=new vn;return function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&e.setFromObject(this.object),!e.isEmpty()){var n=e.min,r=e.max,i=this.geometry.attributes.position,a=i.array;a[0]=r.x,a[1]=r.y,a[2]=r.z,a[3]=n.x,a[4]=r.y,a[5]=r.z,a[6]=n.x,a[7]=n.y,a[8]=r.z,a[9]=r.x,a[10]=n.y,a[11]=r.z,a[12]=r.x,a[13]=r.y,a[14]=n.z,a[15]=n.x,a[16]=r.y,a[17]=n.z,a[18]=n.x,a[19]=n.y,a[20]=n.z,a[21]=r.x,a[22]=n.y,a[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),Rl.prototype.setFromObject=function(e){return this.object=e,this.update(),this},Rl.prototype.copy=function(e){return ba.prototype.copy.call(this,e),this.object=e.object,this},Rl.prototype.clone=function(){return(new this.constructor).copy(this)},Nl.prototype=Object.create(ba.prototype),Nl.prototype.constructor=Nl,Nl.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),Hn.prototype.updateMatrixWorld.call(this,e))},kl.prototype=Object.create(ya.prototype),kl.prototype.constructor=kl,kl.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?C:P,this.lookAt(this.plane.normal),Hn.prototype.updateMatrixWorld.call(this,e)},Il.prototype=Object.create(Hn.prototype),Il.prototype.constructor=Il,Il.prototype.setDirection=(rl=new tn,function(e){e.y>.99999?this.quaternion.set(0,0,0,1):e.y<-.99999?this.quaternion.set(1,0,0,0):(rl.set(e.z,0,-e.x).normalize(),nl=Math.acos(e.y),this.quaternion.setFromAxisAngle(rl,nl))}),Il.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},Il.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},Il.prototype.copy=function(e){return Hn.prototype.copy.call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this},Il.prototype.clone=function(){return(new this.constructor).copy(this)},Dl.prototype=Object.create(ba.prototype),Dl.prototype.constructor=Dl;var jl=0,Ul=1;function Fl(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function Bl(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function Hl(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new _a(e,t)}function Vl(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new pa(e)}function Gl(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new _a(e,t)}function Wl(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new wa(e)}function ql(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new wa(e)}function Yl(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new wa(e)}function Xl(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new tn(e,t,n)}function Jl(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new Yn(e,t).setDynamic(!0)}function Zl(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Xn(e,t)}function Kl(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Jn(e,t)}function Ql(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Zn(e,t)}function $l(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Kn(e,t)}function eu(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Qn(e,t)}function tu(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new $n(e,t)}function nu(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new er(e,t)}function ru(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new tr(e,t)}function iu(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new nr(e,t)}function au(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Rs.call(this,e),this.type="catmullrom",this.closed=!0}function ou(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Rs.call(this,e),this.type="catmullrom"}function su(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Rs.call(this,e),this.type="catmullrom"}function cu(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new Dl(e)}function lu(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Rl(e,t)}function uu(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new ba(new No(e.geometry),new ga({color:void 0!==t?t:16777215}))}function hu(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new ba(new Pa(e.geometry),new ga({color:void 0!==t?t:16777215}))}function pu(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new gs(e)}function du(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new xs(e)}Es.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Es.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(Gs.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new qn,n=0,r=e.length;n<r;n++){var i=e[n];t.vertices.push(new tn(i.x,i.y,i.z||0))}return t}}),Object.assign(Ws.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),au.prototype=Object.create(Rs.prototype),ou.prototype=Object.create(Rs.prototype),su.prototype=Object.create(Rs.prototype),Object.assign(su.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Pl.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Ml.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(_c.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),ac.extractUrlBase(e)}}),Object.assign(cc.prototype,{setTexturePath:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}),Object.assign(yl.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(vn.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),bl.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(Kt,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Kt.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Kt.ceilPowerOfTwo(e)}}),Object.assign(nn.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign($t.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new tn),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,r,i,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,r,n,i,a)}}),yn.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},en.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(Tr.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(Pr.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(Pr,{barycoordFromPoint:function(e,t,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Pr.getBarycoord(e,t,n,r,i)},normal:function(e,t,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Pr.getNormal(e,t,n,r)}}),Object.assign(qs.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new yo(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Oo(this,e)}}),Object.assign(Qt.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(tn.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(pn.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(qn.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(Hn.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(Hn.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(da.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(ma.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),fa.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Es.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),Yi.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Ys.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(Yn.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(or.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(or.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(bo.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(ll.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(Er.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Cn}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===O}}}),Object.defineProperties(Wo.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Sr.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(aa.prototype,{clearTarget:function(e,t,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,n,r)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(aa.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Hi.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(dn.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(ia.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}}),Uc.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new kc).load(e,function(e){t.setBuffer(e)}),this},Bc.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Dc.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};var fu={merge:function(e,t,n){var r;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),r=t.matrix,t=t.geometry),e.merge(t,r,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}};function mu(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function vu(){console.error("THREE.CanvasRenderer has been removed")}function gu(){console.error("THREE.JSONLoader has been removed.")}ln.crossOrigin=void 0,ln.loadTexture=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new Ms;i.setCrossOrigin(this.crossOrigin);var a=i.load(e,n,void 0,r);return t&&(a.mapping=t),a},ln.loadTextureCube=function(e,t,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new _s;i.setCrossOrigin(this.crossOrigin);var a=i.load(e,n,void 0,r);return t&&(a.mapping=t),a},ln.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},ln.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var yu={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};function bu(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")}},function(e,t,n){"use strict";t.__esModule=!0;t.addLeadingSlash=function(e){return"/"===e.charAt(0)?e:"/"+e},t.stripLeadingSlash=function(e){return"/"===e.charAt(0)?e.substr(1):e};var r=t.hasBasename=function(e,t){return new RegExp("^"+t+"(\\/|\\?|#|$)","i").test(e)};t.stripBasename=function(e,t){return r(e,t)?e.substr(t.length):e},t.stripTrailingSlash=function(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e},t.parsePath=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var a=t.indexOf("?");return-1!==a&&(n=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}},t.createPath=function(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),s=(r=o)&&r.__esModule?r:{default:r};n(133);var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleClick=function(){n.state.displayAllOptions?document.removeEventListener("click",n.handleOutsideClick,!1):document.addEventListener("click",n.handleOutsideClick,!1),n.displayAllOptions(!n.state.displayAllOptions)},n.handleOutsideClick=function(){return n.handleClick()},n.setSelectedOption=function(e){return n.setState(i({},n.state,{selectedOption:e}))},n.state={selectedOption:e.children[0].props.name,displayAllOptions:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),a(t,[{key:"displayAllOptions",value:function(e){this.setState(i({},this.state,{displayAllOptions:e}))}},{key:"shouldComponentUpdate",value:function(e,t){if(void 0!==e.selectedOption){if(void 0!==e.selectedOption.name&&e.selectedOption.name!==this.props.selectedOption.name)return!0;if(e.selectedOption!==this.props.selectedOption)return!0}else if(t.selectedOption!==this.state.selectedOption)return!0;return t.displayAllOptions!==this.state.displayAllOptions}},{key:"render",value:function(){var e=this,t=s.default.Children.map(this.props.children,function(t){return s.default.cloneElement(t,{onClick:function(){t.props.callback&&t.props.callback(),void 0===e.props.selectedOption&&e.setSelectedOption(t.props.name)}})});return s.default.createElement("div",{className:"dropdown"},s.default.createElement("div",null,s.default.createElement("div",{onClick:this.handleClick,className:"selected-option"},void 0!==this.props.selectedOption?void 0!==this.props.selectedOption.name?this.props.selectedOption.name:this.props.selectedOption:this.state.selectedOption,s.default.createElement("i",{className:"fa fa-chevron-circle-down fa-lg"})),this.state.displayAllOptions&&s.default.createElement("div",{className:"options"},t)))}}]),t}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),o=c(a),s=c(n(30));function c(e){return e&&e.__esModule?e:{default:e}}n(129);var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseIn=function(e){var t=e.target;n.setState(r({},n.state,{display:!0}),function(){var e=void 0,i=t.offsetLeft,a=t.offsetWidth,o=a/2;switch(n.props.position){case"right":e=i+a+o;break;case"left":e=i-n._tip.clientWidth-o}n.setState(r({},n.state,{position:r({},n.state.position,{top:t.offsetTop-n._tip.clientHeight/2+t.clientHeight/2,left:e})}))})},n.handleMouseOut=function(){return n.setState({display:!1})},n.state={display:!1,position:{top:0,left:0}},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),i(t,[{key:"shouldComponentUpdate",value:function(e,t){return t.display!==this.state.display||t.position.top!==this.state.position.top||t.position.left!==this.state.position.left}},{key:"render",value:function(){var e=this,t={top:this.state.position.top+"px",left:this.state.position.left+"px"};return o.default.createElement("div",{className:"tip-wrapper"},o.default.createElement("div",{className:"tip-trigger",onMouseOver:this.handleMouseIn,onMouseLeave:this.handleMouseOut},"[?]"),o.default.createElement(s.default,{transitionName:"fade",transitionEnterTimeout:250,transitionLeaveTimeout:250},this.state.display&&o.default.createElement("div",{ref:function(t){return e._tip=t},className:"tip",style:t},this.props.content)))}}]),t}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.getDistanceParams=a,t.getIdealCircularOrbit=function(e,t,n){var i=a(e,t),o=Math.sqrt(i.dSquared),s=Math.sqrt(n*e.m/o);return r({},t,{vx:e.vx+-i.dy*s/o,vy:e.vy+i.dx*s/o,vz:e.vz+i.dz*s/o})},t.degreesToRadians=o,t.calculateOrbitalVertices=function(e,t){return(e/t*1.1).toFixed(0)},t.getRandomNumberInRange=s,t.getRandomRadian=c,t.createParticleDisc=function(e,t,n,r,i){for(var o=[],l=0;l<e;l++){var u=c(),h=s(r,i),p=Math.cos(u)*h,d=Math.sin(u)*h,f=a({x:0,y:0,z:0},{x:p,y:d,z:0}),m=Math.sqrt(f.dSquared),v=Math.sqrt(n*t.m/m);o.push({x:p,y:d,z:0,vx:-f.dy*v/m,vy:f.dx*v/m,vz:0})}return o},t.tiltParticleSystem=function(e,t,n,r){var a=[];return e.forEach(function(e){var s=new i.Vector3(e.x,e.y,e.z).applyAxisAngle(t,o(n)),c=new i.Vector3(e.vx,e.vy,e.vz).applyAxisAngle(t,o(n));a.push({x:r.x+s.x,y:r.y+s.y,z:r.z+s.z,vx:r.vx+c.x,vy:r.vy+c.y,vz:r.vz+c.z})}),a};var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(4));function a(e,t){var n=t.x-e.x,r=t.y-e.y,i=t.z-e.z;return{dx:n,dy:r,dz:i,dSquared:n*n+r*r+i*i}}function o(e){return Math.PI/180*e}function s(e,t){return Math.random()*(t-e)+e}function c(){return 2*Math.PI*Math.random()}},function(e,t,n){"use strict";function r(e){return function(){return e}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},function(e,t,n){"use strict";n.r(t);var r=n(21),i=n(20),a={INIT:"@@redux/INIT"};function o(e,t,n){var s;if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(o)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var c=e,l=t,u=[],h=u,p=!1;function d(){h===u&&(h=u.slice())}function f(){return l}function m(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return d(),h.push(e),function(){if(t){t=!1,d();var n=h.indexOf(e);h.splice(n,1)}}}function v(e){if(!Object(r.a)(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(p)throw new Error("Reducers may not dispatch actions.");try{p=!0,l=c(l,e)}finally{p=!1}for(var t=u=h,n=0;n<t.length;n++){(0,t[n])()}return e}return v({type:a.INIT}),(s={dispatch:v,subscribe:m,getState:f,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");c=e,v({type:a.INIT})}})[i.a]=function(){var e,t=m;return(e={subscribe:function(e){if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(f())}return n(),{unsubscribe:t(n)}}})[i.a]=function(){return this},e},s}function s(e,t){var n=t&&t.type;return"Given action "+(n&&'"'+n.toString()+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function c(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"==typeof e[i]&&(n[i]=e[i])}var o=Object.keys(n);var c=void 0;try{!function(e){Object.keys(e).forEach(function(t){var n=e[t];if(void 0===n(void 0,{type:a.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+a.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}(n)}catch(e){c=e}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(c)throw c;for(var r=!1,i={},a=0;a<o.length;a++){var l=o[a],u=n[l],h=e[l],p=u(h,t);if(void 0===p){var d=s(l,t);throw new Error(d)}i[l]=p,r=r||p!==h}return r?i:e}}function l(e,t){return function(){return t(e.apply(void 0,arguments))}}function u(e,t){if("function"==typeof e)return l(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(e),r={},i=0;i<n.length;i++){var a=n[i],o=e[a];"function"==typeof o&&(r[a]=l(o,t))}return r}function h(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}var p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function d(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(n,r,i){var a,o=e(n,r,i),s=o.dispatch,c={getState:o.getState,dispatch:function(e){return s(e)}};return a=t.map(function(e){return e(c)}),s=h.apply(void 0,a)(o.dispatch),p({},o,{dispatch:s})}}}n.d(t,"createStore",function(){return o}),n.d(t,"combineReducers",function(){return c}),n.d(t,"bindActionCreators",function(){return u}),n.d(t,"applyMiddleware",function(){return d}),n.d(t,"compose",function(){return h})},function(e,t,n){e.exports=function(){"use strict";var e={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n=Object.defineProperty,r=Object.getOwnPropertyNames,i=Object.getOwnPropertySymbols,a=Object.getOwnPropertyDescriptor,o=Object.getPrototypeOf,s=o&&o(Object);return function c(l,u,h){if("string"!=typeof u){if(s){var p=o(u);p&&p!==s&&c(l,p,h)}var d=r(u);i&&(d=d.concat(i(u)));for(var f=0;f<d.length;++f){var m=d[f];if(!(e[m]||t[m]||h&&h[m])){var v=a(u,m);try{n(l,m,v)}catch(e){}}}return l}return l}}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(1),s=(r=o)&&r.__esModule?r:{default:r};n(131);var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleMouseDown=function(e){n.repeat(e)},n.handleMouseUp=function(){clearTimeout(n.timeout),n.start=100},n.repeat=function(e){"increment"===e&&n.props.value+n.props.step>n.props.max||"decrement"===e&&n.props.value-n.props.step<n.props.min||(n.increment(e),n.timeout=setTimeout(function(){return n.repeat(e)},n.start),n.start=33)},n.start=100,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),a(t,[{key:"increment",value:function(e){this.props.callback(i({},this.props.payload,{value:parseFloat("increment"===e?this.props.value+this.props.step:this.props.value-this.props.step)}))}},{key:"shouldComponentUpdate",value:function(e){return e.value!==this.props.value||(!(!this.props.shouldUpdateOnMaxMinChange||e.max===this.props.max&&e.min===this.props.min)||e.step!==this.props.step)}},{key:"componentDidUpdate",value:function(e){this.props.shouldUpdateOnMaxMinChange&&(e.max===this.props.max&&e.min===this.props.min||(this.props.onMaxMinChange&&this.props.onMaxMinChange.callback(i({},this.props.onMaxMinChange.payload,{value:i({},this.props.onMaxMinChange.payload.value,{value:this.props.max/100})})),this.props.callback(i({},this.props.payload,{value:this.props.max/100*10}))))}},{key:"render",value:function(){var e=this;return s.default.createElement("div",{className:"slider-wrapper"},s.default.createElement("div",{className:"range-wrapper"},s.default.createElement("div",{className:"slider-value"},this.props.value),s.default.createElement("input",{className:"slider",type:"range",max:this.props.max,min:this.props.min,step:this.props.step,onInput:function(t){e.props.callback(i({},e.props.payload,{value:parseFloat(t.target.value)}))},value:this.props.value})),s.default.createElement("div",{className:"spinner-wrapper"},s.default.createElement("button",{onMouseDown:function(){return e.handleMouseDown("increment")},onMouseUp:this.handleMouseUp},"+"),s.default.createElement("button",{onMouseDown:function(){return e.handleMouseDown("decrement")},onMouseUp:this.handleMouseUp},"-")))}}]),t}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(4)),o=n(63),s=(r=o)&&r.__esModule?r:{default:r},c=n(8);var l=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.mass=e,r.name=r.mass.name,r.textureLoader=new a.TextureLoader(n),r.segments=50,r.createManifestation(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Object3D),i(t,[{key:"getMain",value:function(){var e=new a.SphereGeometry(this.mass.radius,"asteroid"!==this.mass.type?this.segments:6,"asteroid"!==this.mass.type?this.segments:6),t=new a.MeshPhongMaterial({map:this.textureLoader.load("asteroid"===this.mass.type?"./textures/Deimos.jpg":"./textures/"+this.mass.texture+".jpg"),bumpMap:!0===this.mass.bump?this.textureLoader.load("./textures/"+this.mass.texture+"Bump.jpg"):null,bumpScale:1}),n=new a.Mesh(e,t);n.name="Main",n.rotateX((0,c.degreesToRadians)(90)),this.mass.tilt&&n.rotateOnAxis(new a.Vector3(1,0,0),(0,c.degreesToRadians)(this.mass.tilt)),this.add(n)}},{key:"getAtmosphere",value:function(){var e=new a.SphereGeometry(this.mass.radius+this.mass.radius/15,this.segments,this.segments),t=(0,s.default)(this.mass.atmosphere.color,7,.7),n=new a.Mesh(e,t);n.name="Atmosphere",this.add(n)}},{key:"getClouds",value:function(){var e=new a.SphereGeometry(this.mass.radius+this.mass.radius/80,this.segments,this.segments),t=new a.MeshPhongMaterial({map:this.textureLoader.load("./textures/"+this.mass.texture+"Clouds.png"),side:a.DoubleSide,opacity:.8,transparent:!0,depthWrite:!1}),n=new a.Mesh(e,t);n.name="Clouds",this.add(n)}},{key:"getTrail",value:function(){for(var e=new a.Geometry,t=0;t<this.mass.trailVertices;t++)e.vertices.push((new a.Vector3).copy(this.getObjectByName("Main").position));var n=new a.LineBasicMaterial({color:this.mass.color}),r=new a.Line(e,n);r.name="Trail",r.frustumCulled=!1,this.add(r)}},{key:"removeTrail",value:function(){this.remove(this.getObjectByName("Trail"))}},{key:"createManifestation",value:function(){this.getMain(),this.mass.atmosphere&&this.getAtmosphere(),this.mass.clouds&&this.getClouds()}},{key:"draw",value:function(e,t,n,r,i){var o=this.getObjectByName("Main"),s=this.getObjectByName("Trail");if(this.mass.atmosphere){var c=this.getObjectByName("Atmosphere"),l=(new a.Vector3).subVectors(r,o.getWorldPosition());c.material.uniforms.viewVector.value=l,c.material.uniforms.p.value=i/this.mass.atmosphere.scaleFactor,c.position.set(e,t,n)}if(this.mass.clouds){var u=this.getObjectByName("Clouds");u.position.set(e,t,n),u.rotation.z+=5e-4}o.position.set(e,t,n),o.rotation.y+=.001,void 0!==s&&(s.geometry.vertices.unshift((new a.Vector3).copy(o.position)),s.geometry.vertices.length=this.mass.trailVertices,s.geometry.verticesNeedUpdate=!0)}}]),t}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=[{m:1.652e-7,radius:36.101083032490976,tilt:-.03,orbitalPeriod:.24,name:"Mercury",bump:!0},{m:2447e-9,radius:86.95652173913044,tilt:2.63,orbitalPeriod:.62,atmosphere:{color:"#ffffe6",scaleFactor:80},name:"Venus"},{m:3003e-9,radius:91.74311926605505,tilt:-23.44,orbitalPeriod:1,atmosphere:{color:"#93cfef",scaleFactor:110},clouds:!0,name:"Earth",bump:!0},{m:3.69396868e-8,radius:22.93577981651376,tilt:-1.54,orbitalPeriod:.0739726,name:"Moon",bump:!0},{m:3.213e-7,radius:48.62385321100918,tilt:-25.19,orbitalPeriod:1.88,atmosphere:{color:"#ffccb3",scaleFactor:40},name:"Mars",bump:!0},{m:9543e-7,radius:1027.5229357798166,tilt:-3.13,orbitalPeriod:11.86,atmosphere:{color:"#ffccb3",scaleFactor:1100},name:"Jupiter"},{m:0,orbitalPeriod:.14657534,radius:1.2,type:"model",name:"Juno"},{m:5.359189909029e-15,orbitalPeriod:.00091324109589,radius:.1,type:"model",name:"Phobos"},{m:7.422118532422e-16,orbitalPeriod:.003424658,radius:.1,type:"model",name:"Deimos"},{m:0,orbitalPeriod:6.2,radius:1.2,type:"model",name:"Ulysses"},{m:0,orbitalPeriod:.03753425,radius:1.2,type:"model",name:"TESS"},{m:0,radius:1.2,color:"limegreen",name:"Apollo 11"},{m:4.490848296995278e-8,orbitalPeriod:.004794521,radius:24.082568807339452,name:"Io"},{m:2.413291634272764e-8,orbitalPeriod:.009703205479,radius:22.477064220183486,name:"Europa"},{m:7.450777301989e-8,orbitalPeriod:.01963471233,radius:34.633027522935784,name:"Ganymede"},{m:5.40965639150398e-17,orbitalPeriod:.0465753,radius:35.74007220216607,name:"Callisto"},{m:2857e-7,radius:862.3853211009175,tilt:-26.73,orbitalPeriod:29.46,atmosphere:{color:"#ffffe6",scaleFactor:900},name:"Saturn"},{m:6.75675e-8,radius:33.944954128440365,tilt:0,orbitalPeriod:.0436849315,atmosphere:{color:"#ffffe6",scaleFactor:35},name:"Titan"},{m:5.4311887827482005e-11,radius:3.327981651376147,tilt:0,orbitalPeriod:.0037540219178,name:"Enceladus",bump:!0},{m:9.849839999999999e-10,radius:8.073394495412844,tilt:0,orbitalPeriod:.0074983972603,name:"Dione",bump:!0},{m:1.1596836467392582e-9,radius:11,tilt:0,orbitalPeriod:.012378663014,name:"Rhea",bump:!0},{m:1.89189e-11,radius:2.853211009174312,tilt:0,orbitalPeriod:.0025808219,name:"Mimas"},{m:3.09309e-10,radius:7.614678899082569,tilt:0,orbitalPeriod:.005172060274,name:"Tethys",bump:!0},{m:4365e-8,radius:370.6422018348624,tilt:-82.23,orbitalPeriod:84.01,atmosphere:{color:"#93cfef",scaleFactor:350},name:"Uranus"},{m:5149e-8,radius:355.9633027522936,tilt:-28.32,orbitalPeriod:164.8,atmosphere:{color:"#93cfef",scaleFactor:350},name:"Neptune"},{m:1.0780769999999999e-8,radius:19.467889908256883,tilt:0,orbitalPeriod:.01609589,name:"Triton",bump:!0},{m:2.531524645085e-11,radius:6,tilt:0,type:"model",orbitalPeriod:.0030739726,name:"Proteus"},{m:6.58086572e-9,radius:19.467889908256883,tilt:-57.47,orbitalPeriod:248,atmosphere:{color:"#93cfef",scaleFactor:20},name:"Pluto",bump:!0},{m:4.504e-10,radius:16.05504587155963,tilt:-3,orbitalPeriod:4.6,name:"Ceres",bump:!0},{m:0,radius:1.2,type:"model",name:"New Horizons"},{m:0,radius:1.2,type:"model",name:"Voyager 2"},{m:5149e-8,orbitalPeriod:11400,radius:8.027522935779816,tilt:-57.47,name:"Sedna"},{m:3003e-8,orbitalPeriod:2e4,radius:355.9633027522936,tilt:-57.47,atmosphere:{color:"#93cfef",scaleFactor:250},name:"Planet 9"},{m:1,radius:9e4,type:"star",name:"Sun"}]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scenarios=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e){var t=S.filter(function(t){return t.name.indexOf(e)>-1});return E(JSON.parse(JSON.stringify(t[0])))};var i=M(n(101)),a=M(n(100)),o=M(n(99)),s=M(n(98)),c=M(n(97)),l=M(n(96)),u=M(n(95)),h=M(n(94)),p=M(n(93)),d=M(n(92)),f=M(n(91)),m=M(n(90)),v=M(n(89)),g=M(n(88)),y=M(n(87)),b=M(n(86)),x=M(n(14)),w=n(8),_=n(32);function M(e){return e&&e.__esModule?e:{default:e}}var E=function(e){return r({},e,{isLoaded:!1,playing:!1,integrator:"RK4",elapsedTime:0,trails:!0,labels:!0,scale:21e5,masses:e.masses.map(function(t){var n=x.default.filter(function(e){return e.name.indexOf(t.name)>-1})[0];return r({},t,{m:void 0===n?void 0===t.m?0:t.m:n.m,radius:void 0===n?void 0===t.radius?1.2:t.radius:n.radius,trailVertices:void 0!==t.trailVertices?t.trailVertices:void 0===n?(0,w.calculateOrbitalVertices)(t.orbitalPeriod,e.dt):(0,w.calculateOrbitalVertices)(n.orbitalPeriod,e.dt),tilt:void 0!==n&&n.tilt,atmosphere:void 0!==n&&n.atmosphere,clouds:void 0!==n&&n.clouds,type:void 0===n&&"asteroid"===t.type||void 0===n&&"star"===t.type?t.type:n.type,texture:void 0===n?null:n.name,bump:void 0===n?null:n.bump,color:void 0===n?void 0===t.color?(0,_.getRandomColor)():t.color:void 0===n.color?(0,_.getRandomColor)():n.color})})})},S=t.scenarios=[o.default,i.default,a.default,c.default,b.default,y.default,u.default,l.default,h.default,s.default,p.default,d.default,f.default,m.default,v.default,g.default]},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(2),a=(r=i)&&r.__esModule?r:{default:r};t.default=function(){var e=null,t=[];return{setPrompt:function(t){return(0,a.default)(null==e,"A history supports only one prompt at a time"),e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var o="function"==typeof e?e(t,n):e;"string"==typeof o?"function"==typeof r?r(o,i):((0,a.default)(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),i(!0)):i(!1!==o)}else i(!0)},appendListener:function(e){var n=!0,r=function(){n&&e.apply(void 0,arguments)};return t.push(r),function(){n=!1,t=t.filter(function(e){return e!==r})}},notifyListeners:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach(function(e){return e.apply(void 0,n)})}}}},function(e,t,n){"use strict";t.__esModule=!0,t.locationsAreEqual=t.createLocation=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=s(n(19)),a=s(n(18)),o=n(5);function s(e){return e&&e.__esModule?e:{default:e}}t.createLocation=function(e,t,n,a){var s=void 0;"string"==typeof e?(s=(0,o.parsePath)(e)).state=t:(void 0===(s=r({},e)).pathname&&(s.pathname=""),s.search?"?"!==s.search.charAt(0)&&(s.search="?"+s.search):s.search="",s.hash?"#"!==s.hash.charAt(0)&&(s.hash="#"+s.hash):s.hash="",void 0!==t&&void 0===s.state&&(s.state=t));try{s.pathname=decodeURI(s.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+s.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(s.key=n),a?s.pathname?"/"!==s.pathname.charAt(0)&&(s.pathname=(0,i.default)(s.pathname,a.pathname)):s.pathname=a.pathname:s.pathname||(s.pathname="/"),s},t.locationsAreEqual=function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&(0,a.default)(e.state,t.state)}},function(e,t,n){"use strict";n.r(t);var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=function e(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every(function(t,r){return e(t,n[r])});var i=void 0===t?"undefined":r(t);if(i!==(void 0===n?"undefined":r(n)))return!1;if("object"===i){var a=t.valueOf(),o=n.valueOf();if(a!==t||o!==n)return e(a,o);var s=Object.keys(t),c=Object.keys(n);return s.length===c.length&&s.every(function(r){return e(t[r],n[r])})}return!1}},function(e,t,n){"use strict";function r(e){return"/"===e.charAt(0)}function i(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}n.r(t),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e&&e.split("/")||[],a=t&&t.split("/")||[],o=e&&r(e),s=t&&r(t),c=o||s;if(e&&r(e)?a=n:n.length&&(a.pop(),a=a.concat(n)),!a.length)return"/";var l=void 0;if(a.length){var u=a[a.length-1];l="."===u||".."===u||""===u}else l=!1;for(var h=0,p=a.length;p>=0;p--){var d=a[p];"."===d?i(a,p):".."===d?(i(a,p),h++):h&&(i(a,p),h--)}if(!c)for(;h--;h)a.unshift("..");!c||""===a[0]||a[0]&&r(a[0])||a.unshift("");var f=a.join("/");return l&&"/"!==f.substr(-1)&&(f+="/"),f}},function(e,t,n){"use strict";(function(e,r){var i,a=n(40);i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var o=Object(a.a)(i);t.a=o}).call(this,n(35),n(105)(e))},function(e,t,n){"use strict";var r=n(121),i="object"==typeof self&&self&&self.Object===Object&&self,a=(r.a||i||Function("return this")()).Symbol,o=Object.prototype,s=o.hasOwnProperty,c=o.toString,l=a?a.toStringTag:void 0;var u=function(e){var t=s.call(e,l),n=e[l];try{e[l]=void 0;var r=!0}catch(e){}var i=c.call(e);return r&&(t?e[l]=n:delete e[l]),i},h=Object.prototype.toString;var p=function(e){return h.call(e)},d="[object Null]",f="[object Undefined]",m=a?a.toStringTag:void 0;var v=function(e){return null==e?void 0===e?f:d:m&&m in Object(e)?u(e):p(e)};var g=function(e,t){return function(n){return e(t(n))}}(Object.getPrototypeOf,Object);var y=function(e){return null!=e&&"object"==typeof e},b="[object Object]",x=Function.prototype,w=Object.prototype,_=x.toString,M=w.hasOwnProperty,E=_.call(Object);t.a=function(e){if(!y(e)||v(e)!=b)return!1;var t=g(e);if(null===t)return!0;var n=M.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&_.call(n)==E}},function(e,t,n){"use strict";n.r(t);var r=n(1),i=n(0),a=n.n(i),o=a.a.shape({trySubscribe:a.a.func.isRequired,tryUnsubscribe:a.a.func.isRequired,notifyNestedSubs:a.a.func.isRequired,isSubscribed:a.a.func.isRequired}),s=a.a.shape({subscribe:a.a.func.isRequired,dispatch:a.a.func.isRequired,getState:a.a.func.isRequired});function c(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"store",n=arguments[1]||t+"Subscription",i=function(e){function i(n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r));return a[t]=n.store,a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,e),i.prototype.getChildContext=function(){var e;return(e={})[t]=this[t],e[n]=null,e},i.prototype.render=function(){return r.Children.only(this.props.children)},i}(r.Component);return i.propTypes={store:s.isRequired,children:a.a.element.isRequired},i.childContextTypes=((e={})[t]=s.isRequired,e[n]=o,e),i}var l=c(),u=n(11),h=n.n(u),p=n(3),d=n.n(p);var f=null,m={notify:function(){}};var v=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=t,this.parentSub=n,this.onStateChange=r,this.unsubscribe=null,this.listeners=m}return e.prototype.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},e.prototype.notifyNestedSubs=function(){this.listeners.notify()},e.prototype.isSubscribed=function(){return Boolean(this.unsubscribe)},e.prototype.trySubscribe=function(){var e,t;this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.onStateChange):this.store.subscribe(this.onStateChange),this.listeners=(e=[],t=[],{clear:function(){t=f,e=f},notify:function(){for(var n=e=t,r=0;r<n.length;r++)n[r]()},get:function(){return t},subscribe:function(n){var r=!0;return t===e&&(t=e.slice()),t.push(n),function(){r&&e!==f&&(r=!1,t===e&&(t=e.slice()),t.splice(t.indexOf(n),1))}}}))},e.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=m)},e}(),g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var y=0,b={};function x(){}function w(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=i.getDisplayName,c=void 0===a?function(e){return"ConnectAdvanced("+e+")"}:a,l=i.methodName,u=void 0===l?"connectAdvanced":l,p=i.renderCountProp,f=void 0===p?void 0:p,m=i.shouldHandleStateChanges,w=void 0===m||m,_=i.storeKey,M=void 0===_?"store":_,E=i.withRef,S=void 0!==E&&E,T=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(i,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef"]),P=M+"Subscription",C=y++,A=((t={})[M]=s,t[P]=o,t),O=((n={})[P]=o,n);return function(t){d()("function"==typeof t,"You must pass a component to the function returned by "+u+". Instead received "+JSON.stringify(t));var n=t.displayName||t.name||"Component",i=c(n),a=g({},T,{getDisplayName:c,methodName:u,renderCountProp:f,shouldHandleStateChanges:w,storeKey:M,withRef:S,displayName:i,wrappedComponentName:n,WrappedComponent:t}),o=function(n){function o(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,n.call(this,e,t));return r.version=C,r.state={},r.renderCount=0,r.store=e[M]||t[M],r.propsMode=Boolean(e[M]),r.setWrappedInstance=r.setWrappedInstance.bind(r),d()(r.store,'Could not find "'+M+'" in either the context or props of "'+i+'". Either wrap the root component in a <Provider>, or explicitly pass "'+M+'" as a prop to "'+i+'".'),r.initSelector(),r.initSubscription(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,n),o.prototype.getChildContext=function(){var e,t=this.propsMode?null:this.subscription;return(e={})[P]=t||this.context[P],e},o.prototype.componentDidMount=function(){w&&(this.subscription.trySubscribe(),this.selector.run(this.props),this.selector.shouldComponentUpdate&&this.forceUpdate())},o.prototype.componentWillReceiveProps=function(e){this.selector.run(e)},o.prototype.shouldComponentUpdate=function(){return this.selector.shouldComponentUpdate},o.prototype.componentWillUnmount=function(){this.subscription&&this.subscription.tryUnsubscribe(),this.subscription=null,this.notifyNestedSubs=x,this.store=null,this.selector.run=x,this.selector.shouldComponentUpdate=!1},o.prototype.getWrappedInstance=function(){return d()(S,"To access the wrapped instance, you need to specify { withRef: true } in the options argument of the "+u+"() call."),this.wrappedInstance},o.prototype.setWrappedInstance=function(e){this.wrappedInstance=e},o.prototype.initSelector=function(){var t=e(this.store.dispatch,a);this.selector=function(e,t){var n={run:function(r){try{var i=e(t.getState(),r);(i!==n.props||n.error)&&(n.shouldComponentUpdate=!0,n.props=i,n.error=null)}catch(e){n.shouldComponentUpdate=!0,n.error=e}}};return n}(t,this.store),this.selector.run(this.props)},o.prototype.initSubscription=function(){if(w){var e=(this.propsMode?this.props:this.context)[P];this.subscription=new v(this.store,e,this.onStateChange.bind(this)),this.notifyNestedSubs=this.subscription.notifyNestedSubs.bind(this.subscription)}},o.prototype.onStateChange=function(){this.selector.run(this.props),this.selector.shouldComponentUpdate?(this.componentDidUpdate=this.notifyNestedSubsOnComponentDidUpdate,this.setState(b)):this.notifyNestedSubs()},o.prototype.notifyNestedSubsOnComponentDidUpdate=function(){this.componentDidUpdate=void 0,this.notifyNestedSubs()},o.prototype.isSubscribed=function(){return Boolean(this.subscription)&&this.subscription.isSubscribed()},o.prototype.addExtraProps=function(e){if(!(S||f||this.propsMode&&this.subscription))return e;var t=g({},e);return S&&(t.ref=this.setWrappedInstance),f&&(t[f]=this.renderCount++),this.propsMode&&this.subscription&&(t[P]=this.subscription),t},o.prototype.render=function(){var e=this.selector;if(e.shouldComponentUpdate=!1,e.error)throw e.error;return Object(r.createElement)(t,this.addExtraProps(e.props))},o}(r.Component);return o.WrappedComponent=t,o.displayName=i,o.childContextTypes=O,o.contextTypes=A,o.propTypes=A,h()(o,t)}}var _=Object.prototype.hasOwnProperty;function M(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function E(e,t){if(M(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!_.call(t,n[i])||!M(e[n[i]],t[n[i]]))return!1;return!0}var S=n(10);n(21);function T(e){return function(t,n){var r=e(t,n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function P(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function C(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=P(e);var i=r(t,n);return"function"==typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=P(i),i=r(t,n)),i},r}}var A=[function(e){return"function"==typeof e?C(e):void 0},function(e){return e?void 0:T(function(e){return{dispatch:e}})},function(e){return e&&"object"==typeof e?T(function(t){return Object(S.bindActionCreators)(e,t)}):void 0}];var O=[function(e){return"function"==typeof e?C(e):void 0},function(e){return e?void 0:T(function(){return{}})}],L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function R(e,t,n){return L({},n,e,t)}var N=[function(e){return"function"==typeof e?function(e){return function(t,n){n.displayName;var r=n.pure,i=n.areMergedPropsEqual,a=!1,o=void 0;return function(t,n,s){var c=e(t,n,s);return a?r&&i(c,o)||(o=c):(a=!0,o=c),o}}}(e):void 0},function(e){return e?void 0:function(){return R}}];function k(e,t,n,r){return function(i,a){return n(e(i,a),t(r,a),a)}}function I(e,t,n,r,i){var a=i.areStatesEqual,o=i.areOwnPropsEqual,s=i.areStatePropsEqual,c=!1,l=void 0,u=void 0,h=void 0,p=void 0,d=void 0;function f(i,c){var f,m,v=!o(c,u),g=!a(i,l);return l=i,u=c,v&&g?(h=e(l,u),t.dependsOnOwnProps&&(p=t(r,u)),d=n(h,p,u)):v?(e.dependsOnOwnProps&&(h=e(l,u)),t.dependsOnOwnProps&&(p=t(r,u)),d=n(h,p,u)):g?(f=e(l,u),m=!s(f,h),h=f,m&&(d=n(h,p,u)),d):d}return function(i,a){return c?f(i,a):(h=e(l=i,u=a),p=t(r,u),d=n(h,p,u),c=!0,d)}}function D(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,a=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),o=n(e,a),s=r(e,a),c=i(e,a);return(a.pure?I:k)(o,s,c,e,a)}var z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function j(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function U(e,t){return e===t}var F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.connectHOC,n=void 0===t?w:t,r=e.mapStateToPropsFactories,i=void 0===r?O:r,a=e.mapDispatchToPropsFactories,o=void 0===a?A:a,s=e.mergePropsFactories,c=void 0===s?N:s,l=e.selectorFactory,u=void 0===l?D:l;return function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=a.pure,l=void 0===s||s,h=a.areStatesEqual,p=void 0===h?U:h,d=a.areOwnPropsEqual,f=void 0===d?E:d,m=a.areStatePropsEqual,v=void 0===m?E:m,g=a.areMergedPropsEqual,y=void 0===g?E:g,b=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(a,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),x=j(e,i,"mapStateToProps"),w=j(t,o,"mapDispatchToProps"),_=j(r,c,"mergeProps");return n(u,z({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:x,initMapDispatchToProps:w,initMergeProps:_,pure:l,areStatesEqual:p,areOwnPropsEqual:f,areStatePropsEqual:v,areMergedPropsEqual:y},b))}}();n.d(t,"Provider",function(){return l}),n.d(t,"createProvider",function(){return c}),n.d(t,"connectAdvanced",function(){return w}),n.d(t,"connect",function(){return F})},function(e,t,n){"use strict";n.r(t);var r=n(2),i=n.n(r),a=n(1),o=n.n(a),s=n(0),c=n.n(s),l=n(44),u=n.n(l),h=n(3),p=n.n(h),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=f(this,e.call.apply(e,[this].concat(a))),r.state={match:r.computeMatch(r.props.history.location.pathname)},f(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:d({},this.context.router,{history:this.props.history,route:{location:this.props.history.location,match:this.state.match}})}},t.prototype.computeMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}},t.prototype.componentWillMount=function(){var e=this,t=this.props,n=t.children,r=t.history;p()(null==n||1===o.a.Children.count(n),"A <Router> may have only one child element"),this.unlisten=r.listen(function(){e.setState({match:e.computeMatch(r.location.pathname)})})},t.prototype.componentWillReceiveProps=function(e){i()(this.props.history===e.history,"You cannot change <Router history>")},t.prototype.componentWillUnmount=function(){this.unlisten()},t.prototype.render=function(){var e=this.props.children;return e?o.a.Children.only(e):null},t}(o.a.Component);m.propTypes={history:c.a.object.isRequired,children:c.a.node},m.contextTypes={router:c.a.object},m.childContextTypes={router:c.a.object.isRequired};var v=m,g=v;function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var b=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=y(this,e.call.apply(e,[this].concat(a))),r.history=u()(r.props),y(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){i()(!this.props.history,"<BrowserRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { BrowserRouter as Router }`.")},t.prototype.render=function(){return o.a.createElement(g,{history:this.history,children:this.props.children})},t}(o.a.Component);b.propTypes={basename:c.a.string,forceRefresh:c.a.bool,getUserConfirmation:c.a.func,keyLength:c.a.number,children:c.a.node};var x=b,w=n(43),_=n.n(w);function M(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var E=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=M(this,e.call.apply(e,[this].concat(a))),r.history=_()(r.props),M(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){i()(!this.props.history,"<HashRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { HashRouter as Router }`.")},t.prototype.render=function(){return o.a.createElement(g,{history:this.history,children:this.props.children})},t}(o.a.Component);E.propTypes={basename:c.a.string,getUserConfirmation:c.a.func,hashType:c.a.oneOf(["hashbang","noslash","slash"]),children:c.a.node};var S=E,T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function P(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var C=function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)},A=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=P(this,e.call.apply(e,[this].concat(a))),r.handleClick=function(e){if(r.props.onClick&&r.props.onClick(e),!e.defaultPrevented&&0===e.button&&!r.props.target&&!C(e)){e.preventDefault();var t=r.context.router.history,n=r.props,i=n.replace,a=n.to;i?t.replace(a):t.push(a)}},P(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=(e.replace,e.to),n=e.innerRef,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["replace","to","innerRef"]);p()(this.context.router,"You should not use <Link> outside a <Router>");var i=this.context.router.history.createHref("string"==typeof t?{pathname:t}:t);return o.a.createElement("a",T({},r,{onClick:this.handleClick,href:i,ref:n}))},t}(o.a.Component);A.propTypes={onClick:c.a.func,target:c.a.string,replace:c.a.bool,to:c.a.oneOfType([c.a.string,c.a.object]).isRequired,innerRef:c.a.oneOfType([c.a.string,c.a.func])},A.defaultProps={replace:!1},A.contextTypes={router:c.a.shape({history:c.a.shape({push:c.a.func.isRequired,replace:c.a.func.isRequired,createHref:c.a.func.isRequired}).isRequired}).isRequired};var O=A,L=n(42),R=n.n(L);function N(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var k=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=N(this,e.call.apply(e,[this].concat(a))),r.history=R()(r.props),N(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){i()(!this.props.history,"<MemoryRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { MemoryRouter as Router }`.")},t.prototype.render=function(){return o.a.createElement(v,{history:this.history,children:this.props.children})},t}(o.a.Component);k.propTypes={initialEntries:c.a.array,initialIndex:c.a.number,getUserConfirmation:c.a.func,keyLength:c.a.number,children:c.a.node};var I=k,D=n(41),z=n.n(D),j={},U=0,F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"==typeof t&&(t={path:t});var n=t,r=n.path,i=void 0===r?"/":r,a=n.exact,o=void 0!==a&&a,s=n.strict,c=void 0!==s&&s,l=n.sensitive,u=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=j[n]||(j[n]={});if(r[e])return r[e];var i=[],a={re:z()(e,i,t),keys:i};return U<1e4&&(r[e]=a,U++),a}(i,{end:o,strict:c,sensitive:void 0!==l&&l}),h=u.re,p=u.keys,d=h.exec(e);if(!d)return null;var f=d[0],m=d.slice(1),v=e===f;return o&&!v?null:{path:i,url:"/"===i&&""===f?"/":f,isExact:v,params:p.reduce(function(e,t,n){return e[t.name]=m[n],e},{})}},B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function H(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var V=function(e){return 0===o.a.Children.count(e)},G=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=H(this,e.call.apply(e,[this].concat(a))),r.state={match:r.computeMatch(r.props,r.context.router)},H(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:B({},this.context.router,{route:{location:this.props.location||this.context.router.route.location,match:this.state.match}})}},t.prototype.computeMatch=function(e,t){var n=e.computedMatch,r=e.location,i=e.path,a=e.strict,o=e.exact,s=e.sensitive;if(n)return n;p()(t,"You should not use <Route> or withRouter() outside a <Router>");var c=t.route,l=(r||c.location).pathname;return i?F(l,{path:i,strict:a,exact:o,sensitive:s}):c.match},t.prototype.componentWillMount=function(){i()(!(this.props.component&&this.props.render),"You should not use <Route component> and <Route render> in the same route; <Route render> will be ignored"),i()(!(this.props.component&&this.props.children&&!V(this.props.children)),"You should not use <Route component> and <Route children> in the same route; <Route children> will be ignored"),i()(!(this.props.render&&this.props.children&&!V(this.props.children)),"You should not use <Route render> and <Route children> in the same route; <Route children> will be ignored")},t.prototype.componentWillReceiveProps=function(e,t){i()(!(e.location&&!this.props.location),'<Route> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),i()(!(!e.location&&this.props.location),'<Route> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.'),this.setState({match:this.computeMatch(e,t.router)})},t.prototype.render=function(){var e=this.state.match,t=this.props,n=t.children,r=t.component,i=t.render,a=this.context.router,s=a.history,c=a.route,l=a.staticContext,u={match:e,location:this.props.location||c.location,history:s,staticContext:l};return r?e?o.a.createElement(r,u):null:i?e?i(u):null:n?"function"==typeof n?n(u):V(n)?null:o.a.Children.only(n):null},t}(o.a.Component);G.propTypes={computedMatch:c.a.object,path:c.a.string,exact:c.a.bool,strict:c.a.bool,sensitive:c.a.bool,component:c.a.func,render:c.a.func,children:c.a.oneOfType([c.a.func,c.a.node]),location:c.a.object},G.contextTypes={router:c.a.shape({history:c.a.object.isRequired,route:c.a.object.isRequired,staticContext:c.a.object})},G.childContextTypes={router:c.a.object.isRequired};var W=G,q=W,Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var J=function(e){var t=e.to,n=e.exact,r=e.strict,i=e.location,a=e.activeClassName,s=e.className,c=e.activeStyle,l=e.style,u=e.isActive,h=e.ariaCurrent,p=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["to","exact","strict","location","activeClassName","className","activeStyle","style","isActive","ariaCurrent"]);return o.a.createElement(q,{path:"object"===(void 0===t?"undefined":X(t))?t.pathname:t,exact:n,strict:r,location:i,children:function(e){var n=e.location,r=e.match,i=!!(u?u(r,n):r);return o.a.createElement(O,Y({to:t,className:i?[s,a].filter(function(e){return e}).join(" "):s,style:i?Y({},l,c):l,"aria-current":i&&h},p))}})};J.propTypes={to:O.propTypes.to,exact:c.a.bool,strict:c.a.bool,location:c.a.object,activeClassName:c.a.string,className:c.a.string,activeStyle:c.a.object,style:c.a.object,isActive:c.a.func,ariaCurrent:c.a.oneOf(["page","step","location","true"])},J.defaultProps={activeClassName:"active",ariaCurrent:"true"};var Z=J;var K=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.enable=function(e){this.unblock&&this.unblock(),this.unblock=this.context.router.history.block(e)},t.prototype.disable=function(){this.unblock&&(this.unblock(),this.unblock=null)},t.prototype.componentWillMount=function(){p()(this.context.router,"You should not use <Prompt> outside a <Router>"),this.props.when&&this.enable(this.props.message)},t.prototype.componentWillReceiveProps=function(e){e.when?this.props.when&&this.props.message===e.message||this.enable(e.message):this.disable()},t.prototype.componentWillUnmount=function(){this.disable()},t.prototype.render=function(){return null},t}(o.a.Component);K.propTypes={when:c.a.bool,message:c.a.oneOfType([c.a.func,c.a.string]).isRequired},K.defaultProps={when:!0},K.contextTypes={router:c.a.shape({history:c.a.shape({block:c.a.func.isRequired}).isRequired}).isRequired};var Q=K,$=n(19),ee=n(18),te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ne=function(e,t,n,r){var i=void 0;"string"==typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var a=t.indexOf("?");return-1!==a&&(n=t.substr(a),t=t.substr(0,a)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e)).state=t:(void 0===(i=te({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=Object($.default)(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i},re=function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&Object(ee.default)(e.state,t.state)};"undefined"==typeof window||!window.document||window.document.createElement,"function"==typeof Symbol&&Symbol.iterator,Object.assign,Object.assign,"function"==typeof Symbol&&Symbol.iterator,Object.assign;var ie=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.isStatic=function(){return this.context.router&&this.context.router.staticContext},t.prototype.componentWillMount=function(){p()(this.context.router,"You should not use <Redirect> outside a <Router>"),this.isStatic()&&this.perform()},t.prototype.componentDidMount=function(){this.isStatic()||this.perform()},t.prototype.componentDidUpdate=function(e){var t=ne(e.to),n=ne(this.props.to);re(t,n)?i()(!1,"You tried to redirect to the same route you're currently on: \""+n.pathname+n.search+'"'):this.perform()},t.prototype.perform=function(){var e=this.context.router.history,t=this.props,n=t.push,r=t.to;n?e.push(r):e.replace(r)},t.prototype.render=function(){return null},t}(o.a.Component);ie.propTypes={push:c.a.bool,from:c.a.string,to:c.a.oneOfType([c.a.string,c.a.object]).isRequired},ie.defaultProps={push:!1},ie.contextTypes={router:c.a.shape({history:c.a.shape({push:c.a.func.isRequired,replace:c.a.func.isRequired}).isRequired,staticContext:c.a.object}).isRequired};var ae=ie,oe=n(5),se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function ce(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var le=function(e,t){return e?se({},t,{pathname:Object(oe.addLeadingSlash)(e)+t.pathname}):t},ue=function(e){return"string"==typeof e?Object(oe.parsePath)(e):(n=(t=e).pathname,r=void 0===n?"/":n,i=t.search,a=void 0===i?"":i,o=t.hash,s=void 0===o?"":o,{pathname:r,search:"?"===a?"":a,hash:"#"===s?"":s});var t,n,r,i,a,o,s},he=function(e){return"string"==typeof e?e:Object(oe.createPath)(e)},pe=function(e){return function(){p()(!1,"You cannot %s with <StaticRouter>",e)}},de=function(){},fe=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=ce(this,e.call.apply(e,[this].concat(a))),r.createHref=function(e){return Object(oe.addLeadingSlash)(r.props.basename+he(e))},r.handlePush=function(e){var t=r.props,n=t.basename,i=t.context;i.action="PUSH",i.location=le(n,ue(e)),i.url=he(i.location)},r.handleReplace=function(e){var t=r.props,n=t.basename,i=t.context;i.action="REPLACE",i.location=le(n,ue(e)),i.url=he(i.location)},r.handleListen=function(){return de},r.handleBlock=function(){return de},ce(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{router:{staticContext:this.props.context}}},t.prototype.componentWillMount=function(){i()(!this.props.history,"<StaticRouter> ignores the history prop. To use a custom history, use `import { Router }` instead of `import { StaticRouter as Router }`.")},t.prototype.render=function(){var e=this.props,t=e.basename,n=(e.context,e.location),r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["basename","context","location"]),i={createHref:this.createHref,action:"POP",location:function(e,t){if(!e)return t;var n=Object(oe.addLeadingSlash)(e);return 0!==t.pathname.indexOf(n)?t:se({},t,{pathname:t.pathname.substr(n.length)})}(t,ue(n)),push:this.handlePush,replace:this.handleReplace,go:pe("go"),goBack:pe("goBack"),goForward:pe("goForward"),listen:this.handleListen,block:this.handleBlock};return o.a.createElement(v,se({},r,{history:i}))},t}(o.a.Component);fe.propTypes={basename:c.a.string,context:c.a.object.isRequired,location:c.a.oneOfType([c.a.string,c.a.object])},fe.defaultProps={basename:"",location:"/"},fe.childContextTypes={router:c.a.object.isRequired};var me=fe;var ve=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){p()(this.context.router,"You should not use <Switch> outside a <Router>")},t.prototype.componentWillReceiveProps=function(e){i()(!(e.location&&!this.props.location),'<Switch> elements should not change from uncontrolled to controlled (or vice versa). You initially used no "location" prop and then provided one on a subsequent render.'),i()(!(!e.location&&this.props.location),'<Switch> elements should not change from controlled to uncontrolled (or vice versa). You provided a "location" prop initially but omitted it on a subsequent render.')},t.prototype.render=function(){var e=this.context.router.route,t=this.props.children,n=this.props.location||e.location,r=void 0,i=void 0;return o.a.Children.forEach(t,function(t){if(o.a.isValidElement(t)){var a=t.props,s=a.path,c=a.exact,l=a.strict,u=a.sensitive,h=a.from,p=s||h;null==r&&(i=t,r=p?F(n.pathname,{path:p,exact:c,strict:l,sensitive:u}):e.match)}}),r?o.a.cloneElement(i,{location:n,computedMatch:r}):null},t}(o.a.Component);ve.contextTypes={router:c.a.shape({route:c.a.object.isRequired}).isRequired},ve.propTypes={children:c.a.node,location:c.a.object};var ge=ve,ye=F,be=n(11),xe=n.n(be),we=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var _e=function(e){var t=function(t){var n=t.wrappedComponentRef,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["wrappedComponentRef"]);return o.a.createElement(W,{render:function(t){return o.a.createElement(e,we({},r,t,{ref:n}))}})};return t.displayName="withRouter("+(e.displayName||e.name)+")",t.WrappedComponent=e,t.propTypes={wrappedComponentRef:c.a.func},xe()(t,e)};n.d(t,"BrowserRouter",function(){return x}),n.d(t,"HashRouter",function(){return S}),n.d(t,"Link",function(){return O}),n.d(t,"MemoryRouter",function(){return I}),n.d(t,"NavLink",function(){return Z}),n.d(t,"Prompt",function(){return Q}),n.d(t,"Redirect",function(){return ae}),n.d(t,"Route",function(){return q}),n.d(t,"Router",function(){return g}),n.d(t,"StaticRouter",function(){return me}),n.d(t,"Switch",function(){return ge}),n.d(t,"matchPath",function(){return ye}),n.d(t,"withRouter",function(){return _e})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return a.default.createElement("div",{className:"button top",onClick:e.callback},e.children)};var r,i=n(1),a=(r=i)&&r.__esModule?r:{default:r};n(125)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),o=(r=a)&&r.__esModule?r:{default:r};var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setSelectedTabIndex=function(e){return n.setState({selectedTabIndex:e})},n.state={selectedTabIndex:void 0!==n.props.initTab?n.props.initTab:"none"},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),i(t,[{key:"render",value:function(){var e=this;return o.default.createElement("div",{className:this.props.tabsWrapperClassName},o.default.createElement("ul",null,this.props.children.map(function(t,n){return o.default.createElement("li",{key:n,onClick:function(){return e.setSelectedTabIndex(n)},className:n===e.state.selectedTabIndex?"active-sidebar-tab":""},void 0!==t.props.icon&&o.default.createElement("i",{className:t.props.icon}),o.default.createElement("p",null,t.props.label))})),"none"!==this.state.selectedTabIndex&&o.default.createElement("div",{className:this.props.tabsContentClassName},this.props.children[this.state.selectedTabIndex],o.default.createElement("i",{className:"fa fa-window-close fa-2x tabs-close-button",onClick:function(){return e.setSelectedTabIndex("none")}})))}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.g=t.g,this.dt=t.dt,this.masses=t.masses,this.elapsedTime=t.elapsedTime}return r(e,[{key:"getDistanceParams",value:function(e,t){var n=t.x-e.x,r=t.y-e.y,i=t.z-e.z;return{dx:n,dy:r,dz:i,dSquared:n*n+r*r+i*i}}},{key:"getStateVectors",value:function(e){for(var t=[],n=e.length,r=0;r<n;r++){var i=e[r];t[r]={x:i.x,y:i.y,z:i.z,vx:i.vx,vy:i.vy,vz:i.vz}}return t}},{key:"updateStateVectors",value:function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r],a=t[r],o=this.masses[r];o.x=i.x,o.y=i.y,o.z=i.z,o.vx=a.vx,o.vy=a.vy,o.vz=a.vz}}},{key:"generatePositionVectors",value:function(e,t){for(var n=[],r=e.length,i=0;i<r;i++){var a=e[i],o=this.masses[i];n[i]={x:o.x+a.vx*t,y:o.y+a.vy*t,z:o.z+a.vz*t}}return n}},{key:"generateAccelerationVectors",value:function(e){for(var t=[],n=e.length,r=0;r<n;r++){for(var i=0,a=0,o=0,s=e[r],c=0;c<n;c++)if(r!==c&&this.masses[c].m>0){var l=e[c],u=this.getDistanceParams(s,l),h=Math.sqrt(u.dSquared),p=this.g*this.masses[c].m/(u.dSquared*h);i+=u.dx*p,a+=u.dy*p,o+=u.dz*p}t[r]={ax:i,ay:a,az:o}}return t}},{key:"generateVelocityVectors",value:function(e,t){for(var n=[],r=e.length,i=0;i<r;i++){var a=e[i],o=this.masses[i];n[i]={vx:o.vx+a.ax*t,vy:o.vy+a.ay*t,vz:o.vz+a.az*t}}return n}},{key:"iterate",value:function(){var e=this.getStateVectors(this.masses),t=this.generateAccelerationVectors(e),n=this.generateVelocityVectors(t,this.dt),r=this.generatePositionVectors(n,this.dt);this.updateStateVectors(r,n),this.incrementElapsedTime()}},{key:"incrementElapsedTime",value:function(){this.elapsedTime+=this.dt}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.integrators=void 0,t.default=function(e,t){switch(e){case"RK4":return new i.default(t);case"Euler":return new r.default(t);default:return new i.default(t)}};var r=a(n(26)),i=a(n(69));function a(e){return e&&e.__esModule?e:{default:e}}t.integrators=["RK4","Euler"]},function(e,t,n){"use strict";t.__esModule=!0,t.nameShape=void 0,t.transitionTimeout=function(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}};i(n(1));var r=i(n(0));function i(e){return e&&e.__esModule?e:{default:e}}t.nameShape=r.default.oneOfType([r.default.string,r.default.shape({enter:r.default.string,leave:r.default.string,active:r.default.string}),r.default.shape({enter:r.default.string,enterActive:r.default.string,leave:r.default.string,leaveActive:r.default.string,appear:r.default.string,appearActive:r.default.string})])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=!("undefined"==typeof window||!window.document||!window.document.createElement),e.exports=t.default},function(e,t,n){"use strict";e.exports=n(83)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.getScenario=function(e){return{type:a.GET_SCENARIO,scenario:(0,s.default)(e)}},t.modifyScenarioProperty=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){t.forEach(function(t){return e({type:a.MODIFY_SCENARIO_PROPERTY,payload:{key:t.key,value:t.value}})})}},t.modifyMassProperty=function(e){return{type:a.MODIFY_MASS_PROPERTY,payload:{name:e.name,key:e.key,value:e.value}}},t.addMass=function(e){return function(t,n){var i=n().scenario,o=i.masses.filter(function(t){return t.name.indexOf(e.primary)>-1})[0];t({type:a.ADD_MASS,payload:(0,c.getIdealCircularOrbit)(o,r({},e.secondary,{x:o.x+e.secondary.distance,y:o.y,z:o.z}),i.g)})}},t.deleteMass=function(e){return{type:a.DELETE_MASS,name:e}};var i,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(33)),o=n(15),s=(i=o)&&i.__esModule?i:{default:i},c=n(8)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomColor=function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.GET_SCENARIO="GET_SCENARIO",t.MODIFY_SCENARIO_PROPERTY="MODIFY_SCENARIO_PROPERTY",t.MODIFY_MASS_PROPERTY="MODIFY_MASS_PROPERTY",t.ADD_MASS="ADD_MASS",t.DELETE_MASS="DELETE_MASS"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(10),i=o(n(104)),a=o(n(103));function o(e){return e&&e.__esModule?e:{default:e}}t.default=(0,r.createStore)(a.default,(0,r.applyMiddleware)(i.default))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";t.__esModule=!0;t.canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement),t.addEventListener=function(e,t,n){return e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},t.removeEventListener=function(e,t,n){return e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},t.getConfirmation=function(e,t){return t(window.confirm(e))},t.supportsHistory=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)},t.supportsPopStateOnHashChange=function(){return-1===window.navigator.userAgent.indexOf("Trident")},t.supportsGoWithoutReloadUsingHash=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},t.isExtraneousPopstateEvent=function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")}},function(e,t,n){"use strict";!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),e.exports=n(118)},function(e,t,n){"use strict";e.exports={}},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,o,s=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))i.call(n,l)&&(s[l]=n[l]);if(r){o=r(n);for(var u=0;u<o.length;u++)a.call(n,o[u])&&(s[o[u]]=n[o[u]])}}return s}},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",function(){return r})},function(e,t,n){var r=n(106);e.exports=d,e.exports.parse=a,e.exports.compile=function(e,t){return s(a(e,t))},e.exports.tokensToFunction=s,e.exports.tokensToRegExp=p;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function a(e,t){for(var n,r=[],a=0,o=0,s="",u=t&&t.delimiter||"/";null!=(n=i.exec(e));){var h=n[0],p=n[1],d=n.index;if(s+=e.slice(o,d),o=d+h.length,p)s+=p[1];else{var f=e[o],m=n[2],v=n[3],g=n[4],y=n[5],b=n[6],x=n[7];s&&(r.push(s),s="");var w=null!=m&&null!=f&&f!==m,_="+"===b||"*"===b,M="?"===b||"*"===b,E=n[2]||u,S=g||y;r.push({name:v||a++,prefix:m||"",delimiter:E,optional:M,repeat:_,partial:w,asterisk:!!x,pattern:S?l(S):x?".*":"[^"+c(E)+"]+?"})}}return o<e.length&&(s+=e.substr(o)),s&&r.push(s),r}function o(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function s(e){for(var t=new Array(e.length),n=0;n<e.length;n++)"object"==typeof e[n]&&(t[n]=new RegExp("^(?:"+e[n].pattern+")$"));return function(n,i){for(var a="",s=n||{},c=(i||{}).pretty?o:encodeURIComponent,l=0;l<e.length;l++){var u=e[l];if("string"!=typeof u){var h,p=s[u.name];if(null==p){if(u.optional){u.partial&&(a+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(r(p)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(p)+"`");if(0===p.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var d=0;d<p.length;d++){if(h=c(p[d]),!t[l].test(h))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(h)+"`");a+=(0===d?u.prefix:u.delimiter)+h}}else{if(h=u.asterisk?encodeURI(p).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}):c(p),!t[l].test(h))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+h+'"');a+=u.prefix+h}}else a+=u}return a}}function c(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function l(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function u(e,t){return e.keys=t,e}function h(e){return e.sensitive?"":"i"}function p(e,t,n){r(t)||(n=t||n,t=[]);for(var i=(n=n||{}).strict,a=!1!==n.end,o="",s=0;s<e.length;s++){var l=e[s];if("string"==typeof l)o+=c(l);else{var p=c(l.prefix),d="(?:"+l.pattern+")";t.push(l),l.repeat&&(d+="(?:"+p+d+")*"),o+=d=l.optional?l.partial?p+"("+d+")?":"(?:"+p+"("+d+"))?":p+"("+d+")"}}var f=c(n.delimiter||"/"),m=o.slice(-f.length)===f;return i||(o=(m?o.slice(0,-f.length):o)+"(?:"+f+"(?=$))?"),o+=a?"$":i&&m?"":"(?="+f+"|$)",u(new RegExp("^"+o,h(n)),t)}function d(e,t,n){return r(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return u(e,t)}(e,t):r(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(d(e[i],t,n).source);return u(new RegExp("(?:"+r.join("|")+")",h(n)),t)}(e,t,n):function(e,t,n){return p(a(e,n),t,n)}(e,t,n)}},function(e,t,n){"use strict";t.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=l(n(2)),o=n(5),s=n(17),c=l(n(16));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e,t,n){return Math.min(Math.max(e,t),n)};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getUserConfirmation,n=e.initialEntries,l=void 0===n?["/"]:n,h=e.initialIndex,p=void 0===h?0:h,d=e.keyLength,f=void 0===d?6:d,m=(0,c.default)(),v=function(e){i(_,e),_.length=_.entries.length,m.notifyListeners(_.location,_.action)},g=function(){return Math.random().toString(36).substr(2,f)},y=u(p,0,l.length-1),b=l.map(function(e){return"string"==typeof e?(0,s.createLocation)(e,void 0,g()):(0,s.createLocation)(e,void 0,e.key||g())}),x=o.createPath,w=function(e){var n=u(_.index+e,0,_.entries.length-1),r=_.entries[n];m.confirmTransitionTo(r,"POP",t,function(e){e?v({action:"POP",location:r,index:n}):v()})},_={length:b.length,action:"POP",location:b[y],index:y,entries:b,createHref:x,push:function(e,n){(0,a.default)(!("object"===(void 0===e?"undefined":r(e))&&void 0!==e.state&&void 0!==n),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var i=(0,s.createLocation)(e,n,g(),_.location);m.confirmTransitionTo(i,"PUSH",t,function(e){if(e){var t=_.index+1,n=_.entries.slice(0);n.length>t?n.splice(t,n.length-t,i):n.push(i),v({action:"PUSH",location:i,index:t,entries:n})}})},replace:function(e,n){(0,a.default)(!("object"===(void 0===e?"undefined":r(e))&&void 0!==e.state&&void 0!==n),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var i=(0,s.createLocation)(e,n,g(),_.location);m.confirmTransitionTo(i,"REPLACE",t,function(e){e&&(_.entries[_.index]=i,v({action:"REPLACE",location:i}))})},go:w,goBack:function(){return w(-1)},goForward:function(){return w(1)},canGo:function(e){var t=_.index+e;return t>=0&&t<_.entries.length},block:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return m.setPrompt(e)},listen:function(e){return m.appendListener(e)}};return _}},function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=u(n(2)),a=u(n(3)),o=n(17),s=n(5),c=u(n(16)),l=n(36);function u(e){return e&&e.__esModule?e:{default:e}}var h={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+(0,s.stripLeadingSlash)(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:s.stripLeadingSlash,decodePath:s.addLeadingSlash},slash:{encodePath:s.addLeadingSlash,decodePath:s.addLeadingSlash}},p=function(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)},d=function(e){var t=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,t>=0?t:0)+"#"+e)};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,a.default)(l.canUseDOM,"Hash history needs a DOM");var t=window.history,n=(0,l.supportsGoWithoutReloadUsingHash)(),u=e.getUserConfirmation,f=void 0===u?l.getConfirmation:u,m=e.hashType,v=void 0===m?"slash":m,g=e.basename?(0,s.stripTrailingSlash)((0,s.addLeadingSlash)(e.basename)):"",y=h[v],b=y.encodePath,x=y.decodePath,w=function(){var e=x(p());return(0,i.default)(!g||(0,s.hasBasename)(e,g),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+e+'" to begin with "'+g+'".'),g&&(e=(0,s.stripBasename)(e,g)),(0,o.createLocation)(e)},_=(0,c.default)(),M=function(e){r(z,e),z.length=t.length,_.notifyListeners(z.location,z.action)},E=!1,S=null,T=function(){var e=p(),t=b(e);if(e!==t)d(t);else{var n=w(),r=z.location;if(!E&&(0,o.locationsAreEqual)(r,n))return;if(S===(0,s.createPath)(n))return;S=null,P(n)}},P=function(e){E?(E=!1,M()):_.confirmTransitionTo(e,"POP",f,function(t){t?M({action:"POP",location:e}):C(e)})},C=function(e){var t=z.location,n=R.lastIndexOf((0,s.createPath)(t));-1===n&&(n=0);var r=R.lastIndexOf((0,s.createPath)(e));-1===r&&(r=0);var i=n-r;i&&(E=!0,N(i))},A=p(),O=b(A);A!==O&&d(O);var L=w(),R=[(0,s.createPath)(L)],N=function(e){(0,i.default)(n,"Hash history go(n) causes a full page reload in this browser"),t.go(e)},k=0,I=function(e){1===(k+=e)?(0,l.addEventListener)(window,"hashchange",T):0===k&&(0,l.removeEventListener)(window,"hashchange",T)},D=!1,z={length:t.length,action:"POP",location:L,createHref:function(e){return"#"+b(g+(0,s.createPath)(e))},push:function(e,t){(0,i.default)(void 0===t,"Hash history cannot push state; it is ignored");var n=(0,o.createLocation)(e,void 0,void 0,z.location);_.confirmTransitionTo(n,"PUSH",f,function(e){if(e){var t=(0,s.createPath)(n),r=b(g+t);if(p()!==r){S=t,function(e){window.location.hash=e}(r);var a=R.lastIndexOf((0,s.createPath)(z.location)),o=R.slice(0,-1===a?0:a+1);o.push(t),R=o,M({action:"PUSH",location:n})}else(0,i.default)(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),M()}})},replace:function(e,t){(0,i.default)(void 0===t,"Hash history cannot replace state; it is ignored");var n=(0,o.createLocation)(e,void 0,void 0,z.location);_.confirmTransitionTo(n,"REPLACE",f,function(e){if(e){var t=(0,s.createPath)(n),r=b(g+t);p()!==r&&(S=t,d(r));var i=R.indexOf((0,s.createPath)(z.location));-1!==i&&(R[i]=t),M({action:"REPLACE",location:n})}})},go:N,goBack:function(){return N(-1)},goForward:function(){return N(1)},block:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=_.setPrompt(e);return D||(I(1),D=!0),function(){return D&&(D=!1,I(-1)),t()}},listen:function(e){var t=_.appendListener(e);return I(1),function(){I(-1),t()}}};return z}},function(e,t,n){"use strict";t.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=h(n(2)),o=h(n(3)),s=n(17),c=n(5),l=h(n(16)),u=n(36);function h(e){return e&&e.__esModule?e:{default:e}}var p=function(){try{return window.history.state||{}}catch(e){return{}}};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,o.default)(u.canUseDOM,"Browser history needs a DOM");var t=window.history,n=(0,u.supportsHistory)(),h=!(0,u.supportsPopStateOnHashChange)(),d=e.forceRefresh,f=void 0!==d&&d,m=e.getUserConfirmation,v=void 0===m?u.getConfirmation:m,g=e.keyLength,y=void 0===g?6:g,b=e.basename?(0,c.stripTrailingSlash)((0,c.addLeadingSlash)(e.basename)):"",x=function(e){var t=e||{},n=t.key,r=t.state,i=window.location,o=i.pathname+i.search+i.hash;return(0,a.default)(!b||(0,c.hasBasename)(o,b),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+o+'" to begin with "'+b+'".'),b&&(o=(0,c.stripBasename)(o,b)),(0,s.createLocation)(o,r,n)},w=function(){return Math.random().toString(36).substr(2,y)},_=(0,l.default)(),M=function(e){i(D,e),D.length=t.length,_.notifyListeners(D.location,D.action)},E=function(e){(0,u.isExtraneousPopstateEvent)(e)||P(x(e.state))},S=function(){P(x(p()))},T=!1,P=function(e){T?(T=!1,M()):_.confirmTransitionTo(e,"POP",v,function(t){t?M({action:"POP",location:e}):C(e)})},C=function(e){var t=D.location,n=O.indexOf(t.key);-1===n&&(n=0);var r=O.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(T=!0,R(i))},A=x(p()),O=[A.key],L=function(e){return b+(0,c.createPath)(e)},R=function(e){t.go(e)},N=0,k=function(e){1===(N+=e)?((0,u.addEventListener)(window,"popstate",E),h&&(0,u.addEventListener)(window,"hashchange",S)):0===N&&((0,u.removeEventListener)(window,"popstate",E),h&&(0,u.removeEventListener)(window,"hashchange",S))},I=!1,D={length:t.length,action:"POP",location:A,createHref:L,push:function(e,i){(0,a.default)(!("object"===(void 0===e?"undefined":r(e))&&void 0!==e.state&&void 0!==i),"You should avoid providing a 2nd state argument to push when the 1st argument is a location-like object that already has state; it is ignored");var o=(0,s.createLocation)(e,i,w(),D.location);_.confirmTransitionTo(o,"PUSH",v,function(e){if(e){var r=L(o),i=o.key,s=o.state;if(n)if(t.pushState({key:i,state:s},null,r),f)window.location.href=r;else{var c=O.indexOf(D.location.key),l=O.slice(0,-1===c?0:c+1);l.push(o.key),O=l,M({action:"PUSH",location:o})}else(0,a.default)(void 0===s,"Browser history cannot push state in browsers that do not support HTML5 history"),window.location.href=r}})},replace:function(e,i){(0,a.default)(!("object"===(void 0===e?"undefined":r(e))&&void 0!==e.state&&void 0!==i),"You should avoid providing a 2nd state argument to replace when the 1st argument is a location-like object that already has state; it is ignored");var o=(0,s.createLocation)(e,i,w(),D.location);_.confirmTransitionTo(o,"REPLACE",v,function(e){if(e){var r=L(o),i=o.key,s=o.state;if(n)if(t.replaceState({key:i,state:s},null,r),f)window.location.replace(r);else{var c=O.indexOf(D.location.key);-1!==c&&(O[c]=o.key),M({action:"REPLACE",location:o})}else(0,a.default)(void 0===s,"Browser history cannot replace state in browsers that do not support HTML5 history"),window.location.replace(r)}})},go:R,goBack:function(){return R(-1)},goForward:function(){return R(1)},block:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=_.setPrompt(e);return I||(k(1),I=!0),function(){return I&&(I=!1,k(-1)),t()}},listen:function(e){var t=_.appendListener(e);return k(1),function(){k(-1),t()}}};return D}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return a.default.createElement("iframe",{src:e.scenarioWikiUrl,className:"scenario-wiki-iframe"})};var r,i=n(1),a=(r=i)&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return a.default.createElement("div",null,a.default.createElement("h1",null,"Credits"),a.default.createElement("p",{className:"modal-item"},a.default.createElement("b",null," "),"Programming by"," ",a.default.createElement("a",{href:"https://github.com/TheHappyKoala/",target:"blank"},"Darrell A. Huffman (The Happy Koala)")," ","."),a.default.createElement("p",{className:"modal-item"},a.default.createElement("b",null," "),a.default.createElement("a",{href:"http://www.feynmanlectures.caltech.edu/I_toc.html",target:"blank"},"Volume One of the Feynman Lectures on Physics")," ","helped me wrap my head around the gravitational n-body problem and Newtonian mechanics."),a.default.createElement("p",{className:"modal-item"},a.default.createElement("b",null," "),a.default.createElement("a",{href:"https://nasa3d.arc.nasa.gov/models",target:"blank"},"Spacecraft 3D models")," ","courtesy of NASA."),a.default.createElement("p",{className:"modal-item"},a.default.createElement("b",null," "),"Planet and moon textures courtesy of the dazzling"," ",a.default.createElement("a",{href:"https://www.deviantart.com/magentameteorite",target:"blank"},"MagentaMeteorite (Brie Limburger)"),"."),a.default.createElement("p",{className:"modal-item"},a.default.createElement("b",null," "),a.default.createElement("a",{href:"http://openuniverse.sourceforge.net/",target:"blank"},"Phobos and Deimos 3D models")," ","courtesy of Raul Alvarez."),a.default.createElement("p",{className:"modal-item"},a.default.createElement("b",null," "),a.default.createElement("a",{href:"http://planetpixelemporium.com/mars.html",target:"blank"},"Phobos and Deimos textures")," ","courtesy of James Hastings-Trew."),a.default.createElement("p",{className:"modal-item"},a.default.createElement("b",null," "),"State Vectors for solar system bodies were obtained from"," ",a.default.createElement("a",{href:"https://ssd.jpl.nasa.gov/horizons.cgi",target:"blank"},"NASA JPL"),"."),a.default.createElement("p",{className:"modal-item"},a.default.createElement("b",null," "),"The kind folks at"," ",a.default.createElement("a",{href:"https://space.stackexchange.com/",target:"blank"},"space.stackexchange.com")," ","and"," ",a.default.createElement("a",{href:"https://scicomp.stackexchange.com/",target:"blank"},"scicomp.stackexchange.com")," ","for kindly providing answers and feedback that helped me in the development of this application."),a.default.createElement("p",{className:"modal-item"},a.default.createElement("b",null," "),a.default.createElement("a",{href:"https://wikipedia.com/",target:"blank"},"WikiPedia")," ","and all the awesome people that contribute to it with content and the financial resources that keep it up and running."),a.default.createElement("p",{className:"modal-item"},a.default.createElement("b",null," "),"Mr. Doob and all the other people that created the"," ",a.default.createElement("a",{href:"https://threejs.org/",target:"blank"},"THREE.js WebGL library"),"."),a.default.createElement("p",{className:"modal-item"},a.default.createElement("b",null," "),"Last, but not least, I would like to credit the Universe for being awesomely weird and thought provoking!"))};var r,i=n(1),a=(r=i)&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return a.default.createElement("div",null,a.default.createElement("h1",null,"About"),a.default.createElement("p",{className:"modal-item"},"Harmony of the Spheres is a Newtonian n-body gravity simulator that lets you explore and play around with the force of gravity in the context of an array of scenarios from our solar system and beyond. You can add planets, delete the Sun, change the value of the gravitational constant or simply lean back and enjoy the dazzling beauty of the pentagram that the orbit of Venus traces when Earth is held fixed at the center of the coordinate system, and much, much more. An overview of the main features of Harmony of the Spheres is provided below."),a.default.createElement("h3",{className:"modal-item"},"Scientifically Accurate"),a.default.createElement("p",{className:"modal-item"},"The orbits of all the masses simulated in Harmony of the Spheres are generated by solving the gravitational n-body problem step by step, for the masses in question, given a set of intitial positions and velocities at a given point in time. For all the solar system scenarios, these positions and velocities were obtained from NASA JPL's Horizon system. If, for example, you increase the mass of Jupiter to that of the Sun, what you will see is what would actually happen if, somehow, this were to occur in reality."),a.default.createElement("h3",{className:"modal-item"},"Beautiful Views"),a.default.createElement("p",{className:"modal-item"},"You can watch the scenarios unfold from any mass or position in the simulation. You can, for instance, look at Mars from Earth, or set the camera position to free and the focus to origo to get a global view of the simulation. When the camera position is set to free, you can also set the focus to any mass in the simulation, and follow it on its path through our beautiful universe, from far away, or up close if you zoom in, and from any angle."),a.default.createElement("h3",{className:"modal-item"},"Rotating Reference Frames"),a.default.createElement("p",{className:"modal-item"},"With the rotating reference frame feature, you can observe the Universe unfold from the point of view of any of the masses being simulated. This allows you to observe peculiar orbits of celestial objects like Earth's quasi moon Cruinthe, but also the aformentioned pentagram that the orbit of Venus traces as seen from Earth. The rotating reference frame feature also makes it possible to beautifully visualize hierarchical systems like, for example, the Sun, Earth and Moon system."),a.default.createElement("h3",{className:"modal-item"},"Add, Delete or Modify Masses"),a.default.createElement("p",{className:"modal-item"},"You can add masses to any scenario, or delete or modify existing masses. Ever wanted to find out what would happen and what it would look like if Pluto orbited our Moon? With Harmony of the Spheres you can get an answer to this, admittedly, slightly odd question. Want to cause some mayhem? Chuck Jupiter into the inner solar system and see how the orbits of the inner planets get perturbed."),a.default.createElement("h3",{className:"modal-item"},"Learn with Wikipedia"),a.default.createElement("p",{className:"modal-item"},"Want to learn more about what you are seeing on your screen? Well, you can read the Wikipedia article related to every scenario included in Harmony of the Spheres by clicking the Scenario Wiki option in the left sidebar: happy reading!"))};var r,i=n(1),a=(r=i)&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=[{name:"Sun to Earth",value:1},{name:"Moon to Earth",value:.00256955529},{name:"Moon Hill Sphere / 10",value:38804028e-12},{name:"Moon Hill Sphere / 100",value:38804028e-13},{name:"Io to Jupiter",value:.002819},{name:"Io Hill Sphere / 10",value:7307591e-12},{name:"Io Hill Sphere / 100",value:7.307590999999999e-7},{name:"Titan to Saturn / 200",value:40837813874999996e-21},{name:"Titan to Saturn",value:.0081675627753},{name:"Phobos to Mars",value:626747e-10},{name:"Sun to Earth / 10",value:.1},{name:"Sun to Earth / 100",value:.01},{name:"Sun to Earth * 10",value:10},{name:"Moon to Earth / 10",value:.000256955529},{name:"Moon to Earth / 100",value:25695552899999998e-21},{name:"Io to Jupiter / 10",value:.00028189999999999997},{name:"Io to Jupiter / 100",value:2819e-8},{name:"Titan to Saturn / 10",value:.0008167562775299999},{name:"Titan to Saturn / 100",value:8167562775299999e-20},{name:"Triton to Neptune / 100",value:23716915100000003e-21},{name:"Phobos to Mars / 10",value:626747e-11},{name:"Phobos to Mars / 100",value:6.26747e-7}]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=[{name:"Sun to Earth",value:1},{name:"Moon to Earth * 10",value:.0256955529},{name:"Sun to Jupiter",value:5.2},{name:"Phobos to Mars * 100",value:.00626747},{name:"Io to Jupiter * 150",value:.42285},{name:"Io Hill Sphere * 2",value:.00014615182},{name:"Titan to Saturn * 2",value:.01633512555},{name:"Sun to Neptune",value:30.1},{name:"Sun to Kuiper Belt",value:55},{name:"Sun to Scattered Disc",value:300},{name:"Sun to Planet 9",value:22e3},{name:"Moon Hill Sphere",value:.00038804028},{name:"Triton to Neptune * 5",value:.01185845755},{name:"Neptune Hill Sphere",value:.75},{name:"Planet 9 Hill Sphere",value:10}]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),o=m(a),s=m(n(6)),c=m(n(24)),l=m(n(12)),u=m(n(7)),h=n(32),p=m(n(14)),d=m(n(49)),f=m(n(48));function m(e){return e&&e.__esModule?e:{default:e}}var v=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.modifyProperty=function(e){return n.setState(r({},n.state,(t={},i=e.key,a=e.value,i in t?Object.defineProperty(t,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[i]=a,t)));var t,i,a},n.insertMassTemplate=function(e){return n.setState(r({},n.state,{m:e.m,radius:e.radius,texture:e.texture,color:e.color,type:e.type}))},n.state={m:p.default[0].m,radius:p.default[0].radius,texture:p.default[0].name,type:null,distance:e.distanceStep.value},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),i(t,[{key:"render",value:function(){var e=this;return o.default.createElement("div",null,o.default.createElement("h2",null,"Add Mass"),o.default.createElement("label",{className:"top"},"Primary",o.default.createElement(u.default,{position:"left",content:"The celestial object you want your mass to orbit."})),o.default.createElement("div",{className:"tabs-dropdown-wrapper"},o.default.createElement(s.default,{selectedProperty:this.props.primary},this.props.masses.map(function(t){return o.default.createElement("div",{name:t.name,key:t.name,callback:function(){return e.props.modifyScenarioProperty({key:"primary",value:t.name})}},t.name)}))),o.default.createElement("label",{className:"top"},"Maximum Distance",o.default.createElement(u.default,{position:"left",content:"The maximum allowed distance between the primary and the mass that you are adding."})),o.default.createElement("div",{className:"tabs-dropdown-wrapper"},o.default.createElement(s.default,{selectedOption:this.props.maximumDistance},d.default.map(function(t){return o.default.createElement("div",{name:t.name,key:t.name,callback:function(){return e.props.modifyScenarioProperty({key:"maximumDistance",value:{name:t.name,value:t.value}})}},t.name)}))),o.default.createElement("label",{className:"top"},"Distance Step",o.default.createElement(u.default,{position:"left",content:"The distance that is added when you increment the distance by one step."})),o.default.createElement("div",{className:"tabs-dropdown-wrapper"},o.default.createElement(s.default,{selectedOption:this.props.distanceStep},f.default.map(function(t){return o.default.createElement("div",{name:t.name,key:t.name,callback:function(){return e.props.modifyScenarioProperty({key:"distanceStep",value:{name:t.name,value:t.value}})}},t.name)}))),o.default.createElement("label",{className:"top"},"Distance"," ",o.default.createElement(u.default,{position:"left",content:"The distance between the primary and the mass you're adding."})),o.default.createElement(l.default,{payload:{key:"distance"},value:this.state.distance,callback:this.modifyProperty,max:this.props.maximumDistance.value,min:-this.props.maximumDistance.value,shouldUpdateOnMaxMinChange:!0,onMaxMinChange:{payload:{key:"distanceStep",value:{name:"Max distance / 100"}},callback:this.props.modifyScenarioProperty},step:this.props.distanceStep.value}),o.default.createElement("label",{className:"top"},"Mass Template",o.default.createElement(u.default,{position:"left",content:"The mass, radius, texture, type and color of the mass you're adding."})),o.default.createElement("div",{className:"tabs-dropdown-wrapper"},o.default.createElement(s.default,null,p.default.map(function(t){return o.default.createElement("div",{name:t.name,key:t.name,callback:function(){return e.insertMassTemplate({m:t.m,radius:t.radius,texture:t.name,type:t.type})}},t.name)}))),o.default.createElement(c.default,{callback:function(){return e.props.addMass({primary:e.props.primary,secondary:{name:"Custom Mass "+Date.now(),trailVertices:6e3,m:e.state.m,radius:e.state.radius,texture:e.state.texture,type:e.state.type,color:(0,h.getRandomColor)(),distance:e.state.distance}})}},"Add Mass"))}}]),t}();t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return r.default.createElement("div",null,r.default.createElement("h2",null,"Modify Masses"),r.default.createElement("label",{className:"top"},"Mass Being Modified",r.default.createElement(c.default,{position:"left",content:"Change the mass being modified. Parameters that you can modify include the mass off the mass and its state vectors."})),r.default.createElement("div",{className:"tabs-dropdown-wrapper"},r.default.createElement(a.default,{selectedOption:e.massBeingModified},e.masses.map(function(t){return r.default.createElement("div",{name:t.name,key:t.name,callback:function(){return e.modifyScenarioProperty({key:"massBeingModified",value:t.name})}},t.name)}))),e.masses.map(function(t){return e.massBeingModified===t.name&&r.default.createElement("div",{key:t.name},r.default.createElement("label",{className:"top"},"Mass",r.default.createElement(c.default,{position:"left",content:"Modify the mass of the mass being modified."})),r.default.createElement("div",{className:"tabs-dropdown-wrapper"},r.default.createElement(a.default,null,l.default.map(function(n){return r.default.createElement("div",{name:n.name,key:n.name,callback:function(){return e.modifyMassProperty({name:t.name,key:"m",value:n.m})}},n.name)}))),r.default.createElement(i.default,{tabsWrapperClassName:"vector-tabs",tabsContentClassName:"vector-content",initTab:0},r.default.createElement("div",{label:"Position"},r.default.createElement("label",{className:"top"},"X Position Vector"," ",r.default.createElement(c.default,{position:"left",content:"Modify the value of the x position vector of the mass being modified."})),r.default.createElement(s.default,{payload:{name:t.name,key:"x"},value:t.x,callback:e.modifyMassProperty,max:e.distMax,min:e.distMin,step:e.distStep}),r.default.createElement("label",{className:"top"},"Y Position Vector",r.default.createElement(c.default,{position:"left",content:"Modify the value of the Y position vector of the mass being modified."})),r.default.createElement(s.default,{payload:{name:t.name,key:"y"},value:t.y,callback:e.modifyMassProperty,max:e.distMax,min:e.distMin,step:e.distStep}),r.default.createElement("label",{className:"top"},"Z Position Vector",r.default.createElement(c.default,{position:"left",content:"Modify the value of the Z position vector of the mass being modified."})),r.default.createElement(s.default,{payload:{name:t.name,key:"z"},property:"z",value:t.z,callback:e.modifyMassProperty,max:e.distMax,min:e.distMin,step:e.distStep})),r.default.createElement("div",{label:"Velocity"},r.default.createElement("label",{className:"top"},"X Velocity Vector",r.default.createElement(c.default,{position:"left",content:"Modify the value of the x velocity vector of the mass being modified."})),r.default.createElement(s.default,{payload:{name:t.name,key:"vx"},value:t.vx,callback:e.modifyMassProperty,max:e.velMax,min:e.velMin,step:e.velStep}),r.default.createElement("label",{className:"top"},"Y Velocity Vector",r.default.createElement(c.default,{position:"left",content:"Modify the value of the y velocity vector of the mass being modified."})),r.default.createElement(s.default,{payload:{name:t.name,key:"vy"},value:t.vy,callback:e.modifyMassProperty,max:e.velMax,min:e.velMin,step:e.velStep}),r.default.createElement("label",{className:"top"},"Z Velocity Vector",r.default.createElement(c.default,{position:"left",content:"Modify the value of the z velocity vector of the mass being modified."})),r.default.createElement(s.default,{payload:{name:t.name,key:"vz"},value:t.vz,callback:e.modifyMassProperty,max:e.velMax,min:e.velMin,step:e.velStep}))),r.default.createElement(o.default,{callback:function(){return e.deleteMass(t.name)}},"Delete Mass"))}))};var r=u(n(1)),i=u(n(25)),a=u(n(6)),o=u(n(24)),s=u(n(12)),c=u(n(7)),l=u(n(14));function u(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return r.default.createElement("div",null,r.default.createElement("h2",null,"Camera"),r.default.createElement("label",{className:"top"},"Rotating Reference Frame"," ",r.default.createElement(a.default,{position:"left",content:"Specifying a rotating reference frames allows us to observe the universe unfold relative to a fixed point, for instance Earth. While Earth orbits the Sun regardless of the reference frame being considered, in a rotating reference frame, the sun, for example, will appear to orbit the Earth, which is fixed at the center of the coordinate system."})),r.default.createElement("div",{className:"tabs-dropdown-wrapper"},r.default.createElement(i.default,{selectedOption:e.rotatingReferenceFrame},r.default.createElement("div",{name:"Origo",key:"Origo",callback:function(){return e.modifyScenarioProperty({key:"rotatingReferenceFrame",value:"Origo"})}},"Origo"),e.masses.map(function(t){return r.default.createElement("div",{name:t.name,key:t.name,callback:function(){return e.modifyScenarioProperty({key:"rotatingReferenceFrame",value:t.name})}},t.name)}))),r.default.createElement("label",{className:"top"},"Camera Position"," ",r.default.createElement(a.default,{position:"left",content:"Select the position of the camera. If the position is set to free, you can zoom in on and orbit around the focus of the camera with your mouse or touch screen."})),r.default.createElement("div",{className:"tabs-dropdown-wrapper"},r.default.createElement(i.default,{selectedOption:e.cameraPosition},r.default.createElement("div",{name:"Free",key:"Free",callback:function(){return e.modifyScenarioProperty({key:"cameraPosition",value:"Free"})}},"Free"),e.masses.map(function(t){return r.default.createElement("div",{name:t.name,key:t.name,callback:function(){return e.modifyScenarioProperty({key:"cameraPosition",value:t.name})}},t.name)}))),r.default.createElement("label",{className:"top"},"Camera Focus"," ",r.default.createElement(a.default,{position:"left",content:"Select the focus of the camera, or in other words, what the camera should be looking at."})),r.default.createElement("div",{className:"tabs-dropdown-wrapper"},r.default.createElement(i.default,{selectedOption:e.cameraFocus},r.default.createElement("div",{name:"Origo",key:"Origo",callback:function(){return e.modifyScenarioProperty({key:"cameraFocus",value:"Origo"})}},"Origo"),e.masses.map(function(t){return r.default.createElement("div",{name:t.name,key:t.name,callback:function(){return e.modifyScenarioProperty({key:"cameraFocus",value:t.name})}},t.name)}))))};var r=o(n(1)),i=o(n(6)),a=o(n(7));function o(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),o=(r=a)&&r.__esModule?r:{default:r};n(127);var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),i(t,[{key:"shouldComponentUpdate",value:function(e){return e.checked!==this.props.checked}},{key:"render",value:function(){return o.default.createElement("label",{className:"toggle top"},this.props.label,o.default.createElement("input",{type:"checkbox",checked:this.props.checked,onChange:this.props.callback}),o.default.createElement("span",null))}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return r.default.createElement("div",null,r.default.createElement("h2",null,"Graphics"),r.default.createElement(i.default,{label:"Trails",checked:e.trails,callback:function(){return e.modifyScenarioProperty({key:"trails",value:!e.trails})}}),r.default.createElement(i.default,{label:"Labels",checked:e.labels,callback:function(){return e.modifyScenarioProperty({key:"labels",value:!e.labels})}}))};var r=a(n(1)),i=a(n(53));function a(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return r.default.createElement("div",null,r.default.createElement("h2",null,"Physics"),r.default.createElement("label",{className:"top"},"Integrator",r.default.createElement(o.default,{position:"left",content:"The integration scheme used to calculate position, acceleration and velocity vectors. RK4 is more accurate, but consumes more computing power, so if you are running Gravity Playground on a slow device, Euler might be a better choice of integrator. Note that changing integrators in the middle of a running scenario results in a severe loss of accuracy."})),r.default.createElement("div",{className:"tabs-dropdown-wrapper"},r.default.createElement(i.default,{selectedOption:e.integrator},s.integrators.map(function(t){return r.default.createElement("div",{name:t,key:t,callback:function(){return e.modifyScenarioProperty({key:"integrator",value:t})}},t)}))),r.default.createElement("label",{className:"top"},"Gravitational Constant",r.default.createElement(o.default,{position:"left",content:"The gravitational constant is equal to the absolute value of the gravitational force, acting on a point body with unit mass from another similar body, which is located at the unit distance. Higher values yield a more attractive gravitational force, but what happens if you set a negative value for the gravitational constant?"})),r.default.createElement(a.default,{payload:{key:"g"},value:e.g,callback:e.modifyScenarioProperty,max:200,min:-200,step:.5}),r.default.createElement("label",{className:"top"},"Time Step",r.default.createElement(o.default,{position:"left",content:"The time step is the time that elapses for each tick of the simulation. A lower time step makes for a more accurate simulation. If you assign a negativevalue to the time step, the simulation will run backwards in time instead of forwards."})),r.default.createElement(a.default,{payload:{key:"dt"},value:e.dt,callback:e.modifyScenarioProperty,max:2,min:-2,step:1e-10}))};var r=c(n(1)),i=c(n(6)),a=c(n(12)),o=c(n(7)),s=n(27);function c(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return r.default.createElement("div",{className:"main-bar"},r.default.createElement("label",{className:"inline"},"Scenario"),r.default.createElement("div",{className:"item scenario-dropdown-wrapper inline"},r.default.createElement(a.default,{selectedOption:e.scenario.name},o.scenarios.map(function(e){return r.default.createElement(i.NavLink,{to:"/scenario/"+e.name,name:e.name,key:e.name},e.name)}))),r.default.createElement("div",{className:"play-state-wrapper inline"},!e.scenario.playing&&r.default.createElement("i",{className:"fas fa-play fa-lg",onClick:function(){return e.modifyScenarioProperty({key:"playing",value:!0})}}),e.scenario.playing&&r.default.createElement("i",{className:"fas fa-pause fa-lg",onClick:function(){return e.modifyScenarioProperty({key:"playing",value:!1})}})),r.default.createElement("div",{className:"elapsed-time-wrapper item inline"},r.default.createElement("i",{className:"fas fa-clock-o fa-lg inline"}),r.default.createElement("div",{className:"inline"},r.default.createElement("p",{className:"elapsed-time"},"[ Years ]: "+e.scenario.elapsedTime.toFixed(4)))))};var r=s(n(1));n(135);var i=n(23),a=s(n(6)),o=n(15);function s(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(4));var a=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.ringParticles=e,r.scenarioScale=n,r.setRing(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Object3D),r(t,[{key:"setRing",value:function(){for(var e=new i.Geometry,t=0;t<this.ringParticles.length;t++){var n=new i.Vector3;n.x=this.ringParticles[t].x*this.scenarioScale,n.y=this.ringParticles[t].y*this.scenarioScale,n.z=this.ringParticles[t].z*this.scenarioScale,e.vertices.push(n)}var r=new i.PointsMaterial({size:15,color:"#FFEBCD"}),a=new i.Points(e,r);a.name="ring",a.frustumCulled=!1,this.add(a)}},{key:"draw",value:function(e,t){for(var n=this.getObjectByName("ring"),r=0;r<n.geometry.vertices.length;r++)n.geometry.vertices[r].x=(t.x-e[r].x)*this.scenarioScale,n.geometry.vertices[r].y=(t.y-e[r].y)*this.scenarioScale,n.geometry.vertices[r].z=(t.z-e[r].z)*this.scenarioScale;n.geometry.verticesNeedUpdate=!0}}]),t}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dt=t.dt,this.particles=[],t.callback(this.particles)}return r(e,[{key:"iterate",value:function(e,t){for(var n=this.particles.length,r=e.length,i=0;i<n;i++){for(var a=this.particles[i],o=0,s=0,c=0,l=0;l<r;l++){var u=e[l];if(u.m>0){var h=u.x-a.x,p=u.y-a.y,d=u.z-a.z,f=h*h+p*p+d*d,m=Math.sqrt(f),v=t*u.m/(f*m);o+=h*v,s+=p*v,c+=d*v}}a.vx+=o*this.dt,a.vy+=s*this.dt,a.vz+=c*this.dt,a.x+=a.vx*this.dt,a.y+=a.vy*this.dt,a.z+=a.vz*this.dt}}}]),e}();t.default=i},function(e,t,n){var r=n(4);e.exports=function(){var e,t,n,i,a,o,s,c,l,u,h=null,p=null,d=null,f={},m={},v={},g={},y={},b={},x={},w={},_={},M=r.SmoothShading,E={centerGeometry:!1,convertUpAxis:!1,subdivideFaces:!0,upAxis:"Y",defaultEnvMap:null},S=1,T="Y",P=null;function C(u,f,M){if(h=(new DOMParser).parseFromString(u,"text/xml"),f=f||d,void 0!==M){var C=M.split("/");C.pop(),s=(C.length<1?".":C.join("/"))+"/"}!function(){var e=h.querySelectorAll("asset")[0];if(e&&e.childNodes)for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];switch(n.nodeName){case"unit":var r=n.getAttribute("meter");r&&(S=parseFloat(r));break;case"up_axis":T=n.textContent.charAt(0)}}}(),function(){if(!0!==E.convertUpAxis||T===E.upAxis)P=null;else switch(T){case"X":P="Y"===E.upAxis?"XtoY":"XtoZ";break;case"Y":P="X"===E.upAxis?"YtoX":"YtoZ";break;case"Z":P="X"===E.upAxis?"ZtoX":"ZtoY"}}(),m=A("library_images image",U,"image"),b=A("library_materials material",ae,"material"),x=A("library_effects effect",ue,"effect"),y=A("library_geometries geometry",J,"geometry"),w=A("library_cameras camera",ve,"camera"),_=A("library_lights light",ye,"light"),g=A("library_controllers controller",F,"controller"),v=A("library_animations animation",pe,"animation"),a=A("library_visual_scenes visual_scene",V,"visual_scene"),o=A("library_kinematics_models kinematics_model",xe,"kinematics_model"),c=[],l=[],e=function(){var e=h.querySelectorAll("scene instance_visual_scene")[0];if(e){var t=e.getAttribute("url").replace(/^#/,"");return a[t.length>0?t:"visual_scene0"]}return null}(),p=new r.Group;for(var O=0;O<e.nodes.length;O++)p.add(k(e.nodes[O]));p.scale.multiplyScalar(S),n=[],function t(r){var i=e.getChildById(r.colladaId,!0),a=null;if(i&&i.keys){a={fps:60,hierarchy:[{node:i,keys:i.keys,sids:i.sids}],node:r,name:"animation_"+r.name,length:0},n.push(a);for(var o=0,s=i.keys.length;o<s;o++)a.length=Math.max(a.length,i.keys[o].time)}else a={hierarchy:[{keys:[],sids:[]}]};for(var o=0,s=r.children.length;o<s;o++)for(var c=t(r.children[o]),l=0,u=c.hierarchy.length;l<u;l++)a.hierarchy.push({keys:[],sids:[]});return a}(p),t=function(){var e=h.querySelectorAll("instance_kinematics_model")[0];if(e){var t=e.getAttribute("url").replace(/^#/,"");return o[t.length>0?t:"kinematics_model0"]}return null}(),function(){if(t&&0===t.joints.length)i=void 0;else{var n={},a=function(r,i){var a=i.getAttribute("id"),o=e.getChildById(a,!0),s=t.joints[r];p.traverse(function(e){e.colladaId==a&&(n[r]={node:e,transforms:o.transforms,joint:s,position:s.zeroPosition})})};i={joints:t&&t.joints,getJointValue:function(e){var t=n[e];if(t)return t.position;console.log("getJointValue: joint "+e+" doesn't exist")},setJointValue:function(e,t){var i=n[e];if(i){var a=i.joint;if(t>a.limits.max||t<a.limits.min)console.log("setJointValue: joint "+e+" value "+t+" outside of limits (min: "+a.limits.min+", max: "+a.limits.max+")");else if(a.static)console.log("setJointValue: joint "+e+" is static");else{var o=i.node,c=a.axis,l=i.transforms,u=new r.Matrix4;for(s=0;s<l.length;s++){var h=l[s];if(h.sid&&-1!==h.sid.indexOf("joint"+e))switch(a.type){case"revolute":u.multiply(p.makeRotationAxis(c,r.Math.degToRad(t)));break;case"prismatic":u.multiply(p.makeTranslation(c.x*t,c.y*t,c.z*t));break;default:console.warn("setJointValue: unknown joint type: "+a.type)}else{var p=new r.Matrix4;switch(h.type){case"matrix":u.multiply(h.obj);break;case"translate":u.multiply(p.makeTranslation(h.obj.x,h.obj.y,h.obj.z));break;case"rotate":u.multiply(p.makeRotationAxis(h.obj,h.angle))}}}var d=u.elements,f=Array.prototype.slice.call(d),m=[f[0],f[4],f[8],f[12],f[1],f[5],f[9],f[13],f[2],f[6],f[10],f[14],f[3],f[7],f[11],f[15]];o.matrix.set.apply(o.matrix,m),o.matrix.decompose(o.position,o.quaternion,o.scale)}}else console.log("setJointValue: joint "+e+" doesn't exist")}};var o=h.querySelector("scene instance_kinematics_scene");if(o)for(var s=0;s<o.childNodes.length;s++){var c=o.childNodes[s];if(1==c.nodeType)switch(c.nodeName){case"bind_joint_axis":var l=c.getAttribute("target").split("/").pop(),u=c.querySelector("axis param").textContent,d=parseInt(u.split("joint").pop().split(".")[0]),f=h.querySelector('[sid="'+l+'"]');if(f){var m=f.parentElement;a(d,m)}}}}}();var L={scene:p,morphs:c,skins:l,animations:n,kinematics:i,dae:{images:m,materials:b,cameras:w,lights:_,effects:x,geometries:y,controllers:g,animations:v,visualScenes:a,visualScene:e,scene:e,kinematicsModels:o,kinematicsModel:t}};return f&&f(L),L}function A(e,t,n){for(var r=h.querySelectorAll(e),i={},a=0,o=r.length,s=0;s<o;s++){var c=r[s],l=(new t).parse(c);l.id&&0!==l.id.length||(l.id=n+a++),i[l.id]=l}return i}function O(e,t){var n=t instanceof q?g[t.url]:t;if(n&&n.morph){for(var r=n.morph,i=0;i<r.targets.length;i++){var a=r.targets[i],o=y[a];if(o.mesh&&o.mesh.primitives&&o.mesh.primitives.length){var s=o.mesh.primitives[0].geometry;s.vertices.length===e.vertices.length&&e.morphTargets.push({name:"target_1",vertices:s.vertices})}}e.morphTargets.push({name:"target_Z",vertices:e.vertices})}else console.log("could not find morph controller!")}function L(e,t,n,i){if(e.world=e.world||new r.Matrix4,e.localworld=e.localworld||new r.Matrix4,e.world.copy(e.matrix),e.localworld.copy(e.matrix),e.channels&&e.channels.length){var a=e.channels[0].sampler.output[n];a instanceof r.Matrix4&&(e.world.copy(a),e.localworld.copy(a),0===n&&e.matrix.copy(a))}i&&e.world.multiplyMatrices(i,e.world),t.push(e);for(var o=0;o<e.nodes.length;o++)L(e.nodes[o],t,n,e.world)}function R(e,t){for(var n=0;n<e.length;n++){var i=e[n],a=-1;if("JOINT"==i.type){for(var o=0;o<t.joints.length;o++)if(i.sid===t.joints[o]){a=o;break}if(a>=0){var s=t.invBindMatrices[a];for(i.invBindMatrix=s,i.skinningMatrix=new r.Matrix4,i.skinningMatrix.multiplyMatrices(i.world,s),i.animatrix=new r.Matrix4,i.animatrix.copy(i.localworld),i.weights=[],o=0;o<t.weights.length;o++)for(var c=0;c<t.weights[o].length;c++){var l=t.weights[o][c];l.joint===a&&i.weights.push(l)}}else console.warn("ColladaLoader: Could not find joint '"+i.sid+"'."),i.skinningMatrix=new r.Matrix4,i.weights=[]}}}function N(t,n,i){var a=g[n.url];if(i=void 0!==i?i:40,a&&a.skin)if(n.skeleton&&n.skeleton.length){for(var o=function(){var e,t=1e6,n=-t,r=0;for(var i in v){var a=v[i];e=e||a.id;for(var o=0;o<a.sampler.length;o++){var s=a.sampler[o];s.create(),t=Math.min(t,s.startTime),n=Math.max(n,s.endTime),r=Math.max(r,s.input.length)}}return{start:t,end:n,frames:r,ID:e}}(),s=e.getChildById(n.skeleton[0],!0)||e.getChildBySid(n.skeleton[0],!0),c=function(e){var t=[],n=function(e,t,i){var a={};a.name=t.sid,a.parent=e,a.matrix=t.matrix;var o=[new r.Vector3,new r.Quaternion,new r.Vector3];for(var s in a.matrix.decompose(o[0],o[1],o[2]),a.pos=[o[0].x,o[0].y,o[0].z],a.scl=[o[2].x,o[2].y,o[2].z],a.rotq=[o[1].x,o[1].y,o[1].z,o[1].w],i.push(a),t.nodes)n(t.sid,t.nodes[s],i)};return n(-1,e,t),t}(s),l=a.skin.joints,u=[],h=0;h<l.length;h++)for(var p=0;p<c.length;p++)c[p].name===l[h]&&(u[h]=c[p]);for(var h=0;h<u.length;h++)for(var p=0;p<u.length;p++)u[h].parent===u[p].name&&(u[h].parent=p);for(new r.Vector3,h=0;h<t.vertices.length;h++)t.vertices[h].applyMatrix4(a.skin.bindShapeMatrix);var d=[],f=[],m=a.skin.weights;for(h=0;h<m.length;h++){var y=new r.Vector4(m[h][0]?m[h][0].joint:0,m[h][1]?m[h][1].joint:0,m[h][2]?m[h][2].joint:0,m[h][3]?m[h][3].joint:0),b=new r.Vector4(m[h][0]?m[h][0].weight:0,m[h][1]?m[h][1].weight:0,m[h][2]?m[h][2].weight:0,m[h][3]?m[h][3].weight:0);d.push(y),f.push(b)}t.skinIndices=d,t.skinWeights=f,t.bones=u;var x={name:o.ID,fps:30,length:o.frames/30,hierarchy:[]};for(p=0;p<u.length;p++)x.hierarchy.push({parent:u[p].parent,name:u[p].name,keys:[]});for(console.log("ColladaLoader:",o.ID+" has "+u.length+" bones."),function(e,t,n){var i=[];L(t,i,-1),R(i,n.skin);for(var a=new r.Vector3,o=[],s=0;s<e.vertices.length;s++)o.push(new r.Vector3);for(s=0;s<i.length;s++)if("JOINT"==i[s].type)for(var c=0;c<i[s].weights.length;c++){var l=i[s].weights[c],u=l.index,h=l.weight,p=e.vertices[u],d=o[u];a.x=p.x,a.y=p.y,a.z=p.z,a.applyMatrix4(i[s].skinningMatrix),d.x+=a.x*h,d.y+=a.y*h,d.z+=a.z*h}for(s=0;s<e.vertices.length;s++)e.vertices[s]=o[s]}(t,s,a),i=0;i<o.frames;i++){var w=[];for(L(s,w,i),R(w,a.skin),h=0;h<w.length;h++)for(p=0;p<x.hierarchy.length;p++)if(x.hierarchy[p].name===w[h].sid){var _={};_.time=i/30,_.matrix=w[h].animatrix,0===i&&(w[h].matrix=_.matrix);var M=[new r.Vector3,new r.Quaternion,new r.Vector3];_.matrix.decompose(M[0],M[1],M[2]),_.pos=[M[0].x,M[0].y,M[0].z],_.scl=[M[2].x,M[2].y,M[2].z],_.rot=M[1],x.hierarchy[p].keys.push(_)}t.animation=x}}else console.log("ColladaLoader: Could not find the skeleton for the skin. ");else console.log("ColladaLoader: Could not find skin controller.")}function k(e,t){var n,i,a,o,s=new r.Object3D;for(a=0;a<e.controllers.length;a++){var u=g[e.controllers[a].url];switch(u.type){case"skin":if(y[u.skin.source])(p=new X).url=u.skin.source,p.instance_material=e.controllers[a].instance_material,e.geometries.push(p),n=e.controllers[a];else if(g[u.skin.source]){var h=g[u.skin.source];i=h,h.morph&&y[h.morph.source]&&((p=new X).url=h.morph.source,p.instance_material=e.controllers[a].instance_material,e.geometries.push(p))}break;case"morph":var p;y[u.morph.source]&&((p=new X).url=u.morph.source,p.instance_material=e.controllers[a].instance_material,e.geometries.push(p),i=e.controllers[a]),console.log("ColladaLoader: Morph-controller partially supported.")}}var d={};for(a=0;a<e.geometries.length;a++){var f,m=e.geometries[a],v=m.instance_material,M=y[m.url],S={},T=[],P=0;if(M){if(!M.mesh||!M.mesh.primitives)continue;if(0===s.name.length&&(s.name=M.id),v)for(o=0;o<v.length;o++){var C=v[o],A=b[C.target],L=A.instance_effect.url,R=x[L].shader.material;if(M.doubleSided){if(!(C.symbol in d)){var I=R.clone();I.side=r.DoubleSide,d[C.symbol]=I}R=d[C.symbol]}R.opacity=R.opacity?R.opacity:1,S[C.symbol]=P,T.push(R),(f=R).name=null===A.name||""===A.name?A.id:A.name,P++}var D,z=f||new r.MeshLambertMaterial({color:14540253,side:M.doubleSided?r.DoubleSide:r.FrontSide}),j=M.mesh.geometry3js;P>1&&(z=new r.MultiMaterial(T)),void 0!==n?(N(j,n),j.morphTargets.length>0?(z.morphTargets=!0,z.skinning=!1):(z.morphTargets=!1,z.skinning=!0),(D=new r.SkinnedMesh(j,z,!1)).name="skin_"+l.length,l.push(D)):void 0!==i?(O(j,i),z.morphTargets=!0,(D=new r.Mesh(j,z)).name="morph_"+c.length,c.push(D)):D=!0===j.isLineStrip?new r.Line(j):new r.Mesh(j,z),s.add(D)}}for(a=0;a<e.cameras.length;a++){var U=e.cameras[a],F=w[U.url],B=new r.PerspectiveCamera(F.yfov,parseFloat(F.aspect_ratio),parseFloat(F.znear),parseFloat(F.zfar));s.add(B)}for(a=0;a<e.lights.length;a++){var H=null,V=e.lights[a],G=_[V.url];if(G&&G.technique){var W=G.color.getHex(),q=G.intensity,Y=G.distance,J=G.falloff_angle;switch(G.technique){case"directional":(H=new r.DirectionalLight(W,q,Y)).position.set(0,0,1);break;case"point":H=new r.PointLight(W,q,Y);break;case"spot":(H=new r.SpotLight(W,q,Y,J)).position.set(0,0,1);break;case"ambient":H=new r.AmbientLight(W)}}H&&s.add(H)}if(s.name=e.name||e.id||"",s.colladaId=e.id||"",s.layer=e.layer||"",s.matrix=e.matrix,s.matrix.decompose(s.position,s.quaternion,s.scale),E.centerGeometry&&s.geometry){var Z=s.geometry.center();Z.multiply(s.scale),Z.applyQuaternion(s.quaternion),s.position.sub(Z)}for(a=0;a<e.nodes.length;a++)s.add(k(e.nodes[a]));return s}function I(e){for(var t=h.querySelectorAll("library_nodes node"),n=0;n<t.length;n++){var r=t[n].attributes.getNamedItem("id");if(r&&r.value===e)return t[n]}}function D(e,t){for(var n=null,r=0,i=e.length;r<i&&null===n;r++){var a=e[r];if(a.time===t)n=a;else if(a.time>t)break}return n}function z(e,t){for(var n=-1,r=0,i=e.length;r<i&&-1===n;r++)e[r].time>=t&&(n=r);return n}function j(e,t,n,r){var i=function(e,t,n){for(n=n>=0?n:n+e.length;n>=0;n--){var r=e[n];if(r.hasTarget(t))return r}return null}(e,r,n?n-1:0),a=function(e,t,n){for(;n<e.length;n++){var r=e[n];if(r.hasTarget(t))return r}return null}(e,r,n+1);if(i&&a){var o,s=(t.time-i.time)/(a.time-i.time),c=i.getTarget(r),l=a.getTarget(r).data,u=c.data;if("matrix"===c.type)o=u;else if(u.length){o=[];for(var h=0;h<u.length;++h)o[h]=u[h]+(l[h]-u[h])*s}else o=u+(l-u)*s;t.addTarget(r,c.transform,c.member,o)}}function U(){this.id="",this.init_from=""}function F(){this.id="",this.name="",this.type="",this.skin=null,this.morph=null}function B(){this.method=null,this.source=null,this.targets=null,this.weights=null}function H(){this.source="",this.bindShapeMatrix=null,this.invBindMatrices=[],this.joints=[],this.weights=[]}function V(){this.id="",this.name="",this.nodes=[],this.scene=new r.Group}function G(){this.id="",this.name="",this.sid="",this.nodes=[],this.controllers=[],this.transforms=[],this.geometries=[],this.channels=[],this.matrix=new r.Matrix4}function W(){this.sid="",this.type="",this.data=[],this.obj=null}function q(){this.url="",this.skeleton=[],this.instance_material=[]}function Y(){this.symbol="",this.target=""}function X(){this.url="",this.instance_material=[]}function J(){this.id="",this.mesh=null}function Z(e){this.geometry=e.id,this.primitives=[],this.vertices=null,this.geometry3js=null}function K(){this.material="",this.count=0,this.inputs=[],this.vcount=null,this.p=[],this.geometry=new r.Geometry}function Q(){K.call(this),this.vcount=[]}function $(){K.call(this),this.vcount=1}function ee(){K.call(this),this.vcount=3}function te(){this.source="",this.count=0,this.stride=0,this.params=[]}function ne(){this.input={}}function re(){this.semantic="",this.offset=0,this.source="",this.set=0}function ie(e){this.id=e,this.type=null}function ae(){this.id="",this.name="",this.instance_effect=null}function oe(){this.color=new r.Color,this.color.setRGB(Math.random(),Math.random(),Math.random()),this.color.a=1,this.texture=null,this.texcoord=null,this.texOpts=null}function se(e,t){this.type=e,this.effect=t,this.material=null}function ce(e){this.effect=e,this.init_from=null,this.format=null}function le(e){this.effect=e,this.source=null,this.wrap_s=null,this.wrap_t=null,this.minfilter=null,this.magfilter=null,this.mipfilter=null}function ue(){this.id="",this.name="",this.shader=null,this.surface={},this.sampler={}}function he(){this.url=""}function pe(){this.id="",this.name="",this.source={},this.sampler=[],this.channel=[]}function de(e){this.animation=e,this.source="",this.target="",this.fullSid=null,this.sid=null,this.dotSyntax=null,this.arrSyntax=null,this.arrIndices=null,this.member=null}function fe(e){this.id="",this.animation=e,this.inputs=[],this.input=null,this.output=null,this.strideOut=null,this.interpolation=null,this.startTime=null,this.endTime=null,this.duration=0}function me(e){this.targets=[],this.time=e}function ve(){this.id="",this.name="",this.technique=""}function ge(){this.url=""}function ye(){this.id="",this.name="",this.technique=""}function be(){this.url=""}function xe(){this.id="",this.name="",this.joints=[],this.links=[]}function we(){this.sid="",this.name="",this.axis=new r.Vector3,this.limits={min:0,max:0},this.type="",this.static=!1,this.zeroPosition=0,this.middlePosition=0}function _e(){this.sid="",this.name="",this.transforms=[],this.attachments=[]}function Me(){this.joint="",this.transforms=[],this.links=[]}function Ee(e){var t=e.getAttribute("id");return void 0!=f[t]?f[t]:(f[t]=new ie(t).parse(e),f[t])}function Se(e){for(var t=Ce(e),n=[],r=0,i=t.length;r<i;r++)n.push("true"===t[r]||"1"===t[r]);return n}function Te(e){for(var t=Ce(e),n=[],r=0,i=t.length;r<i;r++)n.push(parseFloat(t[r]));return n}function Pe(e){for(var t=Ce(e),n=[],r=0,i=t.length;r<i;r++)n.push(parseInt(t[r],10));return n}function Ce(e){return e.length>0?function(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")}(e).split(/\s+/):[]}function Ae(e,t,n){return e.hasAttribute(t)?parseInt(e.getAttribute(t),10):n}function Oe(e,t){(new r.ImageLoader).load(t,function(t){e.image=t,e.needsUpdate=!0})}function Le(e,t){e.doubleSided=!1;var n=t.querySelectorAll("extra double_sided")[0];n&&n&&1===parseInt(n.textContent,10)&&(e.doubleSided=!0)}function Re(e,t){if(!0===E.convertUpAxis&&T!==E.upAxis)switch(P){case"XtoY":var n=e[0];e[0]=t*e[1],e[1]=n;break;case"XtoZ":n=e[2],e[2]=e[1],e[1]=e[0],e[0]=n;break;case"YtoX":n=e[0],e[0]=e[1],e[1]=t*n;break;case"YtoZ":n=e[1],e[1]=t*e[2],e[2]=n;break;case"ZtoX":n=e[0],e[0]=e[1],e[1]=e[2],e[2]=n;break;case"ZtoY":n=e[1],e[1]=e[2],e[2]=t*n}}function Ne(e,t){var n=[e[t],e[t+1],e[t+2]];return Re(n,-1),new r.Vector3(n[0],n[1],n[2])}function ke(e){if(E.convertUpAxis){var t=[e[0],e[4],e[8]];Re(t,-1),e[0]=t[0],e[4]=t[1],e[8]=t[2],Re(t=[e[1],e[5],e[9]],-1),e[1]=t[0],e[5]=t[1],e[9]=t[2],Re(t=[e[2],e[6],e[10]],-1),e[2]=t[0],e[6]=t[1],e[10]=t[2],Re(t=[e[0],e[1],e[2]],-1),e[0]=t[0],e[1]=t[1],e[2]=t[2],Re(t=[e[4],e[5],e[6]],-1),e[4]=t[0],e[5]=t[1],e[6]=t[2],Re(t=[e[8],e[9],e[10]],-1),e[8]=t[0],e[9]=t[1],e[10]=t[2],Re(t=[e[3],e[7],e[11]],-1),e[3]=t[0],e[7]=t[1],e[11]=t[2]}return(new r.Matrix4).set(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function Ie(e){return e>-1&&e<3&&(e={X:0,Y:1,Z:2}[e=De(["X","Y","Z"][e])]),e}function De(e){if(E.convertUpAxis)switch(e){case"X":switch(P){case"XtoY":case"XtoZ":case"YtoX":e="Y";break;case"ZtoX":e="Z"}break;case"Y":switch(P){case"XtoY":case"YtoX":case"ZtoX":e="X";break;case"XtoZ":case"YtoZ":case"ZtoY":e="Z"}break;case"Z":switch(P){case"XtoZ":e="X";break;case"YtoZ":case"ZtoX":case"ZtoY":e="Y"}}return e}return U.prototype.parse=function(e){this.id=e.getAttribute("id");for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];"init_from"===n.nodeName&&(this.init_from=n.textContent)}return this},F.prototype.parse=function(e){this.id=e.getAttribute("id"),this.name=e.getAttribute("name"),this.type="none";for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];switch(n.nodeName){case"skin":this.skin=(new H).parse(n),this.type=n.nodeName;break;case"morph":this.morph=(new B).parse(n),this.type=n.nodeName}}return this},B.prototype.parse=function(e){var t,n={},r=[];for(this.method=e.getAttribute("method"),this.source=e.getAttribute("source").replace(/^#/,""),t=0;t<e.childNodes.length;t++){var i=e.childNodes[t];if(1==i.nodeType)switch(i.nodeName){case"source":n[(o=(new ie).parse(i)).id]=o;break;case"targets":r=this.parseInputs(i);break;default:console.log(i.nodeName)}}for(t=0;t<r.length;t++){var a=r[t],o=n[a.source];switch(a.semantic){case"MORPH_TARGET":this.targets=o.read();break;case"MORPH_WEIGHT":this.weights=o.read()}}return this},B.prototype.parseInputs=function(e){for(var t=[],n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1==r.nodeType)switch(r.nodeName){case"input":t.push((new re).parse(r))}}return t},H.prototype.parse=function(e){var t,n,r={};this.source=e.getAttribute("source").replace(/^#/,""),this.invBindMatrices=[],this.joints=[],this.weights=[];for(var i=0;i<e.childNodes.length;i++){var a=e.childNodes[i];if(1==a.nodeType)switch(a.nodeName){case"bind_shape_matrix":var o=Te(a.textContent);this.bindShapeMatrix=ke(o);break;case"source":var s=(new ie).parse(a);r[s.id]=s;break;case"joints":t=a;break;case"vertex_weights":n=a;break;default:console.log(a.nodeName)}}return this.parseJoints(t,r),this.parseWeights(n,r),this},H.prototype.parseJoints=function(e,t){for(var n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1==r.nodeType)switch(r.nodeName){case"input":var i=(new re).parse(r),a=t[i.source];"JOINT"===i.semantic?this.joints=a.read():"INV_BIND_MATRIX"===i.semantic&&(this.invBindMatrices=a.read())}}},H.prototype.parseWeights=function(e,t){for(var n,r,i=[],a=0;a<e.childNodes.length;a++){var o=e.childNodes[a];if(1==o.nodeType)switch(o.nodeName){case"input":i.push((new re).parse(o));break;case"v":n=Pe(o.textContent);break;case"vcount":r=Pe(o.textContent)}}var s=0;for(a=0;a<r.length;a++){for(var c=r[a],l=[],u=0;u<c;u++){for(var h={},p=0;p<i.length;p++){var d=i[p],f=n[s+d.offset];switch(d.semantic){case"JOINT":h.joint=f;break;case"WEIGHT":h.weight=t[d.source].data[f]}}l.push(h),s+=i.length}for(u=0;u<l.length;u++)l[u].index=a;this.weights.push(l)}},V.prototype.getChildById=function(e,t){for(var n=0;n<this.nodes.length;n++){var r=this.nodes[n].getChildById(e,t);if(r)return r}return null},V.prototype.getChildBySid=function(e,t){for(var n=0;n<this.nodes.length;n++){var r=this.nodes[n].getChildBySid(e,t);if(r)return r}return null},V.prototype.parse=function(e){this.id=e.getAttribute("id"),this.name=e.getAttribute("name"),this.nodes=[];for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1==n.nodeType)switch(n.nodeName){case"node":this.nodes.push((new G).parse(n))}}return this},G.prototype.getChannelForTransform=function(e){for(var t=0;t<this.channels.length;t++){var n,r=this.channels[t],i=r.target.split("/"),a=(i.shift(),i.shift()),o=a.indexOf(".")>=0,s=a.indexOf("(")>=0;if(o)a=(i=a.split(".")).shift(),i.shift();else if(s){a=(n=a.split("(")).shift();for(var c=0;c<n.length;c++)n[c]=parseInt(n[c].replace(/\)/,""))}if(a===e)return r.info={sid:a,dotSyntax:o,arrSyntax:s,arrIndices:n},r}return null},G.prototype.getChildById=function(e,t){if(this.id===e)return this;if(t)for(var n=0;n<this.nodes.length;n++){var r=this.nodes[n].getChildById(e,t);if(r)return r}return null},G.prototype.getChildBySid=function(e,t){if(this.sid===e)return this;if(t)for(var n=0;n<this.nodes.length;n++){var r=this.nodes[n].getChildBySid(e,t);if(r)return r}return null},G.prototype.getTransformBySid=function(e){for(var t=0;t<this.transforms.length;t++)if(this.transforms[t].sid===e)return this.transforms[t];return null},G.prototype.parse=function(e){this.id=e.getAttribute("id"),this.sid=e.getAttribute("sid"),this.name=e.getAttribute("name"),this.type=e.getAttribute("type"),this.layer=e.getAttribute("layer"),this.type="JOINT"===this.type?this.type:"NODE",this.nodes=[],this.transforms=[],this.geometries=[],this.cameras=[],this.lights=[],this.controllers=[],this.matrix=new r.Matrix4;for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1==n.nodeType)switch(n.nodeName){case"node":this.nodes.push((new G).parse(n));break;case"instance_camera":this.cameras.push((new ge).parse(n));break;case"instance_controller":this.controllers.push((new q).parse(n));break;case"instance_geometry":this.geometries.push((new X).parse(n));break;case"instance_light":this.lights.push((new be).parse(n));break;case"instance_node":var i=I(n.getAttribute("url").replace(/^#/,""));i&&this.nodes.push((new G).parse(i));break;case"rotate":case"translate":case"scale":case"matrix":case"lookat":case"skew":this.transforms.push((new W).parse(n));break;case"extra":break;default:console.log(n.nodeName)}}return this.channels=function(e){var t=[],n=1e6,r=-1e6;for(var i in v)for(var a=v[i],o=0;o<a.channel.length;o++){var s=a.channel[o],c=a.sampler[o];(i=s.target.split("/")[0])==e.id&&(c.create(),s.sampler=c,n=Math.min(n,c.startTime),r=Math.max(r,c.endTime),t.push(s))}return t.length&&(e.startTime=n,e.endTime=r),t}(this),function(e){if(e.channels&&e.channels.length){for(var t=[],n=[],r=0,i=e.channels.length;r<i;r++){var a,o=e.channels[r],s=o.fullSid,c=o.sampler,l=c.input,u=e.getTransformBySid(o.sid);if(o.arrIndices){a=[];for(var h=0,p=o.arrIndices.length;h<p;h++)a[h]=Ie(o.arrIndices[h])}else a=De(o.member);if(u)for(-1===n.indexOf(s)&&n.push(s),h=0,p=l.length;h<p;h++){var d=l[h],f=c.getData(u.type,h,a);if(!(g=D(t,d))){g=new me(d);var m=z(t,d);t.splice(-1===m?t.length:m,0,g)}g.addTarget(s,u,a,f)}else console.log('Could not find transform "'+o.sid+'" in node '+e.id)}for(r=0;r<n.length;r++){var v=n[r];for(h=0;h<t.length;h++){var g;(g=t[h]).hasTarget(v)||j(t,g,h,v)}}e.keys=t,e.sids=n}}(this),this.updateMatrix(),this},G.prototype.updateMatrix=function(){this.matrix.identity();for(var e=0;e<this.transforms.length;e++)this.transforms[e].apply(this.matrix)},W.prototype.parse=function(e){return this.sid=e.getAttribute("sid"),this.type=e.nodeName,this.data=Te(e.textContent),this.convert(),this},W.prototype.convert=function(){switch(this.type){case"matrix":this.obj=ke(this.data);break;case"rotate":this.angle=r.Math.degToRad(this.data[3]);case"translate":Re(this.data,-1),this.obj=new r.Vector3(this.data[0],this.data[1],this.data[2]);break;case"scale":Re(this.data,1),this.obj=new r.Vector3(this.data[0],this.data[1],this.data[2]);break;default:console.log("Can not convert Transform of type "+this.type)}},W.prototype.apply=(u=new r.Matrix4,function(e){switch(this.type){case"matrix":e.multiply(this.obj);break;case"translate":e.multiply(u.makeTranslation(this.obj.x,this.obj.y,this.obj.z));break;case"rotate":e.multiply(u.makeRotationAxis(this.obj,this.angle));break;case"scale":e.scale(this.obj)}}),W.prototype.update=function(e,t){var n=["X","Y","Z","ANGLE"];switch(this.type){case"matrix":if(t)if(1===t.length)switch(t[0]){case 0:this.obj.n11=e[0],this.obj.n21=e[1],this.obj.n31=e[2],this.obj.n41=e[3];break;case 1:this.obj.n12=e[0],this.obj.n22=e[1],this.obj.n32=e[2],this.obj.n42=e[3];break;case 2:this.obj.n13=e[0],this.obj.n23=e[1],this.obj.n33=e[2],this.obj.n43=e[3];break;case 3:this.obj.n14=e[0],this.obj.n24=e[1],this.obj.n34=e[2],this.obj.n44=e[3]}else if(2===t.length){var i="n"+(t[0]+1)+(t[1]+1);this.obj[i]=e}else console.log("Incorrect addressing of matrix in transform.");else this.obj.copy(e);break;case"translate":case"scale":switch("[object Array]"===Object.prototype.toString.call(t)&&(t=n[t[0]]),t){case"X":this.obj.x=e;break;case"Y":this.obj.y=e;break;case"Z":this.obj.z=e;break;default:this.obj.x=e[0],this.obj.y=e[1],this.obj.z=e[2]}break;case"rotate":switch("[object Array]"===Object.prototype.toString.call(t)&&(t=n[t[0]]),t){case"X":this.obj.x=e;break;case"Y":this.obj.y=e;break;case"Z":this.obj.z=e;break;case"ANGLE":this.angle=r.Math.degToRad(e);break;default:this.obj.x=e[0],this.obj.y=e[1],this.obj.z=e[2],this.angle=r.Math.degToRad(e[3])}}},q.prototype.parse=function(e){this.url=e.getAttribute("url").replace(/^#/,""),this.skeleton=[],this.instance_material=[];for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1===n.nodeType)switch(n.nodeName){case"skeleton":this.skeleton.push(n.textContent.replace(/^#/,""));break;case"bind_material":for(var r=n.querySelectorAll("instance_material"),i=0;i<r.length;i++){var a=r[i];this.instance_material.push((new Y).parse(a))}}}return this},Y.prototype.parse=function(e){return this.symbol=e.getAttribute("symbol"),this.target=e.getAttribute("target").replace(/^#/,""),this},X.prototype.parse=function(e){this.url=e.getAttribute("url").replace(/^#/,""),this.instance_material=[];for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1==n.nodeType&&"bind_material"===n.nodeName){for(var r=n.querySelectorAll("instance_material"),i=0;i<r.length;i++){var a=r[i];this.instance_material.push((new Y).parse(a))}break}}return this},J.prototype.parse=function(e){this.id=e.getAttribute("id"),Le(this,e);for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];switch(n.nodeName){case"mesh":this.mesh=new Z(this).parse(n)}}return this},Z.prototype.parse=function(e){this.primitives=[];for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];switch(n.nodeName){case"source":Ee(n);break;case"vertices":this.vertices=(new ne).parse(n);break;case"linestrips":this.primitives.push((new $).parse(n));break;case"triangles":this.primitives.push((new ee).parse(n));break;case"polygons":this.primitives.push((new K).parse(n));break;case"polylist":this.primitives.push((new Q).parse(n))}}if(this.geometry3js=new r.Geometry,null===this.vertices)return this;var i=f[this.vertices.input.POSITION.source].data;for(t=0;t<i.length;t+=3)this.geometry3js.vertices.push(Ne(i,t).clone());for(t=0;t<this.primitives.length;t++){var a=this.primitives[t];a.setVertices(this.vertices),this.handlePrimitive(a,this.geometry3js)}return this.geometry3js.calcNormals&&(this.geometry3js.computeVertexNormals(),delete this.geometry3js.calcNormals),this},Z.prototype.handlePrimitive=function(e,t){if(e instanceof $)t.isLineStrip=!0;else{var n,i,a,o,s,c,l,u=e.p,h=e.inputs,p=0,d=3,m=0,v=[];for(n=0;n<h.length;n++){var g=(a=h[n]).offset+1;switch(m=m<g?g:m,a.semantic){case"TEXCOORD":v.push(a.set)}}for(var y=0;y<u.length;++y)for(var b=u[y],x=0;x<b.length;){var w=[],_=[],M=null,S=[];for(d=e.vcount?e.vcount.length?e.vcount[p++]:e.vcount:b.length/m,n=0;n<d;n++)for(i=0;i<h.length;i++)switch(a=h[i],c=f[a.source],s=(o=b[x+n*m+a.offset])*(l=c.accessor.params.length),a.semantic){case"VERTEX":w.push(o);break;case"NORMAL":_.push(Ne(c.data,s));break;case"TEXCOORD":void 0===(M=M||{})[a.set]&&(M[a.set]=[]),M[a.set].push(new r.Vector2(c.data[s],c.data[s+1]));break;case"COLOR":S.push((new r.Color).setRGB(c.data[s],c.data[s+1],c.data[s+2]))}if(0===_.length)if(a=this.vertices.input.NORMAL){l=(c=f[a.source]).accessor.params.length;for(var T=0,P=w.length;T<P;T++)_.push(Ne(c.data,w[T]*l))}else t.calcNormals=!0;if(!M&&(M={},a=this.vertices.input.TEXCOORD))for(v.push(a.set),l=(c=f[a.source]).accessor.params.length,T=0,P=w.length;T<P;T++)s=w[T]*l,void 0===M[a.set]&&(M[a.set]=[]),M[a.set].push(new r.Vector2(c.data[s],1-c.data[s+1]));if(0===S.length&&(a=this.vertices.input.COLOR))for(l=(c=f[a.source]).accessor.params.length,T=0,P=w.length;T<P;T++)s=w[T]*l,S.push((new r.Color).setRGB(c.data[s],c.data[s+1],c.data[s+2]));var C,A,O=null,L=[];if(3===d)L.push(new r.Face3(w[0],w[1],w[2],_,S.length?S:new r.Color));else if(4===d)L.push(new r.Face3(w[0],w[1],w[3],_.length?[_[0].clone(),_[1].clone(),_[3].clone()]:[],S.length?[S[0],S[1],S[3]]:new r.Color)),L.push(new r.Face3(w[1],w[2],w[3],_.length?[_[1].clone(),_[2].clone(),_[3].clone()]:[],S.length?[S[1],S[2],S[3]]:new r.Color));else if(d>4&&E.subdivideFaces){var R=S.length?S:new r.Color;for(i=1;i<d-1;)L.push(new r.Face3(w[0],w[i],w[i+1],_.length?[_[0].clone(),_[i++].clone(),_[i].clone()]:[],R))}if(L.length)for(T=0,P=L.length;T<P;T++)for((O=L[T]).daeMaterial=e.material,t.faces.push(O),i=0;i<v.length;i++)C=M[v[i]],A=d>4?[C[0],C[T+1],C[T+2]]:4===d?0===T?[C[0],C[1],C[3]]:[C[1].clone(),C[2],C[3].clone()]:[C[0],C[1],C[2]],void 0===t.faceVertexUvs[i]&&(t.faceVertexUvs[i]=[]),t.faceVertexUvs[i].push(A);else console.log("dropped face with vcount "+d+" for geometry with id: "+t.id);x+=m*d}}},K.prototype.setVertices=function(e){for(var t=0;t<this.inputs.length;t++)this.inputs[t].source===e.id&&(this.inputs[t].source=e.input.POSITION.source)},K.prototype.parse=function(e){this.material=e.getAttribute("material"),this.count=Ae(e,"count",0);for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];switch(n.nodeName){case"input":this.inputs.push((new re).parse(e.childNodes[t]));break;case"vcount":this.vcount=Pe(n.textContent);break;case"p":this.p.push(Pe(n.textContent));break;case"ph":console.warn("polygon holes not yet supported!")}}return this},Q.prototype=Object.create(K.prototype),Q.prototype.constructor=Q,$.prototype=Object.create(K.prototype),$.prototype.constructor=$,ee.prototype=Object.create(K.prototype),ee.prototype.constructor=ee,te.prototype.parse=function(e){this.params=[],this.source=e.getAttribute("source"),this.count=Ae(e,"count",0),this.stride=Ae(e,"stride",0);for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if("param"===n.nodeName){var r={};r.name=n.getAttribute("name"),r.type=n.getAttribute("type"),this.params.push(r)}}return this},ne.prototype.parse=function(e){this.id=e.getAttribute("id");for(var t=0;t<e.childNodes.length;t++)if("input"===e.childNodes[t].nodeName){var n=(new re).parse(e.childNodes[t]);this.input[n.semantic]=n}return this},re.prototype.parse=function(e){return this.semantic=e.getAttribute("semantic"),this.source=e.getAttribute("source").replace(/^#/,""),this.set=Ae(e,"set",-1),this.offset=Ae(e,"offset",0),"TEXCOORD"===this.semantic&&this.set<0&&(this.set=0),this},ie.prototype.parse=function(e){this.id=e.getAttribute("id");for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];switch(n.nodeName){case"bool_array":this.data=Se(n.textContent),this.type=n.nodeName;break;case"float_array":this.data=Te(n.textContent),this.type=n.nodeName;break;case"int_array":this.data=Pe(n.textContent),this.type=n.nodeName;break;case"IDREF_array":case"Name_array":this.data=Ce(n.textContent),this.type=n.nodeName;break;case"technique_common":for(var r=0;r<n.childNodes.length;r++)if("accessor"===n.childNodes[r].nodeName){this.accessor=(new te).parse(n.childNodes[r]);break}}}return this},ie.prototype.read=function(){var e=[],t=this.accessor.params[0];switch(t.type){case"IDREF":case"Name":case"name":case"float":return this.data;case"float4x4":for(var n=0;n<this.data.length;n+=16){var r=ke(this.data.slice(n,n+16));e.push(r)}break;default:console.log("ColladaLoader: Source: Read dont know how to read "+t.type+".")}return e},ae.prototype.parse=function(e){this.id=e.getAttribute("id"),this.name=e.getAttribute("name");for(var t=0;t<e.childNodes.length;t++)if("instance_effect"===e.childNodes[t].nodeName){this.instance_effect=(new he).parse(e.childNodes[t]);break}return this},oe.prototype.isColor=function(){return null===this.texture},oe.prototype.isTexture=function(){return null!=this.texture},oe.prototype.parse=function(e){"transparent"===e.nodeName&&(this.opaque=e.getAttribute("opaque"));for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1==n.nodeType)switch(n.nodeName){case"color":var i=Te(n.textContent);this.color=new r.Color,this.color.setRGB(i[0],i[1],i[2]),this.color.a=i[3];break;case"texture":this.texture=n.getAttribute("texture"),this.texcoord=n.getAttribute("texcoord"),this.texOpts={offsetU:0,offsetV:0,repeatU:1,repeatV:1,wrapU:1,wrapV:1},this.parseTexture(n)}}return this},oe.prototype.parseTexture=function(e){if(!e.childNodes)return this;e.childNodes[1]&&"extra"===e.childNodes[1].nodeName&&(e=e.childNodes[1]).childNodes[1]&&"technique"===e.childNodes[1].nodeName&&(e=e.childNodes[1]);for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];switch(n.nodeName){case"offsetU":case"offsetV":case"repeatU":case"repeatV":this.texOpts[n.nodeName]=parseFloat(n.textContent);break;case"wrapU":case"wrapV":"TRUE"===n.textContent.toUpperCase()?this.texOpts[n.nodeName]=1:this.texOpts[n.nodeName]=parseInt(n.textContent);break;default:this.texOpts[n.nodeName]=n.textContent}}return this},se.prototype.parse=function(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1==n.nodeType)switch(n.nodeName){case"emission":case"diffuse":case"specular":case"transparent":this[n.nodeName]=(new oe).parse(n);break;case"bump":var r=n.getAttribute("bumptype");r?"heightfield"===r.toLowerCase()?this.bump=(new oe).parse(n):"normalmap"===r.toLowerCase()?this.normal=(new oe).parse(n):(console.error("Shader.prototype.parse: Invalid value for attribute 'bumptype' ("+r+") - valid bumptypes are 'HEIGHTFIELD' and 'NORMALMAP' - defaulting to 'HEIGHTFIELD'"),this.bump=(new oe).parse(n)):(console.warn("Shader.prototype.parse: Attribute 'bumptype' missing from bump node - defaulting to 'HEIGHTFIELD'"),this.bump=(new oe).parse(n));break;case"shininess":case"reflectivity":case"index_of_refraction":case"transparency":var i=n.querySelectorAll("float");i.length>0&&(this[n.nodeName]=parseFloat(i[0].textContent))}}return this.create(),this},se.prototype.create=function(){var e={},t=!1;if(void 0!==this.transparency&&void 0!==this.transparent){this.transparent;var n=(this.transparent.color.r+this.transparent.color.g+this.transparent.color.b)/3*this.transparency;n>0&&(t=!0,e.transparent=!0,e.opacity=1-n)}var i={diffuse:"map",ambient:"lightMap",specular:"specularMap",emission:"emissionMap",bump:"bumpMap",normal:"normalMap"};for(var a in this)switch(a){case"ambient":case"emission":case"diffuse":case"specular":case"bump":case"normal":var o=this[a];if(o instanceof oe)if(o.isTexture()){var c=o.texture,l=this.effect.sampler[c];if(void 0!==l&&void 0!==l.source){var u=this.effect.surface[l.source];if(void 0!==u){var h=m[u.init_from];if(h){var p,d=s+h.init_from,f=r.Loader.Handlers.get(d);null!==f?p=f.load(d):Oe(p=new r.Texture,d),p.wrapS=o.texOpts.wrapU?r.RepeatWrapping:r.ClampToEdgeWrapping,p.wrapT=o.texOpts.wrapV?r.RepeatWrapping:r.ClampToEdgeWrapping,p.offset.x=o.texOpts.offsetU,p.offset.y=o.texOpts.offsetV,p.repeat.x=o.texOpts.repeatU,p.repeat.y=o.texOpts.repeatV,e[i[a]]=p,"emission"===a&&(e.emissive=16777215)}}}}else"diffuse"!==a&&t||("emission"===a?e.emissive=o.color.getHex():e[a]=o.color.getHex());break;case"shininess":e[a]=this[a];break;case"reflectivity":e[a]=this[a],e[a]>0&&(e.envMap=E.defaultEnvMap),e.combine=r.MixOperation;break;case"index_of_refraction":e.refractionRatio=this[a],1!==this[a]&&(e.envMap=E.defaultEnvMap)}switch(e.shading=M,e.side=this.effect.doubleSided?r.DoubleSide:r.FrontSide,void 0!==e.diffuse&&(e.color=e.diffuse,delete e.diffuse),this.type){case"constant":void 0!=e.emissive&&(e.color=e.emissive),this.material=new r.MeshBasicMaterial(e);break;case"phong":case"blinn":this.material=new r.MeshPhongMaterial(e);break;case"lambert":default:this.material=new r.MeshLambertMaterial(e)}return this.material},ce.prototype.parse=function(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1==n.nodeType)switch(n.nodeName){case"init_from":this.init_from=n.textContent;break;case"format":this.format=n.textContent;break;default:console.log("unhandled Surface prop: "+n.nodeName)}}return this},le.prototype.parse=function(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1==n.nodeType)switch(n.nodeName){case"source":this.source=n.textContent;break;case"minfilter":this.minfilter=n.textContent;break;case"magfilter":this.magfilter=n.textContent;break;case"mipfilter":this.mipfilter=n.textContent;break;case"wrap_s":this.wrap_s=n.textContent;break;case"wrap_t":this.wrap_t=n.textContent;break;default:console.log("unhandled Sampler2D prop: "+n.nodeName)}}return this},ue.prototype.create=function(){if(null===this.shader)return null},ue.prototype.parse=function(e){this.id=e.getAttribute("id"),this.name=e.getAttribute("name"),Le(this,e),this.shader=null;for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1==n.nodeType)switch(n.nodeName){case"profile_COMMON":this.parseTechnique(this.parseProfileCOMMON(n))}}return this},ue.prototype.parseNewparam=function(e){for(var t=e.getAttribute("sid"),n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1==r.nodeType)switch(r.nodeName){case"surface":this.surface[t]=new ce(this).parse(r);break;case"sampler2D":this.sampler[t]=new le(this).parse(r);break;case"extra":break;default:console.log(r.nodeName)}}},ue.prototype.parseProfileCOMMON=function(e){for(var t,n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1==r.nodeType)switch(r.nodeName){case"profile_COMMON":this.parseProfileCOMMON(r);break;case"technique":t=r;break;case"newparam":this.parseNewparam(r);break;case"image":var i=(new U).parse(r);m[i.id]=i;break;case"extra":break;default:console.log(r.nodeName)}}return t},ue.prototype.parseTechnique=function(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1==n.nodeType)switch(n.nodeName){case"constant":case"lambert":case"blinn":case"phong":this.shader=new se(n.nodeName,this).parse(n);break;case"extra":this.parseExtra(n)}}},ue.prototype.parseExtra=function(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1==n.nodeType)switch(n.nodeName){case"technique":this.parseExtraTechnique(n)}}},ue.prototype.parseExtraTechnique=function(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1==n.nodeType)switch(n.nodeName){case"bump":this.shader.parse(e)}}},he.prototype.parse=function(e){return this.url=e.getAttribute("url").replace(/^#/,""),this},pe.prototype.parse=function(e){this.id=e.getAttribute("id"),this.name=e.getAttribute("name"),this.source={};for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1==n.nodeType)switch(n.nodeName){case"animation":var r=(new pe).parse(n);for(var i in r.source)this.source[i]=r.source[i];for(var a=0;a<r.channel.length;a++)this.channel.push(r.channel[a]),this.sampler.push(r.sampler[a]);break;case"source":i=(new ie).parse(n),this.source[i.id]=i;break;case"sampler":this.sampler.push(new fe(this).parse(n));break;case"channel":this.channel.push(new de(this).parse(n))}}return this},de.prototype.parse=function(e){this.source=e.getAttribute("source").replace(/^#/,""),this.target=e.getAttribute("target");var t=this.target.split("/"),n=(t.shift(),t.shift()),r=n.indexOf(".")>=0,i=n.indexOf("(")>=0;if(r)t=n.split("."),this.sid=t.shift(),this.member=t.shift();else if(i){var a=n.split("(");this.sid=a.shift();for(var o=0;o<a.length;o++)a[o]=parseInt(a[o].replace(/\)/,""));this.arrIndices=a}else this.sid=n;return this.fullSid=n,this.dotSyntax=r,this.arrSyntax=i,this},fe.prototype.parse=function(e){this.id=e.getAttribute("id"),this.inputs=[];for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1==n.nodeType)switch(n.nodeName){case"input":this.inputs.push((new re).parse(n))}}return this},fe.prototype.create=function(){for(var e=0;e<this.inputs.length;e++){var t=this.inputs[e],n=this.animation.source[t.source];switch(t.semantic){case"INPUT":this.input=n.read();break;case"OUTPUT":this.output=n.read(),this.strideOut=n.accessor.stride;break;case"INTERPOLATION":this.interpolation=n.read();break;case"IN_TANGENT":case"OUT_TANGENT":break;default:console.log(t.semantic)}}if(this.startTime=0,this.endTime=0,this.duration=0,this.input.length){for(this.startTime=1e8,this.endTime=-1e8,e=0;e<this.input.length;e++)this.startTime=Math.min(this.startTime,this.input[e]),this.endTime=Math.max(this.endTime,this.input[e]);this.duration=this.endTime-this.startTime}},fe.prototype.getData=function(e,t,n){var r;if("matrix"===e&&16===this.strideOut)r=this.output[t];else if(this.strideOut>1){r=[],t*=this.strideOut;for(var i=0;i<this.strideOut;++i)r[i]=this.output[t+i];if(3===this.strideOut)switch(e){case"rotate":case"translate":Re(r,-1);break;case"scale":Re(r,1)}else 4===this.strideOut&&"matrix"===e&&Re(r,-1)}else r=this.output[t],n&&"translate"===e&&(r=function(e,t){if(!0!==E.convertUpAxis||T===E.upAxis)return t;switch(e){case"X":t="XtoY"===P?-1*t:t;break;case"Y":t="YtoZ"===P||"YtoX"===P?-1*t:t;break;case"Z":t="ZtoY"===P?-1*t:t}return t}(n,r));return r},me.prototype.addTarget=function(e,t,n,r){this.targets.push({sid:e,member:n,transform:t,data:r})},me.prototype.apply=function(e){for(var t=0;t<this.targets.length;++t){var n=this.targets[t];e&&n.sid!==e||n.transform.update(n.data,n.member)}},me.prototype.getTarget=function(e){for(var t=0;t<this.targets.length;++t)if(this.targets[t].sid===e)return this.targets[t];return null},me.prototype.hasTarget=function(e){for(var t=0;t<this.targets.length;++t)if(this.targets[t].sid===e)return!0;return!1},me.prototype.interpolate=function(e,t){for(var n=0,r=this.targets.length;n<r;n++){var i,a=this.targets[n],o=e.getTarget(a.sid);if("matrix"!==a.transform.type&&o){var s=(t-this.time)/(e.time-this.time),c=o.data,l=a.data;if(s<0&&(s=0),s>1&&(s=1),l.length){i=[];for(var u=0;u<l.length;++u)i[u]=l[u]+(c[u]-l[u])*s}else i=l+(c-l)*s}else i=a.data;a.transform.update(i,a.member)}},ve.prototype.parse=function(e){this.id=e.getAttribute("id"),this.name=e.getAttribute("name");for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1==n.nodeType)switch(n.nodeName){case"optics":this.parseOptics(n)}}return this},ve.prototype.parseOptics=function(e){for(var t=0;t<e.childNodes.length;t++)if("technique_common"===e.childNodes[t].nodeName)for(var n=e.childNodes[t],r=0;r<n.childNodes.length;r++)if(this.technique=n.childNodes[r].nodeName,"perspective"===this.technique)for(var i=n.childNodes[r],a=0;a<i.childNodes.length;a++)switch((s=i.childNodes[a]).nodeName){case"yfov":this.yfov=s.textContent;break;case"xfov":this.xfov=s.textContent;break;case"znear":this.znear=s.textContent;break;case"zfar":this.zfar=s.textContent;break;case"aspect_ratio":this.aspect_ratio=s.textContent}else if("orthographic"===this.technique){var o=n.childNodes[r];for(a=0;a<o.childNodes.length;a++){var s;switch((s=o.childNodes[a]).nodeName){case"xmag":this.xmag=s.textContent;break;case"ymag":this.ymag=s.textContent;break;case"znear":this.znear=s.textContent;break;case"zfar":this.zfar=s.textContent;break;case"aspect_ratio":this.aspect_ratio=s.textContent}}}return this},ge.prototype.parse=function(e){return this.url=e.getAttribute("url").replace(/^#/,""),this},ye.prototype.parse=function(e){this.id=e.getAttribute("id"),this.name=e.getAttribute("name");for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1==n.nodeType)switch(n.nodeName){case"technique_common":this.parseCommon(n);break;case"technique":this.parseTechnique(n)}}return this},ye.prototype.parseCommon=function(e){for(var t=0;t<e.childNodes.length;t++)switch(e.childNodes[t].nodeName){case"directional":case"point":case"spot":case"ambient":this.technique=e.childNodes[t].nodeName;for(var n=e.childNodes[t],i=0;i<n.childNodes.length;i++){var a=n.childNodes[i];switch(a.nodeName){case"color":var o=Te(a.textContent);this.color=new r.Color(0),this.color.setRGB(o[0],o[1],o[2]),this.color.a=o[3];break;case"falloff_angle":this.falloff_angle=parseFloat(a.textContent);break;case"quadratic_attenuation":var s=parseFloat(a.textContent);this.distance=s?Math.sqrt(1/s):0}}}return this},ye.prototype.parseTechnique=function(e){this.profile=e.getAttribute("profile");for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];switch(n.nodeName){case"intensity":this.intensity=parseFloat(n.textContent)}}return this},be.prototype.parse=function(e){return this.url=e.getAttribute("url").replace(/^#/,""),this},xe.prototype.parse=function(e){this.id=e.getAttribute("id"),this.name=e.getAttribute("name"),this.joints=[],this.links=[];for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1==n.nodeType)switch(n.nodeName){case"technique_common":this.parseCommon(n)}}return this},xe.prototype.parseCommon=function(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1==n.nodeType)switch(e.childNodes[t].nodeName){case"joint":this.joints.push((new we).parse(n));break;case"link":this.links.push((new _e).parse(n))}}return this},we.prototype.parse=function(e){this.sid=e.getAttribute("sid"),this.name=e.getAttribute("name"),this.axis=new r.Vector3,this.limits={min:0,max:0},this.type="",this.static=!1,this.zeroPosition=0,this.middlePosition=0;var t=Te(e.querySelector("axis").textContent);this.axis=Ne(t,0);var n=e.querySelector("limits min")?parseFloat(e.querySelector("limits min").textContent):-360,i=e.querySelector("limits max")?parseFloat(e.querySelector("limits max").textContent):360;this.limits={min:n,max:i};for(var a=["prismatic","revolute"],o=0;o<a.length;o++){var s=a[o];e.querySelector(s)&&(this.type=s)}return this.limits.min>=this.limits.max&&(this.static=!0),this.middlePosition=(this.limits.min+this.limits.max)/2,this},_e.prototype.parse=function(e){this.sid=e.getAttribute("sid"),this.name=e.getAttribute("name"),this.transforms=[],this.attachments=[];for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1==n.nodeType)switch(n.nodeName){case"attachment_full":this.attachments.push((new Me).parse(n));break;case"rotate":case"translate":case"matrix":this.transforms.push((new W).parse(n))}}return this},Me.prototype.parse=function(e){this.joint=e.getAttribute("joint").split("/").pop(),this.links=[];for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];if(1==n.nodeType)switch(n.nodeName){case"link":this.links.push((new _e).parse(n));break;case"rotate":case"translate":case"matrix":this.transforms.push((new W).parse(n))}}return this},{load:function(e,t,n,r){var i=0;if(document.implementation&&document.implementation.createDocument){var a=new XMLHttpRequest;a.onreadystatechange=function(){4===a.readyState?0!==a.status&&200!==a.status||(a.response?(d=t,C(a.response,void 0,e)):r?r():console.error("ColladaLoader: Empty or non-existing file ("+e+")")):3===a.readyState&&n&&(0===i&&(i=a.getResponseHeader("Content-Length")),n({total:i,loaded:a.responseText.length}))},a.open("GET",e,!0),a.send(null)}else alert("Don't know how to parse XML!")},parse:C,setPreferredShading:function(e){M=e},applySkin:N,geometries:y,options:E}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(4)),o=n(13),s=(r=o)&&r.__esModule?r:{default:r};var c=n(59),l=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),i(t,[{key:"getMain",value:function(){var e=this,t=new a.Object3D;t.name="Main",this.add(t);var n=this.mass.texture.toLowerCase(),r=new c(this.manager);r.options.convertUpAxis=!0,r.load("./models/"+n+"/"+n+".dae",function(n){n.scene.scale.set(e.mass.radius,e.mass.radius,e.mass.radius),t.add(n.scene)})}}]),t}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(4)),o=n(13),s=(r=o)&&r.__esModule?r:{default:r};var c=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),i(t,[{key:"getMain",value:function(){var e=new a.Object3D;e.name="Main";var t=this.textureLoader.load("textures/corona.png"),n=new a.Sprite(new a.SpriteMaterial({map:t,blending:a.AdditiveBlending,color:16777215})),r=10*this.mass.radius;n.scale.set(r,r,r);var i=new a.PointLight(16777215,2.7,0);i.position.set(0,0,0),i.color.setHSL(.55,.1,.5);var o=new a.SphereGeometry(this.mass.radius,32,32),s=new a.MeshBasicMaterial({color:"white"}),c=new a.Mesh(o,s);c.rotation.x=Math.PI/2,e.add(c,n,i),this.add(e)}}]),t}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={vertex:"uniform vec3 viewVector;\n  uniform float c;\n  uniform float p;\n  varying float intensity;\n  void main() {\n    vec3 vNormal = normalize( normalMatrix * normal );\n    vec3 vNormel = normalize( normalMatrix * viewVector );\n    intensity = pow( c - dot(vNormal, vNormel), p );\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n  }",fragment:"uniform vec3 glowColor;\n  varying float intensity;\n  void main() \n  {\n    vec3 glow = glowColor * intensity;\n    gl_FragColor = vec4( glow, 1.0 );\n  }"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new i.Vector3(0,0,0);return new i.ShaderMaterial({uniforms:{c:{type:"f",value:n},p:{type:"f",value:t},glowColor:{type:"c",value:new i.Color(e)},viewVector:{type:"v3",value:r}},vertexShader:o.default.vertex,fragmentShader:o.default.fragment,side:i.BackSide,blending:i.AdditiveBlending,transparent:!0})};var r,i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(4)),a=n(62),o=(r=a)&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,i,a,o,s,c){if(s&&c||c)return{x:a/2,y:o/2,z:0};var l=new r.Vector3(e,t,n).project(i);return l.x=(l.x+1)/2*a,l.y=-(l.y-1)/2*o,l.z<1&&l.x>0&&l.x<a&&l.y>0&&l.y<o?l:null};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(4))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r,i,o,s,c){var l=(0,a.default)(n.x,n.y,n.z,t,r,i,s,c);if(null!==l){e.font="12px Arial";var u=e.measureText(o).width+6;e.strokeStyle="white",e.beginPath(),e.arc(l.x,l.y,8,0,2*Math.PI),e.stroke(),e.globalAlpha=.5,e.fillStyle="#545454",e.fillRect(l.x+13,l.y-10,u,20),e.globalAlpha=1,e.fillStyle="white",e.fillText(o,l.x+16,l.y+3),e.strokeRect(l.x+13,l.y-10,u,20)}};var r,i=n(64),a=(r=i)&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(4));r.OrbitControls=function(e,t){this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new r.Vector3,this.center=this.target,this.noZoom=!1,this.zoomSpeed=1,this.minDistance=0,this.maxDistance=1/0,this.noRotate=!1,this.rotateSpeed=1,this.noPan=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.noKeys=!1,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.dispose=function(){this.domElement.removeEventListener("mousedown",O,!1),this.domElement.removeEventListener("mousewheel",N,!1),this.domElement.removeEventListener("DOMMouseScroll",N,!1),this.domElement.removeEventListener("touchstart",I,!1),this.domElement.removeEventListener("touchend",z,!1),this.domElement.removeEventListener("touchmove",D,!1),document.removeEventListener("mousemove",L,!1),document.removeEventListener("mouseup",R,!1),window.removeEventListener("keydown",k,!1)};var n=this,i=new r.Vector2,a=new r.Vector2,o=new r.Vector2,s=new r.Vector2,c=new r.Vector2,l=new r.Vector2,u=new r.Vector3,h=new r.Vector3,p=new r.Vector2,d=new r.Vector2,f=new r.Vector2,m=0,v=0,g=1,y=new r.Vector3,b=new r.Vector3,x=new r.Quaternion,w={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},_=w.NONE;this.target0=this.target.clone(),this.position0=this.object.position.clone();var M=(new r.Quaternion).setFromUnitVectors(e.up,new r.Vector3(0,1,0)),E=M.clone().inverse(),S={type:"change"},T={type:"start"},P={type:"end"};function C(){return 2*Math.PI/60/60*n.autoRotateSpeed}function A(){return Math.pow(.95,n.zoomSpeed)}function O(e){if(!1!==n.enabled){if(e.preventDefault(),0===e.button){if(!0===n.noRotate)return;_=w.ROTATE,i.set(e.clientX,e.clientY)}else if(1===e.button){if(!0===n.noZoom)return;_=w.DOLLY,p.set(e.clientX,e.clientY)}else if(2===e.button){if(!0===n.noPan)return;_=w.PAN,s.set(e.clientX,e.clientY)}document.addEventListener("mousemove",L,!1),document.addEventListener("mouseup",R,!1),n.dispatchEvent(T)}}function L(e){if(!1!==n.enabled){e.preventDefault();var t=n.domElement===document?n.domElement.body:n.domElement;if(_===w.ROTATE){if(!0===n.noRotate)return;a.set(e.clientX,e.clientY),o.subVectors(a,i),n.rotateLeft(2*Math.PI*o.x/t.clientWidth*n.rotateSpeed),n.rotateUp(2*Math.PI*o.y/t.clientHeight*n.rotateSpeed),i.copy(a)}else if(_===w.DOLLY){if(!0===n.noZoom)return;d.set(e.clientX,e.clientY),f.subVectors(d,p),f.y>0?n.dollyIn():n.dollyOut(),p.copy(d)}else if(_===w.PAN){if(!0===n.noPan)return;c.set(e.clientX,e.clientY),l.subVectors(c,s),n.pan(l.x,l.y),s.copy(c)}n.update()}}function R(){!1!==n.enabled&&(document.removeEventListener("mousemove",L,!1),document.removeEventListener("mouseup",R,!1),n.dispatchEvent(P),_=w.NONE)}function N(e){if(!1!==n.enabled&&!0!==n.noZoom){e.preventDefault(),e.stopPropagation();var t=0;void 0!==e.wheelDelta?t=e.wheelDelta:void 0!==e.detail&&(t=-e.detail),t>0?n.dollyOut():n.dollyIn(),n.update(),n.dispatchEvent(T),n.dispatchEvent(P)}}function k(e){if(!1!==n.enabled&&!0!==n.noKeys&&!0!==n.noPan)switch(e.keyCode){case n.keys.UP:n.pan(0,n.keyPanSpeed),n.update();break;case n.keys.BOTTOM:n.pan(0,-n.keyPanSpeed),n.update();break;case n.keys.LEFT:n.pan(n.keyPanSpeed,0),n.update();break;case n.keys.RIGHT:n.pan(-n.keyPanSpeed,0),n.update()}}function I(e){if(!1!==n.enabled){switch(e.touches.length){case 1:if(!0===n.noRotate)return;_=w.TOUCH_ROTATE,i.set(e.touches[0].pageX,e.touches[0].pageY);break;case 2:if(!0===n.noZoom)return;_=w.TOUCH_DOLLY;var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,a=Math.sqrt(t*t+r*r);p.set(0,a);break;case 3:if(!0===n.noPan)return;_=w.TOUCH_PAN,s.set(e.touches[0].pageX,e.touches[0].pageY);break;default:_=w.NONE}n.dispatchEvent(T)}}function D(e){if(!1!==n.enabled){e.preventDefault(),e.stopPropagation();var t=n.domElement===document?n.domElement.body:n.domElement;switch(e.touches.length){case 1:if(!0===n.noRotate)return;if(_!==w.TOUCH_ROTATE)return;a.set(e.touches[0].pageX,e.touches[0].pageY),o.subVectors(a,i),n.rotateLeft(2*Math.PI*o.x/t.clientWidth*n.rotateSpeed),n.rotateUp(2*Math.PI*o.y/t.clientHeight*n.rotateSpeed),i.copy(a),n.update();break;case 2:if(!0===n.noZoom)return;if(_!==w.TOUCH_DOLLY)return;var r=e.touches[0].pageX-e.touches[1].pageX,u=e.touches[0].pageY-e.touches[1].pageY,h=Math.sqrt(r*r+u*u);d.set(0,h),f.subVectors(d,p),f.y>0?n.dollyOut():n.dollyIn(),p.copy(d),n.update();break;case 3:if(!0===n.noPan)return;if(_!==w.TOUCH_PAN)return;c.set(e.touches[0].pageX,e.touches[0].pageY),l.subVectors(c,s),n.pan(l.x,l.y),s.copy(c),n.update();break;default:_=w.NONE}}}function z(){!1!==n.enabled&&(n.dispatchEvent(P),_=w.NONE)}this.rotateLeft=function(e){void 0===e&&(e=C()),v-=e},this.rotateUp=function(e){void 0===e&&(e=C()),m-=e},this.panLeft=function(e){var t=this.object.matrix.elements;u.set(t[0],t[1],t[2]),u.multiplyScalar(-e),y.add(u)},this.panUp=function(e){var t=this.object.matrix.elements;u.set(t[4],t[5],t[6]),u.multiplyScalar(e),y.add(u)},this.customPan=y,this.pan=function(e,t){var r=n.domElement===document?n.domElement.body:n.domElement;if(void 0!==n.object.fov){var i=n.object.position.clone().sub(n.target).length();i*=Math.tan(n.object.fov/2*Math.PI/180),n.panLeft(2*e*i/r.clientHeight),n.panUp(2*t*i/r.clientHeight)}else void 0!==n.object.top?(n.panLeft(e*(n.object.right-n.object.left)/r.clientWidth),n.panUp(t*(n.object.top-n.object.bottom)/r.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")},this.dollyIn=function(e){void 0===e&&(e=A()),g/=e},this.dollyOut=function(e){void 0===e&&(e=A()),g*=e},this.update=function(){var e=this.object.position;h.copy(e).sub(this.target),h.applyQuaternion(M);var t=Math.atan2(h.x,h.z),n=Math.atan2(Math.sqrt(h.x*h.x+h.z*h.z),h.y);this.autoRotate&&this.rotateLeft(C()),t+=v,n+=m,n=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,n)),n=Math.max(1e-6,Math.min(Math.PI-1e-6,n));var r=h.length()*g;r=Math.max(this.minDistance,Math.min(this.maxDistance,r)),this.target.add(y),h.x=r*Math.sin(n)*Math.sin(t),h.y=r*Math.cos(n),h.z=r*Math.sin(n)*Math.cos(t),h.applyQuaternion(E),e.copy(this.target).add(h),this.object.lookAt(this.target),v=0,m=0,g=1,y.set(0,0,0),(b.distanceToSquared(this.object.position)>1e-6||8*(1-x.dot(this.object.quaternion))>1e-6)&&(this.dispatchEvent(S),b.copy(this.object.position),x.copy(this.object.quaternion))},this.reset=function(){_=w.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.update()},this.domElement.addEventListener("contextmenu",function(e){e.preventDefault()},!1),this.domElement.addEventListener("mousedown",O,!1),this.domElement.addEventListener("mousewheel",N,!1),this.domElement.addEventListener("DOMMouseScroll",N,!1),this.domElement.addEventListener("touchstart",I,!1),this.domElement.addEventListener("touchend",z,!1),this.domElement.addEventListener("touchmove",D,!1),window.addEventListener("keydown",k,!1),this.update()},r.OrbitControls.prototype=Object.create(r.EventDispatcher.prototype),t.default=r.OrbitControls},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(4)),o=n(66),s=(r=o)&&r.__esModule?r:{default:r};var c=function(e){function t(e,n,r,i,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var c=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,r,i));return c.up=new a.Vector3(0,0,1),c.controls=new s.default(c,o),c.controls.noPan=!0,c}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.PerspectiveCamera),i(t,[{key:"trackMovingObjectWithControls",value:function(e){this.controls.customPan.add(e.getObjectByName("Main").position.clone().sub(this.controls.target)),this.controls.update()}}]),t}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=new r.SphereGeometry(1.5e30,32,32),n=new r.TextureLoader(e),i=new r.MeshBasicMaterial;i.map=n.load("./textures/starfield.png"),i.side=r.BackSide;var a=new r.Mesh(t,i);return a.rotation.x=Math.PI/2,a};var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(4))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(26),o=(r=a)&&r.__esModule?r:{default:r};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),i(t,[{key:"iterate",value:function(){for(var e=this.getStateVectors(this.masses),t=this.generateAccelerationVectors(e),n=this.generateVelocityVectors(t,this.dt/2),r=this.generatePositionVectors(e,this.dt/2),i=this.generateAccelerationVectors(r),a=this.generateVelocityVectors(i,this.dt/2),o=this.generatePositionVectors(n,this.dt/2),s=this.generateAccelerationVectors(o),c=this.generateVelocityVectors(s,this.dt),l=this.generatePositionVectors(a,this.dt),u=this.generateAccelerationVectors(l),h=[],p=[],d=this.masses.length,f=0;f<d;f++)h[f]={ax:t[f].ax/6+i[f].ax/3+s[f].ax/3+u[f].ax/6,ay:t[f].ay/6+i[f].ay/3+s[f].ay/3+u[f].ay/6,az:t[f].az/6+i[f].az/3+s[f].az/3+u[f].az/6},p[f]={vx:e[f].vx/6+n[f].vx/3+a[f].vx/3+c[f].vx/6,vy:e[f].vy/6+n[f].vy/3+a[f].vy/3+c[f].vy/6,vz:e[f].vz/6+n[f].vz/3+a[f].vz/3+c[f].vz/6};this.updateStateVectors(this.generatePositionVectors(p,this.dt),this.generateVelocityVectors(h,this.dt)),this.incrementElapsedTime()}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(4)),i=v(n(34)),a=n(31),o=v(n(27)),s=n(8),c=v(n(68)),l=v(n(67)),u=v(n(65)),h=v(n(13)),p=v(n(61)),d=v(n(60)),f=v(n(58)),m=v(n(57));function v(e){return e&&e.__esModule?e:{default:e}}t.default={init:function(e,t){var n=this;this.scenario=i.default.getState().scenario,this.w=window.innerWidth,this.h=window.innerHeight,this.webGlCanvas=e,this.labelsCanvas=t,this.labels=t.getContext("2d"),this.labelsCanvas.width=this.w,this.labelsCanvas.height=this.h,this.requestAnimationFrameId=null,this.scene=new r.Scene,this.manager=new r.LoadingManager,this.renderer=new r.WebGLRenderer({canvas:this.webGlCanvas,antialias:!0}),this.renderer.setSize(this.w,this.h),this.camera=new l.default(45,this.w/this.h,1,15e11,this.labelsCanvas),this.previousCameraFocus=null,this.previousRotatingReferenceFrame=null,this.previousIntegrator=this.scenario.integrator,this.scene.add((0,c.default)(this.manager)),this.massManifestations=[],this.system=(0,o.default)(this.scenario.integrator,{g:this.scenario.g,dt:this.scenario.dt,masses:this.scenario.masses,elapsedTime:this.scenario.elapsedTime}),this.scenario.particles&&(this.particlePhysics=new f.default({dt:this.scenario.dt,callback:function(e){var t=n.scenario.masses.filter(function(e){return e.name.indexOf(n.scenario.particles.primary)>-1})[0];(0,s.tiltParticleSystem)((0,s.createParticleDisc)(n.scenario.particles.number,t,n.scenario.g,n.scenario.particles.minD,n.scenario.particles.maxD),new r.Vector3(1,0,0),t.tilt,t).forEach(function(t){return e.push(t)})}}),this.particles=new m.default(this.particlePhysics.particles,this.scenario.scale),this.scene.add(this.particles)),window.addEventListener("resize",function(){return n.onWindowResize()},!1),this.addManifestations(),this.manager.onLoad=function(){window.setTimeout(function(){i.default.dispatch((0,a.modifyScenarioProperty)({key:"isLoaded",value:!0})),n.loop()},1e3)}},addManifestation:function(e){switch(e.type){case"star":return new p.default(e,this.manager);case"model":return new d.default(e,this.manager);default:return new h.default(e,this.manager)}},addManifestations:function(){var e=this;this.scenario.masses.forEach(function(t){var n=e.addManifestation(t);e.massManifestations.push(n),e.scene.add(n)})},diffMasses:function(e,t){var n=this;if(t.length<e.length)for(var r=0,i=function(){var i=e[r];t.some(function(e){return i.name===e.name})?++r:(e.splice(r,1),n.scene.remove(n.scene.getObjectByName(i.name)))};r<e.length;)i();else if(t.length>e.length){var a=t[t.length-1],o=this.addManifestation(a);this.massManifestations.push(o),this.scene.add(o)}},loop:function(){var e=this;this.getScenario().updateSystem();var t=this.scenario,n=t.playing,i=t.scale,a=t.trails,c=t.labels,l=t.rotatingReferenceFrame,h=t.cameraPosition,p=t.cameraFocus,d=t.freeOrigo,f=t.dt,m=t.integrator;m!==this.previousIntegrator&&(this.system=(0,o.default)(m,{g:this.scenario.g,dt:f,masses:this.scenario.masses,elapsedTime:this.scenario.elapsedTime}),this.previousIntegrator=m);var v=void 0;if("Origo"===l)v={x:0,y:0,z:0};else for(var g=0;g<this.system.masses.length;g++)this.system.masses[g].name===l&&(v=this.system.masses[g]);n&&this.system.iterate(),this.diffMasses(this.massManifestations,this.scenario.masses),this.updateScenario(),this.camera.controls.enabled="Free"===h,this.labels.clearRect(0,0,this.w,this.h);var y=new r.Vector3(0,0,0);"Origo"===p&&("Free"!==h?this.camera.lookAt(y):this.camera.controls.target=y),this.previousCameraFocus!==p&&"Origo"===p&&(this.previousCameraFocus=p,"Free"===h&&(this.camera.position.set(d.x,d.y,d.z),this.camera.lookAt(y)));for(var b=0;b<this.massManifestations.length;b++){var x=this.massManifestations[b],w=this.system.masses[b],_=this.system.masses[b],M=_.name,E=_.trailVertices,S=_.radius,T=(v.x-w.x)*i,P=(v.y-w.y)*i,C=(v.z-w.z)*i,A=Math.sqrt((0,s.getDistanceParams)(this.camera.position,{x:T,y:P,z:C}).dSquared);x.draw(T,P,C,this.camera.position,A);var O=x.getObjectByName("Trail");a&&n&&l===this.previousRotatingReferenceFrame?O||x.getTrail(E):x.removeTrail();var L=void 0;if(f<2e-4&&(L=80*S),f>2e-4&&(L=1.2!==S?1500*S:6e4),f>.5&&(L=1.2!==S?5e5*S:4e6),O&&(O.visible&&(h===M||"Free"===h&&p===M&&A<.5*L)&&(O.visible=!1),O.visible&&x.visible||(("Free"===h&&p!==M||"Free"===h&&p===M&&A>.5*L)&&(O.visible=!0),"Free"!==h&&h!==M&&(O.visible=!0))),p===M){var R=new r.Vector3(T,P,C);"Free"!==h?this.camera.lookAt(R):"Free"===h&&"Origo"!==p&&this.camera.trackMovingObjectWithControls(x)}h===M&&(h===p&&(P+=7*S),this.camera.position.set(T,P,C)),this.previousCameraFocus!==p&&p===M&&(this.previousCameraFocus=p,"Free"===h&&(this.camera.position.set(T,P,C+L),this.camera.lookAt(new r.Vector3(T,P,C)))),c&&h!==M&&(0,u.default)(this.labels,this.camera,new r.Vector3(T,P,C),this.w,this.h,M,"Free"===h,p===M);var N=x.getObjectByName("Main");N.visible=h!==M;var k=x.getObjectByName("Atmosphere");k&&(k.visible=28*S>A&&h!==M);var I=x.getObjectByName("Clouds");I&&(I.visible=h!==M)}l!==this.previousRotatingReferenceFrame&&(this.previousRotatingReferenceFrame=l),this.scenario.particles&&n&&this.particlePhysics.iterate(this.system.masses,this.scenario.g),this.scenario.particles&&this.particles.draw(this.particlePhysics.particles,v),this.requestAnimationFrameId=requestAnimationFrame(function(){return e.loop()}),this.renderer.render(this.scene,this.camera)},getScenario:function(){return this.scenario=i.default.getState().scenario,this},updateSystem:function(){return this.system.g=this.scenario.g,this.system.masses=this.scenario.masses,this.system.dt=this.scenario.dt,this},updateScenario:function(){i.default.dispatch((0,a.modifyScenarioProperty)({key:"masses",value:this.system.masses},{key:"elapsedTime",value:this.system.elapsedTime}))},onWindowResize:function(){this.w=window.innerWidth,this.h=window.innerHeight,this.camera.aspect=this.w/this.h,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.w,this.h),this.labelsCanvas.width=this.w,this.labelsCanvas.height=this.h},reset:function(){return this.camera.controls.dispose(),cancelAnimationFrame(this.requestAnimationFrameId),this}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),a=s(i),o=s(n(70));function s(e){return e&&e.__esModule?e:{default:e}}n(137);var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),r(t,[{key:"componentDidMount",value:function(){o.default.init(this._webGlCanvas,this._labelsCanvas)}},{key:"shouldComponentUpdate",value:function(e){return e.scenarioName!==this.props.scenarioName}},{key:"componentDidUpdate",value:function(){o.default.reset().init(this._webGlCanvas,this._labelsCanvas)}},{key:"render",value:function(){var e=this;return a.default.createElement("div",null,a.default.createElement("canvas",{ref:function(t){return e._webGlCanvas=t}}),a.default.createElement("canvas",{ref:function(t){return e._labelsCanvas=t},className:"labels-canvas"}))}}]),t}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return a.default.createElement("div",{className:"modal-wrapper"},a.default.createElement("section",{className:"modal"},e.children,a.default.createElement("button",{onClick:e.callback,className:"modal-close-button"},"X")))};var r,i=n(1),a=(r=i)&&r.__esModule?r:{default:r};n(139)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return a.default.createElement("div",{className:"loading-screen-wrapper"},a.default.createElement("h1",null,"Harmony of the Spheres"),a.default.createElement("p",{className:"sub-title"},e.scenarioName),a.default.createElement("div",{className:"spinner"},a.default.createElement("div",{className:"bounce1"}),a.default.createElement("div",{className:"bounce2"}),a.default.createElement("div",{className:"bounce3"})),a.default.createElement("p",{className:"author-title"},a.default.createElement("b",null,"Created by Darrell A. Huffman")))};var r,i=n(1),a=(r=i)&&r.__esModule?r:{default:r};n(144)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.animationEnd=t.animationDelay=t.animationTiming=t.animationDuration=t.animationName=t.transitionEnd=t.transitionDuration=t.transitionDelay=t.transitionTiming=t.transitionProperty=t.transform=void 0;var r,i=n(29);var a="transform",o=void 0,s=void 0,c=void 0,l=void 0,u=void 0,h=void 0,p=void 0,d=void 0,f=void 0,m=void 0,v=void 0;if(((r=i)&&r.__esModule?r:{default:r}).default){var g=function(){for(var e=document.createElement("div").style,t={O:function(e){return"o"+e.toLowerCase()},Moz:function(e){return e.toLowerCase()},Webkit:function(e){return"webkit"+e},ms:function(e){return"MS"+e}},n=Object.keys(t),r=void 0,i=void 0,a="",o=0;o<n.length;o++){var s=n[o];if(s+"TransitionProperty"in e){a="-"+s.toLowerCase(),r=t[s]("TransitionEnd"),i=t[s]("AnimationEnd");break}}!r&&"transitionProperty"in e&&(r="transitionend");!i&&"animationName"in e&&(i="animationend");return e=null,{animationEnd:i,transitionEnd:r,prefix:a}}();o=g.prefix,t.transitionEnd=s=g.transitionEnd,t.animationEnd=c=g.animationEnd,t.transform=a=o+"-"+a,t.transitionProperty=l=o+"-transition-property",t.transitionDuration=u=o+"-transition-duration",t.transitionDelay=p=o+"-transition-delay",t.transitionTiming=h=o+"-transition-timing-function",t.animationName=d=o+"-animation-name",t.animationDuration=f=o+"-animation-duration",t.animationTiming=m=o+"-animation-delay",t.animationDelay=v=o+"-animation-timing-function"}t.transform=a,t.transitionProperty=l,t.transitionTiming=h,t.transitionDelay=p,t.transitionDuration=u,t.transitionEnd=s,t.animationName=d,t.animationDuration=f,t.animationTiming=m,t.animationDelay=v,t.animationEnd=c,t.default={transform:a,end:s,property:l,timing:h,delay:p,duration:u}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(29);var a,o="clearTimeout",s=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-l)),r=setTimeout(e,n);return l=t,r},c=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};((r=i)&&r.__esModule?r:{default:r}).default&&["","webkit","moz","o","ms"].some(function(e){var t=c(e,"request");if(t in window)return o=c(e,"cancel"),s=function(e){return window[t](e)}});var l=(new Date).getTime();(a=function(e){return s(e)}).cancel=function(e){window[o]&&"function"==typeof window[o]&&window[o](e)},t.default=a,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}e.exports=function(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=r(e.className,t):e.setAttribute("class",r(e.className&&e.className.baseVal||"",t))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){e.classList?e.classList.add(t):(0,a.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))};var r,i=n(77),a=(r=i)&&r.__esModule?r:{default:r};e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=p(n(78)),a=p(n(76)),o=p(n(75)),s=n(74),c=p(n(1)),l=p(n(0)),u=n(37),h=n(28);function p(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var f=[];s.transitionEnd&&f.push(s.transitionEnd),s.animationEnd&&f.push(s.animationEnd);l.default.node,h.nameShape.isRequired,l.default.bool,l.default.bool,l.default.bool,l.default.number,l.default.number,l.default.number;var m=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=d(this,e.call.apply(e,[this].concat(a))),r.componentWillAppear=function(e){r.props.appear?r.transition("appear",e,r.props.appearTimeout):e()},r.componentWillEnter=function(e){r.props.enter?r.transition("enter",e,r.props.enterTimeout):e()},r.componentWillLeave=function(e){r.props.leave?r.transition("leave",e,r.props.leaveTimeout):e()},d(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){this.classNameAndNodeQueue=[],this.transitionTimeouts=[]},t.prototype.componentWillUnmount=function(){this.unmounted=!0,this.timeout&&clearTimeout(this.timeout),this.transitionTimeouts.forEach(function(e){clearTimeout(e)}),this.classNameAndNodeQueue.length=0},t.prototype.transition=function(e,t,n){var r=(0,u.findDOMNode)(this);if(r){var o=this.props.name[e]||this.props.name+"-"+e,c=this.props.name[e+"Active"]||o+"-active",l=null,h=void 0;(0,i.default)(r,o),this.queueClassAndNode(c,r);var p=function(e){e&&e.target!==r||(clearTimeout(l),h&&h(),(0,a.default)(r,o),(0,a.default)(r,c),h&&h(),t&&t())};n?(l=setTimeout(p,n),this.transitionTimeouts.push(l)):s.transitionEnd&&(h=function(e,t){return f.length?f.forEach(function(n){return e.addEventListener(n,t,!1)}):setTimeout(t,0),function(){f.length&&f.forEach(function(n){return e.removeEventListener(n,t,!1)})}}(r,p))}else t&&t()},t.prototype.queueClassAndNode=function(e,t){var n=this;this.classNameAndNodeQueue.push({className:e,node:t}),this.rafHandle||(this.rafHandle=(0,o.default)(function(){return n.flushClassNameAndNodeQueue()}))},t.prototype.flushClassNameAndNodeQueue=function(){this.unmounted||this.classNameAndNodeQueue.forEach(function(e){e.node.scrollTop,(0,i.default)(e.node,e.className)}),this.classNameAndNodeQueue.length=0,this.rafHandle=null},t.prototype.render=function(){var e=r({},this.props);return delete e.name,delete e.appear,delete e.enter,delete e.leave,delete e.appearTimeout,delete e.enterTimeout,delete e.leaveTimeout,delete e.children,c.default.cloneElement(c.default.Children.only(this.props.children),e)},t}(c.default.Component);m.displayName="CSSTransitionGroupChild",m.propTypes={},t.default=m,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0,t.getChildMapping=function(e){if(!e)return e;var t={};return r.Children.map(e,function(e){return e}).forEach(function(e){t[e.key]=e}),t},t.mergeChildMappings=function(e,t){function n(n){return t.hasOwnProperty(n)?t[n]:e[n]}e=e||{},t=t||{};var r={},i=[];for(var a in e)t.hasOwnProperty(a)?i.length&&(r[a]=i,i=[]):i.push(a);var o=void 0,s={};for(var c in t){if(r.hasOwnProperty(c))for(o=0;o<r[c].length;o++){var l=r[c][o];s[r[c][o]]=n(l)}s[c]=n(c)}for(o=0;o<i.length;o++)s[i[o]]=n(i[o]);return s};var r=n(1)},function(e,t){e.exports=function(){for(var e=arguments.length,t=[],n=0;n<e;n++)t[n]=arguments[n];if(0!==(t=t.filter(function(e){return null!=e})).length)return 1===t.length?t[0]:t.reduce(function(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}})}},function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=c(n(81)),a=c(n(1)),o=c(n(0)),s=(c(n(2)),n(80));function c(e){return e&&e.__esModule?e:{default:e}}o.default.any,o.default.func,o.default.node;var l=function(e){function t(n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,i));return a.performAppear=function(e,t){a.currentlyTransitioningKeys[e]=!0,t.componentWillAppear?t.componentWillAppear(a._handleDoneAppearing.bind(a,e,t)):a._handleDoneAppearing(e,t)},a._handleDoneAppearing=function(e,t){t.componentDidAppear&&t.componentDidAppear(),delete a.currentlyTransitioningKeys[e];var n=(0,s.getChildMapping)(a.props.children);n&&n.hasOwnProperty(e)||a.performLeave(e,t)},a.performEnter=function(e,t){a.currentlyTransitioningKeys[e]=!0,t.componentWillEnter?t.componentWillEnter(a._handleDoneEntering.bind(a,e,t)):a._handleDoneEntering(e,t)},a._handleDoneEntering=function(e,t){t.componentDidEnter&&t.componentDidEnter(),delete a.currentlyTransitioningKeys[e];var n=(0,s.getChildMapping)(a.props.children);n&&n.hasOwnProperty(e)||a.performLeave(e,t)},a.performLeave=function(e,t){a.currentlyTransitioningKeys[e]=!0,t.componentWillLeave?t.componentWillLeave(a._handleDoneLeaving.bind(a,e,t)):a._handleDoneLeaving(e,t)},a._handleDoneLeaving=function(e,t){t.componentDidLeave&&t.componentDidLeave(),delete a.currentlyTransitioningKeys[e];var n=(0,s.getChildMapping)(a.props.children);n&&n.hasOwnProperty(e)?a.keysToEnter.push(e):a.setState(function(t){var n=r({},t.children);return delete n[e],{children:n}})},a.childRefs=Object.create(null),a.state={children:(0,s.getChildMapping)(n.children)},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentWillMount=function(){this.currentlyTransitioningKeys={},this.keysToEnter=[],this.keysToLeave=[]},t.prototype.componentDidMount=function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t,this.childRefs[t])},t.prototype.componentWillReceiveProps=function(e){var t=(0,s.getChildMapping)(e.children),n=this.state.children;for(var r in this.setState({children:(0,s.mergeChildMappings)(n,t)}),t){var i=n&&n.hasOwnProperty(r);!t[r]||i||this.currentlyTransitioningKeys[r]||this.keysToEnter.push(r)}for(var a in n){var o=t&&t.hasOwnProperty(a);!n[a]||o||this.currentlyTransitioningKeys[a]||this.keysToLeave.push(a)}},t.prototype.componentDidUpdate=function(){var e=this,t=this.keysToEnter;this.keysToEnter=[],t.forEach(function(t){return e.performEnter(t,e.childRefs[t])});var n=this.keysToLeave;this.keysToLeave=[],n.forEach(function(t){return e.performLeave(t,e.childRefs[t])})},t.prototype.render=function(){var e=this,t=[],n=function(n){var r=e.state.children[n];if(r){var o="string"!=typeof r.ref,s=e.props.childFactory(r),c=function(t){e.childRefs[n]=t};s===r&&o&&(c=(0,i.default)(r.ref,c)),t.push(a.default.cloneElement(s,{key:n,ref:c}))}};for(var o in this.state.children)n(o);var s=r({},this.props);return delete s.transitionLeave,delete s.transitionName,delete s.transitionAppear,delete s.transitionEnter,delete s.childFactory,delete s.transitionLeaveTimeout,delete s.transitionEnterTimeout,delete s.transitionAppearTimeout,delete s.component,a.default.createElement(this.props.component,s,t)},t}(a.default.Component);l.displayName="TransitionGroup",l.propTypes={},l.defaultProps={component:"span",childFactory:function(e){return e}},t.default=l,e.exports=t.default},function(e,t,n){"use strict";t.__esModule=!0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=l(n(1)),a=l(n(0)),o=l(n(82)),s=l(n(79)),c=n(28);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}c.nameShape.isRequired,a.default.bool,a.default.bool,a.default.bool,(0,c.transitionTimeout)("Appear"),(0,c.transitionTimeout)("Enter"),(0,c.transitionTimeout)("Leave");var h=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),c=0;c<a;c++)o[c]=arguments[c];return n=r=u(this,e.call.apply(e,[this].concat(o))),r._wrapChild=function(e){return i.default.createElement(s.default,{name:r.props.transitionName,appear:r.props.transitionAppear,enter:r.props.transitionEnter,leave:r.props.transitionLeave,appearTimeout:r.props.transitionAppearTimeout,enterTimeout:r.props.transitionEnterTimeout,leaveTimeout:r.props.transitionLeaveTimeout},e)},u(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){return i.default.createElement(o.default,r({},this.props,{childFactory:this._wrapChild}))},t}(i.default.Component);h.displayName="CSSTransitionGroup",h.propTypes={},h.defaultProps={transitionAppear:!1,transitionEnter:!0,transitionLeave:!0},t.default=h,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),o=w(a),s=w(n(30)),c=w(n(73)),l=w(n(72)),u=w(n(71)),h=w(n(56)),p=w(n(25)),d=w(n(55)),f=w(n(54)),m=w(n(52)),v=w(n(51)),g=w(n(50)),y=w(n(47)),b=w(n(46)),x=w(n(45));function w(e){return e&&e.__esModule?e:{default:e}}n(123);var _=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.displayComponent=function(e){return n.setState(r({},n.state,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,!n.state[e])))},n.state={displayAbout:!1,displayCredits:!1,displayScenarioWiki:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),i(t,[{key:"render",value:function(){var e=this,t=this.props.scenario;return o.default.createElement("div",null,o.default.createElement(u.default,{scenarioName:t.name}),o.default.createElement(h.default,{scenario:t,displayComponent:this.displayComponent,modifyScenarioProperty:this.props.modifyScenarioProperty}),o.default.createElement(p.default,{tabsWrapperClassName:"sidebar-wrapper",tabsContentClassName:"sidebar-content"},o.default.createElement("div",{label:"Physics",icon:"fas fa-cube fa-2x"},o.default.createElement(d.default,{integrator:t.integrator,collisions:t.collisions,g:t.g,dt:t.dt,modifyScenarioProperty:this.props.modifyScenarioProperty})),o.default.createElement("div",{label:"Graphics",icon:"fas fa-paint-brush fa-2x"},o.default.createElement(f.default,{trails:t.trails,labels:t.labels,modifyScenarioProperty:this.props.modifyScenarioProperty})),o.default.createElement("div",{label:"Camera",icon:"fas fa-camera-retro fa-2x"},o.default.createElement(m.default,{rotatingReferenceFrame:t.rotatingReferenceFrame,cameraPosition:t.cameraPosition,cameraFocus:t.cameraFocus,masses:t.masses,modifyScenarioProperty:this.props.modifyScenarioProperty})),o.default.createElement("div",{label:"Modify Masses",icon:"fas fa-globe fa-2x"},o.default.createElement(v.default,{massBeingModified:t.massBeingModified,masses:t.masses,distMax:t.distMax,distMin:t.distMin,distStep:t.distStep,velMax:t.velMax,velMin:t.velMin,velStep:t.velStep,modifyScenarioProperty:this.props.modifyScenarioProperty,modifyMassProperty:this.props.modifyMassProperty,deleteMass:this.props.deleteMass})),o.default.createElement("div",{label:"Add Mass",icon:"fas fa-plus-circle fa-2x"},o.default.createElement(g.default,{primary:t.primary,maximumDistance:t.maximumDistance,distanceStep:t.distanceStep,massesAdded:t.massesAdded,masses:t.masses,addMass:this.props.addMass,modifyScenarioProperty:this.props.modifyScenarioProperty}))),o.default.createElement("div",{className:"sidebar-wrapper sidebar-wrapper-left"},o.default.createElement("ul",null,o.default.createElement("li",{key:"scenarioWiki",onClick:function(){return e.displayComponent("displayScenarioWiki")}},o.default.createElement("i",{className:"fas fa-wikipedia-w fa-2x"}),o.default.createElement("p",null,"Scenario Wiki")),o.default.createElement("li",{key:"about",onClick:function(){return e.displayComponent("displayAbout")}},o.default.createElement("i",{className:"fas fa-info-circle fa-2x"}),o.default.createElement("p",null,"About")),o.default.createElement("li",{key:"credits",onClick:function(){return e.displayComponent("displayCredits")}},o.default.createElement("i",{className:"fas fa-glass fa-2x"}),o.default.createElement("p",null,"Credits")))),o.default.createElement("div",{className:"bottom-bar"},o.default.createElement("h2",null,"Harmony of the Spheres")),o.default.createElement(s.default,{transitionName:"fade",transitionEnterTimeout:250,transitionLeaveTimeout:250},this.state.displayScenarioWiki&&o.default.createElement(l.default,{callback:function(){return e.displayComponent("displayScenarioWiki")}},o.default.createElement(x.default,{scenarioWikiUrl:t.scenarioWikiUrl})),this.state.displayAbout&&o.default.createElement(l.default,{callback:function(){return e.displayComponent("displayAbout")}},o.default.createElement(y.default,null)),this.state.displayCredits&&o.default.createElement(l.default,{callback:function(){return e.displayComponent("displayCredits")}},o.default.createElement(b.default,null))),!t.isLoaded&&o.default.createElement(c.default,{scenarioName:t.name}))}}]),t}();t.default=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),a=l(i),o=n(22),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(31)),c=l(n(84));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),r(t,[{key:"componentWillMount",value:function(){this.props.getScenario(this.props.scenarioName)}},{key:"componentWillReceiveProps",value:function(e){var t=e.scenarioName;t!==this.props.scenarioName&&this.props.getScenario(t)}},{key:"render",value:function(){return a.default.createElement(c.default,{scenario:this.props.scenario,modifyScenarioProperty:this.props.modifyScenarioProperty,modifyMassProperty:this.props.modifyMassProperty,addMass:this.props.addMass,deleteMass:this.props.deleteMass})}}]),t}();t.default=(0,o.connect)(function(e,t){return{scenarioName:t.match.params.name,scenario:e.scenario}},function(e){return{getScenario:function(t){return e(s.getScenario(t))},modifyScenarioProperty:function(t){return e(s.modifyScenarioProperty(t))},modifyMassProperty:function(t){return e(s.modifyMassProperty(t))},addMass:function(t){return e(s.addMass(t))},deleteMass:function(t){return e(s.deleteMass(t))}}})(u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"Apollo 11 - Free Return Trajectory",g:39.5,dt:4e-6,distMax:.00713911058,distMin:-.00713911058,distStep:23797035266666667e-22,velMax:.5,velMin:-.5,velStep:5e-6,rotatingReferenceFrame:"Earth",cameraPosition:"Free",cameraFocus:"Origo",freeOrigo:{x:0,y:0,z:16e3},massBeingModified:"Sun",primary:"Earth",maximumDistance:{name:"Moon to Earth * 10",value:.0256955529},distanceStep:{name:"Moon to Earth / 100",value:.0005139110579999999},scenarioWikiUrl:"https://en.wikipedia.org/wiki/Free-return_trajectory",masses:[{name:"Earth",x:.4240363252016235,y:-.9248449798862485,z:-.0001232690294681233,vx:5.622675894714279,vy:2.5745894556521574,vz:.00038057228235271535},{name:"Sun",x:.004494747940528018,y:.0009145777867796766,z:-6127893755128986e-20,vx:-.00017443876658803292,vy:.002043973630637931,vz:-4697196039923407e-21,trailVertices:1e4},{name:"Moon",x:.4220528422463315,y:-.9230209264977778,z:1632323615688905e-20,vx:5.486589374929882,vy:2.420601498441581,vz:-.014677846271227611},{name:"Apollo 11",x:.4240447232851519,y:-.9247715402118077,z:-.0001129301018611092,vx:4.395253850175561,vy:3.8323649107803948,vz:.15792573886687206,trailVertices:15e4}]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"Pentagram of Venus",g:39.5,dt:.001,distMax:60,distMin:-60,distStep:.1,velMax:12,velMin:-12,velStep:5e-6,rotatingReferenceFrame:"Earth",cameraPosition:"Free",cameraFocus:"Origo",freeOrigo:{x:0,y:0,z:995e4},massBeingModified:"Sun",primary:"Sun",maximumDistance:{name:"Sun to Kuiper Belt",value:55},distanceStep:{name:"Sun to Earth / 10",value:.1},scenarioWikiUrl:"https://en.wikipedia.org/wiki/Venus#Pentagram_of_Venus",masses:[{name:"Sun",x:-.002032845625658788,y:-.002206073207737345,z:-2596538210853694e-20,vx:.0020869837917339754,vy:-.0009759759745137204,vz:-4519598528871196e-20,trailVertices:1e4},{name:"Venus",x:.6326315979272211,y:.3455745980292066,z:-.03188913026127027,vx:-3.5713994857490308,vy:6.445551271928175,vz:.29452473854502614,trailVertices:15e4},{name:"Earth",x:.9197324105567349,y:-.4147318273536994,z:-1750037390352759e-20,vx:2.4645428337894026,vy:5.7097644117945805,vz:-.00033177815766459033,trailVertices:500}]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"Ulysses - Leaving the Ecliptic",g:39.5,dt:4e-4,distMax:60,distMin:-60,distStep:.1,velMax:.5,velMin:-.5,velStep:5e-6,rotatingReferenceFrame:"Sun",cameraPosition:"Free",cameraFocus:"Origo",freeOrigo:{x:-9042833.03871778,y:1880911.9770412396,z:4327318.249231702},massBeingModified:"Sun",primary:"Sun",maximumDistance:{name:"Sun to Neptune",value:30.1},distanceStep:{name:"Sun to Earth / 10",value:.1},scenarioWikiUrl:"https://en.wikipedia.org/wiki/Ulysses_(spacecraft)",masses:[{name:"Sun",x:.001907170226444396,y:.001647241859491345,z:-7305366730653568e-20,vx:.0010043805367614962,vy:.00162152221387405,vz:-1721189727004425e-20,trailVertices:4e3},{name:"Earth",x:.6322396914935335,y:-.793917085379488,z:-9184117683923244e-20,vx:4.8245231219195235,vy:3.8781466123014257,vz:3718429833892851e-20},{name:"Jupiter",x:-4.28630198321716,y:3.197368623779167,z:.08273822117667205,vx:-1.6831332477526202,vy:-2.0824586261911744,vz:.046315691519436826},{name:"Ulysses",x:-3.12358029331676,y:2.130050362505527,z:.0973566458988609,vx:-4.0624426922498955,vy:.013168650120671553,vz:.03305279658505684}]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"2006 RH120 - Temporary Moon of Earth",g:39.5,dt:5e-5,distMax:.00713911058,distMin:-.00713911058,distStep:23797035266666667e-22,velMax:.5,velMin:-.5,velStep:5e-6,rotatingReferenceFrame:"Earth",cameraPosition:"Free",cameraFocus:"Origo",primary:"Earth",maximumDistance:{name:"Moon to Earth * 10",value:.0256955529},distanceStep:{name:"Moon to Earth / 100",value:.0005139110579999999},freeOrigo:{x:17606.193632543513,y:48372.61945116485,z:11305.982517894732},massBeingModified:"Sun",scenarioWikiUrl:"https://en.wikipedia.org/wiki/2006_RH120",masses:[{name:"Earth",x:-.9770805778473637,y:-.1886610082888624,z:-.0001137939164522483,vx:1.102155027830851,vy:-6.190988593018021,vz:-9936899807891096e-20},{name:"Sun",x:.003597601902457598,y:.002756045676237206,z:-.0001166658590623763,vx:-.0013064343450196686,vy:.0021575779285819014,vz:7990021185205164e-21,trailVertices:3e4},{name:"Moon",x:-.9753650497765587,y:-.1868802590473519,z:3877091277858761e-20,vx:.9502211869939848,vy:-6.027158600839887,vz:.01606522868912927},{name:"2006 RH120",type:"asteroid",x:-.9499888920716798,y:-.1644812957189639,z:-.00823610321560139,vx:.7848378764860874,vy:-6.28838549695682,vz:-.03481906959464677,orbitalPeriod:1.05}]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"Planet Nine and the Detached Objects",g:39.5,dt:1.35,distMax:1e3,distMin:-1e3,distStep:23797035266666667e-22,velMax:.5,velMin:-.5,velStep:5e-6,rotatingReferenceFrame:"Sun",cameraPosition:"Free",cameraFocus:"Origo",freeOrigo:{x:5191960505.287371,y:-1366929125.5562208,z:3664021134.9333267},massBeingModified:"Sun",primary:"Sun",maximumDistance:{name:"Sun to Planet 9",value:22e3},distanceStep:{name:"Sun to Earth * 10",value:200},scenarioWikiUrl:"https://en.wikipedia.org/wiki/Planet_Nine",masses:[{name:"Sedna",x:47.86245053182971,y:68.76642523097426,z:-17.69797309937861,vx:-.8786934171061775,vy:.2632429999008391,vz:.06283058581762681},{name:"2012 VP113",type:"asteroid",m:9.6e-10,x:50.48048065616648,y:62.3000366844507,z:-22.91767244353682,vx:-.5111395588148426,vy:.6970250725047209,vz:.22374993379492533,orbitalPeriod:4178},{name:"2015 RX245",type:"asteroid",x:61.04988311908587,y:10.4740609282675,z:.2627400347602091,vx:-.6934022307643856,vy:.8158515667986989,vz:.19582132781023276,orbitalPeriod:8512},{name:"2007 TG422",type:"asteroid",x:15.43468275809566,y:32.59473931357567,z:-9.052446550011583,vx:-1.0842273041349613,vy:.9082669790407174,vz:.21704402810434492,orbitalPeriod:10279},{name:"2013 RF98",type:"asteroid",x:27.82371409570404,y:21.79708290021343,z:-9.880907239769547,vx:-.5261738597896148,vy:1.2162644308278474,vz:.5379705831730853,orbitalPeriod:6900},{name:"2013 SY99",type:"asteroid",x:57.9565103343703,y:13.8038576787334,z:-1.221569272246091,vx:-.6709433971501547,vy:.9030773959704005,vz:.0824821132421107,orbitalPeriod:19700},{name:"2010 GB174",type:"asteroid",x:-66.79767830584446,y:-8.860993685108655,z:22.29179702779006,vx:-.34734541075474157,vy:-.8783881659553672,vz:.3304636744569901,orbitalPeriod:7e3},{name:"2004 VN112",type:"asteroid",x:33.03984714824124,y:33.44217032533931,z:-7.934030497291245,vx:-.674746776160621,vy:.925698442234389,vz:.47451735847972515,orbitalPeriod:5918},{name:"Neptune",x:28.15642521569249,y:-10.22276489665423,z:-.4383752463170039,vx:.38350012707216175,vy:1.084509054408742,vz:-.03108004390475038},{name:"Planet 9",x:484.97191459669574,y:969.9499937546994,z:-279.9986653203301,vx:-.08898721639544392,vy:.05936371301920076,vz:.05138621266882957},{name:"Sun",x:.003719032999249612,y:.002707758685991074,z:-.0001625752508278521,vx:-.00036503661615773487,vy:.0025616755803073007,vz:43659300823695635e-22,trailVertices:2e4}]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"Cruithne - Quasi Moon of Earth",g:39.5,dt:201e-6,distMax:.00713911058,distMin:-.00713911058,distStep:23797035266666667e-22,velMax:.5,velMin:-.5,velStep:5e-6,rotatingReferenceFrame:"Earth",cameraPosition:"Free",cameraFocus:"Origo",freeOrigo:{x:0,y:0,z:995e4},massBeingModified:"Sun",primary:"Sun",maximumDistance:{name:"Sun to Jupiter",value:5.2},distanceStep:{name:"Sun to Earth / 10",value:.1},scenarioWikiUrl:"https://en.wikipedia.org/wiki/3753_Cruithne",masses:[{name:"Earth",x:.9939017404234283,y:.1352478854409775,z:-563711820259021e-19,vx:-.9740470647877054,vy:6.197562901988265,vz:.00041377604204935426},{name:"Sun",x:.00257729957449904,y:-.004392340734313888,z:-6978730929619852e-20,vx:.0029586689261267758,vy:.00013186850299206433,vz:-8036276531728809e-20,trailVertices:13e3},{name:"Cruithne",type:"asteroid",x:1.325865390879866,y:.2236398242275909,z:-.4321459627915762,vx:-2.0878385351253206,vy:3.4644966308419827,vz:-.13743332747043174,orbitalPeriod:1}]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"Journey to Pluto - New Horizons",g:39.5,dt:5e-4,distMax:60,distMin:-60,distStep:.1,velMax:.5,velMin:-.5,velStep:5e-6,rotatingReferenceFrame:"Sun",cameraPosition:"Free",cameraFocus:"New Horizons",freeOrigo:{x:0,y:0,z:995e4},massBeingModified:"Sun",primary:"Sun",maximumDistance:{name:"Sun to Kuiper Belt",value:55},distanceStep:{name:"Sun to Earth / 10",value:.1},scenarioWikiUrl:"https://en.wikipedia.org/wiki/New_Horizons",masses:[{name:"Sun",x:.003105382820836557,y:.003421107715470631,z:-.0001128874250543145,vx:-.0016117046847855569,vy:.0018341010190244748,vz:14207828429244852e-21,trailVertices:4e3},{name:"Earth",x:.6355808228859378,y:-.7904677085067398,z:-.0001002472603316248,vx:4.810026644475574,vy:3.8958651756142295,vz:.00014585339016878442},{name:"New Horizons",x:-1.992164573274362,y:-2.301641761520275,z:.04364285932798397,vx:-.627751406550844,vy:-5.174225494942215,vz:.04752908860301672,trailVertices:1e5},{name:"Mars",x:-.320950462453678,y:1.565928009403821,z:.04061607311236139,vx:-4.812049493267159,vy:-.6026978648189573,vz:.1055127360208306},{name:"Jupiter",x:-3.420140620263771,y:-4.17639729175358,z:.09384198472444041,vx:2.0982188217181896,vy:-1.615934684899708,vz:-.040244608432520916},{name:"Pluto",x:-2.365357406754338,y:-30.79945464082713,z:3.979920498188652,vx:1.1616329240882042,vy:-.30185828812247,vz:-.30664299241349696},{name:"Saturn",x:-8.417303721615914,y:-4.926388621921075,z:.4206428591233111,vx:.919151760170189,vy:-1.7631987893271037,vz:-.005984764290193158},{name:"Uranus",x:19.94996398927053,y:2.105545795789208,z:-.250642112216617,vx:-.16129339690269276,vy:1.3616609675222109,vz:.007139790220137776},{name:"Neptune",x:26.3776735181941,y:-14.27426743109879,z:-.3139485147556967,vx:.5381987172626345,vy:1.015130164798585,vz:-.033446435472504955}]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"The Sun and the Martian System",g:39.5,dt:9e-7,distMax:.000313640827776,distMin:-.000313640827776,distStep:1.04546942592e-7,velMax:.3,velMin:-.3,velStep:9999999999999999e-20,rotatingReferenceFrame:"Mars",cameraPosition:"Free",cameraFocus:"Origo",freeOrigo:{x:-9.401642562455261e-14,y:-306.1964940362069,z:102.79005884167552},massBeingModified:"Mars",primary:"Mars",maximumDistance:{name:"Phobos to Mars * 100",value:.00626747},distanceStep:{name:"Phobos to Mars",value:626747e-10},scenarioWikiUrl:"https://en.wikipedia.org/wiki/Mars",masses:[{name:"Sun",x:.108041512617234,y:1.460180703405564,z:.02794742929920126,vx:-5.2899724205543155,vy:-.06249167561447718,vz:.1285180929683702,trailVertices:6e3},{name:"Mars",x:9.383482325412062e-13,y:-8.140364473231114e-14,z:-4.768852787982284e-13,vx:2.307996983376931e-9,vy:7.145816858964172e-9,vz:-8.124324279984234e-10,trailVertices:6e3},{name:"Phobos",x:-4950224547596924e-20,y:2488266909607153e-20,z:2730097984848412e-20,vx:-.17192317024186732,vy:-.4188471330676279,vz:.06563852508203072},{name:"Deimos",x:-5307001408938901e-20,y:-.0001471501029650768,z:1117485182006874e-20,vx:.23923264692446428,vy:-.09551050573749158,vz:-.12195270680186761}]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"Finding New Worlds - TESS",g:39.5,dt:85e-7,distMax:.00713911058,distMin:-.00713911058,distStep:23797035266666667e-22,velMax:.5,velMin:-.5,velStep:5e-6,rotatingReferenceFrame:"Earth",cameraPosition:"Free",cameraFocus:"Origo",freeOrigo:{x:31.634445180052754,y:551.9256768615364,z:117.69438629186993},massBeingModified:"Sun",primary:"Earth",maximumDistance:{name:"Moon to Earth * 10",value:.0256955529},distanceStep:{name:"Moon to Earth / 100",value:.0005139110579999999},scenarioWikiUrl:"https://en.wikipedia.org/wiki/Transiting_Exoplanet_Survey_Satellite",masses:[{name:"Earth",x:.3613908321085162,y:.9246924247847821,z:-.000108416151579199,vx:-5.950357162390947,vy:2.285782818748623,vz:-.00016399866910654596},{name:"Sun",x:-.0005145524854775702,y:.007363771049980554,z:-6349374134935161e-20,vx:-.0028183733358152284,vy:.0008078597296463727,vz:7088300524761439e-20,trailVertices:1e4},{name:"Moon",x:.3589251901069663,y:.9250737244922999,z:7181992649155601e-20,vx:-5.989765919184976,vy:2.06885533285733,vz:.012079340158160107},{name:"TESS",x:.3622433129881675,y:.9262976775724598,z:-6857674452150818e-20,vx:-6.021880706772151,vy:2.4879372578404126,vz:-.10271423737146826}]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"Oumuamua - Visitor From Afar",g:39.5,dt:.001,distMax:60,distMin:-60,distStep:.1,velMax:12,velMin:-12,velStep:5e-6,rotatingReferenceFrame:"Sun",cameraPosition:"Free",cameraFocus:"Origo",freeOrigo:{x:0,y:0,z:995e4},massBeingModified:"Sun",primary:"Sun",maximumDistance:{name:"Sun to Kuiper Belt",value:55},distanceStep:{name:"Sun to Earth / 10",value:.1},scenarioWikiUrl:"https://en.wikipedia.org/wiki/Oumuamua",masses:[{name:"Sun",x:-.002032845625658788,y:-.002206073207737345,z:-2596538210853694e-20,vx:.0020869837917339754,vy:-.0009759759745137204,vz:-4519598528871196e-20,trailVertices:300},{name:"Mercury",x:-.0633228042515943,y:.3023360019376338,z:.0304805401051499,vx:-12.13355404048838,vy:-1.6528772889426246,vz:.9784692627549786},{name:"Venus",x:.6326315979272211,y:.3455745980292066,z:-.03188913026127027,vx:-3.5713994857490308,vy:6.445551271928175,vz:.29452473854502614},{name:"Earth",x:.9197324105567349,y:-.4147318273536994,z:-1750037390352759e-20,vx:2.4645428337894026,vy:5.7097644117945805,vz:-.00033177815766459033},{name:"Mars",x:-.574871406752105,y:-1.395455041953879,z:-.01515164037265145,vx:4.9225288800471425,vy:-1.5065904473191791,vz:-.1524041758922603},{name:"Oumuamua",type:"asteroid",x:3.679682868010402,y:-16.90385340779421,z:26.32485723034872,vx:-.8127258738687134,vy:3.0458386360240897,vz:-4.839022858847442,trailVertices:3e4},{name:"Jupiter",x:2.309580232081457,y:4.460546846823553,z:-.07028851829878795,vx:-2.4809040175054617,vy:1.3993502897811834,vz:.04970829322871863},{name:"Saturn",x:-8.417303721615914,y:-4.926388621921075,z:.4206428591233111,vx:.919151760170189,vy:-1.7631987893271037,vz:-.005984764290193158},{name:"Uranus",x:19.94996398927053,y:2.105545795789208,z:-.250642112216617,vx:-.16129339690269276,vy:1.3616609675222109,vz:.007139790220137776},{name:"Neptune",x:26.3776735181941,y:-14.27426743109879,z:-.3139485147556967,vx:.5381987172626345,vy:1.015130164798585,vz:-.033446435472504955}]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"The Sun, Earth and Moon System",g:39.5,dt:85e-7,distMax:.00713911058,distMin:-.00713911058,distStep:23797035266666667e-22,velMax:.5,velMin:-.5,velStep:5e-6,rotatingReferenceFrame:"Earth",cameraPosition:"Free",cameraFocus:"Origo",freeOrigo:{x:283.6330113898189,y:588.0320929243479,z:104.3987821010098},massBeingModified:"Sun",primary:"Earth",maximumDistance:{name:"Moon to Earth * 10",value:.0256955529},distanceStep:{name:"Moon to Earth / 100",value:.0005139110579999999},scenarioWikiUrl:"https://en.wikipedia.org/wiki/Moon",masses:[{name:"Earth",x:.9939017404234283,y:.1352478854409775,z:-563711820259021e-19,vx:-.9740470647877054,vy:6.197562901988265,vz:.00041377604204935426},{name:"Sun",x:.00257729957449904,y:-.004392340734313888,z:-6978730929619852e-20,vx:.0029586689261267758,vy:.00013186850299206433,vz:-8036276531728809e-20,trailVertices:2e4},{name:"Moon",x:.9956218231659631,y:.1372984436242337,z:-.0001963882374615497,vx:-1.1283327200261632,vy:6.334444083774614,vz:-.015608356925550449}]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"Three Body Coreography",g:100,dt:.01,elapsedTime:0,rotatingReferenceFrame:"Origo",cameraPosition:"Free",cameraFocus:"Origo",freeOrigo:{x:0,y:0,z:8e8},massBeingModified:"Eva",distMax:400,distMin:-400,distStep:23797035266666667e-22,velMax:.5,velMin:-.5,velStep:5e-6,primary:"Arjuna",maximumDistance:{name:"Sun to Neptune",value:30.1},distanceStep:{name:"Sun to Earth / 10",value:.1},scenarioWikiUrl:"https://en.wikipedia.org/wiki/Three-body_problem",masses:[{name:"Eva",type:"star",trailVertices:220,radius:6e6,m:1e4,x:-100,y:0,z:0,vx:34.7111,vy:53.2728,vz:0},{name:"Sarada",type:"star",trailVertices:220,radius:6e6,m:1e4,x:100,y:0,z:0,vx:34.7111,vy:53.2728,vz:0},{name:"Arjuna",type:"star",trailVertices:220,radius:6e6,m:1e4,x:0,y:0,z:0,vx:-69.4222,vy:-106.5456,vz:0}]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"Earth VS. the Rings of Saturn",g:39.5,dt:1e-6,rotatingReferenceFrame:"Saturn",cameraPosition:"Free",cameraFocus:"Origo",freeOrigo:{x:-5604.812818415091,y:-2207.7944830346014,z:4436.5549778635595},massBeingModified:"Saturn",distMax:.010068057744,distMin:-.010068057744,distStep:7551043308e-15,velMax:3,velMin:-3,velStep:2.2222222222222222e-7,primary:"Saturn",maximumDistance:{name:"Titan to Saturn * 2",value:.01633512555},distanceStep:{name:"Titan to Saturn / 200",value:40837813874999996e-21},scenarioWikiUrl:"https://en.wikipedia.org/wiki/Saturn",particles:{primary:"Saturn",number:4e4,minD:.0006749650466666667,maxD:.00111244757},masses:[{name:"Saturn",x:1.455395947628908,y:-9.949880746961366,z:.1150689429678489,vx:1.904060271026863,vy:.2886523546718628,vz:-.08092749245870556,trailVertices:3e3},{name:"Sun",x:-1135841603717545e-20,y:.007200805435052814,z:-7608241832106424e-20,vx:-.0027531411153919037,vy:.0010072803591140611,vz:687504175911851e-19,trailVertices:10},{name:"Earth",vx:1.904060271026863,vy:3.2523894933628767,vz:-.08092749245870556,x:1.456680725273908,y:-9.949880746961366,z:.1150689429678489}]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"The Cronian System",g:39.5,dt:5e-6,rotatingReferenceFrame:"Saturn",cameraPosition:"Free",cameraFocus:"Origo",freeOrigo:{x:4179.634541486797,y:5301.841140561859,z:100.55825363900749},massBeingModified:"Saturn",distMax:.010068057744,distMin:-.010068057744,distStep:7551043308e-15,velMax:3,velMin:-3,velStep:2.2222222222222222e-7,primary:"Saturn",maximumDistance:{name:"Titan to Saturn * 2",value:.01633512555},distanceStep:{name:"Titan to Saturn / 200",value:40837813874999996e-21},scenarioWikiUrl:"https://en.wikipedia.org/wiki/Saturn",particles:{primary:"Saturn",number:6500,minD:.0006749650466666667,maxD:.00101244757},masses:[{name:"Saturn",x:1.455395947628908,y:-9.949880746961366,z:.1150689429678489,vx:1.904060271026863,vy:.2886523546718628,vz:-.08092749245870556,trailVertices:3e3},{name:"Sun",x:-1135841603717545e-20,y:.007200805435052814,z:-7608241832106424e-20,vx:-.0027531411153919037,vy:.0010072803591140611,vz:687504175911851e-19,trailVertices:10},{name:"Titan",x:1.44703665465149,y:-9.949586575198328,z:.1157482216777228,vx:1.9200677115811238,vy:-.7284765826759697,vz:.44171079043770495},{name:"Enceladus",x:1.4541131533763,y:-9.95066371753471,z:.1156038530153486,vx:3.4589568054865287,vy:-1.6793349755837739,vz:.7996823253516322},{name:"Dione",x:1.457689206685954,y:-9.950894099671027,z:.1153788325148113,vx:2.774751884912971,vy:1.9574969744577209,vz:-1.0400710407236555},{name:"Rhea",x:1.457034907876281,y:-9.947177863962436,z:.1135137967303367,vx:.32686216890071373,vy:1.0898030546477655,vz:-.35444918528286623},{name:"Mimas",x:1.455334947807255,y:-9.948751451380938,z:.1145039405599507,vx:-1.049433857159975,vy:.2557465750262956,vz:.14458646150373544},{name:"Tethys",x:1.453458245783646,y:-9.9495272985977,z:.1151060945159009,vx:1.548439085604689,vy:-1.7815278365582896,vz:1.0681794647846041},{name:"Methone",type:"asteroid",orbitalPeriod:.002765945205,x:1.454102079560042,y:-9.949801986793316,z:.1151532523288807,vx:1.8371731128054687,vy:-2.321316349990775,vz:1.2926808001772543},{name:"Telesto",type:"asteroid",orbitalPeriod:.005172060274,x:1.454182170847646,y:-9.951191821059926,z:.1158995255743654,vx:3.772875225514815,vy:-1.1180057797267513,vz:.42898412146889753},{name:"Calypso",type:"asteroid",orbitalPeriod:.005172060274,x:1.454758223914872,y:-9.948225858342374,z:.1142117815868715,vx:-.35167564882294666,vy:-.2916614360359456,vz:.47427714461384535},{name:"Helene",type:"asteroid",orbitalPeriod:.0074983972603,x:1.457454928756659,y:-9.948653829084341,z:.1142198327821264,vx:.6830855396686948,vy:1.8497132618383818,vz:-.7738407960087406},{name:"Polydeuces",type:"asteroid",orbitalPeriod:2.736915,x:1.454849473949497,y:-9.952065572452565,z:.1162574449207172,vx:3.951704279385319,vy:-.1605150232409651,vz:-.04299766488813167}]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"The Sun and the Neptunian System",g:39.5,dt:9e-7,distMax:.000313640827776,distMin:-.000313640827776,distStep:1.04546942592e-7,velMax:.3,velMin:-.3,velStep:9999999999999999e-20,rotatingReferenceFrame:"Neptune",cameraPosition:"Free",cameraFocus:"Origo",freeOrigo:{x:-2118.150178902576,y:-1992.556723911082,z:2120.3231321690787},massBeingModified:"Neptune",primary:"Neptune",maximumDistance:{name:"Triton to Neptune * 5",value:.01185845755},distanceStep:{name:"Triton to Neptune / 100",value:23716915100000003e-21},scenarioWikiUrl:"https://en.wikipedia.org/wiki/Neptune",masses:[{name:"Sun",x:-.001407345721997563,y:.000320690115027253,z:-1544945687075323e-20,vx:.0019722588614700825,vy:-.0004944318472434034,vz:-3094316831387058e-20,trailVertices:6e3},{name:"Neptune",x:5.985264329407189,y:-29.61054468191337,z:.471808076286421,vx:1.1165054960682934,vy:.23338475849869655,vz:-.030678136881423936,trailVertices:6e3},{name:"Triton",x:5.983219998919647,y:-29.61173857987389,z:.4719456474814677,vx:.8451788218109715,vy:.7783966045832394,vz:.667115419424356},{name:"Proteus",x:5.984692714855684,y:-29.61108371495806,z:.471844557931718,vx:2.056466374391497,vy:-.8169265349935171,vz:-.8043690616903206},{name:"Larissa",m:2.48878788345e-12,tilt:0,type:"asteroid",orbitalPeriod:.0015205479,x:5.984814160434514,y:-29.61069017809711,z:.4719397014835676,vx:1.4713303715037245,vy:-1.600654151110315,vz:-.8418893015924724},{name:"Galatea",m:1.8854453662500002e-12,tilt:0,type:"asteroid",orbitalPeriod:.00117534247,x:5.985125482849405,y:-29.61019869406991,z:.4719885125231672,vx:-.8145219628906788,vy:-.7661052297671012,vz:.39908422502391816},{name:"Despina",m:1.0558494051e-12,tilt:0,type:"asteroid",orbitalPeriod:.000917808219,x:5.98546581968112,y:-29.61077952670712,z:.471642124564081,vx:2.8905702863680354,vy:1.8549675796093248,vz:-.17283690048331354},{name:"Thalassa",m:1.0558494051e-12,tilt:0,type:"asteroid",orbitalPeriod:.000917808219,x:5.985307851179991,y:-29.61085117941523,z:.471680745669302,vx:3.3937608555928858,vy:.8540927613572222,vz:-.7451846458996935},{name:"Naiad",m:9.552923189000001e-14,tilt:0,type:"asteroid",orbitalPeriod:.00080547945,x:5.985141015537203,y:-29.61083746791593,z:.4717534673578492,vx:3.175238005207448,vy:-.3917742422527576,vz:-1.3296473679967924},{name:"Voyager 2",x:5.96584356204397,y:-29.57111128483145,z:.4700108732777291,vx:2.6972840187146523,vy:-2.9352897290197966,vz:.13734806662139457,trailVertices:7e4}]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"The Sun and the Jovian System",g:39.5,dt:6e-6,rotatingReferenceFrame:"Jupiter",cameraPosition:"Free",cameraFocus:"Origo",freeOrigo:{x:-7480.213284753809,y:-8163.220347463112,z:2139.892485956284},massBeingModified:"Jupiter",distMax:.010068057744,distMin:-.010068057744,distStep:7551043308e-15,velMax:3,velMin:-3,velStep:2.2222222222222222e-7,primary:"Jupiter",maximumDistance:{name:"Io to Jupiter * 150",value:.42285},distanceStep:{name:"Io to Jupiter / 10",value:.005637999999999999},scenarioWikiUrl:"https://en.wikipedia.org/wiki/Jupiter",masses:[{name:"Jupiter",x:-7.059720449635489e-9,y:-3.458205558367953e-7,z:-8.560595128944146e-9,vx:.00012011206801885418,vy:-14404565860802778e-21,vz:185765499287888e-20,trailVertices:5e3},{name:"Sun",x:5.436151339701778,y:-.2691893935210006,z:-.120522867020747,vx:.16942125305243833,vy:2.625182136850849,vz:-.014693280056960252,trailVertices:5e3},{name:"Io",x:.0004123396684098477,y:-.00277546561117049,z:-9213389019387901e-20,vx:3.632459716708889,vy:.5331313883142663,vz:.07191321713719195},{name:"Europa",x:.000231315012572641,y:-.004516461518956031,z:-.0001948699591675548,vx:2.867825888888589,vy:.1479315881074277,vz:.053531172951165384},{name:"Ganymede",x:-.007162482360743344,y:-126082702584475e-19,z:-9466593207081436e-20,vx:.009854944632595801,vy:-2.2904667534862946,vz:-.08642422976208332},{name:"Callisto",x:-.01163958701040644,y:-.005000778655901151,z:-.0003148071350588741,vx:.6828251398971682,vy:-1.5765023231560384,vz:-.040977438627834185},{name:"Juno",x:-5039266773550064e-20,y:-.00788144649482092,z:-.004586041119660474,vx:-.02521299585620324,vy:-2.5307649570849953,vz:-.6940820182189928}]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,s.default)("The Sun and the Neptunian System"),t=arguments[1];switch(t.type){case a.GET_SCENARIO:return t.scenario;case a.MODIFY_SCENARIO_PROPERTY:return r({},e,c({},t.payload.key,t.payload.value));case a.MODIFY_MASS_PROPERTY:return r({},e,{masses:e.masses.map(function(e){return e.name===t.payload.name?r({},e,c({},t.payload.key,t.payload.value)):e})});case a.ADD_MASS:return r({},e,{masses:[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e.masses),[t.payload])});case a.DELETE_MASS:var n=e.masses.map(function(e){return e.name}).indexOf(t.name),i=e.masses.filter(function(e,t){return n!==t});return i.length?r({},e,{massBeingModified:i[0].name,masses:i,rotatingReferenceFrame:t.name!==e.rotatingReferenceFrame?e.rotatingReferenceFrame:i[0].name,cameraPosition:t.name!==e.cameraPosition?e.cameraPosition:i[0].name,cameraFocus:t.name!==e.cameraFocus?e.cameraFocus:i[0].name}):r({},e,{massBeingModified:"There are no masses",masses:i,rotatingReferenceFrame:"Origo",cameraPosition:"Free",cameraFocus:"Origo"});default:return e}};var i,a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(33)),o=n(15),s=(i=o)&&i.__esModule?i:{default:i};function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(10),a=n(102),o=(r=a)&&r.__esModule?r:{default:r};t.default=(0,i.combineReducers)({scenario:o.default})},function(e,t,n){"use strict";function r(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"==typeof i?i(n,r,e):t(i)}}}}t.__esModule=!0;var i=r();i.withExtraArgument=r,t.default=i},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";var r=function(e){};e.exports=function(e,t,n,i,a,o,s,c){if(r(t),!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,i,a,o,s,c],h=0;(l=new Error(t.replace(/%s/g,function(){return u[h++]}))).name="Invariant Violation"}throw l.framesToPop=1,l}}},function(e,t,n){"use strict";var r=n(9),i=n(108),a=n(107);e.exports=function(){function e(e,t,n,r,o,s){s!==a&&i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports=function(e){try{e.focus()}catch(e){}}},function(e,t,n){"use strict";e.exports=function(e){var t=(e?e.ownerDocument||e:document).defaultView||window;return!(!e||!("function"==typeof t.Node?e instanceof t.Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}},function(e,t,n){"use strict";var r=n(111);e.exports=function(e){return r(e)&&3==e.nodeType}},function(e,t,n){"use strict";var r=n(112);e.exports=function e(t,n){return!(!t||!n)&&(t===n||!r(t)&&(r(n)?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty;function i(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}e.exports=function(e,t){if(i(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(var o=0;o<n.length;o++)if(!r.call(t,n[o])||!i(e[n[o]],t[n[o]]))return!1;return!0}},function(e,t,n){"use strict";e.exports=function(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}},function(e,t,n){"use strict";var r=n(9),i={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):{remove:r}},registerDefault:function(){}};e.exports=i},function(e,t,n){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),i={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};e.exports=i},function(e,t,n){"use strict";
/** @license React v16.2.0
 * react-dom.production.min.js
 *
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(1),i=n(117),a=n(39),o=n(9),s=n(116),c=n(115),l=n(114),u=n(113),h=n(110),p=n(38);function d(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);throw(t=Error(n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.")).name="Invariant Violation",t.framesToPop=1,t}r||d("227");var f={children:!0,dangerouslySetInnerHTML:!0,defaultValue:!0,defaultChecked:!0,innerHTML:!0,suppressContentEditableWarning:!0,suppressHydrationWarning:!0,style:!0};function m(e,t){return(e&t)===t}var v={MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,HAS_STRING_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(e){var t=v,n=e.Properties||{},r=e.DOMAttributeNamespaces||{},i=e.DOMAttributeNames||{};for(var a in e=e.DOMMutationMethods||{},n){g.hasOwnProperty(a)&&d("48",a);var o=a.toLowerCase(),s=n[a];1>=(o={attributeName:o,attributeNamespace:null,propertyName:a,mutationMethod:null,mustUseProperty:m(s,t.MUST_USE_PROPERTY),hasBooleanValue:m(s,t.HAS_BOOLEAN_VALUE),hasNumericValue:m(s,t.HAS_NUMERIC_VALUE),hasPositiveNumericValue:m(s,t.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:m(s,t.HAS_OVERLOADED_BOOLEAN_VALUE),hasStringBooleanValue:m(s,t.HAS_STRING_BOOLEAN_VALUE)}).hasBooleanValue+o.hasNumericValue+o.hasOverloadedBooleanValue||d("50",a),i.hasOwnProperty(a)&&(o.attributeName=i[a]),r.hasOwnProperty(a)&&(o.attributeNamespace=r[a]),e.hasOwnProperty(a)&&(o.mutationMethod=e[a]),g[a]=o}}},g={};function y(e,t){if(f.hasOwnProperty(e)||2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1]))return!1;if(null===t)return!0;switch(typeof t){case"boolean":return f.hasOwnProperty(e)?e=!0:(t=b(e))?e=t.hasBooleanValue||t.hasStringBooleanValue||t.hasOverloadedBooleanValue:e="data-"===(e=e.toLowerCase().slice(0,5))||"aria-"===e,e;case"undefined":case"number":case"string":case"object":return!0;default:return!1}}function b(e){return g.hasOwnProperty(e)?g[e]:null}var x=v,w=x.MUST_USE_PROPERTY,_=x.HAS_BOOLEAN_VALUE,M=x.HAS_NUMERIC_VALUE,E=x.HAS_POSITIVE_NUMERIC_VALUE,S=x.HAS_OVERLOADED_BOOLEAN_VALUE,T=x.HAS_STRING_BOOLEAN_VALUE,P={Properties:{allowFullScreen:_,async:_,autoFocus:_,autoPlay:_,capture:S,checked:w|_,cols:E,contentEditable:T,controls:_,default:_,defer:_,disabled:_,download:S,draggable:T,formNoValidate:_,hidden:_,loop:_,multiple:w|_,muted:w|_,noValidate:_,open:_,playsInline:_,readOnly:_,required:_,reversed:_,rows:E,rowSpan:M,scoped:_,seamless:_,selected:w|_,size:E,start:M,span:E,spellCheck:T,style:0,tabIndex:0,itemScope:_,acceptCharset:0,className:0,htmlFor:0,httpEquiv:0,value:T},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMMutationMethods:{value:function(e,t){if(null==t)return e.removeAttribute("value");"number"!==e.type||!1===e.hasAttribute("value")?e.setAttribute("value",""+t):e.validity&&!e.validity.badInput&&e.ownerDocument.activeElement!==e&&e.setAttribute("value",""+t)}}},C=x.HAS_STRING_BOOLEAN_VALUE,A="http://www.w3.org/1999/xlink",O="http://www.w3.org/XML/1998/namespace",L={Properties:{autoReverse:C,externalResourcesRequired:C,preserveAlpha:C},DOMAttributeNames:{autoReverse:"autoReverse",externalResourcesRequired:"externalResourcesRequired",preserveAlpha:"preserveAlpha"},DOMAttributeNamespaces:{xlinkActuate:A,xlinkArcrole:A,xlinkHref:A,xlinkRole:A,xlinkShow:A,xlinkTitle:A,xlinkType:A,xmlBase:O,xmlLang:O,xmlSpace:O}},R=/[\-\:]([a-z])/g;function N(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode x-height xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type xml:base xmlns:xlink xml:lang xml:space".split(" ").forEach(function(e){var t=e.replace(R,N);L.Properties[t]=0,L.DOMAttributeNames[t]=e}),x.injectDOMPropertyConfig(P),x.injectDOMPropertyConfig(L);var k={_caughtError:null,_hasCaughtError:!1,_rethrowError:null,_hasRethrowError:!1,injection:{injectErrorUtils:function(e){"function"!=typeof e.invokeGuardedCallback&&d("197"),I=e.invokeGuardedCallback}},invokeGuardedCallback:function(e,t,n,r,i,a,o,s,c){I.apply(k,arguments)},invokeGuardedCallbackAndCatchFirstError:function(e,t,n,r,i,a,o,s,c){if(k.invokeGuardedCallback.apply(this,arguments),k.hasCaughtError()){var l=k.clearCaughtError();k._hasRethrowError||(k._hasRethrowError=!0,k._rethrowError=l)}},rethrowCaughtError:function(){return function(){if(k._hasRethrowError){var e=k._rethrowError;throw k._rethrowError=null,k._hasRethrowError=!1,e}}.apply(k,arguments)},hasCaughtError:function(){return k._hasCaughtError},clearCaughtError:function(){if(k._hasCaughtError){var e=k._caughtError;return k._caughtError=null,k._hasCaughtError=!1,e}d("198")}};function I(e,t,n,r,i,a,o,s,c){k._hasCaughtError=!1,k._caughtError=null;var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(e){k._caughtError=e,k._hasCaughtError=!0}}var D=null,z={};function j(){if(D)for(var e in z){var t=z[e],n=D.indexOf(e);if(-1<n||d("96",e),!F[n])for(var r in t.extractEvents||d("97",e),F[n]=t,n=t.eventTypes){var i=void 0,a=n[r],o=t,s=r;B.hasOwnProperty(s)&&d("99",s),B[s]=a;var c=a.phasedRegistrationNames;if(c){for(i in c)c.hasOwnProperty(i)&&U(c[i],o,s);i=!0}else a.registrationName?(U(a.registrationName,o,s),i=!0):i=!1;i||d("98",r,e)}}}function U(e,t,n){H[e]&&d("100",e),H[e]=t,V[e]=t.eventTypes[n].dependencies}var F=[],B={},H={},V={};function G(e){D&&d("101"),D=Array.prototype.slice.call(e),j()}function W(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];z.hasOwnProperty(t)&&z[t]===r||(z[t]&&d("102",t),z[t]=r,n=!0)}n&&j()}var q=Object.freeze({plugins:F,eventNameDispatchConfigs:B,registrationNameModules:H,registrationNameDependencies:V,possibleRegistrationNames:null,injectEventPluginOrder:G,injectEventPluginsByName:W}),Y=null,X=null,J=null;function Z(e,t,n,r){t=e.type||"unknown-event",e.currentTarget=J(r),k.invokeGuardedCallbackAndCatchFirstError(t,n,void 0,e),e.currentTarget=null}function K(e,t){return null==t&&d("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function Q(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var $=null;function ee(e,t){if(e){var n=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(n))for(var i=0;i<n.length&&!e.isPropagationStopped();i++)Z(e,t,n[i],r[i]);else n&&Z(e,t,n,r);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function te(e){return ee(e,!0)}function ne(e){return ee(e,!1)}var re={injectEventPluginOrder:G,injectEventPluginsByName:W};function ie(e,t){var n=e.stateNode;if(!n)return null;var r=Y(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}return e?null:(n&&"function"!=typeof n&&d("231",t,typeof n),n)}function ae(e,t,n,r){for(var i,a=0;a<F.length;a++){var o=F[a];o&&(o=o.extractEvents(e,t,n,r))&&(i=K(i,o))}return i}function oe(e){e&&($=K($,e))}function se(e){var t=$;$=null,t&&(Q(t,e?te:ne),$&&d("95"),k.rethrowCaughtError())}var ce=Object.freeze({injection:re,getListener:ie,extractEvents:ae,enqueueEvents:oe,processEventQueue:se}),le=Math.random().toString(36).slice(2),ue="__reactInternalInstance$"+le,he="__reactEventHandlers$"+le;function pe(e){if(e[ue])return e[ue];for(var t=[];!e[ue];){if(t.push(e),!e.parentNode)return null;e=e.parentNode}var n=void 0,r=e[ue];if(5===r.tag||6===r.tag)return r;for(;e&&(r=e[ue]);e=t.pop())n=r;return n}function de(e){if(5===e.tag||6===e.tag)return e.stateNode;d("33")}function fe(e){return e[he]||null}var me=Object.freeze({precacheFiberNode:function(e,t){t[ue]=e},getClosestInstanceFromNode:pe,getInstanceFromNode:function(e){return!(e=e[ue])||5!==e.tag&&6!==e.tag?null:e},getNodeFromInstance:de,getFiberCurrentPropsFromNode:fe,updateFiberProps:function(e,t){e[he]=t}});function ve(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function ge(e,t,n){for(var r=[];e;)r.push(e),e=ve(e);for(e=r.length;0<e--;)t(r[e],"captured",n);for(e=0;e<r.length;e++)t(r[e],"bubbled",n)}function ye(e,t,n){(t=ie(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=K(n._dispatchListeners,t),n._dispatchInstances=K(n._dispatchInstances,e))}function be(e){e&&e.dispatchConfig.phasedRegistrationNames&&ge(e._targetInst,ye,e)}function xe(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst;ge(t=t?ve(t):null,ye,e)}}function we(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=ie(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=K(n._dispatchListeners,t),n._dispatchInstances=K(n._dispatchInstances,e))}function _e(e){e&&e.dispatchConfig.registrationName&&we(e._targetInst,null,e)}function Me(e){Q(e,be)}function Ee(e,t,n,r){if(n&&r)e:{for(var i=n,a=r,o=0,s=i;s;s=ve(s))o++;s=0;for(var c=a;c;c=ve(c))s++;for(;0<o-s;)i=ve(i),o--;for(;0<s-o;)a=ve(a),s--;for(;o--;){if(i===a||i===a.alternate)break e;i=ve(i),a=ve(a)}i=null}else i=null;for(a=i,i=[];n&&n!==a&&(null===(o=n.alternate)||o!==a);)i.push(n),n=ve(n);for(n=[];r&&r!==a&&(null===(o=r.alternate)||o!==a);)n.push(r),r=ve(r);for(r=0;r<i.length;r++)we(i[r],"bubbled",e);for(e=n.length;0<e--;)we(n[e],"captured",t)}var Se=Object.freeze({accumulateTwoPhaseDispatches:Me,accumulateTwoPhaseDispatchesSkipTarget:function(e){Q(e,xe)},accumulateEnterLeaveDispatches:Ee,accumulateDirectDispatches:function(e){Q(e,_e)}}),Te=null;function Pe(){return!Te&&i.canUseDOM&&(Te="textContent"in document.documentElement?"textContent":"innerText"),Te}var Ce={_root:null,_startText:null,_fallbackText:null};function Ae(){if(Ce._fallbackText)return Ce._fallbackText;var e,t,n=Ce._startText,r=n.length,i=Oe(),a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Ce._fallbackText=i.slice(e,1<t?1-t:void 0),Ce._fallbackText}function Oe(){return"value"in Ce._root?Ce._root.value:Ce._root[Pe()]}var Le="dispatchConfig _targetInst nativeEvent isDefaultPrevented isPropagationStopped _dispatchListeners _dispatchInstances".split(" "),Re={type:null,target:null,currentTarget:o.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};function Ne(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?o.thatReturnsTrue:o.thatReturnsFalse,this.isPropagationStopped=o.thatReturnsFalse,this}function ke(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function Ie(e){e instanceof this||d("223"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function De(e){e.eventPool=[],e.getPooled=ke,e.release=Ie}function ze(e,t,n,r){return Ne.call(this,e,t,n,r)}function je(e,t,n,r){return Ne.call(this,e,t,n,r)}a(Ne.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=o.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=o.thatReturnsTrue)},persist:function(){this.isPersistent=o.thatReturnsTrue},isPersistent:o.thatReturnsFalse,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;for(t=0;t<Le.length;t++)this[Le[t]]=null}}),Ne.Interface=Re,Ne.augmentClass=function(e,t){function n(){}n.prototype=this.prototype;var r=new n;a(r,e.prototype),e.prototype=r,e.prototype.constructor=e,e.Interface=a({},this.Interface,t),e.augmentClass=this.augmentClass,De(e)},De(Ne),Ne.augmentClass(ze,{data:null}),Ne.augmentClass(je,{data:null});var Ue,Fe=[9,13,27,32],Be=i.canUseDOM&&"CompositionEvent"in window,He=null;if(i.canUseDOM&&"documentMode"in document&&(He=document.documentMode),Ue=i.canUseDOM&&"TextEvent"in window&&!He){var Ve=window.opera;Ue=!("object"==typeof Ve&&"function"==typeof Ve.version&&12>=parseInt(Ve.version(),10))}var Ge=Ue,We=i.canUseDOM&&(!Be||He&&8<He&&11>=He),qe=String.fromCharCode(32),Ye={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"topBlur topCompositionEnd topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"topBlur topCompositionStart topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"topBlur topCompositionUpdate topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")}},Xe=!1;function Je(e,t){switch(e){case"topKeyUp":return-1!==Fe.indexOf(t.keyCode);case"topKeyDown":return 229!==t.keyCode;case"topKeyPress":case"topMouseDown":case"topBlur":return!0;default:return!1}}function Ze(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Ke=!1;var Qe={eventTypes:Ye,extractEvents:function(e,t,n,r){var i;if(Be)e:{switch(e){case"topCompositionStart":var a=Ye.compositionStart;break e;case"topCompositionEnd":a=Ye.compositionEnd;break e;case"topCompositionUpdate":a=Ye.compositionUpdate;break e}a=void 0}else Ke?Je(e,n)&&(a=Ye.compositionEnd):"topKeyDown"===e&&229===n.keyCode&&(a=Ye.compositionStart);return a?(We&&(Ke||a!==Ye.compositionStart?a===Ye.compositionEnd&&Ke&&(i=Ae()):(Ce._root=r,Ce._startText=Oe(),Ke=!0)),a=ze.getPooled(a,t,n,r),i?a.data=i:null!==(i=Ze(n))&&(a.data=i),Me(a),i=a):i=null,(e=Ge?function(e,t){switch(e){case"topCompositionEnd":return Ze(t);case"topKeyPress":return 32!==t.which?null:(Xe=!0,qe);case"topTextInput":return(e=t.data)===qe&&Xe?null:e;default:return null}}(e,n):function(e,t){if(Ke)return"topCompositionEnd"===e||!Be&&Je(e,t)?(e=Ae(),Ce._root=null,Ce._startText=null,Ce._fallbackText=null,Ke=!1,e):null;switch(e){case"topPaste":return null;case"topKeyPress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"topCompositionEnd":return We?null:t.data;default:return null}}(e,n))?((t=je.getPooled(Ye.beforeInput,t,n,r)).data=e,Me(t)):t=null,[i,t]}},$e=null,et=null,tt=null;function nt(e){if(e=X(e)){$e&&"function"==typeof $e.restoreControlledState||d("194");var t=Y(e.stateNode);$e.restoreControlledState(e.stateNode,e.type,t)}}var rt={injectFiberControlledHostComponent:function(e){$e=e}};function it(e){et?tt?tt.push(e):tt=[e]:et=e}function at(){if(et){var e=et,t=tt;if(tt=et=null,nt(e),t)for(e=0;e<t.length;e++)nt(t[e])}}var ot=Object.freeze({injection:rt,enqueueStateRestore:it,restoreStateIfNeeded:at});function st(e,t){return e(t)}var ct=!1;function lt(e,t){if(ct)return st(e,t);ct=!0;try{return st(e,t)}finally{ct=!1,at()}}var ut,ht={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pt(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!ht[e.type]:"textarea"===t}function dt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function ft(e,t){if(!i.canUseDOM||t&&!("addEventListener"in document))return!1;var n=(t="on"+e)in document;return n||((n=document.createElement("div")).setAttribute(t,"return;"),n="function"==typeof n[t]),!n&&ut&&"wheel"===e&&(n=document.implementation.hasFeature("Events.wheel","3.0")),n}function mt(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function vt(e){e._valueTracker||(e._valueTracker=function(e){var t=mt(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"function"==typeof n.get&&"function"==typeof n.set)return Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:!0,get:function(){return n.get.call(this)},set:function(e){r=""+e,n.set.call(this,e)}}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}(e))}function gt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=mt(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}i.canUseDOM&&(ut=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("",""));var yt={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"topBlur topChange topClick topFocus topInput topKeyDown topKeyUp topSelectionChange".split(" ")}};function bt(e,t,n){return(e=Ne.getPooled(yt.change,e,t,n)).type="change",it(n),Me(e),e}var xt=null,wt=null;function _t(e){oe(e),se(!1)}function Mt(e){if(gt(de(e)))return e}function Et(e,t){if("topChange"===e)return t}var St=!1;function Tt(){xt&&(xt.detachEvent("onpropertychange",Pt),wt=xt=null)}function Pt(e){"value"===e.propertyName&&Mt(wt)&&lt(_t,e=bt(wt,e,dt(e)))}function Ct(e,t,n){"topFocus"===e?(Tt(),wt=n,(xt=t).attachEvent("onpropertychange",Pt)):"topBlur"===e&&Tt()}function At(e){if("topSelectionChange"===e||"topKeyUp"===e||"topKeyDown"===e)return Mt(wt)}function Ot(e,t){if("topClick"===e)return Mt(t)}function Lt(e,t){if("topInput"===e||"topChange"===e)return Mt(t)}i.canUseDOM&&(St=ft("input")&&(!document.documentMode||9<document.documentMode));var Rt={eventTypes:yt,_isInputEventSupported:St,extractEvents:function(e,t,n,r){var i=t?de(t):window,a=i.nodeName&&i.nodeName.toLowerCase();if("select"===a||"input"===a&&"file"===i.type)var o=Et;else if(pt(i))if(St)o=Lt;else{o=At;var s=Ct}else!(a=i.nodeName)||"input"!==a.toLowerCase()||"checkbox"!==i.type&&"radio"!==i.type||(o=Ot);if(o&&(o=o(e,t)))return bt(o,n,r);s&&s(e,i,t),"topBlur"===e&&null!=t&&(e=t._wrapperState||i._wrapperState)&&e.controlled&&"number"===i.type&&(e=""+i.value,i.getAttribute("value")!==e&&i.setAttribute("value",e))}};function Nt(e,t,n,r){return Ne.call(this,e,t,n,r)}Ne.augmentClass(Nt,{view:null,detail:null});var kt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function It(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kt[e])&&!!t[e]}function Dt(){return It}function zt(e,t,n,r){return Ne.call(this,e,t,n,r)}Nt.augmentClass(zt,{screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Dt,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)}});var jt={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}},Ut={eventTypes:jt,extractEvents:function(e,t,n,r){if("topMouseOver"===e&&(n.relatedTarget||n.fromElement)||"topMouseOut"!==e&&"topMouseOver"!==e)return null;var i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window;if("topMouseOut"===e?(e=t,t=(t=n.relatedTarget||n.toElement)?pe(t):null):e=null,e===t)return null;var a=null==e?i:de(e);i=null==t?i:de(t);var o=zt.getPooled(jt.mouseLeave,e,n,r);return o.type="mouseleave",o.target=a,o.relatedTarget=i,(n=zt.getPooled(jt.mouseEnter,t,n,r)).type="mouseenter",n.target=i,n.relatedTarget=a,Ee(o,n,e,t),[o,n]}},Ft=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner;function Bt(e){return"string"==typeof(e=e.type)?e:"function"==typeof e?e.displayName||e.name:null}function Ht(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!=(2&t.effectTag))return 1;for(;t.return;)if(0!=(2&(t=t.return).effectTag))return 1}return 3===t.tag?2:3}function Vt(e){return!!(e=e._reactInternalFiber)&&2===Ht(e)}function Gt(e){2!==Ht(e)&&d("188")}function Wt(e){var t=e.alternate;if(!t)return 3===(t=Ht(e))&&d("188"),1===t?null:e;for(var n=e,r=t;;){var i=n.return,a=i?i.alternate:null;if(!i||!a)break;if(i.child===a.child){for(var o=i.child;o;){if(o===n)return Gt(i),e;if(o===r)return Gt(i),t;o=o.sibling}d("188")}if(n.return!==r.return)n=i,r=a;else{o=!1;for(var s=i.child;s;){if(s===n){o=!0,n=i,r=a;break}if(s===r){o=!0,r=i,n=a;break}s=s.sibling}if(!o){for(s=a.child;s;){if(s===n){o=!0,n=a,r=i;break}if(s===r){o=!0,r=a,n=i;break}s=s.sibling}o||d("189")}}n.alternate!==r&&d("190")}return 3!==n.tag&&d("188"),n.stateNode.current===n?e:t}var qt=[];function Yt(e){var t=e.targetInst;do{if(!t){e.ancestors.push(t);break}var n;for(n=t;n.return;)n=n.return;if(!(n=3!==n.tag?null:n.stateNode.containerInfo))break;e.ancestors.push(t),t=pe(n)}while(t);for(n=0;n<e.ancestors.length;n++)t=e.ancestors[n],Jt(e.topLevelType,t,e.nativeEvent,dt(e.nativeEvent))}var Xt=!0,Jt=void 0;function Zt(e){Xt=!!e}function Kt(e,t,n){return n?s.listen(n,t,$t.bind(null,e)):null}function Qt(e,t,n){return n?s.capture(n,t,$t.bind(null,e)):null}function $t(e,t){if(Xt){var n=dt(t);if(null===(n=pe(n))||"number"!=typeof n.tag||2===Ht(n)||(n=null),qt.length){var r=qt.pop();r.topLevelType=e,r.nativeEvent=t,r.targetInst=n,e=r}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{lt(Yt,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>qt.length&&qt.push(e)}}}var en=Object.freeze({get _enabled(){return Xt},get _handleTopLevel(){return Jt},setHandleTopLevel:function(e){Jt=e},setEnabled:Zt,isEnabled:function(){return Xt},trapBubbledEvent:Kt,trapCapturedEvent:Qt,dispatchEvent:$t});function tn(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}var nn={animationend:tn("Animation","AnimationEnd"),animationiteration:tn("Animation","AnimationIteration"),animationstart:tn("Animation","AnimationStart"),transitionend:tn("Transition","TransitionEnd")},rn={},an={};function on(e){if(rn[e])return rn[e];if(!nn[e])return e;var t,n=nn[e];for(t in n)if(n.hasOwnProperty(t)&&t in an)return rn[e]=n[t];return""}i.canUseDOM&&(an=document.createElement("div").style,"AnimationEvent"in window||(delete nn.animationend.animation,delete nn.animationiteration.animation,delete nn.animationstart.animation),"TransitionEvent"in window||delete nn.transitionend.transition);var sn={topAbort:"abort",topAnimationEnd:on("animationend")||"animationend",topAnimationIteration:on("animationiteration")||"animationiteration",topAnimationStart:on("animationstart")||"animationstart",topBlur:"blur",topCancel:"cancel",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topClose:"close",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoad:"load",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topToggle:"toggle",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:on("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},cn={},ln=0,un="_reactListenersID"+(""+Math.random()).slice(2);function hn(e){return Object.prototype.hasOwnProperty.call(e,un)||(e[un]=ln++,cn[e[un]]={}),cn[e[un]]}function pn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dn(e,t){var n,r=pn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=pn(r)}}function fn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)}var mn=i.canUseDOM&&"documentMode"in document&&11>=document.documentMode,vn={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"topBlur topContextMenu topFocus topKeyDown topKeyUp topMouseDown topMouseUp topSelectionChange".split(" ")}},gn=null,yn=null,bn=null,xn=!1;function wn(e,t){if(xn||null==gn||gn!==c())return null;var n=gn;return"selectionStart"in n&&fn(n)?n={start:n.selectionStart,end:n.selectionEnd}:window.getSelection?n={anchorNode:(n=window.getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}:n=void 0,bn&&l(bn,n)?null:(bn=n,(e=Ne.getPooled(vn.select,yn,e,t)).type="select",e.target=gn,Me(e),e)}var _n={eventTypes:vn,extractEvents:function(e,t,n,r){var i,a=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!a)){e:{a=hn(a),i=V.onSelect;for(var o=0;o<i.length;o++){var s=i[o];if(!a.hasOwnProperty(s)||!a[s]){a=!1;break e}}a=!0}i=!a}if(i)return null;switch(a=t?de(t):window,e){case"topFocus":(pt(a)||"true"===a.contentEditable)&&(gn=a,yn=t,bn=null);break;case"topBlur":bn=yn=gn=null;break;case"topMouseDown":xn=!0;break;case"topContextMenu":case"topMouseUp":return xn=!1,wn(n,r);case"topSelectionChange":if(mn)break;case"topKeyDown":case"topKeyUp":return wn(n,r)}return null}};function Mn(e,t,n,r){return Ne.call(this,e,t,n,r)}function En(e,t,n,r){return Ne.call(this,e,t,n,r)}function Sn(e,t,n,r){return Ne.call(this,e,t,n,r)}function Tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,32<=e||13===e?e:0}Ne.augmentClass(Mn,{animationName:null,elapsedTime:null,pseudoElement:null}),Ne.augmentClass(En,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Nt.augmentClass(Sn,{relatedTarget:null});var Pn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};function An(e,t,n,r){return Ne.call(this,e,t,n,r)}function On(e,t,n,r){return Ne.call(this,e,t,n,r)}function Ln(e,t,n,r){return Ne.call(this,e,t,n,r)}function Rn(e,t,n,r){return Ne.call(this,e,t,n,r)}function Nn(e,t,n,r){return Ne.call(this,e,t,n,r)}Nt.augmentClass(An,{key:function(e){if(e.key){var t=Pn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Cn[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Dt,charCode:function(e){return"keypress"===e.type?Tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),zt.augmentClass(On,{dataTransfer:null}),Nt.augmentClass(Ln,{touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Dt}),Ne.augmentClass(Rn,{propertyName:null,elapsedTime:null,pseudoElement:null}),zt.augmentClass(Nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null});var kn={},In={};"abort animationEnd animationIteration animationStart blur cancel canPlay canPlayThrough click close contextMenu copy cut doubleClick drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error focus input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing progress rateChange reset scroll seeked seeking stalled submit suspend timeUpdate toggle touchCancel touchEnd touchMove touchStart transitionEnd volumeChange waiting wheel".split(" ").forEach(function(e){var t=e[0].toUpperCase()+e.slice(1),n="on"+t;n={phasedRegistrationNames:{bubbled:n,captured:n+"Capture"},dependencies:[t="top"+t]},kn[e]=n,In[t]=n});var Dn={eventTypes:kn,extractEvents:function(e,t,n,r){var i=In[e];if(!i)return null;switch(e){case"topKeyPress":if(0===Tn(n))return null;case"topKeyDown":case"topKeyUp":e=An;break;case"topBlur":case"topFocus":e=Sn;break;case"topClick":if(2===n.button)return null;case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":e=zt;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":e=On;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":e=Ln;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":e=Mn;break;case"topTransitionEnd":e=Rn;break;case"topScroll":e=Nt;break;case"topWheel":e=Nn;break;case"topCopy":case"topCut":case"topPaste":e=En;break;default:e=Ne}return Me(t=e.getPooled(i,t,n,r)),t}};Jt=function(e,t,n,r){oe(e=ae(e,t,n,r)),se(!1)},re.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin TapEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),Y=me.getFiberCurrentPropsFromNode,X=me.getInstanceFromNode,J=me.getNodeFromInstance,re.injectEventPluginsByName({SimpleEventPlugin:Dn,EnterLeaveEventPlugin:Ut,ChangeEventPlugin:Rt,SelectEventPlugin:_n,BeforeInputEventPlugin:Qe});var zn=[],jn=-1;function Un(e){0>jn||(e.current=zn[jn],zn[jn]=null,jn--)}function Fn(e,t){zn[++jn]=e.current,e.current=t}new Set;var Bn={current:p},Hn={current:!1},Vn=p;function Gn(e){return qn(e)?Vn:Bn.current}function Wn(e,t){var n=e.type.contextTypes;if(!n)return p;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function qn(e){return 2===e.tag&&null!=e.type.childContextTypes}function Yn(e){qn(e)&&(Un(Hn),Un(Bn))}function Xn(e,t,n){null!=Bn.cursor&&d("168"),Fn(Bn,t),Fn(Hn,n)}function Jn(e,t){var n=e.stateNode,r=e.type.childContextTypes;if("function"!=typeof n.getChildContext)return t;for(var i in n=n.getChildContext())i in r||d("108",Bt(e)||"Unknown",i);return a({},t,n)}function Zn(e){if(!qn(e))return!1;var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||p,Vn=Bn.current,Fn(Bn,t),Fn(Hn,Hn.current),!0}function Kn(e,t){var n=e.stateNode;if(n||d("169"),t){var r=Jn(e,Vn);n.__reactInternalMemoizedMergedChildContext=r,Un(Hn),Un(Bn),Fn(Bn,r)}else Un(Hn);Fn(Hn,t)}function Qn(e,t,n){this.tag=e,this.key=t,this.stateNode=this.type=null,this.sibling=this.child=this.return=null,this.index=0,this.memoizedState=this.updateQueue=this.memoizedProps=this.pendingProps=this.ref=null,this.internalContextTag=n,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.expirationTime=0,this.alternate=null}function $n(e,t,n){var r=e.alternate;return null===r?((r=new Qn(e.tag,e.key,e.internalContextTag)).type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.effectTag=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.expirationTime=n,r.pendingProps=t,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function er(e,t,n){var r=void 0,i=e.type,a=e.key;return"function"==typeof i?((r=i.prototype&&i.prototype.isReactComponent?new Qn(2,a,t):new Qn(0,a,t)).type=i,r.pendingProps=e.props):"string"==typeof i?((r=new Qn(5,a,t)).type=i,r.pendingProps=e.props):"object"==typeof i&&null!==i&&"number"==typeof i.tag?(r=i).pendingProps=e.props:d("130",null==i?i:typeof i,""),r.expirationTime=n,r}function tr(e,t,n,r){return(t=new Qn(10,r,t)).pendingProps=e,t.expirationTime=n,t}function nr(e,t,n){return(t=new Qn(6,null,t)).pendingProps=e,t.expirationTime=n,t}function rr(e,t,n){return(t=new Qn(7,e.key,t)).type=e.handler,t.pendingProps=e,t.expirationTime=n,t}function ir(e,t,n){return(e=new Qn(9,null,t)).expirationTime=n,e}function ar(e,t,n){return(t=new Qn(4,e.key,t)).pendingProps=e.children||[],t.expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var or=null,sr=null;function cr(e){return function(t){try{return e(t)}catch(e){}}}function lr(e){"function"==typeof or&&or(e)}function ur(e){"function"==typeof sr&&sr(e)}function hr(e){return{baseState:e,expirationTime:0,first:null,last:null,callbackList:null,hasForceUpdate:!1,isInitialized:!1}}function pr(e,t){null===e.last?e.first=e.last=t:(e.last.next=t,e.last=t),(0===e.expirationTime||e.expirationTime>t.expirationTime)&&(e.expirationTime=t.expirationTime)}function dr(e,t){var n=e.alternate,r=e.updateQueue;null===r&&(r=e.updateQueue=hr(null)),null!==n?null===(e=n.updateQueue)&&(e=n.updateQueue=hr(null)):e=null,null===(e=e!==r?e:null)?pr(r,t):null===r.last||null===e.last?(pr(r,t),pr(e,t)):(pr(r,t),e.last=t)}function fr(e,t,n,r){return"function"==typeof(e=e.partialState)?e.call(t,n,r):e}function mr(e,t,n,r,i,o){null!==e&&e.updateQueue===n&&(n=t.updateQueue={baseState:n.baseState,expirationTime:n.expirationTime,first:n.first,last:n.last,isInitialized:n.isInitialized,callbackList:null,hasForceUpdate:!1}),n.expirationTime=0,n.isInitialized?e=n.baseState:(e=n.baseState=t.memoizedState,n.isInitialized=!0);for(var s=!0,c=n.first,l=!1;null!==c;){var u=c.expirationTime;if(u>o){var h=n.expirationTime;(0===h||h>u)&&(n.expirationTime=u),l||(l=!0,n.baseState=e)}else l||(n.first=c.next,null===n.first&&(n.last=null)),c.isReplace?(e=fr(c,r,e,i),s=!0):(u=fr(c,r,e,i))&&(e=s?a({},e,u):a(e,u),s=!1),c.isForced&&(n.hasForceUpdate=!0),null!==c.callback&&(null===(u=n.callbackList)&&(u=n.callbackList=[]),u.push(c));c=c.next}return null!==n.callbackList?t.effectTag|=32:null!==n.first||n.hasForceUpdate||(t.updateQueue=null),l||(n.baseState=e),e}function vr(e,t){var n=e.callbackList;if(null!==n)for(e.callbackList=null,e=0;e<n.length;e++){var r=n[e],i=r.callback;r.callback=null,"function"!=typeof i&&d("191",i),i.call(t)}}var gr="function"==typeof Symbol&&Symbol.for,yr=gr?Symbol.for("react.element"):60103,br=gr?Symbol.for("react.call"):60104,xr=gr?Symbol.for("react.return"):60105,wr=gr?Symbol.for("react.portal"):60106,_r=gr?Symbol.for("react.fragment"):60107,Mr="function"==typeof Symbol&&Symbol.iterator;function Er(e){return null===e||void 0===e?null:"function"==typeof(e=Mr&&e[Mr]||e["@@iterator"])?e:null}var Sr=Array.isArray;function Tr(e,t){var n=t.ref;if(null!==n&&"function"!=typeof n){if(t._owner){var r=void 0;(t=t._owner)&&(2!==t.tag&&d("110"),r=t.stateNode),r||d("147",n);var i=""+n;return null!==e&&null!==e.ref&&e.ref._stringRef===i?e.ref:((e=function(e){var t=r.refs===p?r.refs={}:r.refs;null===e?delete t[i]:t[i]=e})._stringRef=i,e)}"string"!=typeof n&&d("148"),t._owner||d("149",n)}return n}function Pr(e,t){"textarea"!==e.type&&d("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function Cr(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t,n){return(e=$n(e,t,n)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.effectTag=2,n):r:(t.effectTag=2,n):n}function o(t){return e&&null===t.alternate&&(t.effectTag=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=nr(n,e.internalContextTag,r)).return=e,t):((t=i(t,n,r)).return=e,t)}function c(e,t,n,r){return null!==t&&t.type===n.type?((r=i(t,n.props,r)).ref=Tr(t,n),r.return=e,r):((r=er(n,e.internalContextTag,r)).ref=Tr(t,n),r.return=e,r)}function l(e,t,n,r){return null===t||7!==t.tag?((t=rr(n,e.internalContextTag,r)).return=e,t):((t=i(t,n,r)).return=e,t)}function u(e,t,n,r){return null===t||9!==t.tag?((t=ir(n,e.internalContextTag,r)).type=n.value,t.return=e,t):((t=i(t,null,r)).type=n.value,t.return=e,t)}function h(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=ar(n,e.internalContextTag,r)).return=e,t):((t=i(t,n.children||[],r)).return=e,t)}function p(e,t,n,r,a){return null===t||10!==t.tag?((t=tr(n,e.internalContextTag,r,a)).return=e,t):((t=i(t,n,r)).return=e,t)}function f(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=nr(""+t,e.internalContextTag,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case yr:return t.type===_r?((t=tr(t.props.children,e.internalContextTag,n,t.key)).return=e,t):((n=er(t,e.internalContextTag,n)).ref=Tr(null,t),n.return=e,n);case br:return(t=rr(t,e.internalContextTag,n)).return=e,t;case xr:return(n=ir(t,e.internalContextTag,n)).type=t.value,n.return=e,n;case wr:return(t=ar(t,e.internalContextTag,n)).return=e,t}if(Sr(t)||Er(t))return(t=tr(t,e.internalContextTag,n,null)).return=e,t;Pr(e,t)}return null}function m(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:s(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case yr:return n.key===i?n.type===_r?p(e,t,n.props.children,r,i):c(e,t,n,r):null;case br:return n.key===i?l(e,t,n,r):null;case xr:return null===i?u(e,t,n,r):null;case wr:return n.key===i?h(e,t,n,r):null}if(Sr(n)||Er(n))return null!==i?null:p(e,t,n,r,null);Pr(e,n)}return null}function v(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case yr:return e=e.get(null===r.key?n:r.key)||null,r.type===_r?p(t,e,r.props.children,i,r.key):c(t,e,r,i);case br:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case xr:return u(t,e=e.get(n)||null,r,i);case wr:return h(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(Sr(r)||Er(r))return p(t,e=e.get(n)||null,r,i,null);Pr(t,r)}return null}function g(i,o,s,c){for(var l=null,u=null,h=o,p=o=0,d=null;null!==h&&p<s.length;p++){h.index>p?(d=h,h=null):d=h.sibling;var g=m(i,h,s[p],c);if(null===g){null===h&&(h=d);break}e&&h&&null===g.alternate&&t(i,h),o=a(g,o,p),null===u?l=g:u.sibling=g,u=g,h=d}if(p===s.length)return n(i,h),l;if(null===h){for(;p<s.length;p++)(h=f(i,s[p],c))&&(o=a(h,o,p),null===u?l=h:u.sibling=h,u=h);return l}for(h=r(i,h);p<s.length;p++)(d=v(h,i,p,s[p],c))&&(e&&null!==d.alternate&&h.delete(null===d.key?p:d.key),o=a(d,o,p),null===u?l=d:u.sibling=d,u=d);return e&&h.forEach(function(e){return t(i,e)}),l}function y(i,o,s,c){var l=Er(s);"function"!=typeof l&&d("150"),null==(s=l.call(s))&&d("151");for(var u=l=null,h=o,p=o=0,g=null,y=s.next();null!==h&&!y.done;p++,y=s.next()){h.index>p?(g=h,h=null):g=h.sibling;var b=m(i,h,y.value,c);if(null===b){h||(h=g);break}e&&h&&null===b.alternate&&t(i,h),o=a(b,o,p),null===u?l=b:u.sibling=b,u=b,h=g}if(y.done)return n(i,h),l;if(null===h){for(;!y.done;p++,y=s.next())null!==(y=f(i,y.value,c))&&(o=a(y,o,p),null===u?l=y:u.sibling=y,u=y);return l}for(h=r(i,h);!y.done;p++,y=s.next())null!==(y=v(h,i,p,y.value,c))&&(e&&null!==y.alternate&&h.delete(null===y.key?p:y.key),o=a(y,o,p),null===u?l=y:u.sibling=y,u=y);return e&&h.forEach(function(e){return t(i,e)}),l}return function(e,r,a,s){"object"==typeof a&&null!==a&&a.type===_r&&null===a.key&&(a=a.props.children);var c="object"==typeof a&&null!==a;if(c)switch(a.$$typeof){case yr:e:{var l=a.key;for(c=r;null!==c;){if(c.key===l){if(10===c.tag?a.type===_r:c.type===a.type){n(e,c.sibling),(r=i(c,a.type===_r?a.props.children:a.props,s)).ref=Tr(c,a),r.return=e,e=r;break e}n(e,c);break}t(e,c),c=c.sibling}a.type===_r?((r=tr(a.props.children,e.internalContextTag,s,a.key)).return=e,e=r):((s=er(a,e.internalContextTag,s)).ref=Tr(r,a),s.return=e,e=s)}return o(e);case br:e:{for(c=a.key;null!==r;){if(r.key===c){if(7===r.tag){n(e,r.sibling),(r=i(r,a,s)).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=rr(a,e.internalContextTag,s)).return=e,e=r}return o(e);case xr:e:{if(null!==r){if(9===r.tag){n(e,r.sibling),(r=i(r,null,s)).type=a.value,r.return=e,e=r;break e}n(e,r)}(r=ir(a,e.internalContextTag,s)).type=a.value,r.return=e,e=r}return o(e);case wr:e:{for(c=a.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===a.containerInfo&&r.stateNode.implementation===a.implementation){n(e,r.sibling),(r=i(r,a.children||[],s)).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=ar(a,e.internalContextTag,s)).return=e,e=r}return o(e)}if("string"==typeof a||"number"==typeof a)return a=""+a,null!==r&&6===r.tag?(n(e,r.sibling),r=i(r,a,s)):(n(e,r),r=nr(a,e.internalContextTag,s)),r.return=e,o(e=r);if(Sr(a))return g(e,r,a,s);if(Er(a))return y(e,r,a,s);if(c&&Pr(e,a),void 0===a)switch(e.tag){case 2:case 1:d("152",(s=e.type).displayName||s.name||"Component")}return n(e,r)}}var Ar=Cr(!0),Or=Cr(!1);function Lr(e,t,n,r,i){function a(e,t,n){var r=t.expirationTime;t.child=null===e?Or(t,null,n,r):Ar(t,e.child,n,r)}function o(e,t){var n=t.ref;null===n||e&&e.ref===n||(t.effectTag|=128)}function s(e,t,n,r){if(o(e,t),!n)return r&&Kn(t,!1),u(e,t);n=t.stateNode,Ft.current=t;var i=n.render();return t.effectTag|=1,a(e,t,i),t.memoizedState=n.state,t.memoizedProps=n.props,r&&Kn(t,!0),t.child}function c(e){var t=e.stateNode;t.pendingContext?Xn(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Xn(0,t.context,!1),y(e,t.containerInfo)}function u(e,t){if(null!==e&&t.child!==e.child&&d("153"),null!==t.child){var n=$n(e=t.child,e.pendingProps,e.expirationTime);for(t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=$n(e,e.pendingProps,e.expirationTime)).return=t;n.sibling=null}return t.child}function h(e,t){switch(t.tag){case 3:c(t);break;case 2:Zn(t);break;case 4:y(t,t.stateNode.containerInfo)}return null}var f=e.shouldSetTextContent,m=e.useSyncScheduling,v=e.shouldDeprioritizeSubtree,g=t.pushHostContext,y=t.pushHostContainer,b=n.enterHydrationState,x=n.resetHydrationState,w=n.tryToClaimNextHydratableInstance,_=(e=function(e,t,n,r){function i(e,t){t.updater=a,e.stateNode=t,t._reactInternalFiber=e}var a={isMounted:Vt,enqueueSetState:function(n,r,i){n=n._reactInternalFiber,i=void 0===i?null:i;var a=t(n);dr(n,{expirationTime:a,partialState:r,callback:i,isReplace:!1,isForced:!1,nextCallback:null,next:null}),e(n,a)},enqueueReplaceState:function(n,r,i){n=n._reactInternalFiber,i=void 0===i?null:i;var a=t(n);dr(n,{expirationTime:a,partialState:r,callback:i,isReplace:!0,isForced:!1,nextCallback:null,next:null}),e(n,a)},enqueueForceUpdate:function(n,r){n=n._reactInternalFiber,r=void 0===r?null:r;var i=t(n);dr(n,{expirationTime:i,partialState:null,callback:r,isReplace:!1,isForced:!0,nextCallback:null,next:null}),e(n,i)}};return{adoptClassInstance:i,constructClassInstance:function(e,t){var n=e.type,r=Gn(e),a=2===e.tag&&null!=e.type.contextTypes,o=a?Wn(e,r):p;return i(e,t=new n(t,o)),a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=o),t},mountClassInstance:function(e,t){var n=e.alternate,r=e.stateNode,i=r.state||null,o=e.pendingProps;o||d("158");var s=Gn(e);r.props=o,r.state=e.memoizedState=i,r.refs=p,r.context=Wn(e,s),null!=e.type&&null!=e.type.prototype&&!0===e.type.prototype.unstable_isAsyncReactComponent&&(e.internalContextTag|=1),"function"==typeof r.componentWillMount&&(i=r.state,r.componentWillMount(),i!==r.state&&a.enqueueReplaceState(r,r.state,null),null!==(i=e.updateQueue)&&(r.state=mr(n,e,i,r,o,t))),"function"==typeof r.componentDidMount&&(e.effectTag|=4)},updateClassInstance:function(e,t,i){var o=t.stateNode;o.props=t.memoizedProps,o.state=t.memoizedState;var s=t.memoizedProps,c=t.pendingProps;c||null==(c=s)&&d("159");var u=o.context,h=Gn(t);if(h=Wn(t,h),"function"!=typeof o.componentWillReceiveProps||s===c&&u===h||(u=o.state,o.componentWillReceiveProps(c,h),o.state!==u&&a.enqueueReplaceState(o,o.state,null)),u=t.memoizedState,i=null!==t.updateQueue?mr(e,t,t.updateQueue,o,c,i):u,!(s!==c||u!==i||Hn.current||null!==t.updateQueue&&t.updateQueue.hasForceUpdate))return"function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),!1;var p=c;if(null===s||null!==t.updateQueue&&t.updateQueue.hasForceUpdate)p=!0;else{var f=t.stateNode,m=t.type;p="function"==typeof f.shouldComponentUpdate?f.shouldComponentUpdate(p,i,h):!(m.prototype&&m.prototype.isPureReactComponent&&l(s,p)&&l(u,i))}return p?("function"==typeof o.componentWillUpdate&&o.componentWillUpdate(c,i,h),"function"==typeof o.componentDidUpdate&&(t.effectTag|=4)):("function"!=typeof o.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),n(t,c),r(t,i)),o.props=c,o.state=i,o.context=h,p}}}(r,i,function(e,t){e.memoizedProps=t},function(e,t){e.memoizedState=t})).adoptClassInstance,M=e.constructClassInstance,E=e.mountClassInstance,S=e.updateClassInstance;return{beginWork:function(e,t,n){if(0===t.expirationTime||t.expirationTime>n)return h(0,t);switch(t.tag){case 0:null!==e&&d("155");var r=t.type,i=t.pendingProps,l=Gn(t);return r=r(i,l=Wn(t,l)),t.effectTag|=1,"object"==typeof r&&null!==r&&"function"==typeof r.render?(t.tag=2,i=Zn(t),_(t,r),E(t,n),t=s(e,t,!0,i)):(t.tag=1,a(e,t,r),t.memoizedProps=i,t=t.child),t;case 1:e:{if(i=t.type,n=t.pendingProps,r=t.memoizedProps,Hn.current)null===n&&(n=r);else if(null===n||r===n){t=u(e,t);break e}i=i(n,r=Wn(t,r=Gn(t))),t.effectTag|=1,a(e,t,i),t.memoizedProps=n,t=t.child}return t;case 2:return i=Zn(t),r=void 0,null===e?t.stateNode?d("153"):(M(t,t.pendingProps),E(t,n),r=!0):r=S(e,t,n),s(e,t,r,i);case 3:return c(t),null!==(i=t.updateQueue)?(r=t.memoizedState)===(i=mr(e,t,i,null,null,n))?(x(),t=u(e,t)):(r=i.element,l=t.stateNode,(null===e||null===e.child)&&l.hydrate&&b(t)?(t.effectTag|=2,t.child=Or(t,null,r,n)):(x(),a(e,t,r)),t.memoizedState=i,t=t.child):(x(),t=u(e,t)),t;case 5:g(t),null===e&&w(t),i=t.type;var p=t.memoizedProps;return null===(r=t.pendingProps)&&(null===(r=p)&&d("154")),l=null!==e?e.memoizedProps:null,Hn.current||null!==r&&p!==r?(p=r.children,f(i,r)?p=null:l&&f(i,l)&&(t.effectTag|=16),o(e,t),2147483647!==n&&!m&&v(i,r)?(t.expirationTime=2147483647,t=null):(a(e,t,p),t.memoizedProps=r,t=t.child)):t=u(e,t),t;case 6:return null===e&&w(t),null===(e=t.pendingProps)&&(e=t.memoizedProps),t.memoizedProps=e,null;case 8:t.tag=7;case 7:return i=t.pendingProps,Hn.current?null===i&&(null===(i=e&&e.memoizedProps)&&d("154")):null!==i&&t.memoizedProps!==i||(i=t.memoizedProps),r=i.children,t.stateNode=null===e?Or(t,t.stateNode,r,n):Ar(t,t.stateNode,r,n),t.memoizedProps=i,t.stateNode;case 9:return null;case 4:e:{if(y(t,t.stateNode.containerInfo),i=t.pendingProps,Hn.current)null===i&&(null==(i=e&&e.memoizedProps)&&d("154"));else if(null===i||t.memoizedProps===i){t=u(e,t);break e}null===e?t.child=Ar(t,null,i,n):a(e,t,i),t.memoizedProps=i,t=t.child}return t;case 10:e:{if(n=t.pendingProps,Hn.current)null===n&&(n=t.memoizedProps);else if(null===n||t.memoizedProps===n){t=u(e,t);break e}a(e,t,n),t.memoizedProps=n,t=t.child}return t;default:d("156")}},beginFailedWork:function(e,t,n){switch(t.tag){case 2:Zn(t);break;case 3:c(t);break;default:d("157")}return t.effectTag|=64,null===e?t.child=null:t.child!==e.child&&(t.child=e.child),0===t.expirationTime||t.expirationTime>n?h(0,t):(t.firstEffect=null,t.lastEffect=null,t.child=null===e?Or(t,null,null,n):Ar(t,e.child,null,n),2===t.tag&&(e=t.stateNode,t.memoizedProps=e.props,t.memoizedState=e.state),t.child)}}}var Rr={};function Nr(e){function t(e){oe=Z=!0;var t=e.stateNode;if(t.current===e&&d("177"),t.isReadyForCommit=!1,Ft.current=null,1<e.effectTag)if(null!==e.lastEffect){e.lastEffect.nextEffect=e;var n=e.firstEffect}else n=e;else n=e.firstEffect;for(W(),ee=n;null!==ee;){var r=!1,i=void 0;try{for(;null!==ee;){var a=ee.effectTag;if(16&a&&k(ee),128&a){var o=ee.alternate;null!==o&&F(o)}switch(-242&a){case 2:I(ee),ee.effectTag&=-3;break;case 6:I(ee),ee.effectTag&=-3,z(ee.alternate,ee);break;case 4:z(ee.alternate,ee);break;case 8:se=!0,D(ee),se=!1}ee=ee.nextEffect}}catch(e){r=!0,i=e}r&&(null===ee&&d("178"),s(ee,i),null!==ee&&(ee=ee.nextEffect))}for(q(),t.current=e,ee=n;null!==ee;){n=!1,r=void 0;try{for(;null!==ee;){var c=ee.effectTag;if(36&c&&j(ee.alternate,ee),128&c&&U(ee),64&c)switch(i=ee,a=void 0,null!==te&&(a=te.get(i),te.delete(i),null==a&&null!==i.alternate&&(i=i.alternate,a=te.get(i),te.delete(i))),null==a&&d("184"),i.tag){case 2:i.stateNode.componentDidCatch(a.error,{componentStack:a.componentStack});break;case 3:null===ie&&(ie=a.error);break;default:d("157")}var l=ee.nextEffect;ee.nextEffect=null,ee=l}}catch(e){n=!0,r=e}n&&(null===ee&&d("178"),s(ee,r),null!==ee&&(ee=ee.nextEffect))}return Z=oe=!1,lr(e.stateNode),re&&(re.forEach(v),re=null),null!==ie&&(e=ie,ie=null,E(e)),0===(t=t.current.expirationTime)&&(ne=te=null),t}function n(e){for(;;){var t=N(e.alternate,e,$),n=e.return,r=e.sibling,i=e;if(2147483647===$||2147483647!==i.expirationTime){if(2!==i.tag&&3!==i.tag)var a=0;else a=null===(a=i.updateQueue)?0:a.expirationTime;for(var o=i.child;null!==o;)0!==o.expirationTime&&(0===a||a>o.expirationTime)&&(a=o.expirationTime),o=o.sibling;i.expirationTime=a}if(null!==t)return t;if(null!==n&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e)),null!==r)return r;if(null===n){e.stateNode.isReadyForCommit=!0;break}e=n}return null}function r(e){var t=L(e.alternate,e,$);return null===t&&(t=n(e)),Ft.current=null,t}function i(e){var t=R(e.alternate,e,$);return null===t&&(t=n(e)),Ft.current=null,t}function a(e){if(null!==te){if(!(0===$||$>e))if($<=X)for(;null!==K;)K=c(K)?i(K):r(K);else for(;null!==K&&!M();)K=c(K)?i(K):r(K)}else if(!(0===$||$>e))if($<=X)for(;null!==K;)K=r(K);else for(;null!==K&&!M();)K=r(K)}function o(e,t){if(Z&&d("243"),Z=!0,e.isReadyForCommit=!1,e!==Q||t!==$||null===K){for(;-1<jn;)zn[jn]=null,jn--;Vn=p,Bn.current=p,Hn.current=!1,A(),$=t,K=$n((Q=e).current,null,t)}var n=!1,r=null;try{a(t)}catch(e){n=!0,r=e}for(;n;){if(ae){ie=r;break}var o=K;if(null===o)ae=!0;else{var c=s(o,r);if(null===c&&d("183"),!ae){try{for(r=t,c=n=c;null!==o;){switch(o.tag){case 2:Yn(o);break;case 5:C(o);break;case 3:P(o);break;case 4:P(o)}if(o===c||o.alternate===c)break;o=o.return}K=i(n),a(r)}catch(e){n=!0,r=e;continue}break}}}return t=ie,ae=Z=!1,ie=null,null!==t&&E(t),e.isReadyForCommit?e.current.alternate:null}function s(e,t){var n=Ft.current=null,r=!1,i=!1,a=null;if(3===e.tag)n=e,l(e)&&(ae=!0);else for(var o=e.return;null!==o&&null===n;){if(2===o.tag?"function"==typeof o.stateNode.componentDidCatch&&(r=!0,a=Bt(o),n=o,i=!0):3===o.tag&&(n=o),l(o)){if(se||null!==re&&(re.has(o)||null!==o.alternate&&re.has(o.alternate)))return null;n=null,i=!1}o=o.return}if(null!==n){null===ne&&(ne=new Set),ne.add(n);var s="";o=e;do{e:switch(o.tag){case 0:case 1:case 2:case 5:var c=o._debugOwner,u=o._debugSource,h=Bt(o),p=null;c&&(p=Bt(c)),c=u,h="\n    in "+(h||"Unknown")+(c?" (at "+c.fileName.replace(/^.*[\\\/]/,"")+":"+c.lineNumber+")":p?" (created by "+p+")":"");break e;default:h=""}s+=h,o=o.return}while(o);o=s,e=Bt(e),null===te&&(te=new Map),t={componentName:e,componentStack:o,error:t,errorBoundary:r?n.stateNode:null,errorBoundaryFound:r,errorBoundaryName:a,willRetry:i},te.set(n,t);try{var d=t.error;d&&d.suppressReactErrorLogging||console.error(d)}catch(e){e&&e.suppressReactErrorLogging||console.error(e)}return oe?(null===re&&(re=new Set),re.add(n)):v(n),n}return null===ie&&(ie=t),null}function c(e){return null!==te&&(te.has(e)||null!==e.alternate&&te.has(e.alternate))}function l(e){return null!==ne&&(ne.has(e)||null!==e.alternate&&ne.has(e.alternate))}function u(){return 20*(1+((g()+100)/20|0))}function h(e){return 0!==J?J:Z?oe?1:$:!G||1&e.internalContextTag?u():1}function f(e,t){return m(e,t)}function m(e,t){for(;null!==e;){if((0===e.expirationTime||e.expirationTime>t)&&(e.expirationTime=t),null!==e.alternate&&(0===e.alternate.expirationTime||e.alternate.expirationTime>t)&&(e.alternate.expirationTime=t),null===e.return){if(3!==e.tag)break;var n=e.stateNode;!Z&&n===Q&&t<$&&(K=Q=null,$=0);var r=n,i=t;if(_e>we&&d("185"),null===r.nextScheduledRoot)r.remainingExpirationTime=i,null===le?(ce=le=r,r.nextScheduledRoot=r):(le=le.nextScheduledRoot=r).nextScheduledRoot=ce;else{var a=r.remainingExpirationTime;(0===a||i<a)&&(r.remainingExpirationTime=i)}pe||(be?xe&&_(de=r,fe=1):1===i?w(1,null):y(i)),!Z&&n===Q&&t<$&&(K=Q=null,$=0)}e=e.return}}function v(e){m(e,1)}function g(){return X=2+((B()-Y)/10|0)}function y(e){if(0!==ue){if(e>ue)return;V(he)}var t=B()-Y;ue=e,he=H(x,{timeout:10*(e-2)-t})}function b(){var e=0,t=null;if(null!==le)for(var n=le,r=ce;null!==r;){var i=r.remainingExpirationTime;if(0===i){if((null===n||null===le)&&d("244"),r===r.nextScheduledRoot){ce=le=r.nextScheduledRoot=null;break}if(r===ce)ce=i=r.nextScheduledRoot,le.nextScheduledRoot=i,r.nextScheduledRoot=null;else{if(r===le){(le=n).nextScheduledRoot=ce,r.nextScheduledRoot=null;break}n.nextScheduledRoot=r.nextScheduledRoot,r.nextScheduledRoot=null}r=n.nextScheduledRoot}else{if((0===e||i<e)&&(e=i,t=r),r===le)break;n=r,r=r.nextScheduledRoot}}null!==(n=de)&&n===t?_e++:_e=0,de=t,fe=e}function x(e){w(0,e)}function w(e,t){for(ye=t,b();null!==de&&0!==fe&&(0===e||fe<=e)&&!me;)_(de,fe),b();if(null!==ye&&(ue=0,he=-1),0!==fe&&y(fe),ye=null,me=!1,_e=0,ve)throw e=ge,ge=null,ve=!1,e}function _(e,n){if(pe&&d("245"),pe=!0,n<=g()){var r=e.finishedWork;null!==r?(e.finishedWork=null,e.remainingExpirationTime=t(r)):(e.finishedWork=null,null!==(r=o(e,n))&&(e.remainingExpirationTime=t(r)))}else null!==(r=e.finishedWork)?(e.finishedWork=null,e.remainingExpirationTime=t(r)):(e.finishedWork=null,null!==(r=o(e,n))&&(M()?e.finishedWork=r:e.remainingExpirationTime=t(r)));pe=!1}function M(){return!(null===ye||ye.timeRemaining()>Me)&&(me=!0)}function E(e){null===de&&d("246"),de.remainingExpirationTime=0,ve||(ve=!0,ge=e)}var S=function(e){function t(e){return e===Rr&&d("174"),e}var n=e.getChildHostContext,r=e.getRootHostContext,i={current:Rr},a={current:Rr},o={current:Rr};return{getHostContext:function(){return t(i.current)},getRootHostContainer:function(){return t(o.current)},popHostContainer:function(e){Un(i),Un(a),Un(o)},popHostContext:function(e){a.current===e&&(Un(i),Un(a))},pushHostContainer:function(e,t){Fn(o,t),t=r(t),Fn(a,e),Fn(i,t)},pushHostContext:function(e){var r=t(o.current),s=t(i.current);s!==(r=n(s,e.type,r))&&(Fn(a,e),Fn(i,r))},resetHostContainer:function(){i.current=Rr,o.current=Rr}}}(e),T=function(e){function t(e,t){var n=new Qn(5,null,0);n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function n(e,t){switch(e.tag){case 5:return null!==(t=a(t,e.type,e.pendingProps))&&(e.stateNode=t,!0);case 6:return null!==(t=o(t,e.pendingProps))&&(e.stateNode=t,!0);default:return!1}}function r(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag;)e=e.return;h=e}var i=e.shouldSetTextContent;if(!(e=e.hydration))return{enterHydrationState:function(){return!1},resetHydrationState:function(){},tryToClaimNextHydratableInstance:function(){},prepareToHydrateHostInstance:function(){d("175")},prepareToHydrateHostTextInstance:function(){d("176")},popHydrationState:function(){return!1}};var a=e.canHydrateInstance,o=e.canHydrateTextInstance,s=e.getNextHydratableSibling,c=e.getFirstHydratableChild,l=e.hydrateInstance,u=e.hydrateTextInstance,h=null,p=null,f=!1;return{enterHydrationState:function(e){return p=c(e.stateNode.containerInfo),h=e,f=!0},resetHydrationState:function(){p=h=null,f=!1},tryToClaimNextHydratableInstance:function(e){if(f){var r=p;if(r){if(!n(e,r)){if(!(r=s(r))||!n(e,r))return e.effectTag|=2,f=!1,void(h=e);t(h,p)}h=e,p=c(r)}else e.effectTag|=2,f=!1,h=e}},prepareToHydrateHostInstance:function(e,t,n){return t=l(e.stateNode,e.type,e.memoizedProps,t,n,e),e.updateQueue=t,null!==t},prepareToHydrateHostTextInstance:function(e){return u(e.stateNode,e.memoizedProps,e)},popHydrationState:function(e){if(e!==h)return!1;if(!f)return r(e),f=!0,!1;var n=e.type;if(5!==e.tag||"head"!==n&&"body"!==n&&!i(n,e.memoizedProps))for(n=p;n;)t(e,n),n=s(n);return r(e),p=h?s(e.stateNode):null,!0}}}(e),P=S.popHostContainer,C=S.popHostContext,A=S.resetHostContainer,O=Lr(e,S,T,f,h),L=O.beginWork,R=O.beginFailedWork,N=function(e,t,n){function r(e){e.effectTag|=4}var i=e.createInstance,a=e.createTextInstance,o=e.appendInitialChild,s=e.finalizeInitialChildren,c=e.prepareUpdate,l=e.persistence,u=t.getRootHostContainer,h=t.popHostContext,p=t.getHostContext,f=t.popHostContainer,m=n.prepareToHydrateHostInstance,v=n.prepareToHydrateHostTextInstance,g=n.popHydrationState,y=void 0,b=void 0,x=void 0;return e.mutation?(y=function(){},b=function(e,t,n){(t.updateQueue=n)&&r(t)},x=function(e,t,n,i){n!==i&&r(t)}):d(l?"235":"236"),{completeWork:function(e,t,n){var l=t.pendingProps;switch(null===l?l=t.memoizedProps:2147483647===t.expirationTime&&2147483647!==n||(t.pendingProps=null),t.tag){case 1:return null;case 2:return Yn(t),null;case 3:return f(t),Un(Hn),Un(Bn),(l=t.stateNode).pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),null!==e&&null!==e.child||(g(t),t.effectTag&=-3),y(t),null;case 5:h(t),n=u();var w=t.type;if(null!==e&&null!=t.stateNode){var _=e.memoizedProps,M=t.stateNode,E=p();M=c(M,w,_,l,n,E),b(e,t,M,w,_,l,n),e.ref!==t.ref&&(t.effectTag|=128)}else{if(!l)return null===t.stateNode&&d("166"),null;if(e=p(),g(t))m(t,n,e)&&r(t);else{e=i(w,l,n,e,t);e:for(_=t.child;null!==_;){if(5===_.tag||6===_.tag)o(e,_.stateNode);else if(4!==_.tag&&null!==_.child){_.child.return=_,_=_.child;continue}if(_===t)break;for(;null===_.sibling;){if(null===_.return||_.return===t)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}s(e,w,l,n)&&r(t),t.stateNode=e}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)x(e,t,e.memoizedProps,l);else{if("string"!=typeof l)return null===t.stateNode&&d("166"),null;e=u(),n=p(),g(t)?v(t)&&r(t):t.stateNode=a(l,e,n,t)}return null;case 7:(l=t.memoizedProps)||d("165"),t.tag=8,w=[];e:for((_=t.stateNode)&&(_.return=t);null!==_;){if(5===_.tag||6===_.tag||4===_.tag)d("247");else if(9===_.tag)w.push(_.type);else if(null!==_.child){_.child.return=_,_=_.child;continue}for(;null===_.sibling;){if(null===_.return||_.return===t)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}return l=(_=l.handler)(l.props,w),t.child=Ar(t,null!==e?e.child:null,l,n),t.child;case 8:return t.tag=7,null;case 9:case 10:return null;case 4:return f(t),y(t),null;case 0:d("167");default:d("156")}}}}(e,S,T).completeWork,k=(S=function(e,t){function n(e){var n=e.ref;if(null!==n)try{n(null)}catch(n){t(e,n)}}function r(e){switch(ur(e),e.tag){case 2:n(e);var r=e.stateNode;if("function"==typeof r.componentWillUnmount)try{r.props=e.memoizedProps,r.state=e.memoizedState,r.componentWillUnmount()}catch(n){t(e,n)}break;case 5:n(e);break;case 7:i(e.stateNode);break;case 4:c&&o(e)}}function i(e){for(var t=e;;)if(r(t),null===t.child||c&&4===t.tag){if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}else t.child.return=t,t=t.child}function a(e){return 5===e.tag||3===e.tag||4===e.tag}function o(e){for(var t=e,n=!1,a=void 0,o=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&d("160"),n.tag){case 5:a=n.stateNode,o=!1;break e;case 3:case 4:a=n.stateNode.containerInfo,o=!0;break e}n=n.return}n=!0}if(5===t.tag||6===t.tag)i(t),o?b(a,t.stateNode):y(a,t.stateNode);else if(4===t.tag?a=t.stateNode.containerInfo:r(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;4===(t=t.return).tag&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}var s=e.getPublicInstance,c=e.mutation;e=e.persistence,c||d(e?"235":"236");var l=c.commitMount,u=c.commitUpdate,h=c.resetTextContent,p=c.commitTextUpdate,f=c.appendChild,m=c.appendChildToContainer,v=c.insertBefore,g=c.insertInContainerBefore,y=c.removeChild,b=c.removeChildFromContainer;return{commitResetTextContent:function(e){h(e.stateNode)},commitPlacement:function(e){e:{for(var t=e.return;null!==t;){if(a(t)){var n=t;break e}t=t.return}d("160"),n=void 0}var r=t=void 0;switch(n.tag){case 5:t=n.stateNode,r=!1;break;case 3:case 4:t=n.stateNode.containerInfo,r=!0;break;default:d("161")}16&n.effectTag&&(h(t),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||a(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var i=e;;){if(5===i.tag||6===i.tag)n?r?g(t,i.stateNode,n):v(t,i.stateNode,n):r?m(t,i.stateNode):f(t,i.stateNode);else if(4!==i.tag&&null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},commitDeletion:function(e){o(e),e.return=null,e.child=null,e.alternate&&(e.alternate.child=null,e.alternate.return=null)},commitWork:function(e,t){switch(t.tag){case 2:break;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var i=t.type,a=t.updateQueue;t.updateQueue=null,null!==a&&u(n,a,i,e,r,t)}break;case 6:null===t.stateNode&&d("162"),n=t.memoizedProps,p(t.stateNode,null!==e?e.memoizedProps:n,n);break;case 3:break;default:d("163")}},commitLifeCycles:function(e,t){switch(t.tag){case 2:var n=t.stateNode;if(4&t.effectTag)if(null===e)n.props=t.memoizedProps,n.state=t.memoizedState,n.componentDidMount();else{var r=e.memoizedProps;e=e.memoizedState,n.props=t.memoizedProps,n.state=t.memoizedState,n.componentDidUpdate(r,e)}null!==(t=t.updateQueue)&&vr(t,n);break;case 3:null!==(n=t.updateQueue)&&vr(n,null!==t.child?t.child.stateNode:null);break;case 5:n=t.stateNode,null===e&&4&t.effectTag&&l(n,t.type,t.memoizedProps,t);break;case 6:case 4:break;default:d("163")}},commitAttachRef:function(e){var t=e.ref;if(null!==t){var n=e.stateNode;switch(e.tag){case 5:t(s(n));break;default:t(n)}}},commitDetachRef:function(e){null!==(e=e.ref)&&e(null)}}}(e,s)).commitResetTextContent,I=S.commitPlacement,D=S.commitDeletion,z=S.commitWork,j=S.commitLifeCycles,U=S.commitAttachRef,F=S.commitDetachRef,B=e.now,H=e.scheduleDeferredCallback,V=e.cancelDeferredCallback,G=e.useSyncScheduling,W=e.prepareForCommit,q=e.resetAfterCommit,Y=B(),X=2,J=0,Z=!1,K=null,Q=null,$=0,ee=null,te=null,ne=null,re=null,ie=null,ae=!1,oe=!1,se=!1,ce=null,le=null,ue=0,he=-1,pe=!1,de=null,fe=0,me=!1,ve=!1,ge=null,ye=null,be=!1,xe=!1,we=1e3,_e=0,Me=1;return{computeAsyncExpiration:u,computeExpirationForFiber:h,scheduleWork:f,batchedUpdates:function(e,t){var n=be;be=!0;try{return e(t)}finally{(be=n)||pe||w(1,null)}},unbatchedUpdates:function(e){if(be&&!xe){xe=!0;try{return e()}finally{xe=!1}}return e()},flushSync:function(e){var t=be;be=!0;try{e:{var n=J;J=1;try{var r=e();break e}finally{J=n}r=void 0}return r}finally{be=t,pe&&d("187"),w(1,null)}},deferredUpdates:function(e){var t=J;J=u();try{return e()}finally{J=t}}}}function kr(e){function t(e){return null===(e=function(e){if(!(e=Wt(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}(e))?null:e.stateNode}var n=e.getPublicInstance,r=(e=Nr(e)).computeAsyncExpiration,i=e.computeExpirationForFiber,o=e.scheduleWork;return{createContainer:function(e,t){var n=new Qn(3,null,0);return e={current:n,containerInfo:e,pendingChildren:null,remainingExpirationTime:0,isReadyForCommit:!1,finishedWork:null,context:null,pendingContext:null,hydrate:t,nextScheduledRoot:null},n.stateNode=e},updateContainer:function(e,t,n,a){var s=t.current;if(n){var c;n=n._reactInternalFiber;e:{for(2===Ht(n)&&2===n.tag||d("170"),c=n;3!==c.tag;){if(qn(c)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}(c=c.return)||d("171")}c=c.stateNode.context}n=qn(n)?Jn(n,c):c}else n=p;null===t.context?t.context=n:t.pendingContext=n,t=void 0===(t=a)?null:t,dr(s,{expirationTime:a=null!=e&&null!=e.type&&null!=e.type.prototype&&!0===e.type.prototype.unstable_isAsyncReactComponent?r():i(s),partialState:{element:e},callback:t,isReplace:!1,isForced:!1,nextCallback:null,next:null}),o(s,a)},batchedUpdates:e.batchedUpdates,unbatchedUpdates:e.unbatchedUpdates,deferredUpdates:e.deferredUpdates,flushSync:e.flushSync,getPublicRootInstance:function(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:return n(e.child.stateNode);default:return e.child.stateNode}},findHostInstance:t,findHostInstanceWithNoPortals:function(e){return null===(e=function(e){if(!(e=Wt(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child&&4!==t.tag)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}(e))?null:e.stateNode},injectIntoDevTools:function(e){var n=e.findFiberByHostInstance;return function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);or=cr(function(e){return t.onCommitFiberRoot(n,e)}),sr=cr(function(e){return t.onCommitFiberUnmount(n,e)})}catch(e){}return!0}(a({},e,{findHostInstanceByFiber:function(e){return t(e)},findFiberByHostInstance:function(e){return n?n(e):null}}))}}}var Ir=Object.freeze({default:kr}),Dr=Ir&&kr||Ir,zr=Dr.default?Dr.default:Dr;var jr="object"==typeof performance&&"function"==typeof performance.now,Ur=void 0;Ur=jr?function(){return performance.now()}:function(){return Date.now()};var Fr=void 0,Br=void 0;if(i.canUseDOM)if("function"!=typeof requestIdleCallback||"function"!=typeof cancelIdleCallback){var Hr,Vr=null,Gr=!1,Wr=-1,qr=!1,Yr=0,Xr=33,Jr=33;Hr=jr?{didTimeout:!1,timeRemaining:function(){var e=Yr-performance.now();return 0<e?e:0}}:{didTimeout:!1,timeRemaining:function(){var e=Yr-Date.now();return 0<e?e:0}};var Zr="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function(e){if(e.source===window&&e.data===Zr){if(Gr=!1,e=Ur(),0>=Yr-e){if(!(-1!==Wr&&Wr<=e))return void(qr||(qr=!0,requestAnimationFrame(Kr)));Hr.didTimeout=!0}else Hr.didTimeout=!1;Wr=-1,e=Vr,Vr=null,null!==e&&e(Hr)}},!1);var Kr=function(e){qr=!1;var t=e-Yr+Jr;t<Jr&&Xr<Jr?(8>t&&(t=8),Jr=t<Xr?Xr:t):Xr=t,Yr=e+Jr,Gr||(Gr=!0,window.postMessage(Zr,"*"))};Fr=function(e,t){return Vr=e,null!=t&&"number"==typeof t.timeout&&(Wr=Ur()+t.timeout),qr||(qr=!0,requestAnimationFrame(Kr)),0},Br=function(){Vr=null,Gr=!1,Wr=-1}}else Fr=window.requestIdleCallback,Br=window.cancelIdleCallback;else Fr=function(e){return setTimeout(function(){e({timeRemaining:function(){return 1/0}})})},Br=function(e){clearTimeout(e)};var Qr=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$r={},ei={};function ti(e,t,n){var r=b(t);if(r&&y(t,n)){var i=r.mutationMethod;i?i(e,n):null==n||r.hasBooleanValue&&!n||r.hasNumericValue&&isNaN(n)||r.hasPositiveNumericValue&&1>n||r.hasOverloadedBooleanValue&&!1===n?ri(e,t):r.mustUseProperty?e[r.propertyName]=n:(t=r.attributeName,(i=r.attributeNamespace)?e.setAttributeNS(i,t,""+n):r.hasBooleanValue||r.hasOverloadedBooleanValue&&!0===n?e.setAttribute(t,""):e.setAttribute(t,""+n))}else ni(e,t,y(t,n)?n:null)}function ni(e,t,n){(function(e){return!!ei.hasOwnProperty(e)||!$r.hasOwnProperty(e)&&(Qr.test(e)?ei[e]=!0:($r[e]=!0,!1))})(t)&&(null==n?e.removeAttribute(t):e.setAttribute(t,""+n))}function ri(e,t){var n=b(t);n?(t=n.mutationMethod)?t(e,void 0):n.mustUseProperty?e[n.propertyName]=!n.hasBooleanValue&&"":e.removeAttribute(n.attributeName):e.removeAttribute(t)}function ii(e,t){var n=t.value,r=t.checked;return a({type:void 0,step:void 0,min:void 0,max:void 0},t,{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:e._wrapperState.initialValue,checked:null!=r?r:e._wrapperState.initialChecked})}function ai(e,t){var n=t.defaultValue;e._wrapperState={initialChecked:null!=t.checked?t.checked:t.defaultChecked,initialValue:null!=t.value?t.value:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function oi(e,t){null!=(t=t.checked)&&ti(e,"checked",t)}function si(e,t){oi(e,t);var n=t.value;null!=n?0===n&&""===e.value?e.value="0":"number"===t.type?(n!=(t=parseFloat(e.value)||0)||n==t&&e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n):(null==t.value&&null!=t.defaultValue&&e.defaultValue!==""+t.defaultValue&&(e.defaultValue=""+t.defaultValue),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked))}function ci(e,t){switch(t.type){case"submit":case"reset":break;case"color":case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":e.value="",e.value=e.defaultValue;break;default:e.value=e.value}""!==(t=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!e.defaultChecked,""!==t&&(e.name=t)}function li(e,t){return e=a({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,function(e){null==e||"string"!=typeof e&&"number"!=typeof e||(t+=e)}),t}(t.children))&&(e.children=t),e}function ui(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+n,t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function hi(e,t){var n=t.value;e._wrapperState={initialValue:null!=n?n:t.defaultValue,wasMultiple:!!t.multiple}}function pi(e,t){return null!=t.dangerouslySetInnerHTML&&d("91"),a({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function di(e,t){var n=t.value;null==n&&(n=t.defaultValue,null!=(t=t.children)&&(null!=n&&d("92"),Array.isArray(t)&&(1>=t.length||d("93"),t=t[0]),n=""+t),null==n&&(n="")),e._wrapperState={initialValue:""+n}}function fi(e,t){var n=t.value;null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&(e.defaultValue=n)),null!=t.defaultValue&&(e.defaultValue=t.defaultValue)}function mi(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}var vi="http://www.w3.org/1999/xhtml",gi="http://www.w3.org/2000/svg";function yi(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bi(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?yi(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var xi,wi=void 0,_i=(xi=function(e,t){if(e.namespaceURI!==gi||"innerHTML"in e)e.innerHTML=t;else{for((wi=wi||document.createElement("div")).innerHTML="<svg>"+t+"</svg>",t=wi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return xi(e,t)})}:xi);function Mi(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Ei={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Si=["Webkit","ms","Moz","O"];function Ti(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=n,a=t[n];i=null==a||"boolean"==typeof a||""===a?"":r||"number"!=typeof a||0===a||Ei.hasOwnProperty(i)&&Ei[i]?(""+a).trim():a+"px","float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(Ei).forEach(function(e){Si.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ei[t]=Ei[e]})});var Pi=a({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ci(e,t,n){t&&(Pi[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&d("137",e,n()),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&d("60"),"object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||d("61")),null!=t.style&&"object"!=typeof t.style&&d("62",n()))}function Ai(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oi=vi,Li=o.thatReturns("");function Ri(e,t){var n=hn(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=V[t];for(var r=0;r<t.length;r++){var i=t[r];n.hasOwnProperty(i)&&n[i]||("topScroll"===i?Qt("topScroll","scroll",e):"topFocus"===i||"topBlur"===i?(Qt("topFocus","focus",e),Qt("topBlur","blur",e),n.topBlur=!0,n.topFocus=!0):"topCancel"===i?(ft("cancel",!0)&&Qt("topCancel","cancel",e),n.topCancel=!0):"topClose"===i?(ft("close",!0)&&Qt("topClose","close",e),n.topClose=!0):sn.hasOwnProperty(i)&&Kt(i,sn[i],e),n[i]=!0)}}var Ni={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"};function ki(e,t,n,r){return n=9===n.nodeType?n:n.ownerDocument,r===Oi&&(r=yi(e)),r===Oi?"script"===e?((e=n.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):e="string"==typeof t.is?n.createElement(e,{is:t.is}):n.createElement(e):e=n.createElementNS(r,e),e}function Ii(e,t){return(9===t.nodeType?t:t.ownerDocument).createTextNode(e)}function Di(e,t,n,r){var i=Ai(t,n);switch(t){case"iframe":case"object":Kt("topLoad","load",e);var s=n;break;case"video":case"audio":for(s in Ni)Ni.hasOwnProperty(s)&&Kt(s,Ni[s],e);s=n;break;case"source":Kt("topError","error",e),s=n;break;case"img":case"image":Kt("topError","error",e),Kt("topLoad","load",e),s=n;break;case"form":Kt("topReset","reset",e),Kt("topSubmit","submit",e),s=n;break;case"details":Kt("topToggle","toggle",e),s=n;break;case"input":ai(e,n),s=ii(e,n),Kt("topInvalid","invalid",e),Ri(r,"onChange");break;case"option":s=li(e,n);break;case"select":hi(e,n),s=a({},n,{value:void 0}),Kt("topInvalid","invalid",e),Ri(r,"onChange");break;case"textarea":di(e,n),s=pi(e,n),Kt("topInvalid","invalid",e),Ri(r,"onChange");break;default:s=n}Ci(t,s,Li);var c,l=s;for(c in l)if(l.hasOwnProperty(c)){var u=l[c];"style"===c?Ti(e,u):"dangerouslySetInnerHTML"===c?null!=(u=u?u.__html:void 0)&&_i(e,u):"children"===c?"string"==typeof u?("textarea"!==t||""!==u)&&Mi(e,u):"number"==typeof u&&Mi(e,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(H.hasOwnProperty(c)?null!=u&&Ri(r,c):i?ni(e,c,u):null!=u&&ti(e,c,u))}switch(t){case"input":vt(e),ci(e,n);break;case"textarea":vt(e),mi(e);break;case"option":null!=n.value&&e.setAttribute("value",n.value);break;case"select":e.multiple=!!n.multiple,null!=(t=n.value)?ui(e,!!n.multiple,t,!1):null!=n.defaultValue&&ui(e,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof s.onClick&&(e.onclick=o)}}function zi(e,t,n,r,i){var s,c,l=null;switch(t){case"input":n=ii(e,n),r=ii(e,r),l=[];break;case"option":n=li(e,n),r=li(e,r),l=[];break;case"select":n=a({},n,{value:void 0}),r=a({},r,{value:void 0}),l=[];break;case"textarea":n=pi(e,n),r=pi(e,r),l=[];break;default:"function"!=typeof n.onClick&&"function"==typeof r.onClick&&(e.onclick=o)}for(s in Ci(t,r,Li),e=null,n)if(!r.hasOwnProperty(s)&&n.hasOwnProperty(s)&&null!=n[s])if("style"===s)for(c in t=n[s])t.hasOwnProperty(c)&&(e||(e={}),e[c]="");else"dangerouslySetInnerHTML"!==s&&"children"!==s&&"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(H.hasOwnProperty(s)?l||(l=[]):(l=l||[]).push(s,null));for(s in r){var u=r[s];if(t=null!=n?n[s]:void 0,r.hasOwnProperty(s)&&u!==t&&(null!=u||null!=t))if("style"===s)if(t){for(c in t)!t.hasOwnProperty(c)||u&&u.hasOwnProperty(c)||(e||(e={}),e[c]="");for(c in u)u.hasOwnProperty(c)&&t[c]!==u[c]&&(e||(e={}),e[c]=u[c])}else e||(l||(l=[]),l.push(s,e)),e=u;else"dangerouslySetInnerHTML"===s?(u=u?u.__html:void 0,t=t?t.__html:void 0,null!=u&&t!==u&&(l=l||[]).push(s,""+u)):"children"===s?t===u||"string"!=typeof u&&"number"!=typeof u||(l=l||[]).push(s,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&(H.hasOwnProperty(s)?(null!=u&&Ri(i,s),l||t===u||(l=[])):(l=l||[]).push(s,u))}return e&&(l=l||[]).push("style",e),l}function ji(e,t,n,r,i){"input"===n&&"radio"===i.type&&null!=i.name&&oi(e,i),Ai(n,r),r=Ai(n,i);for(var a=0;a<t.length;a+=2){var o=t[a],s=t[a+1];"style"===o?Ti(e,s):"dangerouslySetInnerHTML"===o?_i(e,s):"children"===o?Mi(e,s):r?null!=s?ni(e,o,s):e.removeAttribute(o):null!=s?ti(e,o,s):ri(e,o)}switch(n){case"input":si(e,i);break;case"textarea":fi(e,i);break;case"select":e._wrapperState.initialValue=void 0,t=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!i.multiple,null!=(n=i.value)?ui(e,!!i.multiple,n,!1):t!==!!i.multiple&&(null!=i.defaultValue?ui(e,!!i.multiple,i.defaultValue,!0):ui(e,!!i.multiple,i.multiple?[]:"",!1))}}function Ui(e,t,n,r,i){switch(t){case"iframe":case"object":Kt("topLoad","load",e);break;case"video":case"audio":for(var a in Ni)Ni.hasOwnProperty(a)&&Kt(a,Ni[a],e);break;case"source":Kt("topError","error",e);break;case"img":case"image":Kt("topError","error",e),Kt("topLoad","load",e);break;case"form":Kt("topReset","reset",e),Kt("topSubmit","submit",e);break;case"details":Kt("topToggle","toggle",e);break;case"input":ai(e,n),Kt("topInvalid","invalid",e),Ri(i,"onChange");break;case"select":hi(e,n),Kt("topInvalid","invalid",e),Ri(i,"onChange");break;case"textarea":di(e,n),Kt("topInvalid","invalid",e),Ri(i,"onChange")}for(var s in Ci(t,n,Li),r=null,n)n.hasOwnProperty(s)&&(a=n[s],"children"===s?"string"==typeof a?e.textContent!==a&&(r=["children",a]):"number"==typeof a&&e.textContent!==""+a&&(r=["children",""+a]):H.hasOwnProperty(s)&&null!=a&&Ri(i,s));switch(t){case"input":vt(e),ci(e,n);break;case"textarea":vt(e),mi(e);break;case"select":case"option":break;default:"function"==typeof n.onClick&&(e.onclick=o)}return r}function Fi(e,t){return e.nodeValue!==t}var Bi=Object.freeze({createElement:ki,createTextNode:Ii,setInitialProperties:Di,diffProperties:zi,updateProperties:ji,diffHydratedProperties:Ui,diffHydratedText:Fi,warnForUnmatchedText:function(){},warnForDeletedHydratableElement:function(){},warnForDeletedHydratableText:function(){},warnForInsertedHydratedElement:function(){},warnForInsertedHydratedText:function(){},restoreControlledState:function(e,t,n){switch(t){case"input":if(si(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=fe(r);i||d("90"),gt(r),si(r,i)}}}break;case"textarea":fi(e,n);break;case"select":null!=(t=n.value)&&ui(e,!!n.multiple,t,!1)}}});rt.injectFiberControlledHostComponent(Bi);var Hi=null,Vi=null;function Gi(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}var Wi=zr({getRootHostContext:function(e){var t=e.nodeType;switch(t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:bi(null,"");break;default:e=bi(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}return e},getChildHostContext:function(e,t){return bi(e,t)},getPublicInstance:function(e){return e},prepareForCommit:function(){Hi=Xt;var e=c();if(fn(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{var n=window.getSelection&&window.getSelection();if(n&&0!==n.rangeCount){t=n.anchorNode;var r=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{t.nodeType,i.nodeType}catch(e){t=null;break e}var a=0,o=-1,s=-1,l=0,u=0,h=e,p=null;t:for(;;){for(var d;h!==t||0!==r&&3!==h.nodeType||(o=a+r),h!==i||0!==n&&3!==h.nodeType||(s=a+n),3===h.nodeType&&(a+=h.nodeValue.length),null!==(d=h.firstChild);)p=h,h=d;for(;;){if(h===e)break t;if(p===t&&++l===r&&(o=a),p===i&&++u===n&&(s=a),null!==(d=h.nextSibling))break;p=(h=p).parentNode}h=d}t=-1===o||-1===s?null:{start:o,end:s}}else t=null}t=t||{start:0,end:0}}else t=null;Vi={focusedElem:e,selectionRange:t},Zt(!1)},resetAfterCommit:function(){var e=Vi,t=c(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&u(document.documentElement,n)){if(fn(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(window.getSelection){t=window.getSelection();var i=n[Pe()].length;e=Math.min(r.start,i),r=void 0===r.end?e:Math.min(r.end,i),!t.extend&&e>r&&(i=r,r=e,e=i),i=dn(n,e);var a=dn(n,r);if(i&&a&&(1!==t.rangeCount||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)){var o=document.createRange();o.setStart(i.node,i.offset),t.removeAllRanges(),e>r?(t.addRange(o),t.extend(a.node,a.offset)):(o.setEnd(a.node,a.offset),t.addRange(o))}}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(h(n),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}Vi=null,Zt(Hi),Hi=null},createInstance:function(e,t,n,r,i){return(e=ki(e,t,n,r))[ue]=i,e[he]=t,e},appendInitialChild:function(e,t){e.appendChild(t)},finalizeInitialChildren:function(e,t,n,r){Di(e,t,n,r);e:{switch(t){case"button":case"input":case"select":case"textarea":e=!!n.autoFocus;break e}e=!1}return e},prepareUpdate:function(e,t,n,r,i){return zi(e,t,n,r,i)},shouldSetTextContent:function(e,t){return"textarea"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&"string"==typeof t.dangerouslySetInnerHTML.__html},shouldDeprioritizeSubtree:function(e,t){return!!t.hidden},createTextInstance:function(e,t,n,r){return(e=Ii(e,t))[ue]=r,e},now:Ur,mutation:{commitMount:function(e){e.focus()},commitUpdate:function(e,t,n,r,i){e[he]=i,ji(e,t,n,r,i)},resetTextContent:function(e){e.textContent=""},commitTextUpdate:function(e,t,n){e.nodeValue=n},appendChild:function(e,t){e.appendChild(t)},appendChildToContainer:function(e,t){8===e.nodeType?e.parentNode.insertBefore(t,e):e.appendChild(t)},insertBefore:function(e,t,n){e.insertBefore(t,n)},insertInContainerBefore:function(e,t,n){8===e.nodeType?e.parentNode.insertBefore(t,n):e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},removeChildFromContainer:function(e,t){8===e.nodeType?e.parentNode.removeChild(t):e.removeChild(t)}},hydration:{canHydrateInstance:function(e,t){return 1!==e.nodeType||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e},canHydrateTextInstance:function(e,t){return""===t||3!==e.nodeType?null:e},getNextHydratableSibling:function(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e},getFirstHydratableChild:function(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e},hydrateInstance:function(e,t,n,r,i,a){return e[ue]=a,e[he]=n,Ui(e,t,n,i,r)},hydrateTextInstance:function(e,t,n){return e[ue]=n,Fi(e,t)},didNotMatchHydratedContainerTextInstance:function(){},didNotMatchHydratedTextInstance:function(){},didNotHydrateContainerInstance:function(){},didNotHydrateInstance:function(){},didNotFindHydratableContainerInstance:function(){},didNotFindHydratableContainerTextInstance:function(){},didNotFindHydratableInstance:function(){},didNotFindHydratableTextInstance:function(){}},scheduleDeferredCallback:Fr,cancelDeferredCallback:Br,useSyncScheduling:!0});function qi(e,t,n,r,i){Gi(n)||d("200");var a=n._reactRootContainer;if(a)Wi.updateContainer(t,a,e,i);else{if(!(r=r||function(e){return!(!(e=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))}(n)))for(a=void 0;a=n.lastChild;)n.removeChild(a);var o=Wi.createContainer(n,r);a=n._reactRootContainer=o,Wi.unbatchedUpdates(function(){Wi.updateContainer(t,o,e,i)})}return Wi.getPublicRootInstance(a)}function Yi(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return Gi(t)||d("200"),function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:wr,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}function Xi(e,t){this._reactRootContainer=Wi.createContainer(e,t)}st=Wi.batchedUpdates,Xi.prototype.render=function(e,t){Wi.updateContainer(e,this._reactRootContainer,null,t)},Xi.prototype.unmount=function(e){Wi.updateContainer(null,this._reactRootContainer,null,e)};var Ji={createPortal:Yi,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(t)return Wi.findHostInstance(t);"function"==typeof e.render?d("188"):d("213",Object.keys(e))},hydrate:function(e,t,n){return qi(null,e,t,!0,n)},render:function(e,t,n){return qi(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){return(null==e||void 0===e._reactInternalFiber)&&d("38"),qi(e,t,n,!1,r)},unmountComponentAtNode:function(e){return Gi(e)||d("40"),!!e._reactRootContainer&&(Wi.unbatchedUpdates(function(){qi(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:Yi,unstable_batchedUpdates:lt,unstable_deferredUpdates:Wi.deferredUpdates,flushSync:Wi.flushSync,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{EventPluginHub:ce,EventPluginRegistry:q,EventPropagators:Se,ReactControlledComponent:ot,ReactDOMComponentTree:me,ReactDOMEventListener:en}};Wi.injectIntoDevTools({findFiberByHostInstance:pe,bundleType:0,version:"16.2.0",rendererPackageName:"react-dom"});var Zi=Object.freeze({default:Ji}),Ki=Zi&&Ji||Zi;e.exports=Ki.default?Ki.default:Ki},function(e,t,n){"use strict";
/** @license React v16.2.0
 * react.production.min.js
 *
 * Copyright (c) 2013-present, Facebook, Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(39),i=n(38),a=n(9),o="function"==typeof Symbol&&Symbol.for,s=o?Symbol.for("react.element"):60103,c=o?Symbol.for("react.call"):60104,l=o?Symbol.for("react.return"):60105,u=o?Symbol.for("react.portal"):60106,h=o?Symbol.for("react.fragment"):60107,p="function"==typeof Symbol&&Symbol.iterator;function d(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);throw(t=Error(n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.")).name="Invariant Violation",t.framesToPop=1,t}var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};function m(e,t,n){this.props=e,this.context=t,this.refs=i,this.updater=n||f}function v(e,t,n){this.props=e,this.context=t,this.refs=i,this.updater=n||f}function g(){}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e&&d("85"),this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var y=v.prototype=new g;function b(e,t,n){this.props=e,this.context=t,this.refs=i,this.updater=n||f}y.constructor=v,r(y,m.prototype),y.isPureReactComponent=!0;var x=b.prototype=new g;x.constructor=b,r(x,m.prototype),x.unstable_isAsyncReactComponent=!0,x.render=function(){return this.props.children};var w={current:null},_=Object.prototype.hasOwnProperty,M={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,n){var r,i={},a=null,o=null;if(null!=t)for(r in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)_.call(t,r)&&!M.hasOwnProperty(r)&&(i[r]=t[r]);var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in c=e.defaultProps)void 0===i[r]&&(i[r]=c[r]);return{$$typeof:s,type:e,key:a,ref:o,props:i,_owner:w.current}}function S(e){return"object"==typeof e&&null!==e&&e.$$typeof===s}var T=/\/+/g,P=[];function C(e,t,n,r){if(P.length){var i=P.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function A(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>P.length&&P.push(e)}function O(e,t,n,r){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var a=!1;if(null===e)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case s:case c:case l:case u:a=!0}}if(a)return n(r,e,""===t?"."+L(e,0):t),1;if(a=0,t=""===t?".":t+":",Array.isArray(e))for(var o=0;o<e.length;o++){var h=t+L(i=e[o],o);a+=O(i,h,n,r)}else if(null===e||void 0===e?h=null:h="function"==typeof(h=p&&e[p]||e["@@iterator"])?h:null,"function"==typeof h)for(e=h.call(e),o=0;!(i=e.next()).done;)a+=O(i=i.value,h=t+L(i,o++),n,r);else"object"===i&&d("31","[object Object]"===(n=""+e)?"object with keys {"+Object.keys(e).join(", ")+"}":n,"");return a}function L(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}(e.key):t.toString(36)}function R(e,t){e.func.call(e.context,t,e.count++)}function N(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?k(e,r,n,a.thatReturnsArgument):null!=e&&(S(e)&&(t=i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(T,"$&/")+"/")+n,e={$$typeof:s,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}),r.push(e))}function k(e,t,n,r,i){var a="";null!=n&&(a=(""+n).replace(T,"$&/")+"/"),t=C(t,a,r,i),null==e||O(e,"",N,t),A(t)}var I={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return k(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;t=C(null,null,t,n),null==e||O(e,"",R,t),A(t)},count:function(e){return null==e?0:O(e,"",a.thatReturnsNull,null)},toArray:function(e){var t=[];return k(e,t,null,a.thatReturnsArgument),t},only:function(e){return S(e)||d("143"),e}},Component:m,PureComponent:v,unstable_AsyncComponent:b,Fragment:h,createElement:E,cloneElement:function(e,t,n){var i=r({},e.props),a=e.key,o=e.ref,c=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,c=w.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)_.call(t,u)&&!M.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];i.children=l}return{$$typeof:s,type:e.type,key:a,ref:o,props:i,_owner:c}},createFactory:function(e){var t=E.bind(null,e);return t.type=e,t},isValidElement:S,version:"16.2.0",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:w,assign:r}},D=Object.freeze({default:I}),z=D&&I||D;e.exports=z.default?z.default:z},function(e,t,n){"use strict";var r=l(n(1)),i=n(37),a=n(23),o=n(22),s=l(n(34)),c=l(n(85));function l(e){return e&&e.__esModule?e:{default:e}}(0,i.render)(r.default.createElement(o.Provider,{store:s.default},r.default.createElement(a.HashRouter,null,r.default.createElement("div",null,r.default.createElement(a.Switch,null,r.default.createElement(a.Redirect,{exact:!0,from:"/",to:"scenario/The Sun and the Neptunian System"}),r.default.createElement(a.Route,{path:"/scenario/:name?",component:c.default}))))),document.querySelector("#app"))},function(e,t,n){"use strict";(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.a=n}).call(this,n(35))},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,,,,function(e,t){}]);